import{k as Oe,u as qe,S as De,r as C,l as ce,H as Be,w as oe,f as w,h,ao as Ge,i as g,s as a,ar as Qe,v as e,aq as be,q as c,av as Je,au as Ke,D as S,O as R,aw as Q,ax as Xe,G as $,F as y,p as V,ay as Ye,ab as Ze,P as J,aQ as et,a5 as K,aT as tt,aU as lt,ad as at,az as ot,aA as nt,aB as ye,aC as rt,aD as it,R as He,aE as st,aF as ct,aH as ut,aI as dt,at as pt}from"./vue-DmXGC6sY.js";import{_ as N,g as ht}from"./index.vue_vue_type_script_setup_true_lang-D7BdDwpT.js";import{g as mt,a as X,M as fe,E as ft,b as ge,p as gt,m as Y,c as vt,n as L,G as _t,A as bt,d as yt,u as xt}from"./GameInfo-8MNFGWHa.js";import{u as Fe,W as wt,g as Pt}from"./useMemory-AeFys-TO.js";import{u as kt}from"./enhancer-aVP6A7Kl.js";import{v as Me,P as Re,C as Te,y as Ue}from"./index-BwmFmyl9.js";import{_ as Ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Vt={class:"app-container"},Lt={class:"game-info"},St={class:"flex flex-col gap-2"},Et={class:"whitespace-nowrap flex-shrink-0"},It={class:"flex flex-wrap items-center gap-x-4 gap-y-2"},Ht={key:0,class:"flex items-center gap-2"},Ft={class:"w-10 whitespace-nowrap"},Mt={class:"text-xs color-gray-500 mb-1"},Rt={style:{position:"relative",width:"100%","padding-bottom":"100%"}},Tt={key:0,class:"absolute bottom-0 right-0"},Ut={class:"mb-2 color-gray-500"},Wt={"color-gray-600":""},$t={class:"flex flex-wrap"},Nt={class:"absolute bottom-0 right-0"},jt={style:{display:"flex","flex-wrap":"wrap","margin-top":"10px"}},zt={key:0,class:"absolute bottom-0 right-0"},At={class:"flex justify-between items-center"},Ot={class:"font-size-14px"},qt={class:"flex justify-between items-center"},Dt={class:"font-size-14px"},Bt={class:"grid w-full items-center gap-x-1",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},Gt={class:"font-size-14px whitespace-nowrap"},Qt={class:"grid w-full items-center gap-x-1 gap-y-1 mt-2",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},Jt={class:"font-size-14px whitespace-nowrap"},Kt={class:"flex flex-col gap-2"},Xt={class:"whitespace-nowrap flex-shrink-0"},Yt={key:0,class:"flex items-center gap-2"},Zt={class:"w-10 whitespace-nowrap"},el=Oe({__name:"index",setup(tl){const u=kt(),ue=Me(),{t:i}=qe(),ve=De();function xe(n){if(typeof n=="string")return n;if(Array.isArray(n)&&typeof n[0]=="string")return n[0]}function we(n={}){const l=xe(ve.query.hrid),r=xe(ve.query.enhanceLevel);if(r){const o=Math.floor(Number(r));Number.isFinite(o)&&o>=1&&o<=20&&(u.config.enhanceLevel=o)}if(l&&!(d.value.hrid===l&&!n.selectItem)&&(u.config.hrid=l,n.selectItem))try{ie(X(l))}catch(o){console.warn("Invalid hrid from route query",l,o)}}const ne=C(!1),Z=C(""),We=ce(()=>mt().filter(n=>i(n.name).toLocaleLowerCase().includes(Z.value.toLowerCase())).sort((n,l)=>n.sortIndex-l.sortIndex)),d=C({protection:{},originPrice:0}),E=C([]),j=C([]),ee=C([]),I=C([]),q={hourlyRate:5e6,taxRate:2,enhanceLevel:10},_e=ce({get:()=>u.config.ignoreTax?0:2,set:n=>{u.config.ignoreTax=n===0}});Be(()=>{we({selectItem:!1}),u.hrid&&ie(X(u.hrid))}),oe(()=>ve.query,()=>{we({selectItem:!0})},{immediate:!1}),oe(()=>u.config,()=>{u.saveConfig()},{deep:!0});const H=C(!1),D=C(!1),te=Fe("enhancer-gear-cost-buy-status",Re.ASK),re=Fe("enhancer-enhancement-cost-buy-status",Re.ASK);oe([()=>E.value,()=>H.value,()=>D.value,()=>te.value,()=>re.value],je,{deep:!0}),oe([()=>H.value,()=>D.value,()=>te.value],()=>{Pe()},{deep:!1});function de(n){return X(n).categoryHrid==="/item_categories/drink"}function T(n,l){return ge(n,l,te.value,ue.sellStatus).ask}function le(n,l){return ge(n,l,re.value,ue.sellStatus).ask}function $e(n){const l=[[i("锻造"),"cheesesmithing"],[i("制造"),"crafting"],[i("裁缝"),"tailoring"]];let r;for(const[o,p]of l){const s=new fe({hrid:n,project:o,action:p});if(s.available){r=s;break}}return r!=null&&r.available?r.ingredientList.filter(o=>!de(o.hrid)).map(o=>({hrid:o.hrid,count:o.count,level:o.level,originPrice:T(o.hrid,o.level)})):[]}function Ne(n){var F;const l=X(n),r=[[i("锻造"),"cheesesmithing"],[i("制造"),"crafting"],[i("裁缝"),"tailoring"]],o=ht(l)==="charm"?7:2;let p;for(const[v,k]of r)for(const[M,A]of r){const P=new fe({hrid:n,project:M,action:A});if(!P.available)continue;const O=[P],B=[[...O]];let G=P,U=1;for(;(F=G.actionItem)!=null&&F.upgradeItemHrid&&U<o;){const t=new fe({hrid:G.actionItem.upgradeItemHrid,project:v,action:k});if(!t.available)break;O.unshift(t),U++,B.push([...O]),G=t}for(const t of B){const m=new wt(t.map(W=>Pt(W)),i("{0}步{1}",[t.length,M]));m.run();const f=m.productListWithPricePreprocess.list.filter(W=>W.hrid===n).reduce((W,se)=>W+(se.countPH||0),0);if(!f||f<=1e-12)continue;const Ie=m.ingredientListWithPrice.filter(W=>!de(W.hrid)).reduce((W,se)=>{const Ae=T(se.hrid,se.level);return W+(se.countPH||0)*Ae},0)/f;(!p||Ie<p.costPerItem)&&(p={workflow:m,outputPH:f,costPerItem:Ie})}}if(!p)return;const{workflow:s,outputPH:_}=p,b=s.ingredientListWithPrice.filter(v=>!de(v.hrid)).map(v=>({hrid:v.hrid,count:(v.countPH||0)/_,level:v.level,originPrice:T(v.hrid,v.level)})),x=[];return s.calculatorList.forEach((v,k)=>{if(Array.isArray(v))return;const M=s.workMultiplier[k],A=v.ingredientListWithPrice.filter(P=>!de(P.hrid)).map(P=>({hrid:P.hrid,count:(P.countPH||0)*M/_,level:P.level,originPrice:T(P.hrid,P.level)}));x.push({title:`${i("{0}步{1}",[k+1,v.project])}:`,ingredients:A})}),{totalIngredients:b,stepList:x}}function Pe(){const n=d.value.hrid;if(!n){E.value=[],j.value=[];return}if(!H.value){j.value=[];return}if(!D.value){E.value=$e(n),j.value=[];return}const l=Ne(n);if(!l){E.value=[],j.value=[];return}E.value=l.totalIngredients,j.value=l.stepList}function ie(n){if(!n)return;u.config.hrid=n.hrid,d.value={hrid:n.hrid,originPrice:0},ne.value=!1;const l=[[i("锻造"),"cheesesmithing"],[i("制造"),"crafting"],[i("裁缝"),"tailoring"]];let r;for(const[o,p]of l)if(r=new fe({hrid:n.hrid,project:o,action:p}),r.available)break;E.value=r.available?r.ingredientList.filter(o=>X(o.hrid).categoryHrid!=="/item_categories/drink").map(o=>({hrid:o.hrid,count:o.count,level:o.level,originPrice:T(o.hrid,o.level)})):[],ee.value=n.enhancementCosts.map(o=>({hrid:o.itemHrid,count:o.count,originPrice:le(o.itemHrid)})),I.value=n.protectionItemHrids?n.protectionItemHrids.map(o=>({hrid:o,count:1,originPrice:le(o)})):[],I.value.length||I.value.push({hrid:n.hrid,count:1,originPrice:le(n.hrid)}),I.value.push({hrid:"/items/mirror_of_protection",count:1,originPrice:le("/items/mirror_of_protection")}),d.value.protection=I.value.reduce((o,p)=>o&&o.originPrice<p.originPrice?o:p),Pe()}const z=ce(()=>{var p,s;if(!d.value.hrid)return[];const n=[],l=!!u.config.ignoreTax,r=l?1:.98,o=u.enhanceLevel??q.enhanceLevel;for(let _=1;_<=o;++_){const b=new ft({hrid:d.value.hrid,enhanceLevel:o,protectLevel:_}),{actions:x,protects:F}=b.enhancelate(),v=ee.value.reduce((G,U)=>{const t=typeof U.price=="number"?U.price:U.originPrice;return G+t*U.count*x},0)+(typeof((p=d.value.protection)==null?void 0:p.price)=="number"?d.value.protection.price:d.value.protection.originPrice)*F,k=v+(typeof((s=d.value)==null?void 0:s.price)=="number"?d.value.price:d.value.originPrice);let M=k+(u.hourlyRate??q.hourlyRate)*(x/b.actionsPH);l||(M*=1+(u.taxRate??q.taxRate)/100);const A=typeof d.value.productPrice=="number"?d.value.productPrice:ge(d.value.hrid,o).bid,P=(A*r-k)/x*b.actionsPH,O=A*r-k,B=x/b.actionsPH*3600;n.push({actions:x,actionsFormatted:L(x,2),protects:F,protectsFormatted:L(F,2),protectLevel:_,time:vt(B*1e9),expPHFormat:Y(b.exp*b.actionsPH),matCost:Y(v),totalCostFormatted:Y(M),totalCost:M,totalCostNoHourly:k,matCostPH:`${Y(v/B*3600)} / h`,hourlyCost:P,hourlyCostFormatted:Y(P),profitPPFormatted:Y(O),profitRateFormatted:gt(O/k)})}return n}),pe=ce(()=>{if(!z.value.length)return{};const n=Object.keys(z.value[0]),l={};for(const r of n){const o=Math.max(...z.value.map(p=>{var s;return((s=p[r])==null?void 0:s.toString().length)||0}));l[r]=Math.max(o*10+20,60)}for(const r of ee.value){const o=Math.max(...z.value.map(p=>L(r.count*p.actions).toString().length||0));l[r.hrid]=Math.max(o*10+20,60)}return l}),ke=C(null),Ce=ce(()=>{var r;const l=(((r=ke.value)==null?void 0:r.columns)??[]).reduce((o,p)=>o+(p.minWidth||0),0)??0;return Math.max(l+100,1100)});oe([()=>yt(),()=>xt().config],()=>u.hrid&&ie(X(u.hrid)),{immediate:!1});function je(){var n,l;if(d.value.hrid){if(d.value=JSON.parse(JSON.stringify(d.value)),!H.value)d.value.originPrice=T(d.value.hrid);else{const r=E.value;d.value.originPrice=r.length?r.reduce((o,p)=>{const s=typeof p.price=="number"?p.price:p.originPrice;return o+s*p.count},0):T(d.value.hrid)}if(E.value.forEach(r=>{r.originPrice=T(r.hrid,r.level)}),j.value.forEach(r=>{r.ingredients.forEach(o=>{o.originPrice=T(o.hrid,o.level)})}),ee.value.forEach(r=>{r.originPrice=le(r.hrid,r.level)}),I.value.forEach(r=>{r.originPrice=le(r.hrid,r.level)}),I.value.length){const r=(n=d.value.protection)==null?void 0:n.hrid,o=(l=d.value.protection)==null?void 0:l.price,p=r?I.value.find(b=>b.hrid===r):void 0,s=I.value.reduce((b,x)=>b.originPrice<x.originPrice?b:x),_=p||s;typeof o=="number"&&(_.price=o),d.value.protection=_}}}function ze({row:n}){if(u.config.tab==="1"){if(n.hourlyCost===Math.max(...z.value.map(l=>l.hourlyCost)))return{background:"rgb(34, 68, 34)"}}else if(n.totalCost===Math.min(...z.value.map(l=>l.totalCost)))return{background:"rgb(34, 68, 34)"};if(n.totalCostNoHourly===Math.min(...z.value.map(l=>l.totalCostNoHourly)))return{background:"rgb(34, 51, 85)"}}const he=C(!1),Ve=C(0),Le=C(0),me=C("");function Se(n,l){const p=document.body.offsetWidth-100,s=l.clientX+10;Le.value=s>p?p:s,Ve.value=l.clientY,he.value=!0,me.value=n}function Ee(){he.value=!1}return oe(he,n=>{n?document.body.addEventListener("click",Ee):document.body.removeEventListener("click",Ee)}),(n,l)=>{const r=et,o=lt,p=tt,s=Xe,_=Ye,b=Ze,x=Ke,F=Je,v=at,k=ot,M=it,A=rt,P=ct,O=st,B=dt,G=ut,U=pt;return h(),w("div",Vt,[Ge(g("ul",{class:"contextmenu",style:be({left:`${e(Le)}px`,top:`${e(Ve)}px`})},[e(u).hasFavorite(e(me))?(h(),w("li",{key:1,onClick:l[1]||(l[1]=t=>e(u).removeFavorite(e(me)))}," 取消收藏 ")):(h(),w("li",{key:0,onClick:l[0]||(l[0]=t=>e(u).addFavorite(e(me)))}," 收藏 "))],4),[[Qe,e(he)]]),g("div",Lt,[a(_t),g("div",null,[a(bt,{actions:["enhancing"],equipments:["hands","neck","earrings","ring","pouch"]})])]),a(U,{gutter:20,class:"row max-w-1100px mx-auto!"},{default:c(()=>[a(F,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:c(()=>[a(x,null,{header:c(()=>[g("div",St,[g("span",Et,y(e(i)("装备成本")),1),g("div",It,[a(r,{modelValue:e(H),"onUpdate:modelValue":l[2]||(l[2]=t=>K(H)?H.value=t:null)},{default:c(()=>[$(y(e(i)("制作装备")),1)]),_:1},8,["modelValue"]),a(r,{modelValue:e(D),"onUpdate:modelValue":l[3]||(l[3]=t=>K(D)?D.value=t:null),disabled:!e(H)},{default:c(()=>[$(y(e(i)("最佳制作方案")),1)]),_:1},8,["modelValue","disabled"])]),e(ue).checkSecret()?(h(),w("div",Ht,[g("div",Ft,y(e(i)("买价")),1),a(p,{modelValue:e(te),"onUpdate:modelValue":l[4]||(l[4]=t=>K(te)?te.value=t:null),placeholder:e(i)("左价"),style:{width:"110px"}},{default:c(()=>[(h(!0),w(R,null,J(e(Ue),t=>(h(),V(o,{key:t.value,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])])):S("",!0)])]),default:c(()=>[e(H)&&e(E).length?(h(),w(R,{key:0},[a(e(Q),{data:e(E),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:c(()=>[a(s,{label:e(i)("物品")},{default:c(({row:t})=>[a(N,{hrid:t.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(s,{prop:"count",label:e(i)("数量")},{default:c(({row:t})=>[$(y(L(t.count,2)),1)]),_:1},8,["label"]),a(s,{label:e(i)("价格"),align:"center","min-width":"120"},{default:c(({row:t})=>[t.hrid!==e(Te)?(h(),V(_,{key:0,class:"max-w-100%",modelValue:t.price,"onUpdate:modelValue":m=>t.price=m,placeholder:L(t.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):S("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"})],64)):S("",!0),e(H)&&e(D)&&e(j).length?(h(),w(R,{key:1},[(h(!0),w(R,null,J(e(j),t=>(h(),w("div",{key:t.title,class:"mb-3"},[g("div",Mt,y(t.title),1),a(e(Q),{data:t.ingredients,style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"},size:"small"},{default:c(()=>[a(s,{label:e(i)("物品")},{default:c(({row:m})=>[a(N,{hrid:m.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(s,{prop:"count",label:e(i)("数量")},{default:c(({row:m})=>[$(y(L(m.count,4)),1)]),_:1},8,["label"])]),_:2},1032,["data"])]))),128)),a(b,{class:"mt-2 mb-2"})],64)):S("",!0),a(e(Q),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(s,null,{default:c(({row:t})=>[a(N,{hrid:t.hrid},null,8,["hrid"])]),_:1}),a(s,{prop:"count"}),a(s,{"min-width":"120",align:"center"},{default:c(({row:t})=>[a(_,{class:"max-w-100%",modelValue:t.price,"onUpdate:modelValue":m=>t.price=m,placeholder:L(t.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),a(F,{xs:16,sm:10,md:10,lg:6,xl:6,class:"max-w-300px mx-auto"},{default:c(()=>[a(x,null,{default:c(()=>{var t,m;return[g("div",Rt,[a(N,{hrid:(t=e(d))==null?void 0:t.hrid,style:{position:"absolute",bottom:"10%",left:"10%",width:"80%",height:"80%"}},null,8,["hrid"]),a(v,{style:{position:"absolute",width:"100%",height:"100%",opacity:"0.5"},onClick:l[5]||(l[5]=f=>(ne.value=!0,Z.value=""))},{default:c(()=>{var f;return[$(y((f=e(d))!=null&&f.hrid?"":e(i)("选择装备")),1)]}),_:1}),(m=e(d))!=null&&m.hrid?(h(),w("div",Tt,[e(u).hasFavorite(e(d).hrid)?(h(),V(k,{key:1,underline:!1,icon:e(ye),type:"primary",onClick:l[7]||(l[7]=f=>e(u).removeFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"])):(h(),V(k,{key:0,underline:!1,type:"info",icon:e(nt),onClick:l[6]||(l[6]=f=>e(u).addFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"]))])):S("",!0),a(A,{modelValue:e(ne),"onUpdate:modelValue":l[9]||(l[9]=f=>K(ne)?ne.value=f:null),"show-close":!1},{default:c(()=>[a(M,{modelValue:e(Z),"onUpdate:modelValue":l[8]||(l[8]=f=>K(Z)?Z.value=f:null),placeholder:e(i)("搜索")},null,8,["modelValue","placeholder"]),e(u).favorite.length&&!e(Z)?(h(),w(R,{key:0},[a(b,{class:"mt-2 mb-2"}),g("div",Ut,[$(y(e(i)("收藏"))+" ",1),g("span",Wt," ("+y(e(i)("右键/长按取消收藏"))+")",1)]),g("div",$t,[(h(!0),w(R,null,J(e(u).favorite,f=>(h(),V(v,{key:f,class:"relative",style:{width:"50px",height:"50px",margin:"2px"},onClick:ae=>ie(e(X)(f)),onContextmenu:He(ae=>Se(f,ae),["prevent"])},{default:c(()=>[a(N,{hrid:f},null,8,["hrid"]),g("div",Nt,[a(k,{underline:!1,icon:e(ye),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])]),_:2},1032,["onClick","onContextmenu"]))),128))]),a(b,{class:"mt-2 mb-1"})],64)):S("",!0),g("div",jt,[(h(!0),w(R,null,J(e(We),f=>(h(),V(v,{key:f.hrid,style:{width:"50px",height:"50px",margin:"2px"},class:"relative",onClick:ae=>ie(f),onContextmenu:He(ae=>Se(f.hrid,ae),["prevent"])},{default:c(()=>[a(N,{hrid:f.hrid},null,8,["hrid"]),e(u).hasFavorite(f.hrid)?(h(),w("div",zt,[a(k,{underline:!1,icon:e(ye),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])):S("",!0)]),_:2},1032,["onClick","onContextmenu"]))),128))])]),_:1},8,["modelValue"])])]}),_:1}),a(x,{class:"mt-2"},{default:c(()=>[a(O,{modelValue:e(u).config.tab,"onUpdate:modelValue":l[14]||(l[14]=t=>e(u).config.tab=t),type:"border-card",stretch:""},{default:c(()=>[a(P,{label:e(i)("工时费")},{default:c(()=>[g("div",At,[g("div",Ot,y(e(i)("工时费/h")),1),a(_,{class:"w-120px",modelValue:e(u).config.hourlyRate,"onUpdate:modelValue":l[10]||(l[10]=t=>e(u).config.hourlyRate=t),step:1,min:0,max:5e9,placeholder:L(q.hourlyRate),controls:!1},null,8,["modelValue","placeholder"])]),g("div",qt,[g("div",Dt,y(e(i)("溢价率%")),1),a(_,{class:"w-120px",modelValue:e(u).config.taxRate,"onUpdate:modelValue":l[11]||(l[11]=t=>e(u).config.taxRate=t),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",placeholder:q.taxRate.toString()},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),a(P,{label:e(i)("成品售价")},{default:c(()=>[g("div",Bt,[g("div",Gt,y(e(i)("价格")),1),a(_,{class:"w-full",style:{width:"100%"},modelValue:e(d).productPrice,"onUpdate:modelValue":l[12]||(l[12]=t=>e(d).productPrice=t),step:1,min:0,placeholder:L(e(ge)(e(d).hrid,e(u).enhanceLevel??q.enhanceLevel).bid),controls:!1},null,8,["modelValue","placeholder"])]),g("div",Qt,[g("div",Jt,y(e(i)("税率%")),1),a(_,{class:"w-full",style:{width:"100%"},modelValue:e(_e),"onUpdate:modelValue":l[13]||(l[13]=t=>K(_e)?_e.value=t:null),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",controls:!0},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(F,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:c(()=>[a(x,null,{header:c(()=>[g("div",Kt,[g("span",Xt,y(e(i)("强化消耗")),1),e(ue).checkSecret()?(h(),w("div",Yt,[g("div",Zt,y(e(i)("买价")),1),a(p,{modelValue:e(re),"onUpdate:modelValue":l[15]||(l[15]=t=>K(re)?re.value=t:null),placeholder:e(i)("左价"),style:{width:"110px"}},{default:c(()=>[(h(!0),w(R,null,J(e(Ue),t=>(h(),V(o,{key:t.value,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])])):S("",!0)])]),default:c(()=>[a(e(Q),{data:e(ee),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:c(()=>[a(s,{label:e(i)("物品")},{default:c(({row:t})=>[a(N,{hrid:t.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(s,{prop:"count",label:e(i)("数量")},{default:c(({row:t})=>[$(y(L(t.count,2)),1)]),_:1},8,["label"]),a(s,{label:e(i)("价格"),align:"center","min-width":"120"},{default:c(({row:t})=>[t.hrid!==e(Te)?(h(),V(_,{key:0,class:"max-w-100%",modelValue:t.price,"onUpdate:modelValue":m=>t.price=m,placeholder:L(t.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):S("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"}),a(e(Q),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(s,{"min-width":"160"},{default:c(({row:t})=>[a(G,{modelValue:t.protection.hrid,"onUpdate:modelValue":m=>t.protection.hrid=m},{default:c(()=>[(h(!0),w(R,null,J(e(I),m=>(h(),V(B,{key:m.hrid,value:m.hrid,border:"",style:{width:"50px",height:"50px",margin:"2px"},onClick:()=>t.protection=m},{default:c(()=>[a(N,{hrid:m.hrid},null,8,["hrid"])]),_:2},1032,["value","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(s,{"min-width":"120",align:"center"},{default:c(({row:t})=>[a(_,{class:"max-w-100%",modelValue:t.protection.price,"onUpdate:modelValue":m=>t.protection.price=m,placeholder:L(t.protection.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"}),a(e(Q),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(s,null,{default:c(()=>[$(y(e(i)("目标"))+": ",1)]),_:1}),a(s),a(s,{"min-width":"120",align:"center"},{default:c(()=>[a(_,{class:"max-w-100%",max:20,min:1,modelValue:e(u).config.enhanceLevel,"onUpdate:modelValue":l[16]||(l[16]=t=>e(u).config.enhanceLevel=t),placeholder:L(q.enhanceLevel),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),a(x,{class:"mx-auto",style:be({width:`${e(Ce)}px`,maxWidth:"100%"})},{default:c(()=>[a(e(Q),{ref_key:"refTable",ref:ke,data:e(z),size:"large",border:"",fit:"","header-cell-style":{padding:"8px 0"},style:be({width:`${e(Ce)}px`}),"row-style":ze},{default:c(()=>[a(s,{prop:"protectLevel",label:e(i)("Prot"),"min-width":e(pe).protectLevel,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(s,{prop:"actionsFormatted",label:e(i)("次数"),"min-width":e(pe).actionsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(s,{prop:"time",label:e(i)("时间"),"min-width":e(pe).time,align:"right"},null,8,["label","min-width"]),a(s,{prop:"expPHFormat",label:e(i)("经验 / h"),"min-width":100,align:"right"},null,8,["label"]),(h(!0),w(R,null,J(e(ee),t=>(h(),V(s,{key:t.hrid,"min-width":100,"header-align":"center",align:"right"},{header:c(()=>[a(N,{class:"mt-[8px]",width:20,height:20,hrid:t.hrid},null,8,["hrid"])]),default:c(({row:m})=>[$(y(Y(t.count*m.actions)),1)]),_:2},1024))),128)),a(s,{prop:"protectsFormatted",label:e(i)("保护"),"min-width":e(pe).protectsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(s,{prop:"matCost",label:e(i)("材料费用"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"]),a(s,{prop:"matCostPH",label:e(i)("损耗"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]),e(u).config.tab==="1"&&e(Me)().checkSecret()?(h(),V(s,{key:0,prop:"profitRateFormatted",label:e(i)("利润率"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):S("",!0),e(u).config.tab==="1"?(h(),V(s,{key:1,prop:"profitPPFormatted",label:e(i)("单个利润"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):S("",!0),e(u).config.tab==="1"?(h(),V(s,{key:2,prop:"hourlyCostFormatted",label:e(i)("工时费"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):(h(),V(s,{key:3,prop:"totalCostFormatted",label:e(i)("总费用"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]))]),_:1},8,["data","style"])]),_:1},8,["style"])])}}}),cl=Ct(el,[["__scopeId","data-v-8479d22c"]]);export{cl as default};
