import{k as Ne,u as Oe,r as V,l as R,H as Be,w as xe,f as w,ao as qe,i as d,s as t,ar as Ge,v as e,aq as be,q as n,at as Xe,au as Ye,n as Je,h as g,av as Ke,aw as U,ax as Qe,ay as Ze,G as _,F as m,a0 as et,V as tt,D as ie,ad as lt,p as W,az as at,aA as nt,aB as ye,aC as ot,a5 as re,aD as it,O as z,ab as rt,P as q,R as Te,aE as st,aF as ct,aG as dt,aH as ut,aI as pt,al as G}from"./vue-0ucuI9Mt.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-CjRkRCNG.js";import{g as ht,a as Ce,M as mt,b as F,D as ft,E as gt,m as H,p as Z,c as Ue,n as b,G as vt,A as _t,d as xt,e as bt,u as yt}from"./GameInfo-CD_tVD5Z.js";import{u as Ct}from"./enhancer-C7oHrsk5.js";import{C as we}from"./index-DYCH4vBP.js";import{_ as wt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Pt={class:"app-container"},Vt={class:"game-info"},Lt={class:"flex justify-between items-center"},kt={class:"flex items-center"},Rt={class:"w-200px"},Ft={class:"flex items-center"},Et={class:"w-200px"},Tt={class:"flex items-center"},Ut={class:"w-200px"},It={style:{position:"relative",width:"100%","padding-bottom":"100%"}},Ht={key:0,class:"absolute bottom-0 right-0"},Mt={class:"mb-2 color-gray-500"},Wt={"color-gray-600":""},zt={class:"flex flex-wrap"},jt={class:"absolute bottom-0 right-0"},Dt={style:{display:"flex","flex-wrap":"wrap","margin-top":"10px"}},St={key:0,class:"absolute bottom-0 right-0"},$t={class:"flex justify-between items-center"},At={class:"font-size-14px"},Nt={class:"flex justify-between items-center"},Ot={class:"font-size-14px"},Bt={class:"grid w-full items-center gap-x-1",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},qt={class:"font-size-14px whitespace-nowrap"},Gt={class:"grid w-full items-center gap-x-1 gap-y-1 mt-2",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},Xt={class:"font-size-14px whitespace-nowrap"},Yt={class:"font-size-14px flex items-center justify-between"},Jt={class:"font-size-14px flex items-center justify-between"},Kt={class:"flex mt-1px mb-2px justify-between items-center"},Qt={class:"font-size-14px"},Zt={class:"flex justify-between items-center"},el={class:"font-size-14px w-100px"},tl={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},ll={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},al={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},nl=Ne({__name:"index",setup(ol){const u=Ct(),{t:s}=Oe(),X=V(!1),$=V(""),Ie=R(()=>ht().filter(r=>s(r.name).toLocaleLowerCase().includes($.value.toLowerCase())).sort((r,a)=>r.sortIndex-a.sortIndex)),c=V({protection:{},originPrice:0}),Y=V([]),A=V([]),L=V({ingredientList:[],productList:[],successRate:0}),C={hourlyRate:5e6,taxRate:2,enhanceLevel:10,originLevel:0,escapeLevel:-1};Be(()=>{u.advancedConfig.hrid&&ee(Ce(u.advancedConfig.hrid))}),xe(()=>u.advancedConfig,()=>{u.saveAdvancedConfig()},{deep:!0});const M=R({get:()=>u.advancedConfig.ignoreTax?0:2,set:r=>{u.advancedConfig.ignoreTax=r===0}}),He=R(()=>M.value===0?1:.98);function ee(r){if(!r)return;u.advancedConfig.hrid=r.hrid,c.value={hrid:r.hrid,originPrice:0},X.value=!1;const a=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]];let o;for(const[i,p]of a)if(o=new mt({hrid:r.hrid,project:i,action:p}),o.available)break;Y.value=r.enhancementCosts.map(i=>({hrid:i.itemHrid,count:i.count,originPrice:F(i.itemHrid).ask})),A.value=r.protectionItemHrids?r.protectionItemHrids.map(i=>({hrid:i,count:1,originPrice:F(i).ask})):[],A.value.length||A.value.push({hrid:r.hrid,count:1,originPrice:F(r.hrid).ask}),A.value.push({hrid:"/items/mirror_of_protection",count:1,originPrice:F("/items/mirror_of_protection").ask}),c.value.protection=A.value.reduce((i,p)=>i&&i.originPrice<p.originPrice?i:p),Pe()}function Pe(){if(!c.value.hrid)return;const r=new ft({hrid:c.value.hrid,enhanceLevel:u.advancedConfig.enhanceLevel??C.enhanceLevel,catalystRank:2});L.value.ingredientList=r.ingredientListWithPrice.slice(1,3).map(a=>({...a,originPrice:a.price,price:void 0})),L.value.productList=r.productListWithPrice.slice(0,-2).map(a=>({...a,originPrice:a.price,price:void 0})),L.value.successRate=r.successRate}const se=R(()=>F(c.value.hrid,u.advancedConfig.originLevel??C.originLevel).ask),ce=R(()=>F(c.value.hrid).ask),de=R(()=>F(c.value.hrid,Math.max(u.advancedConfig.escapeLevel??C.escapeLevel,0)).ask),ue=R(()=>{const r=L.value.ingredientList.reduce((o,i)=>{const p=typeof i.price=="number"?i.price:i.originPrice;return o+p*i.count*(i.rate||1)},0);return(L.value.productList.reduce((o,i)=>{const p=typeof i.price=="number"?i.price:i.originPrice;return o+p*i.count*(i.rate||1)},0)-r)*L.value.successRate}),j=R(()=>{var x;if(!c.value.hrid)return[];const r=[],a=!!u.advancedConfig.ignoreTax,o=a?1:.98,i=u.advancedConfig.enhanceLevel??C.enhanceLevel;let p=Math.max(2,(u.advancedConfig.escapeLevel??C.escapeLevel)+1);for(;p<=i;++p){const v=new gt({hrid:c.value.hrid,enhanceLevel:i,protectLevel:p,originLevel:u.advancedConfig.originLevel,escapeLevel:u.advancedConfig.escapeLevel});if(!v.available)continue;const{actions:y,protects:D,targetRate:E,leapRate:P,escapeRate:O}=v.enhancelate(),T=Y.value.reduce((S,oe)=>{const Ae=typeof oe.price=="number"?oe.price:oe.originPrice;return S+Ae*oe.count*y},0)+(typeof((x=c.value.protection)==null?void 0:x.price)=="number"?c.value.protection.price:c.value.protection.originPrice)*D,ae=typeof c.value.price=="number"?c.value.price:se.value,k=T+ae;let K=k+(u.advancedConfig.hourlyRate??C.hourlyRate)*(y/v.actionsPH);a||(K*=1+M.value/100);const B=v.realEscapeLevel===0?typeof c.value.whitePrice=="number"?c.value.whitePrice:ce.value:typeof c.value.escapePrice=="number"?c.value.escapePrice:de.value,_e=(ae-B*o)/y*v.actionsPH;let Q=typeof c.value.productPrice=="number"?c.value.productPrice:F(c.value.hrid,i).bid;u.advancedConfig.tab==="2"&&(Q=ue.value);const ne=((Q*(E+P)+B*O)*o-k)/y*v.actionsPH,l=(Q*(E+P)+B*O)*o-k,h=(K/o-B*O)/(E+P),f=y/v.actionsPH*3600;r.push({actions:y,actionsFormatted:b(y,2),protects:D,protectsFormatted:b(D,2),protectLevel:p,targetRateFormatted:Z(E+P),leapRateFormatted:Z(P),escapeRateFormatted:Z(O),realEscapeLevel:v.realEscapeLevel,time:Ue(f*1e9),successTime:Ue(f*1e9/(E+P)),expPHFormat:H(v.exp*v.actionsPH),matCost:H(T),totalCostFormatted:H(h),profitPPFormatted:H(l),profitRate:l/k,profitRateFormatted:Z(l/k),totalCost:h,totalCostNoHourly:k,matCostPH:`${H(T/f*3600)} / h`,fallingRatePH:`${H(_e)} / h`,hourlyCost:ne,hourlyCostFormatted:H(ne)})}return r}),J=R(()=>{if(!j.value.length)return{};const r=Object.keys(j.value[0]),a={};for(const o of r){const i=Math.max(...j.value.map(p=>{var x;return((x=p[o])==null?void 0:x.toString().length)||0}));a[o]=Math.max(i*10+20,60)}for(const o of Y.value){const i=Math.max(...j.value.map(p=>b(o.count*p.actions).toString().length||0));a[o.hrid]=Math.max(i*10+20,60)}return a}),Ve=V(null),Le=R(()=>{var o;const a=(((o=Ve.value)==null?void 0:o.columns)??[]).reduce((i,p)=>i+(p.minWidth||0),0)??0;return Math.max(a+100,1100)});xe([()=>bt(),()=>yt().config],()=>u.advancedConfig.hrid&&ee(Ce(u.advancedConfig.hrid)),{immediate:!1});let pe=!1,he=!1,me=!1,fe=!1,ge=!1,ve=!1;function N(r,a,o){if(typeof r!="number")return;const i=typeof a=="number",p=i?r-a:Number.NaN;let x,v;if(i&&Math.abs(p)===1)x=p>0,v=a;else if(!i&&(r===0||r===1)&&o>0)x=r===1,v=o;else return;const y=xt(v,x);return y>0?y:void 0}function Me(r,a){if(pe||!c.value.hrid)return;const o=F(c.value.hrid,u.advancedConfig.enhanceLevel??C.enhanceLevel).bid,i=N(r,a,o);i&&(pe=!0,c.value.productPrice=i,G(()=>{pe=!1}))}function We(r,a){if(he||!c.value.hrid)return;const o=se.value,i=N(r,a,o);i&&(he=!0,c.value.price=i,G(()=>{he=!1}))}function ze(r,a){if(me||!c.value.hrid)return;const o=N(r,a,de.value);o&&(me=!0,c.value.escapePrice=o,G(()=>{me=!1}))}function je(r,a){if(fe||!c.value.hrid)return;const o=N(r,a,ce.value);o&&(fe=!0,c.value.whitePrice=o,G(()=>{fe=!1}))}function De(r,a,o){if(ge||r.hrid===we)return;const i=N(a,o,r.originPrice);i&&(ge=!0,r.price=i,G(()=>{ge=!1}))}function Se(r,a,o){if(ve||!r.protection)return;const i=N(a,o,r.protection.originPrice);i&&(ve=!0,r.protection.price=i,G(()=>{ve=!1}))}function $e({row:r}){if(r.profitRate===Math.max(...j.value.map(a=>a.profitRate)))return{background:"rgb(34, 68, 34)"};if(r.hourlyCost===Math.max(...j.value.map(a=>a.hourlyCost)))return{background:"rgb(34, 51, 85)"}}const te=V(!1),ke=V(0),Re=V(0),le=V("");function Fe(r,a){const p=document.body.offsetWidth-100,x=a.clientX+10;Re.value=x>p?p:x,ke.value=a.clientY,te.value=!0,le.value=r}function Ee(){te.value=!1}return xe(te,r=>{r?document.body.addEventListener("click",Ee):document.body.removeEventListener("click",Ee)}),(r,a)=>{const o=Qe,i=Ze,p=Je("Warning"),x=tt,v=et,y=Ye,D=Ke,E=lt,P=at,O=it,T=rt,ae=ot,k=ct,K=dt,B=st,_e=pt,Q=ut,ne=Xe;return g(),w("div",Pt,[qe(d("ul",{class:"contextmenu",style:be({left:`${e(Re)}px`,top:`${e(ke)}px`})},[e(u).hasAdvancedFavorite(e(le))?(g(),w("li",{key:1,onClick:a[1]||(a[1]=l=>e(u).removeAdvancedFavorite(e(le)))}," 取消收藏 ")):(g(),w("li",{key:0,onClick:a[0]||(a[0]=l=>e(u).addAdvancedFavorite(e(le)))}," 收藏 "))],4),[[Ge,e(te)]]),d("div",Vt,[t(vt),d("div",null,[t(_t,{actions:["enhancing","alchemy"],equipments:["hands","neck","earrings","ring","pouch"]})])]),t(ne,{gutter:20,class:"row max-w-1100px mx-auto!"},{default:n(()=>[t(D,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:n(()=>[t(y,null,{header:n(()=>[d("div",Lt,[d("span",null,m(e(s)("装备成本")),1)])]),default:n(()=>[t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,null,{default:n(({row:l})=>[t(I,{hrid:l.hrid},null,8,["hrid"])]),_:1}),t(o,{"min-width":"120",align:"center"},{default:n(({row:l})=>[t(i,{class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":h=>l.price=h,placeholder:b(e(se)),controls:!0,"controls-position":"right",onChange:We},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,null,{default:n(()=>[_(m(e(s)("初始等级"))+": ",1)]),_:1}),t(o,{"min-width":"120",align:"center"},{default:n(()=>[t(i,{class:"max-w-100%",max:(e(u).advancedConfig.enhanceLevel??C.enhanceLevel)-1,min:0,modelValue:e(u).advancedConfig.originLevel,"onUpdate:modelValue":a[2]||(a[2]=l=>e(u).advancedConfig.originLevel=l),placeholder:b(C.originLevel),"controls-position":"right"},null,8,["max","modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,null,{default:n(()=>[t(v,{placement:"top",effect:"light"},{content:n(()=>[_(m(e(s)("#逃逸等级提示")),1)]),default:n(()=>[d("div",kt,[t(x,null,{default:n(()=>[t(p)]),_:1}),d("div",Rt,m(e(s)("逃逸等级"))+": ",1)])]),_:1})]),_:1}),t(o,{"min-width":"120",align:"center"},{default:n(()=>[t(i,{class:"max-w-100%",max:(e(u).advancedConfig.originLevel??C.originLevel)-1,min:-1,modelValue:e(u).advancedConfig.escapeLevel,"onUpdate:modelValue":a[3]||(a[3]=l=>e(u).advancedConfig.escapeLevel=l),placeholder:b(C.escapeLevel),"controls-position":"right"},null,8,["max","modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,null,{default:n(()=>[t(v,{placement:"top",effect:"light"},{content:n(()=>[_(m(e(s)("#逃逸价格提示")),1)]),default:n(()=>[d("div",Ft,[t(x,null,{default:n(()=>[t(p)]),_:1}),d("div",Et,m(e(s)("逃逸价格"))+": ",1)])]),_:1})]),_:1}),t(o,{"min-width":"120",align:"center"},{default:n(({row:l})=>[t(i,{class:"max-w-100%",modelValue:l.escapePrice,"onUpdate:modelValue":h=>l.escapePrice=h,placeholder:b(e(de)),controls:!0,"controls-position":"right",onChange:ze},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,null,{default:n(()=>[t(v,{placement:"top",effect:"light"},{content:n(()=>[_(m(e(s)("#白板价格提示")),1)]),default:n(()=>[d("div",Tt,[t(x,null,{default:n(()=>[t(p)]),_:1}),d("div",Ut,m(e(s)("白板价格"))+": ",1)])]),_:1})]),_:1}),t(o,{"min-width":"120",align:"center"},{default:n(({row:l})=>[t(i,{class:"max-w-100%",modelValue:l.whitePrice,"onUpdate:modelValue":h=>l.whitePrice=h,placeholder:b(e(ce)),controls:!0,"controls-position":"right",onChange:je},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),t(D,{xs:16,sm:10,md:10,lg:6,xl:6,class:"max-w-300px mx-auto"},{default:n(()=>[t(y,null,{default:n(()=>{var l,h;return[d("div",It,[t(I,{hrid:(l=e(c))==null?void 0:l.hrid,style:{position:"absolute",bottom:"10%",left:"10%",width:"80%",height:"80%"}},null,8,["hrid"]),t(E,{style:{position:"absolute",width:"100%",height:"100%",opacity:"0.5"},onClick:a[4]||(a[4]=f=>(X.value=!0,$.value=""))},{default:n(()=>{var f;return[_(m((f=e(c))!=null&&f.hrid?"":e(s)("选择装备")),1)]}),_:1}),(h=e(c))!=null&&h.hrid?(g(),w("div",Ht,[e(u).hasAdvancedFavorite(e(c).hrid)?(g(),W(P,{key:1,underline:!1,icon:e(ye),type:"primary",onClick:a[6]||(a[6]=f=>e(u).removeAdvancedFavorite(e(c).hrid)),style:{"font-size":"42px"}},null,8,["icon"])):(g(),W(P,{key:0,underline:!1,type:"info",icon:e(nt),onClick:a[5]||(a[5]=f=>e(u).addAdvancedFavorite(e(c).hrid)),style:{"font-size":"42px"}},null,8,["icon"]))])):ie("",!0),t(ae,{modelValue:e(X),"onUpdate:modelValue":a[8]||(a[8]=f=>re(X)?X.value=f:null),"show-close":!1},{default:n(()=>[t(O,{modelValue:e($),"onUpdate:modelValue":a[7]||(a[7]=f=>re($)?$.value=f:null),placeholder:e(s)("搜索")},null,8,["modelValue","placeholder"]),e(u).advancedFavorite.length&&!e($)?(g(),w(z,{key:0},[t(T,{class:"mt-2 mb-2"}),d("div",Mt,[_(m(e(s)("收藏"))+" ",1),d("span",Wt," ("+m(e(s)("右键/长按取消收藏"))+")",1)]),d("div",zt,[(g(!0),w(z,null,q(e(u).advancedFavorite,f=>(g(),W(E,{key:f,class:"relative",style:{width:"50px",height:"50px",margin:"2px"},onClick:S=>ee(e(Ce)(f)),onContextmenu:Te(S=>Fe(f,S),["prevent"])},{default:n(()=>[t(I,{hrid:f},null,8,["hrid"]),d("div",jt,[t(P,{underline:!1,icon:e(ye),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])]),_:2},1032,["onClick","onContextmenu"]))),128))]),t(T,{class:"mt-2 mb-1"})],64)):ie("",!0),d("div",Dt,[(g(!0),w(z,null,q(e(Ie),f=>(g(),W(E,{key:f.hrid,style:{width:"50px",height:"50px",margin:"2px"},class:"relative",onClick:S=>ee(f),onContextmenu:Te(S=>Fe(f.hrid,S),["prevent"])},{default:n(()=>[t(I,{hrid:f.hrid},null,8,["hrid"]),e(u).hasAdvancedFavorite(f.hrid)?(g(),w("div",St,[t(P,{underline:!1,icon:e(ye),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])):ie("",!0)]),_:2},1032,["onClick","onContextmenu"]))),128))])]),_:1},8,["modelValue"])])]}),_:1}),t(y,{class:"mt-2"},{default:n(()=>[t(B,{modelValue:e(u).advancedConfig.tab,"onUpdate:modelValue":a[13]||(a[13]=l=>e(u).advancedConfig.tab=l),type:"border-card",stretch:""},{default:n(()=>[t(k,{label:e(s)("工时费")},{default:n(()=>[d("div",$t,[d("div",At,m(e(s)("工时费/h")),1),t(i,{class:"w-120px",modelValue:e(u).advancedConfig.hourlyRate,"onUpdate:modelValue":a[9]||(a[9]=l=>e(u).advancedConfig.hourlyRate=l),step:1,min:0,max:5e8,placeholder:C.hourlyRate.toString(),controls:!1},null,8,["modelValue","placeholder"])]),d("div",Nt,[d("div",Ot,m(e(s)("溢价率%")),1),t(i,{class:"w-120px",modelValue:e(M),"onUpdate:modelValue":a[10]||(a[10]=l=>re(M)?M.value=l:null),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",controls:!0,placeholder:C.taxRate.toString()},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),t(k,{label:e(s)("成品售价")},{default:n(()=>[d("div",Bt,[d("div",qt,m(e(s)("价格")),1),t(i,{class:"w-full",style:{width:"100%"},modelValue:e(c).productPrice,"onUpdate:modelValue":a[11]||(a[11]=l=>e(c).productPrice=l),step:1,min:0,placeholder:b(e(F)(e(c).hrid,e(u).advancedConfig.enhanceLevel??C.enhanceLevel).bid),"controls-position":"right",controls:!0,onChange:Me},null,8,["modelValue","placeholder"])]),d("div",Gt,[d("div",Xt,m(e(s)("税率%")),1),t(i,{class:"w-full",style:{width:"100%"},modelValue:e(M),"onUpdate:modelValue":a[12]||(a[12]=l=>re(M)?M.value=l:null),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",controls:!0},null,8,["modelValue"])])]),_:1},8,["label"]),t(k,{label:e(s)("分解")},{default:n(()=>[(g(!0),w(z,null,q(e(L).ingredientList,l=>(g(),w("div",{key:l.hrid,class:"flex justify-between items-center"},[d("div",Yt,[d("div",null,[t(I,{hrid:l.hrid,class:"inline-block mr-1"},null,8,["hrid"])]),d("div",null,m(b(l.count*(l.rate||1),2)),1)]),t(i,{class:"w-100px",modelValue:l.price,"onUpdate:modelValue":h=>l.price=h,placeholder:b(l.originPrice),controls:!1,disabled:l.hrid===e(we)},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]))),128)),t(T,{class:"mt-5px mb-5px"}),(g(!0),w(z,null,q(e(L).productList,l=>(g(),w("div",{key:l.hrid,class:"flex justify-between items-center"},[d("div",Jt,[d("div",null,[t(I,{hrid:l.hrid,class:"inline-block mr-1"},null,8,["hrid"])]),d("div",null,m(b(l.count*(l.rate||1),2)),1)]),t(i,{class:"w-100px",modelValue:l.price,"onUpdate:modelValue":h=>l.price=h,placeholder:b(l.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128)),d("div",Kt,[d("div",Qt,m(e(s)("成功率")),1),t(K,{class:"w-100px",type:"success",size:"large"},{default:n(()=>[_(m(e(L).successRate&&Z(e(L).successRate)),1)]),_:1})]),d("div",Zt,[d("div",el,m(e(s)("分解税后收益")),1),t(K,{class:"w-100px",type:"success",size:"large"},{default:n(()=>[_(m(e(ue)&&H(e(ue)*e(He))),1)]),_:1})])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(D,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:n(()=>[t(y,{header:e(s)("强化消耗")},{default:n(()=>[t(e(U),{data:e(Y),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:n(()=>[t(o,{label:e(s)("物品")},{default:n(({row:l})=>[t(I,{hrid:l.hrid},null,8,["hrid"])]),_:1},8,["label"]),t(o,{prop:"count",label:e(s)("数量")},{default:n(({row:l})=>[_(m(b(l.count,2)),1)]),_:1},8,["label"]),t(o,{label:e(s)("价格"),align:"center","min-width":"120"},{default:n(({row:l})=>[l.hrid!==e(we)?(g(),W(i,{key:0,class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":h=>l.price=h,placeholder:b(l.originPrice),controls:!0,"controls-position":"right",onChange:(h,f)=>De(l,h,f)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])):ie("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),t(T,{class:"mt-2 mb-2"}),t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,{"min-width":"160"},{default:n(({row:l})=>[t(Q,{modelValue:l.protection.hrid,"onUpdate:modelValue":h=>l.protection.hrid=h},{default:n(()=>[(g(!0),w(z,null,q(e(A),h=>(g(),W(_e,{key:h.hrid,value:h.hrid,border:"",style:{width:"50px",height:"50px",margin:"2px"},onClick:()=>l.protection=h},{default:n(()=>[t(I,{hrid:h.hrid},null,8,["hrid"])]),_:2},1032,["value","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),t(o,{"min-width":"120",align:"center"},{default:n(({row:l})=>[t(i,{class:"max-w-100%",modelValue:l.protection.price,"onUpdate:modelValue":h=>l.protection.price=h,placeholder:b(l.protection.originPrice),controls:!0,"controls-position":"right",onChange:(h,f)=>Se(l,h,f)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:1})]),_:1},8,["data"]),t(T,{class:"mt-2 mb-2"}),t(e(U),{data:[e(c)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:n(()=>[t(o,null,{default:n(()=>[_(m(e(s)("目标"))+": ",1)]),_:1}),t(o),t(o,{"min-width":"120",align:"center"},{default:n(()=>[t(i,{class:"max-w-100%",max:20,min:1,modelValue:e(u).advancedConfig.enhanceLevel,"onUpdate:modelValue":a[14]||(a[14]=l=>e(u).advancedConfig.enhanceLevel=l),placeholder:b(C.enhanceLevel),onChange:Pe,"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1},8,["header"])]),_:1})]),_:1}),t(y,{class:"mx-auto",style:be({width:`${e(Le)}px`,maxWidth:"100%"})},{default:n(()=>[t(e(U),{ref_key:"refTable",ref:Ve,data:e(j),size:"large",border:"",fit:"","header-cell-style":{padding:"8px 0"},style:be({width:`${e(Le)}px`}),"row-style":$e},{default:n(()=>[t(o,{prop:"protectLevel",label:e(s)("Prot"),"min-width":e(J).protectLevel,"header-align":"center",align:"right"},null,8,["label","min-width"]),t(o,{prop:"actionsFormatted",label:e(s)("次数"),"min-width":e(J).actionsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),t(o,{prop:"time",label:e(s)("时间"),"min-width":e(J).time,align:"right"},null,8,["label","min-width"]),t(o,{prop:"expPHFormat",label:e(s)("经验 / h"),"min-width":100,align:"right"},null,8,["label"]),(g(!0),w(z,null,q(e(Y),l=>(g(),W(o,{key:l.hrid,"min-width":100,"header-align":"center",align:"right"},{header:n(()=>[t(I,{class:"mt-[8px]",width:20,height:20,hrid:l.hrid},null,8,["hrid"])]),default:n(({row:h})=>[_(m(H(l.count*h.actions)),1)]),_:2},1024))),128)),t(o,{prop:"protectsFormatted",label:e(s)("保护"),"min-width":e(J).protectsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),t(o,{prop:"matCostPH",label:e(s)("材料损耗"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]),t(o,{prop:"fallingRatePH",label:e(s)("逃逸损耗"),"min-width":120,"header-align":"center",align:"right"},{header:n(()=>[d("div",tl,[d("div",null,m(e(s)("逃逸损耗")),1),t(v,{placement:"top",effect:"light"},{content:n(()=>[_(m(e(s)("#逃逸损耗提示")),1)]),default:n(()=>[t(x,null,{default:n(()=>[t(p)]),_:1})]),_:1})])]),default:n(({row:l})=>[_(m(l.fallingRatePH),1)]),_:1},8,["label"]),e(u).advancedConfig.tab!=="0"?(g(),w(z,{key:0},[t(o,{prop:"profitPPFormatted",label:e(s)("利润 / 件"),"min-width":100,"header-align":"center",align:"right"},{header:n(()=>[d("div",ll,[d("div",null,m(e(s)("利润 / 件")),1),t(v,{placement:"top",effect:"light"},{content:n(()=>[_(m(e(s)("#超级强化利润/件提示")),1)]),default:n(()=>[t(x,null,{default:n(()=>[t(p)]),_:1})]),_:1})])]),default:n(({row:l})=>[_(m(l.profitPPFormatted),1)]),_:1},8,["label"]),t(o,{prop:"hourlyCostFormatted",label:e(s)("工时费"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"]),t(o,{prop:"profitRateFormatted",label:e(s)("利润率"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])],64)):(g(),W(o,{key:1,prop:"totalCostFormatted",label:e(s)("指导价"),"min-width":120,"header-align":"center",align:"right"},{header:n(()=>[d("div",al,[d("div",null,m(e(s)("指导价")),1),t(v,{placement:"top",effect:"light"},{content:n(()=>a[15]||(a[15]=[_(" 总成本 = 材料费用 + 工时费 + 1个初始物品成本 "),d("br",null,null,-1),_(" 总收入 = (成功率*指导价 + 逃逸率*逃逸价格或白板价格) * 98% "),d("br",null,null,-1),_(" 总成本 = 总收入 "),d("br",null,null,-1),_(" ∴ 指导价 = (总成本 / 98% - 逃逸率*逃逸价格或白板价格) / 成功率 ")])),default:n(()=>[t(x,null,{default:n(()=>[t(p)]),_:1})]),_:1})])]),default:n(({row:l})=>[_(m(l.totalCostFormatted),1)]),_:1},8,["label"])),t(o,{prop:"targetRateFormatted",label:e(s)("成功率"),"min-width":80,"header-align":"center",align:"right"},null,8,["label"]),t(o,{prop:"successTime",label:e(s)("期望耗时"),"min-width":e(J).successTime,"header-align":"center",align:"right"},null,8,["label","min-width"]),t(o,{prop:"realEscapeLevel",label:e(s)("逃逸等级"),"min-width":90,"header-align":"center",align:"right"},null,8,["label"])]),_:1},8,["data","style"])]),_:1},8,["style"])])}}}),pl=wt(nl,[["__scopeId","data-v-95d4aedd"]]);export{pl as default};
