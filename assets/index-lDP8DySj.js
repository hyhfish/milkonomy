import{k as Ke,u as Xe,S as Ye,r as V,l as ce,H as Ze,w as oe,f as P,h,ao as et,i as g,s as a,ar as tt,v as e,aq as we,q as c,av as lt,au as at,D as I,O as N,aw as J,ax as ot,G as z,F as w,p as L,ay as nt,ab as rt,P as K,aS as it,a5 as X,aQ as st,aR as ct,ad as ut,az as dt,aA as pt,aB as Pe,aC as ht,aD as ft,R as Ne,aE as mt,aF as gt,aH as vt,aI as bt,at as _t,al as yt}from"./vue-0ucuI9Mt.js";import{_ as A,g as xt}from"./index.vue_vue_type_script_setup_true_lang-CjRkRCNG.js";import{g as wt,a as Y,M as be,E as Pt,b as ue,p as kt,m as Z,c as Ct,n as $,G as Vt,A as Lt,d as St,e as Et,u as Ht}from"./GameInfo-CD_tVD5Z.js";import{u as $e,W as It,g as Ft}from"./useMemory-r0PnY6ha.js";import{u as Mt}from"./enhancer-C7oHrsk5.js";import{v as Oe,P as je,C as ze,y as Ae}from"./index-DYCH4vBP.js";import{_ as Tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Rt={class:"app-container"},Ut={class:"game-info"},Wt={class:"flex flex-col gap-2"},Nt={class:"whitespace-nowrap flex-shrink-0"},$t={class:"flex flex-wrap items-center gap-x-4 gap-y-2"},Ot={key:0,class:"flex items-center gap-2"},jt={class:"w-10 whitespace-nowrap"},zt={class:"text-xs color-gray-500 mb-1"},At={style:{position:"relative",width:"100%","padding-bottom":"100%"}},Bt={key:0,class:"absolute bottom-0 right-0"},qt={class:"mb-2 color-gray-500"},Dt={"color-gray-600":""},Gt={class:"flex flex-wrap"},Qt={class:"absolute bottom-0 right-0"},Jt={style:{display:"flex","flex-wrap":"wrap","margin-top":"10px"}},Kt={key:0,class:"absolute bottom-0 right-0"},Xt={class:"flex justify-between items-center"},Yt={class:"font-size-14px"},Zt={class:"flex justify-between items-center"},el={class:"font-size-14px"},tl={class:"grid w-full items-center gap-x-1",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},ll={class:"font-size-14px whitespace-nowrap"},al={class:"grid w-full items-center gap-x-1 gap-y-1 mt-2",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},ol={class:"font-size-14px whitespace-nowrap"},nl={class:"flex flex-col gap-2"},rl={class:"whitespace-nowrap flex-shrink-0"},il={key:0,class:"flex items-center gap-2"},sl={class:"w-10 whitespace-nowrap"},cl=Ke({__name:"index",setup(ul){const u=Mt(),de=Oe(),{t:s}=Xe(),_e=Ye();function ke(o){if(typeof o=="string")return o;if(Array.isArray(o)&&typeof o[0]=="string")return o[0]}function Ce(o={}){const t=ke(_e.query.hrid),r=ke(_e.query.enhanceLevel);if(r){const n=Math.floor(Number(r));Number.isFinite(n)&&n>=1&&n<=20&&(u.config.enhanceLevel=n)}if(t&&!(d.value.hrid===t&&!o.selectItem)&&(u.config.hrid=t,o.selectItem))try{ie(Y(t))}catch(n){console.warn("Invalid hrid from route query",t,n)}}const ne=V(!1),ee=V(""),Be=ce(()=>wt().filter(o=>s(o.name).toLocaleLowerCase().includes(ee.value.toLowerCase())).sort((o,t)=>o.sortIndex-t.sortIndex)),d=V({protection:{},originPrice:0}),F=V([]),B=V([]),te=V([]),M=V([]),q={hourlyRate:5e6,taxRate:2,enhanceLevel:10},ye=ce({get:()=>u.config.ignoreTax?0:2,set:o=>{u.config.ignoreTax=o===0}});Ze(()=>{Ce({selectItem:!1}),u.hrid&&ie(Y(u.hrid))}),oe(()=>_e.query,()=>{Ce({selectItem:!0})},{immediate:!1}),oe(()=>u.config,()=>{u.saveConfig()},{deep:!0});const T=V(!1),Q=V(!1),le=$e("enhancer-gear-cost-buy-status",je.ASK),re=$e("enhancer-enhancement-cost-buy-status",je.ASK);oe([()=>F.value,()=>T.value,()=>Q.value,()=>le.value,()=>re.value],Ge,{deep:!0}),oe([()=>T.value,()=>Q.value,()=>le.value],()=>{Le()},{deep:!1});function pe(o){return Y(o).categoryHrid==="/item_categories/drink"}function R(o,t){return ue(o,t,le.value,de.sellStatus).ask}function ae(o,t){return ue(o,t,re.value,de.sellStatus).ask}function Ve(o){const t=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]];let r;for(const[n,p]of t){const i=new be({hrid:o,project:n,action:p});if(i.available){r=i;break}}return r!=null&&r.available?r.ingredientList.filter(n=>!pe(n.hrid)).map(n=>({hrid:n.hrid,count:n.count,level:n.level,originPrice:R(n.hrid,n.level)})):[]}function qe(o){var S;const t=Y(o),r=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]],n=xt(t)==="charm"||R(o)===-1?7:3;let p;for(const[_,E]of r)for(const[U,G]of r){const y=new be({hrid:o,project:U,action:G});if(!y.available)continue;const O=[y],j=[[...O]];let l=y,m=1;for(;(S=l.actionItem)!=null&&S.upgradeItemHrid&&m<n;){const f=new be({hrid:l.actionItem.upgradeItemHrid,project:_,action:E});if(!f.available)break;O.unshift(f),m++,j.push([...O]),l=f}for(const f of j){const W=new It(f.map(H=>Ft(H)),s("{0}步{1}",[f.length,U]));W.run();const ve=W.productListWithPricePreprocess.list.filter(H=>H.hrid===o).reduce((H,se)=>H+(se.countPH||0),0);if(!ve||ve<=1e-12)continue;let Te=!1;const Je=W.ingredientListWithPrice.filter(H=>!pe(H.hrid)).reduce((H,se)=>{const Ue=se.countPH||0;if(Ue>1e-12){const We=R(se.hrid,se.level);return We===-1?(Te=!0,H):H+Ue*We}return H},0);if(Te)continue;const Re=Je/ve;(!p||Re<p.costPerItem)&&(p={workflow:W,outputPH:ve,costPerItem:Re})}}if(!p)return;const{workflow:i,outputPH:v}=p,b=(_,E)=>`${_}|${E??""}`,x=i.ingredientListWithPrice.filter(_=>!pe(_.hrid)).filter(_=>(_.countPH||0)>1e-12).map(_=>({hrid:_.hrid,count:(_.countPH||0)/v,level:_.level,originPrice:R(_.hrid,_.level)})),k=[],C=new Set;for(let _=0;_<i.calculatorList.length;_++){const E=i.calculatorList[_];if(Array.isArray(E))continue;const U=i.workMultiplier[_],G=E.ingredientListWithPrice.filter(y=>!pe(y.hrid)).map(y=>{const O=C.has(y.hrid)||C.has(b(y.hrid,y.level));return{hrid:y.hrid,count:(y.countPH||0)*U/v,level:y.level,originPrice:R(y.hrid,y.level),fromWorkflow:O}});k.push({title:`${s("{0}步{1}",[k.length+1,E.project])}:`,ingredients:G});for(const y of E.productListWithPrice)C.add(y.hrid),C.add(b(y.hrid,y.level))}return{totalIngredients:x,stepList:k}}function he(o){return o.originPriceText?o.originPriceText:o.fromWorkflow?s("由制作链产出"):o.originPrice===-1?"-1":$(o.originPrice)}let xe=!1;function De(o,t){if(xe)return;const r=d.value,n=r==null?void 0:r.hrid;if(!n||typeof o!="number")return;const p=u.enhanceLevel??q.enhanceLevel,i=ue(n,p).bid,v=typeof t=="number",b=v?o-t:Number.NaN;let x,k;if(v&&Math.abs(b)===1)x=b>0,k=t;else if(!v&&(o===0||o===1)&&typeof i=="number"&&i>0)x=o===1,k=i;else return;const C=St(k,x);C<=0||(xe=!0,r.productPrice=C,yt(()=>{xe=!1}))}function Le(){const o=d.value.hrid;if(!o){F.value=[],B.value=[];return}if(!T.value){B.value=[];return}if(!Q.value){F.value=Ve(o),B.value=[];return}const t=qe(o);if(!t){F.value=Ve(o),B.value=[];return}F.value=t.totalIngredients,B.value=t.stepList}function ie(o){if(!o)return;u.config.hrid=o.hrid,d.value={hrid:o.hrid,originPrice:0},ne.value=!1;const t=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]];let r;for(const[n,p]of t)if(r=new be({hrid:o.hrid,project:n,action:p}),r.available)break;F.value=r.available?r.ingredientList.filter(n=>Y(n.hrid).categoryHrid!=="/item_categories/drink").map(n=>({hrid:n.hrid,count:n.count,level:n.level,originPrice:R(n.hrid,n.level)})):[],te.value=o.enhancementCosts.map(n=>({hrid:n.itemHrid,count:n.count,originPrice:ae(n.itemHrid)})),M.value=o.protectionItemHrids?o.protectionItemHrids.map(n=>({hrid:n,count:1,originPrice:ae(n)})):[],M.value.length||M.value.push({hrid:o.hrid,count:1,originPrice:ae(o.hrid)}),M.value.push({hrid:"/items/mirror_of_protection",count:1,originPrice:ae("/items/mirror_of_protection")}),d.value.protection=M.value.reduce((n,p)=>n&&n.originPrice<p.originPrice?n:p),Le()}const D=ce(()=>{var p,i;if(!d.value.hrid)return[];const o=[],t=!!u.config.ignoreTax,r=t?1:.98,n=u.enhanceLevel??q.enhanceLevel;for(let v=1;v<=n;++v){const b=new Pt({hrid:d.value.hrid,enhanceLevel:n,protectLevel:v}),{actions:x,protects:k}=b.enhancelate(),C=te.value.reduce((O,j)=>{const l=typeof j.price=="number"?j.price:j.originPrice;return O+l*j.count*x},0)+(typeof((p=d.value.protection)==null?void 0:p.price)=="number"?d.value.protection.price:d.value.protection.originPrice)*k,S=C+(typeof((i=d.value)==null?void 0:i.price)=="number"?d.value.price:d.value.originPrice);let _=S+(u.hourlyRate??q.hourlyRate)*(x/b.actionsPH);t||(_*=1+(u.taxRate??q.taxRate)/100);const E=typeof d.value.productPrice=="number"?d.value.productPrice:ue(d.value.hrid,n).bid,U=(E*r-S)/x*b.actionsPH,G=E*r-S,y=x/b.actionsPH*3600;o.push({actions:x,actionsFormatted:$(x,2),protects:k,protectsFormatted:$(k,2),protectLevel:v,time:Ct(y*1e9),expPHFormat:Z(b.exp*b.actionsPH),matCost:Z(C),totalCostFormatted:Z(_),totalCost:_,totalCostNoHourly:S,matCostPH:`${Z(C/y*3600)} / h`,hourlyCost:U,hourlyCostFormatted:Z(U),profitPPFormatted:Z(G),profitRateFormatted:kt(G/S)})}return o}),fe=ce(()=>{if(!D.value.length)return{};const o=Object.keys(D.value[0]),t={};for(const r of o){const n=Math.max(...D.value.map(p=>{var i;return((i=p[r])==null?void 0:i.toString().length)||0}));t[r]=Math.max(n*10+20,60)}for(const r of te.value){const n=Math.max(...D.value.map(p=>$(r.count*p.actions).toString().length||0));t[r.hrid]=Math.max(n*10+20,60)}return t}),Se=V(null),Ee=ce(()=>{var r;const t=(((r=Se.value)==null?void 0:r.columns)??[]).reduce((n,p)=>n+(p.minWidth||0),0)??0;return Math.max(t+100,1100)});oe([()=>Et(),()=>Ht().config],()=>u.hrid&&ie(Y(u.hrid)),{immediate:!1});function Ge(){var o,t;if(d.value.hrid){if(d.value=JSON.parse(JSON.stringify(d.value)),!T.value)d.value.originPrice=R(d.value.hrid);else{const r=F.value;d.value.originPrice=r.length?r.reduce((n,p)=>{const i=typeof p.price=="number"?p.price:p.originPrice;return n+i*p.count},0):R(d.value.hrid)}if(F.value.forEach(r=>{r.originPrice=R(r.hrid,r.level)}),B.value.forEach(r=>{r.ingredients.forEach(n=>{n.originPrice=R(n.hrid,n.level)})}),te.value.forEach(r=>{r.originPrice=ae(r.hrid,r.level)}),M.value.forEach(r=>{r.originPrice=ae(r.hrid,r.level)}),M.value.length){const r=(o=d.value.protection)==null?void 0:o.hrid,n=(t=d.value.protection)==null?void 0:t.price,p=r?M.value.find(b=>b.hrid===r):void 0,i=M.value.reduce((b,x)=>b.originPrice<x.originPrice?b:x),v=p||i;typeof n=="number"&&(v.price=n),d.value.protection=v}}}function Qe({row:o}){if(u.config.tab==="1"){if(o.hourlyCost===Math.max(...D.value.map(t=>t.hourlyCost)))return{background:"rgb(34, 68, 34)"}}else if(o.totalCost===Math.min(...D.value.map(t=>t.totalCost)))return{background:"rgb(34, 68, 34)"};if(o.totalCostNoHourly===Math.min(...D.value.map(t=>t.totalCostNoHourly)))return{background:"rgb(34, 51, 85)"}}const me=V(!1),He=V(0),Ie=V(0),ge=V("");function Fe(o,t){const p=document.body.offsetWidth-100,i=t.clientX+10;Ie.value=i>p?p:i,He.value=t.clientY,me.value=!0,ge.value=o}function Me(){me.value=!1}return oe(me,o=>{o?document.body.addEventListener("click",Me):document.body.removeEventListener("click",Me)}),(o,t)=>{const r=it,n=ct,p=st,i=ot,v=nt,b=rt,x=at,k=lt,C=ut,S=dt,_=ft,E=ht,U=gt,G=mt,y=bt,O=vt,j=_t;return h(),P("div",Rt,[et(g("ul",{class:"contextmenu",style:we({left:`${e(Ie)}px`,top:`${e(He)}px`})},[e(u).hasFavorite(e(ge))?(h(),P("li",{key:1,onClick:t[1]||(t[1]=l=>e(u).removeFavorite(e(ge)))}," 取消收藏 ")):(h(),P("li",{key:0,onClick:t[0]||(t[0]=l=>e(u).addFavorite(e(ge)))}," 收藏 "))],4),[[tt,e(me)]]),g("div",Ut,[a(Vt),g("div",null,[a(Lt,{actions:["enhancing"],equipments:["hands","neck","earrings","ring","pouch"]})])]),a(j,{gutter:20,class:"row max-w-1100px mx-auto!"},{default:c(()=>[a(k,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:c(()=>[a(x,null,{header:c(()=>[g("div",Wt,[g("span",Nt,w(e(s)("装备成本")),1),g("div",$t,[a(r,{modelValue:e(T),"onUpdate:modelValue":t[2]||(t[2]=l=>X(T)?T.value=l:null)},{default:c(()=>[z(w(e(s)("制作装备")),1)]),_:1},8,["modelValue"]),a(r,{modelValue:e(Q),"onUpdate:modelValue":t[3]||(t[3]=l=>X(Q)?Q.value=l:null),disabled:!e(T)},{default:c(()=>[z(w(e(s)("最佳制作方案")),1)]),_:1},8,["modelValue","disabled"])]),e(de).checkSecret()?(h(),P("div",Ot,[g("div",jt,w(e(s)("买价")),1),a(p,{modelValue:e(le),"onUpdate:modelValue":t[4]||(t[4]=l=>X(le)?le.value=l:null),placeholder:e(s)("左价"),style:{width:"110px"}},{default:c(()=>[(h(!0),P(N,null,K(e(Ae),l=>(h(),L(n,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])])):I("",!0)])]),default:c(()=>[e(T)&&e(F).length?(h(),P(N,{key:0},[a(e(J),{data:e(F),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:c(()=>[a(i,{label:e(s)("物品")},{default:c(({row:l})=>[a(A,{hrid:l.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(i,{prop:"count",label:e(s)("数量")},{default:c(({row:l})=>[z(w($(l.count,2)),1)]),_:1},8,["label"]),a(i,{label:e(s)("价格"),align:"center","min-width":"120"},{default:c(({row:l})=>[l.hrid!==e(ze)?(h(),L(v,{key:0,class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":m=>l.price=m,placeholder:he(l),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"})],64)):I("",!0),e(T)&&e(Q)&&e(B).length?(h(),P(N,{key:1},[(h(!0),P(N,null,K(e(B),l=>(h(),P("div",{key:l.title,class:"mb-3"},[g("div",zt,w(l.title),1),a(e(J),{data:l.ingredients,style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"},size:"small"},{default:c(()=>[a(i,{label:e(s)("物品")},{default:c(({row:m})=>[a(A,{hrid:m.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(i,{prop:"count",label:e(s)("数量")},{default:c(({row:m})=>[z(w($(m.count,4)),1)]),_:1},8,["label"])]),_:2},1032,["data"])]))),128)),a(b,{class:"mt-2 mb-2"})],64)):I("",!0),a(e(J),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(i,null,{default:c(({row:l})=>[a(A,{hrid:l.hrid},null,8,["hrid"])]),_:1}),a(i,{prop:"count"}),a(i,{"min-width":"120",align:"center"},{default:c(({row:l})=>[a(v,{class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":m=>l.price=m,placeholder:he(l),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),a(k,{xs:16,sm:10,md:10,lg:6,xl:6,class:"max-w-300px mx-auto"},{default:c(()=>[a(x,null,{default:c(()=>{var l,m;return[g("div",At,[a(A,{hrid:(l=e(d))==null?void 0:l.hrid,style:{position:"absolute",bottom:"10%",left:"10%",width:"80%",height:"80%"}},null,8,["hrid"]),a(C,{style:{position:"absolute",width:"100%",height:"100%",opacity:"0.5"},onClick:t[5]||(t[5]=f=>(ne.value=!0,ee.value=""))},{default:c(()=>{var f;return[z(w((f=e(d))!=null&&f.hrid?"":e(s)("选择装备")),1)]}),_:1}),(m=e(d))!=null&&m.hrid?(h(),P("div",Bt,[e(u).hasFavorite(e(d).hrid)?(h(),L(S,{key:1,underline:!1,icon:e(Pe),type:"primary",onClick:t[7]||(t[7]=f=>e(u).removeFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"])):(h(),L(S,{key:0,underline:!1,type:"info",icon:e(pt),onClick:t[6]||(t[6]=f=>e(u).addFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"]))])):I("",!0),a(E,{modelValue:e(ne),"onUpdate:modelValue":t[9]||(t[9]=f=>X(ne)?ne.value=f:null),"show-close":!1},{default:c(()=>[a(_,{modelValue:e(ee),"onUpdate:modelValue":t[8]||(t[8]=f=>X(ee)?ee.value=f:null),placeholder:e(s)("搜索")},null,8,["modelValue","placeholder"]),e(u).favorite.length&&!e(ee)?(h(),P(N,{key:0},[a(b,{class:"mt-2 mb-2"}),g("div",qt,[z(w(e(s)("收藏"))+" ",1),g("span",Dt," ("+w(e(s)("右键/长按取消收藏"))+")",1)]),g("div",Gt,[(h(!0),P(N,null,K(e(u).favorite,f=>(h(),L(C,{key:f,class:"relative",style:{width:"50px",height:"50px",margin:"2px"},onClick:W=>ie(e(Y)(f)),onContextmenu:Ne(W=>Fe(f,W),["prevent"])},{default:c(()=>[a(A,{hrid:f},null,8,["hrid"]),g("div",Qt,[a(S,{underline:!1,icon:e(Pe),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])]),_:2},1032,["onClick","onContextmenu"]))),128))]),a(b,{class:"mt-2 mb-1"})],64)):I("",!0),g("div",Jt,[(h(!0),P(N,null,K(e(Be),f=>(h(),L(C,{key:f.hrid,style:{width:"50px",height:"50px",margin:"2px"},class:"relative",onClick:W=>ie(f),onContextmenu:Ne(W=>Fe(f.hrid,W),["prevent"])},{default:c(()=>[a(A,{hrid:f.hrid},null,8,["hrid"]),e(u).hasFavorite(f.hrid)?(h(),P("div",Kt,[a(S,{underline:!1,icon:e(Pe),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])):I("",!0)]),_:2},1032,["onClick","onContextmenu"]))),128))])]),_:1},8,["modelValue"])])]}),_:1}),a(x,{class:"mt-2"},{default:c(()=>[a(G,{modelValue:e(u).config.tab,"onUpdate:modelValue":t[14]||(t[14]=l=>e(u).config.tab=l),type:"border-card",stretch:""},{default:c(()=>[a(U,{label:e(s)("工时费")},{default:c(()=>[g("div",Xt,[g("div",Yt,w(e(s)("工时费/h")),1),a(v,{class:"w-120px",modelValue:e(u).config.hourlyRate,"onUpdate:modelValue":t[10]||(t[10]=l=>e(u).config.hourlyRate=l),step:1,min:0,max:5e9,placeholder:$(q.hourlyRate),controls:!1},null,8,["modelValue","placeholder"])]),g("div",Zt,[g("div",el,w(e(s)("溢价率%")),1),a(v,{class:"w-120px",modelValue:e(u).config.taxRate,"onUpdate:modelValue":t[11]||(t[11]=l=>e(u).config.taxRate=l),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",placeholder:q.taxRate.toString()},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),a(U,{label:e(s)("成品售价")},{default:c(()=>[g("div",tl,[g("div",ll,w(e(s)("价格")),1),a(v,{class:"w-full",style:{width:"100%"},modelValue:e(d).productPrice,"onUpdate:modelValue":t[12]||(t[12]=l=>e(d).productPrice=l),step:1,min:0,placeholder:$(e(ue)(e(d).hrid,e(u).enhanceLevel??q.enhanceLevel).bid),"controls-position":"right",controls:!0,onChange:De},null,8,["modelValue","placeholder"])]),g("div",al,[g("div",ol,w(e(s)("税率%")),1),a(v,{class:"w-full",style:{width:"100%"},modelValue:e(ye),"onUpdate:modelValue":t[13]||(t[13]=l=>X(ye)?ye.value=l:null),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",controls:!0},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(k,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:c(()=>[a(x,null,{header:c(()=>[g("div",nl,[g("span",rl,w(e(s)("强化消耗")),1),e(de).checkSecret()?(h(),P("div",il,[g("div",sl,w(e(s)("买价")),1),a(p,{modelValue:e(re),"onUpdate:modelValue":t[15]||(t[15]=l=>X(re)?re.value=l:null),placeholder:e(s)("左价"),style:{width:"110px"}},{default:c(()=>[(h(!0),P(N,null,K(e(Ae),l=>(h(),L(n,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])])):I("",!0)])]),default:c(()=>[a(e(J),{data:e(te),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:c(()=>[a(i,{label:e(s)("物品")},{default:c(({row:l})=>[a(A,{hrid:l.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(i,{prop:"count",label:e(s)("数量")},{default:c(({row:l})=>[z(w($(l.count,2)),1)]),_:1},8,["label"]),a(i,{label:e(s)("价格"),align:"center","min-width":"120"},{default:c(({row:l})=>[l.hrid!==e(ze)?(h(),L(v,{key:0,class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":m=>l.price=m,placeholder:he(l),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"}),a(e(J),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(i,{"min-width":"160"},{default:c(({row:l})=>[a(O,{modelValue:l.protection.hrid,"onUpdate:modelValue":m=>l.protection.hrid=m},{default:c(()=>[(h(!0),P(N,null,K(e(M),m=>(h(),L(y,{key:m.hrid,value:m.hrid,border:"",style:{width:"50px",height:"50px",margin:"2px"},onClick:()=>l.protection=m},{default:c(()=>[a(A,{hrid:m.hrid},null,8,["hrid"])]),_:2},1032,["value","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(i,{"min-width":"120",align:"center"},{default:c(({row:l})=>[a(v,{class:"max-w-100%",modelValue:l.protection.price,"onUpdate:modelValue":m=>l.protection.price=m,placeholder:he(l.protection),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"}),a(e(J),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(i,null,{default:c(()=>[z(w(e(s)("目标"))+": ",1)]),_:1}),a(i),a(i,{"min-width":"120",align:"center"},{default:c(()=>[a(v,{class:"max-w-100%",max:20,min:1,modelValue:e(u).config.enhanceLevel,"onUpdate:modelValue":t[16]||(t[16]=l=>e(u).config.enhanceLevel=l),placeholder:$(q.enhanceLevel),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),a(x,{class:"mx-auto",style:we({width:`${e(Ee)}px`,maxWidth:"100%"})},{default:c(()=>[a(e(J),{ref_key:"refTable",ref:Se,data:e(D),size:"large",border:"",fit:"","header-cell-style":{padding:"8px 0"},style:we({width:`${e(Ee)}px`}),"row-style":Qe},{default:c(()=>[a(i,{prop:"protectLevel",label:e(s)("Prot"),"min-width":e(fe).protectLevel,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(i,{prop:"actionsFormatted",label:e(s)("次数"),"min-width":e(fe).actionsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(i,{prop:"time",label:e(s)("时间"),"min-width":e(fe).time,align:"right"},null,8,["label","min-width"]),a(i,{prop:"expPHFormat",label:e(s)("经验 / h"),"min-width":100,align:"right"},null,8,["label"]),(h(!0),P(N,null,K(e(te),l=>(h(),L(i,{key:l.hrid,"min-width":100,"header-align":"center",align:"right"},{header:c(()=>[a(A,{class:"mt-[8px]",width:20,height:20,hrid:l.hrid},null,8,["hrid"])]),default:c(({row:m})=>[z(w(Z(l.count*m.actions)),1)]),_:2},1024))),128)),a(i,{prop:"protectsFormatted",label:e(s)("保护"),"min-width":e(fe).protectsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(i,{prop:"matCost",label:e(s)("材料费用"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"]),a(i,{prop:"matCostPH",label:e(s)("损耗"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]),e(u).config.tab==="1"&&e(Oe)().checkSecret()?(h(),L(i,{key:0,prop:"profitRateFormatted",label:e(s)("利润率"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):I("",!0),e(u).config.tab==="1"?(h(),L(i,{key:1,prop:"profitPPFormatted",label:e(s)("单个利润"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):I("",!0),e(u).config.tab==="1"?(h(),L(i,{key:2,prop:"hourlyCostFormatted",label:e(s)("工时费"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):(h(),L(i,{key:3,prop:"totalCostFormatted",label:e(s)("总费用"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]))]),_:1},8,["data","style"])]),_:1},8,["style"])])}}}),bl=Tt(cl,[["__scopeId","data-v-f328eb84"]]);export{bl as default};
