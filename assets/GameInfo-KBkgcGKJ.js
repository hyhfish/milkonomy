var Qa=Object.defineProperty;var eo=(e,t,r)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var se=(e,t,r)=>eo(e,typeof t!="symbol"?t+"":t,r);import{w as ze,C as wr,P as Tr,A as an,p as iu,E as to,z as ro,H as si,x as ar,n as no,v as io}from"./index-CMIaIRUM.js";import{g as Wn,a as uo,i as ao,_ as et}from"./index.vue_vue_type_script_setup_true_lang-BTWGwO90.js";import{g as oo,w as Ft,t as Ve,d as uu,k as au,r as ot,u as ou,f as Ke,O as Dt,ao as so,i as Le,s as X,ar as co,v as Q,aq as lo,D as hr,p as Tt,F as Oe,P as Lt,aC as fo,a5 as ci,q as re,aS as li,ad as ho,b4 as po,h as Te,G as dt,R as mo,at as Do,av as vo,au as go,aw as yo,ax as wo,ay as Eo,aT as _o,aU as Fo,b5 as Co,aQ as bo,aD as Ao,y as Lr,Y as Bo}from"./vue-CMGQ9A1z.js";import{_ as su}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Hr(e,t=0){return Math.abs(e)>=0&&Math.abs(e)<2?e=Math.round(e*10**t)/10**t:Math.abs(e)>=0&&Math.abs(e)<10?e=Math.round(e*10**Math.min(t,2))/10**Math.min(t,2):Math.abs(e)>=10&&Math.abs(e)<100?e=Math.round(e*10**Math.min(t,1))/10**Math.min(t,1):e=Math.round(e),Mo(e)}function Mo(e){const t=e.toString();if(Math.abs(e)<1e3)return t;let r="";const n=t[0]==="-",i=t.length;for(let u=n?1:0;u<i;u++)u>0&&(i-u)%3===0&&(r+=","),r+=t[u];return n?`-${r}`:r}function So(e){let t="";e/=1e9;const r=Math.floor(e/3600),n=Math.floor(e%3600/60),i=r||n?0:2,u=Math.floor(e%60*10**i)/10**i;return r&&(t+=`${r}h`),n&&(t+=`${n<10?"0":""}${n}m`),u&&(t+=`${u<10?"0":""}${u}s`),t}function Qt(e,t=2){return`${Math.round(e*100*10**t)/10**t}%`}const kr=["","K","M","B","T"];function Wh(e){for(let t=0;t<kr.length;t++)if(Math.abs(e)<10**((t+2)*3-1))return`${Hr(e/1e3**t)}${kr[t]}`;return Hr(e)}function Pt(e){for(let t=0;t<kr.length;t++)if(Math.abs(e)<10**((t+1)*3))return`${Hr(e/1e3**t,2)}${kr[t]}`;return`${e.toLocaleString("en-US")}`}var _n,fi;function xo(){return fi||(fi=1,_n=function e(t){Object.freeze(t);var r=typeof t=="function",n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(function(i){n.call(t,i)&&(!r||i!=="caller"&&i!=="callee"&&i!=="arguments")&&t[i]!==null&&(typeof t[i]=="object"||typeof t[i]=="function")&&!Object.isFrozen(t[i])&&e(t[i])}),t}),_n}var No=xo();const To=oo(No),Vt={gameData:null,marketData:null};let Pn={};const hi={},pi={};let $r={},vt={},cu=ze().buyStatus,lu=ze().sellStatus;Ft(()=>ze().gameData,()=>{const e=structuredClone(Ve(ze().gameData));Vt.gameData=e&&To(e),Pn={},vt={},Io()},{immediate:!0});Ft(()=>ze().marketData,()=>{const e=Object.freeze(structuredClone(Ve(ze().marketData)));Vt.marketData=e,vt={}},{immediate:!0});Ft([()=>ze().buyStatus,()=>ze().sellStatus],()=>{vt={}},{immediate:!0});Ft(()=>ze().buyStatus,e=>{cu=e},{immediate:!0});Ft(()=>ze().sellStatus,e=>{lu=e},{immediate:!0});function xt(){return Vt.gameData}function In(){return Vt.marketData}const di={"/items/cowbell":()=>({ask:ce("/items/bag_of_10_cowbells").ask/10||4e4,bid:ce("/items/bag_of_10_cowbells").bid/10||4e4,avg:-1,vol:-1}),"/items/coin":()=>({ask:1,bid:1,avg:1,vol:-1})};function mi(e,t,r){function n(i){const u={price:-1};switch(i){case Tr.ASK:u.price=e.ask;break;case Tr.BID:u.price=e.bid;break;case Tr.ASK_LOW:u.price=e.ask,u.price>0&&(u.price=Di(u.price,!1));break;case Tr.BID_HIGH:u.price=e.bid,u.price>0&&(u.price=Di(u.price,!0));break}return u}return{ask:n(t).price,bid:n(r).price,avg:e.avg,vol:e.vol}}const pr=[[0,1],[50,2],[100,5],[300,10]];function Di(e,t=!0){if(e<=0)return-1;let r=0;for(;e>300;)e/=10,r+=1;let n=0,i=0;for(let u=0;u<pr.length;u++)if(e<=pr[u][0]){n=i=u-1,e===pr[u][0]&&(n=u);break}return t?(e+pr[n][1])*10**r:(e-pr[i][1])*10**r}function ce(e,t=0,r=cu,n=lu){var o,s;if(!e)return{ask:-1,bid:-1,avg:-1,vol:-1};const i=kt(e);if(t){const c=(o=Vt.marketData)==null?void 0:o.marketData[e],l=c?c[t]:void 0,h={ask:(l==null?void 0:l.ask)??-1,bid:(l==null?void 0:l.bid)??-1,avg:(l==null?void 0:l.avg)??-1,vol:(l==null?void 0:l.vol)??-1};return mi(h,r,n)}if(vt[e])return vt[e];if(di[e])return vt[e]=di[e](),vt[e];if(Lo(e)&&e!=="/items/bag_of_10_cowbells")return vt[e]=Po(e),vt[e];const u=xt().shopItemDetailMap[`/shop_items/${i.hrid.split("/").pop()}`],a=((s=In().marketData[i.hrid])==null?void 0:s[0])||{ask:-1,bid:-1,avg:-1,vol:-1};return u&&u.costs[0].itemHrid===wr&&(a.ask=a.ask===-1?u.costs[0].count:Math.min(a.ask,u.costs[0].count)),vt[e]=mi(a,r,n),vt[e]}function Lo(e){return kt(e).categoryHrid==="/item_categories/loot"}function Po(e){return xt().openableLootDropMap[e].reduce((r,n)=>{const i=(n.maxCount+n.minCount)/2,u=ce(n.itemHrid);return r.ask+=u.ask*i*n.dropRate,r.bid+=u.bid*i*n.dropRate,r},{ask:0,bid:0})}function kt(e){let t=hi[e];return t||(t=xt().itemDetailMap[e],t&&(hi[e]=t)),t}function Er(e){let t=Pn[e];return t||(t=xt().actionDetailMap[e],t&&(Pn[e]=t)),t}function On(e){let t=pi[e];return t||(t=xt().communityBuffTypeDetailMap[e],t&&(pi[e]=t)),t}function Fn(){return Er("/actions/alchemy/transmute").baseTimeCost}function Cn(){return Er("/actions/alchemy/decompose").baseTimeCost}function bn(){return Er("/actions/alchemy/coinify").baseTimeCost}function An(){return Er("/actions/enhancing/enhance").baseTimeCost}function Io(){$r={},Vt.gameData&&Object.entries(Vt.gameData.actionDetailMap).forEach(([e,t])=>{(e.match(/fabric$/)||e.match(/lumber$/)||e.match(/cheese$/))&&($r[t.inputItems[0].itemHrid]=t.outputItems[0].itemHrid)}),$r["/items/rainbow_milk"]="/items/rainbow_cheese"}function jh(e){return $r[e]}let jn={};function Oo(e){return jn[`${e.originLevel}-${e.enhanceLevel}-${e.protectLevel}-${e.itemLevel}-${e.escapeLevel}`]}function Ro(e,t){jn[`${e.originLevel}-${e.enhanceLevel}-${e.protectLevel}-${e.itemLevel}-${e.escapeLevel}`]=t}function $o(){jn={}}const on={MINUTE:6e10,HOUR:36e11};function Jn(e,t){let r="/items/small_artisans_crate";const n=1*t/(8*on.HOUR);let i=0;return e.itemLevel<35?(r="/items/small_artisans_crate",i=(e.itemLevel+100)/100):e.itemLevel<70?(r="/items/medium_artisans_crate",i=(e.itemLevel-35+100)/150):(r="/items/large_artisans_crate",i=(e.itemLevel-70+100)/200),[{itemHrid:r,dropRate:n*i,minCount:1,maxCount:1}]}function Gn(e,t){return[{itemHrid:"/items/alchemy_essence",dropRate:1*t/(6*on.MINUTE)*((e.itemLevel+100)/100),minCount:1,maxCount:1}]}function zo(e,t){return t===0?0:Math.round(2*(.5+.1*1.05**(e.itemLevel||0))*2**t)}function qo(e,t){return[{itemHrid:"/items/enhancing_essence",dropRate:1*t/(2*on.MINUTE)*((e.itemLevel+100)/100),minCount:1,maxCount:1}]}function Uo(e,t){let r="/items/small_artisans_crate";const n=1*t/(4*on.HOUR);let i=0;return e.itemLevel<35?(r="/items/small_artisans_crate",i=(e.itemLevel+100)/100):e.itemLevel<70?(r="/items/medium_artisans_crate",i=(e.itemLevel-35+100)/150):(r="/items/large_artisans_crate",i=(e.itemLevel-70+100)/200),[{itemHrid:r,dropRate:n*i,minCount:1,maxCount:1}]}function Ho(e,t){return 1.4*(1+t)*(10+e.itemLevel)}function ko(e){return 1*(10+e.itemLevel)}function Vo(e){return 1.4*(10+e.itemLevel)}function Zo(e){return 1.6*(10+e.itemLevel)}const sn=[{type:"off_hand",hrid:"/items/eye_watch",enhanceLevel:10},{type:"head",hrid:"/items/red_culinary_hat",enhanceLevel:10},{type:"hands",hrid:"/items/enchanted_gloves",enhanceLevel:10},{type:"feet",hrid:"/items/collectors_boots",enhanceLevel:10},{type:"neck",hrid:"",enhanceLevel:void 0},{type:"earrings",hrid:"",enhanceLevel:void 0},{type:"ring",hrid:"",enhanceLevel:void 0},{type:"pouch",hrid:"",enhanceLevel:void 0}],fu=Object.freeze({milking:["/items/processing_tea","/items/gathering_tea","/items/efficiency_tea"],foraging:["/items/processing_tea","/items/gathering_tea","/items/efficiency_tea"],woodcutting:["/items/processing_tea","/items/gathering_tea","/items/efficiency_tea"],cheesesmithing:["/items/wisdom_tea","/items/artisan_tea","/items/efficiency_tea"],crafting:["/items/wisdom_tea","/items/artisan_tea","/items/efficiency_tea"],tailoring:["/items/wisdom_tea","/items/artisan_tea","/items/efficiency_tea"],brewing:["/items/gourmet_tea","/items/artisan_tea","/items/efficiency_tea"],cooking:["/items/gourmet_tea","/items/artisan_tea","/items/efficiency_tea"],alchemy:["/items/wisdom_tea","/items/efficiency_tea","/items/catalytic_tea"],enhancing:["/items/wisdom_tea","/items/blessed_tea","/items/super_enhancing_tea"]}),hu=[{type:"experience",hrid:"/community_buff_types/experience",level:void 0},{type:"gathering_quantity",hrid:"/community_buff_types/gathering_quantity",level:void 0},{type:"production_efficiency",hrid:"/community_buff_types/production_efficiency",level:void 0},{type:"enhancing_speed",hrid:"/community_buff_types/enhancing_speed",level:void 0}],Wo=5,pu=uu("player",{state:()=>({config:Yo(),presets:mu(),presetIndex:vu()}),actions:{commit(){Ko(this.presets)},setActionConfig(e,t){this.config=e,this.presets[t]=e,this.commit(),this.setPresetIndex(t)},switchTo(e){this.config=this.presets[e],this.setPresetIndex(e)},removePreset(e){this.presets.length<=1||(this.presets.splice(e,1),this.commit(),this.presetIndex===e?this.setPresetIndex(0):this.presetIndex>e&&this.setPresetIndex(this.presetIndex-1),this.config=this.presets[this.presetIndex])},setPresetIndex(e){this.presetIndex=e,Xo(e),jo()},isOverflow(){return this.presets.length>=Wo}}});function jo(){ze().clearAllCaches(),$o()}function Rn(e,t){const r=new Map;for(const u of Object.values(an)){const a=Object.values(ze().gameData.itemDetailMap).filter(o=>{var s,c;return((s=o.equipmentDetail)==null?void 0:s.noncombatStats)&&Object.keys((c=o.equipmentDetail)==null?void 0:c.noncombatStats).length>0}).filter(o=>{var s;return((s=o.equipmentDetail)==null?void 0:s.type)===`/equipment_types/${u}_tool`}).find(o=>o.itemLevel===80);r.set(u,{action:u,playerLevel:100,tool:{type:`${u}_tool`,hrid:a==null?void 0:a.hrid,enhanceLevel:10},legs:{type:"legs",hrid:void 0,enhanceLevel:void 0},body:{type:"body",hrid:void 0,enhanceLevel:void 0},charm:{type:"charm",hrid:void 0,enhanceLevel:void 0},houseLevel:4,tea:structuredClone(fu[u])})}const n=new Map;for(const u of Object.values(sn))n.set(u.type,{type:u.type,hrid:u.hrid,enhanceLevel:u.enhanceLevel});const i=new Map;for(const u of Object.values(hu))i.set(u.type,{type:u.type,hrid:u.hrid,level:u.level});return{actionConfigMap:r,specialEquimentMap:n,communityBuffMap:i,name:e,color:t}}const Jo="player-action-config",du="player-action-config-presets";function Go(){const e={actionConfigMap:new Map,specialEquimentMap:new Map,communityBuffMap:new Map,name:"0",color:"#11BF11"};try{const t=JSON.parse(localStorage.getItem(Jo)||"{}");e.actionConfigMap=new Map(Object.entries(t.actionConfigMap||{})),e.specialEquimentMap=new Map(Object.entries(t.specialEquimentMap||{})),e.communityBuffMap=new Map(Object.entries(t.communityBuffMap||{}))}catch{}return e}function Yo(){const e=mu(),t=Math.min(vu(),e.length-1);return e[t]}function mu(){const e=[];try{const t=JSON.parse(localStorage.getItem(du)||"[]");for(const r of t){const n={name:r.name,color:r.color,actionConfigMap:new Map(Object.entries(r.actionConfigMap||{})),specialEquimentMap:new Map(Object.entries(r.specialEquimentMap||{})),communityBuffMap:new Map(Object.entries(r.communityBuffMap||{}))};e.push(n)}e.length===0&&e.push(Go())}catch{}return e.length===0&&e.push(Rn("0","#11BF11")),e}function Ko(e){const t=e.map(r=>{const n={};for(const[i,u]of Object.entries(r))u instanceof Map?n[i]=Object.fromEntries(u.entries()):n[i]=u;return n});localStorage.setItem(du,JSON.stringify(t))}const Du="player-action-preset-index";function vu(){const e=localStorage.getItem(Du);return e?Number.parseInt(e,10):0}function Xo(e){localStorage.setItem(Du,String(e))}function mr(){return pu(iu)}function Qo(e,t){mr().setActionConfig(e,t),mr().commit()}let cn=structuredClone(Ve(mr().config));const _r=structuredClone(Ve(mr().config));let ln=[],gu=[],yu=[],ie={};Ft(()=>ze().gameData,()=>{ze().gameData&&(ln=Object.freeze(structuredClone(Object.values(Ve(ze().gameData.itemDetailMap)))).filter(e=>{var t,r;return((t=e.equipmentDetail)==null?void 0:t.noncombatStats)&&Object.keys((r=e.equipmentDetail)==null?void 0:r.noncombatStats).length>0}),gu=Object.freeze(structuredClone(Object.values(Ve(ze().gameData.itemDetailMap)))).filter(e=>e.equipmentDetail),yu=Object.freeze(structuredClone(Object.values(Ve(ze().gameData.itemDetailMap)))).filter(e=>e.categoryHrid==="/item_categories/drink"),es(),ts(),Eu())},{immediate:!0});Ft(()=>mr().config,e=>{cn=structuredClone(Ve(e)),Eu()},{immediate:!0});function es(){for(const e of Object.values(an)){const t=wu(e).find(r=>r.itemLevel===80);_r.actionConfigMap.set(e,{action:e,playerLevel:100,tool:{type:`${e}_tool`,hrid:t==null?void 0:t.hrid,enhanceLevel:10},legs:{type:"legs",hrid:void 0,enhanceLevel:void 0},body:{type:"body",hrid:void 0,enhanceLevel:void 0},charm:{type:"charm",hrid:void 0,enhanceLevel:void 0},houseLevel:4,tea:structuredClone(fu[e])})}}function ts(){const e=new Map;for(const t of Object.values(sn))_r.specialEquimentMap.set(t.type,{type:t.type,hrid:t.hrid,enhanceLevel:t.enhanceLevel});return e}function Yn(e){return cn.actionConfigMap.get(e)??_r.actionConfigMap.get(e)}function wu(e){return ln.filter(t=>{var r;return((r=t.equipmentDetail)==null?void 0:r.type)===`/equipment_types/${e}_tool`}).sort((t,r)=>t.itemLevel-r.itemLevel)}function Jh(){return gu}function Bn(e,t){return ln.filter(r=>Object.keys(r.equipmentDetail.noncombatStats).find(n=>n.includes(e))).filter(r=>Wn(r)===t)}function rs(){return ln.filter(e=>sn.find(t=>t.type===Wn(e)))}function ns(e){return rs().filter(t=>Wn(t)===e)}function is(e){return cn.specialEquimentMap.get(e)??_r.specialEquimentMap.get(e)}function us(e){return cn.communityBuffMap.get(e)??_r.communityBuffMap.get(e)}function as(e){return yu.filter(t=>{var r;return(r=t.consumableDetail)==null?void 0:r.usableInActionTypeMap[`/action_types/${e}`]}).sort((t,r)=>t.itemLevel-r.itemLevel).sort((t,r)=>Number(t.hrid.includes(e))-Number(r.hrid.includes(e)))}function Fr(e){return(Yn(e.action).tea||[]).map(t=>({hrid:t,count:3600/300/e.consumePH*(1+os()),marketPrice:ce(t).ask}))}function Eu(){var t,r,n;if(!xt())return;ie={};const e=xt().enhancementLevelTotalBonusMultiplierTable;for(const i of to){const u=is(i);if(u&&u.hrid){const a=kt(u.hrid);(t=a.equipmentDetail)!=null&&t.noncombatStats&&Object.entries(a.equipmentDetail.noncombatStats).forEach(([o,s])=>{var l;const c=(l=a.equipmentDetail)==null?void 0:l.noncombatEnhancementBonuses[o];ie[o]=(ie[o]||0)+s+(c||0)*e[u.enhanceLevel||0]})}}for(const i of ro){const u=us(i);if(u&&u.hrid&&u.level){const a=On(u.hrid),o=a.buff;for(const s in a.usableInActionTypeMap){const c=uo(s);o.typeHrid==="/buff_types/action_speed"&&(ie[`${c}Speed`]=(ie[`${c}Speed`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1))),o.typeHrid==="/buff_types/wisdom"&&(ie[`${c}Experience`]=(ie[`${c}Experience`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1))),o.typeHrid==="/buff_types/gathering"&&(ie[`${c}Gathering`]=(ie[`${c}Gathering`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1))),o.typeHrid==="/buff_types/efficiency"&&(ie[`${c}Efficiency`]=(ie[`${c}Efficiency`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1)))}}}for(const i of an){const u=Yn(i);for(const a of Object.values(u))if(a&&typeof a=="object"&&!Array.isArray(a)&&a.hrid){const o=kt(a.hrid);(r=o.equipmentDetail)!=null&&r.noncombatStats&&Object.entries(o.equipmentDetail.noncombatStats).forEach(([s,c])=>{var h;const l=(h=o.equipmentDetail)==null?void 0:h.noncombatEnhancementBonuses[s];ie[s]=(ie[s]||0)+c+(l||0)*e[a.enhanceLevel||0]})}Object.keys(si[i]).forEach(a=>{let o=i;(a==="RareFind"||a==="Experience")&&(o="skilling"),ie[`${o}${a}`]=(ie[`${o}${a}`]||0)+(si[i][a]||0)*(u.houseLevel||0)});for(const a of u.tea||[]){const o=kt(a);(n=o.consumableDetail)!=null&&n.buffs&&o.consumableDetail.buffs.forEach(s=>{s.typeHrid===`/buff_types/${i}_level`&&(ie[`${i}Level`]=(ie[`${i}Level`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/efficiency"&&(ie[`${i}Efficiency`]=(ie[`${i}Efficiency`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/artisan"&&(ie[`${i}Artisan`]=(ie[`${i}Artisan`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/action_level"&&(ie[`${i}Level`]=(ie[`${i}Level`]||0)-s.flatBoost),s.typeHrid==="/buff_types/gourmet"&&(ie[`${i}Gourmet`]=(ie[`${i}Gourmet`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid===`/buff_types/${i}_success`&&(ie[`${i}Success`]=(ie[`${i}Success`]||0)+s.ratioBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/blessed"&&(ie[`${i}Blessed`]=(ie[`${i}Blessed`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/action_speed"&&(ie[`${i}Speed`]=(ie[`${i}Speed`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/gathering"&&(ie[`${i}Gathering`]=(ie[`${i}Gathering`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/processing"&&(ie[`${i}Processing`]=(ie[`${i}Processing`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/wisdom"&&(ie[`${i}Experience`]=(ie[`${i}Experience`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0)))})}}}function rt(e,t){return(ie[`${e}${t}`]||0)+(ie[`skilling${t}`]||0)}function os(){return ie.drinkConcentration||0}function Kn(e){return Yn(e).playerLevel+rt(e,"Level")}function ss(e){const r=Kn("alchemy");return r>=e.itemLevel?0:-.9*(1-r/e.itemLevel)}function cs(e){const t="enhancing",r=Kn(t),n=r>=e.itemLevel?(r-e.itemLevel)*5e-4:-.5*(1-r/e.itemLevel),i=rt(t,"Success");return n+i}const ls=uu("price",{state:()=>({map:fs(),activated:ps()}),actions:{commit(){hs(this.map),ze().clearAllCaches()},setPrice(e){var r,n;let t=this.map.get(tr(e.hrid,e.level));t||(t={hrid:e.hrid,level:e.level,ask:{manual:!1,manualPrice:void 0},bid:{manual:!1,manualPrice:void 0}},this.map.set(tr(e.hrid,e.level),t)),Object.assign(t.ask,e.ask),Object.assign(t.bid,e.bid);for(const[i,u]of this.map)!((r=u.ask)!=null&&r.manual)&&!((n=u.bid)!=null&&n.manual)&&this.map.delete(i)},deletePrice(e){this.map.delete(tr(e.hrid,e.level)),this.commit()},setActivated(e){this.activated=e,ds(String(e)),ze().clearAllCaches()}}}),_u="price-list";function fs(){const e=new Map;try{const t=JSON.parse(localStorage.getItem(_u)||"[]");for(const r of t)e.set(tr(r.hrid,r.level),r)}catch{}return e}function hs(e){const t=Array.from(e.values());localStorage.setItem(_u,JSON.stringify(t))}const Fu="price-activated";function ps(){return localStorage.getItem(Fu)==="true"}function ds(e){localStorage.setItem(Fu,e)}function tr(e,t){return t?`${e}-${t}`:e}function Et(){return ls(iu)}async function Gh(e){await new Promise(r=>setTimeout(r,0));let t=structuredClone(Array.from(Ve(Et().map).values()));return e.name&&(t=t.filter(r=>ar(kt(r.hrid).name).toLocaleLowerCase().includes(e.name.toLowerCase()))),{list:t.slice((e.currentPage-1)*e.size,e.currentPage*e.size),total:t.length}}function Yh(e,t,r){vi(e,t,"ingredient"),vi(e,r,"product"),Et().commit()}function vi(e,t,r){for(let n=0;n<t.length;n++){const i=e[`${r}ListWithPrice`][n].hrid,u=e[`${r}ListWithPrice`][n].level,a=ms(i,u),o=!!t[n].manual;(o||a)&&Et().setPrice({hrid:i,level:u,[r==="ingredient"?"ask":"bid"]:{manual:o,manualPrice:t[n].price}})}}function Kh(e){Et().setPrice(e),Et().commit()}const Cr=structuredClone(Ve(Et().$state));Ft(()=>Et().map,()=>{Cr.map=Object.freeze(structuredClone(Ve(Et().map)))},{deep:!0});Ft(()=>Et().activated,()=>{Cr.activated=Et().activated});function Vr(e,t){return Ds()?Cr.map.get(tr(e,t)):null}function ms(e,t){return Cr.map.has(tr(e,t))}function Ds(){return Cr.activated}function Xh(e,t,r){var u,a,o,s;const n=(a=(u=Vr(e,t))==null?void 0:u[r])==null?void 0:a.manual,i=(s=(o=Vr(e,t))==null?void 0:o[r])==null?void 0:s.manualPrice;return n?i:ce(e,t)[r]}class Xn{constructor(t){se(this,"hrid");se(this,"project");se(this,"action");se(this,"ingredientPriceConfigList");se(this,"productPriceConfigList");se(this,"catalystRank");se(this,"result");se(this,"favorite");se(this,"hasManualPrice",!1);se(this,"config");se(this,"enhanceLevel",0);se(this,"_item");se(this,"_key");se(this,"_ingredientListWithPrice");se(this,"_productListWithPrice");se(this,"_actionsPH");se(this,"_consumePH");se(this,"_gainPH");const{hrid:r,project:n,action:i,ingredientPriceConfigList:u=[],productPriceConfigList:a=[],catalystRank:o}=t;this.config=t,this.hrid=r,this.project=n,this.action=i,this.ingredientPriceConfigList=u,this.productPriceConfigList=a,this.catalystRank=o}get item(){return this._item||(this._item=kt(this.hrid)),this._item}get id(){return`${this.hrid}-${this.project}-${this.action}`}get key(){return this._key||(this._key=this.item.hrid.substring(this.item.hrid.lastIndexOf("/")+1)),this._key}get efficiency(){return 1+Math.max(0,(this.playerLevel-this.actionLevel)*.01)+rt(this.action,"Efficiency")}get speed(){return 1+rt(this.action,"Speed")}get isEquipment(){return this.item.categoryHrid==="/item_categories/equipment"}handlePrice(t,r,n){var u,a,o,s;const i=[];for(let c=0;c<t.length;c++){const l=t[c],h=r[c],p=(a=(u=Vr(l.hrid,l.level))==null?void 0:u[n])==null?void 0:a.manual,d=(s=(o=Vr(l.hrid,l.level))==null?void 0:o[n])==null?void 0:s.manualPrice;!(h!=null&&h.immutable)&&p&&(this.hasManualPrice=!0);const D=h!=null&&h.immutable?h.price:p?d:l.marketPrice;i.push(Object.assign(l,{price:D}))}return i}get ingredientListWithPrice(){if(!this._ingredientListWithPrice){const t=this.ingredientList.map(r=>({...r,countPH:r.count*this.consumePH,counterCountPH:r.counterCount?r.counterCount*this.consumePH:void 0}));this._ingredientListWithPrice=this.handlePrice(t,this.ingredientPriceConfigList,"ask")}return this._ingredientListWithPrice}get productListWithPrice(){if(!this._productListWithPrice){const t=this.productList.map(r=>({...r,countPH:r.count*this.gainPH*(r.rate||1),counterCountPH:r.counterCount?r.counterCount*this.gainPH*(r.rate||1):void 0}));this._productListWithPrice=this.handlePrice(t,this.productPriceConfigList,"bid")}return this._productListWithPrice}get cost(){return this.ingredientListWithPrice.reduce((t,r)=>t+r.count*r.price,0)}get cost4Mat(){return this.ingredientListWithPrice.slice(1).reduce((t,r)=>t+r.count*r.price,0)}get gainEscapePH(){const t=this.ingredientListWithPrice[0],r=this.productListWithPrice[1];return t?!r||r.hrid!==t.hrid?t.countPH*t.price:t.countPH*r.price*.98:0}get income(){return this.productListWithPrice.reduce((r,n)=>{const i=n.hrid===wr?.98:1;return r+n.count*(n.rate||1)*n.price/i},0)*.98}get actionsPH(){return this._actionsPH===void 0&&(this._actionsPH=60*60*1e9/this.timeCost*this.efficiency),this._actionsPH}get consumePH(){return this._consumePH===void 0&&(this._consumePH=this.actionsPH),this._consumePH}get gainPH(){return this._gainPH===void 0&&(this._gainPH=this.actionsPH*this.successRate),this._gainPH}get valid(){for(const t of this.ingredientListWithPrice)if(t.price===-1)return!1;return!0}get actionItem(){}get calculator(){return this}get exp(){var t,r;return(((r=(t=this.actionItem)==null?void 0:t.experienceGain)==null?void 0:r.value)||0)*(1+rt(this.action,"Experience"))}run(){const t=this.exp*this.actionsPH,r=this.cost*this.consumePH,n=this.cost4Mat*this.consumePH,i=this.income*this.gainPH;let u=i-r;const a=u/this.actionsPH;let o=r?u/r:0;this.valid||(u=-1/24,o=-1);const s=r-this.gainEscapePH,c=s/u;return this.result={hrid:this.item.hrid,name:ar(this.item.name),project:this.project,successRate:this.successRate,costPH:r,cost4MatPH:n,consumePH:this.consumePH,gainPH:this.gainPH,incomePH:i,profitPH:u,profitRate:o,costPHFormat:Pt(r),cost4MatPHFormat:Pt(n),incomePHFormat:Pt(i),profitPHFormat:Pt(u),profitPDFormat:Pt(u*24),profitPP:a,profitPPFormat:Pt(a),profitRateFormat:Qt(o),efficiencyFormat:Qt(this.efficiency-1),speedFormat:Qt(this.speed-1),timeCostFormat:So(this.timeCost),successRateFormat:Qt(this.successRate),expPH:t,expPHFormat:Pt(t),cost4EnhancePHFormat:Pt(s),risk:c,riskFormat:Hr(c,2)},this}get playerLevel(){return Kn(this.action)}get essenceRatio(){return rt(this.action,"EssenceFind")||0}get rareRatio(){return rt(this.action,"RareFind")||0}get successRate(){return 1}}class Qn extends Xn{get actionLevel(){return this.item.itemLevel}constructor(t){super({...t,action:"alchemy"})}get catalystRatio(){let t=rt(this.action,"Success")||0;return t+=this.catalystRank?this.catalystRank*.1+.05:0,t}get successRate(){return Math.min(1,this.baseSuccessRate*(1+ss(this.item)+this.catalystRatio))}get exp(){return this.baseExp*(1+rt(this.action,"Experience"))}}class Qh extends Qn{constructor(r){super({...r,project:ar("转化")});se(this,"_ingredientList");se(this,"_productList")}get className(){return"TransmuteCalculator"}get catalyst(){if(this.catalystRank===1)return"catalyst_of_transmutation";if(this.catalystRank===2)return"prime_catalyst"}get available(){var r;return((r=this.item.alchemyDetail)==null?void 0:r.transmuteDropTable)!=null}get timeCost(){return Fn()/this.speed}get baseSuccessRate(){return this.item.alchemyDetail.transmuteSuccessRate}get baseExp(){return Zo(this.item)}get ingredientList(){if(!this._ingredientList){let r=[{hrid:this.item.hrid,count:this.item.alchemyDetail.bulkMultiplier*(1-this.sameItemCounter),counterCount:this.item.alchemyDetail.bulkMultiplier*this.sameItemCounter,marketPrice:ce(this.item.hrid).ask},{hrid:wr,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:Math.max(Math.floor(this.item.sellPrice/5),50)}];this.catalyst&&r.push({hrid:`/items/${this.catalyst}`,count:this.successRate,marketPrice:ce(`/items/${this.catalyst}`).ask}),r=r.concat(Fr(this)),this._ingredientList=r}return this._ingredientList}get productList(){if(!this._productList){const r=this.item.alchemyDetail.transmuteDropTable;this._productList=r.map(n=>({hrid:n.itemHrid,count:(n.maxCount-(n.itemHrid===this.item.hrid?n.maxCount:0))*this.item.alchemyDetail.bulkMultiplier,counterCount:(n.itemHrid===this.item.hrid?n.maxCount:0)*this.item.alchemyDetail.bulkMultiplier,rate:n.dropRate,marketPrice:ce(n.itemHrid).bid})).concat(Jn(this.item,Fn()).map(n=>({hrid:n.itemHrid,count:(n.minCount+n.maxCount)/2/this.successRate,counterCount:0,rate:n.dropRate*(1+this.rareRatio),marketPrice:ce(n.itemHrid).bid}))).concat(Gn(this.item,Fn()).map(n=>({hrid:n.itemHrid,count:(n.minCount+n.maxCount)/2/this.successRate,counterCount:0,rate:n.dropRate*(1+this.essenceRatio),marketPrice:ce(n.itemHrid).bid})))}return this._productList}get sameItemCounter(){const r=this.item.alchemyDetail.transmuteDropTable.find(n=>n.itemHrid===this.item.hrid);return r?Math.min(1,r.maxCount*(r.dropRate||1)*this.successRate):0}}class vs extends Qn{constructor(r){super({...r,project:ar("分解")});se(this,"enhanceLevel");se(this,"_ingredientList");se(this,"_productList");this.enhanceLevel=r.enhanceLevel||0}get className(){return"DecomposeCalculator"}get catalyst(){if(this.catalystRank===1)return"catalyst_of_decomposition";if(this.catalystRank===2)return"prime_catalyst"}get available(){var r;return((r=this.item.alchemyDetail)==null?void 0:r.decomposeItems)!=null}get timeCost(){return Cn()/this.speed}get baseSuccessRate(){return .6}get baseExp(){return Vo(this.item)}get ingredientList(){if(!this._ingredientList){let r=[{hrid:this.item.hrid,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:ce(this.item.hrid,this.enhanceLevel).ask,level:this.enhanceLevel},{hrid:wr,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:50+5*this.item.itemLevel}];this.catalyst&&r.push({hrid:`/items/${this.catalyst}`,count:this.successRate,marketPrice:ce(`/items/${this.catalyst}`).ask}),r=r.concat(Fr(this)),this._ingredientList=r}return this._ingredientList}get productList(){if(!this._productList){let r=[];this.enhanceLevel>0&&r.push({hrid:"/items/enhancing_essence",count:zo(this.item,this.enhanceLevel),marketPrice:ce("/items/enhancing_essence").bid}),r=r.concat(this.item.alchemyDetail.decomposeItems.map(n=>({hrid:n.itemHrid,count:n.count*this.item.alchemyDetail.bulkMultiplier,marketPrice:ce(n.itemHrid).bid}))).concat(Jn(this.item,Cn()).map(n=>({hrid:n.itemHrid,rate:n.dropRate*(1+this.rareRatio),count:(n.minCount+n.maxCount)/2/this.successRate,marketPrice:ce(n.itemHrid).bid}))).concat(Gn(this.item,Cn()).map(n=>({hrid:n.itemHrid,count:(n.minCount+n.maxCount)/2/this.successRate,rate:n.dropRate*(1+this.essenceRatio),marketPrice:ce(n.itemHrid).bid}))),this._productList=r}return this._productList}}class ep extends Qn{constructor(r){super({...r,project:ar("点金")});se(this,"_ingredientList");se(this,"_productList")}get className(){return"CoinifyCalculator"}get catalyst(){if(this.catalystRank===1)return"catalyst_of_coinification";if(this.catalystRank===2)return"prime_catalyst"}get available(){var r;return(r=this.item.alchemyDetail)==null?void 0:r.isCoinifiable}get timeCost(){return bn()/this.speed}get baseSuccessRate(){return .7}get baseExp(){return ko(this.item)}get ingredientList(){if(!this._ingredientList){let r=[{hrid:this.item.hrid,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:ce(this.item.hrid).ask}];this.catalyst&&r.push({hrid:`/items/${this.catalyst}`,count:this.successRate,marketPrice:ce(`/items/${this.catalyst}`).ask}),r=r.concat(Fr(this)),this._ingredientList=r}return this._ingredientList}get productList(){return this._productList||(this._productList=[{hrid:wr,count:1,marketPrice:this.item.sellPrice*5*this.item.alchemyDetail.bulkMultiplier}].concat(Jn(this.item,bn()).map(r=>({hrid:r.itemHrid,count:(r.minCount+r.maxCount)/2/this.successRate,rate:r.dropRate*(1+this.rareRatio),marketPrice:ce(r.itemHrid).bid}))).concat(Gn(this.item,bn()).map(r=>({hrid:r.itemHrid,count:(r.minCount+r.maxCount)/2/this.successRate,rate:r.dropRate*(1+this.essenceRatio),marketPrice:ce(r.itemHrid).bid})))),this._productList}}function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zr.apply(null,arguments)}var Cu={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function bu(e,t){if(Wr(e,t))return e[t];throw typeof e[t]=="function"&&gs(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Au(e,t,r){if(Wr(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Wr(e,t){return!ys(e)&&!Array.isArray(e)?!1:Dr(ws,t)?!0:!(t in Object.prototype||t in Function.prototype)}function gs(e,t){return e==null||typeof e[t]!="function"||Dr(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Dr(Es,t)?!0:!(t in Object.prototype||t in Function.prototype)}function ys(e){return typeof e=="object"&&e&&e.constructor===Object}var ws={length:!0,name:!0},Es={toString:!0,valueOf:!0,toLocaleString:!0};class _s{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return bu(this.wrappedObject,t)}set(t,r){return Au(this.wrappedObject,t,r),this}has(t){return Wr(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return Fs(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var r of this.keys())t(this.get(r),r,this)}delete(t){Wr(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function Fs(e,t){return{next:()=>{var r=e.next();return r.done?r:{value:t(r.value),done:!1}}}}function be(e){return typeof e=="number"}function Ae(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Cs(e){return typeof e=="bigint"}function Bu(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Mu(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Su(e){return e&&e.constructor.prototype.isUnit===!0||!1}function ft(e){return typeof e=="string"}var Fe=Array.isArray;function Me(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function jr(e){return Array.isArray(e)||Me(e)}function bs(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function As(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function xu(e){return e&&e.constructor.prototype.isRange===!0||!1}function fn(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Bs(e){return typeof e=="boolean"}function Ms(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Ss(e){return e&&e.constructor.prototype.isHelp===!0||!1}function xs(e){return typeof e=="function"}function Ns(e){return e instanceof Date}function Ts(e){return e instanceof RegExp}function ei(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Bu(e)&&!Mu(e))}function Ls(e){return e?e instanceof Map||e instanceof _s||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function Ps(e){return e===null}function Is(e){return e===void 0}function Os(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Rs(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function $s(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function zs(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function qs(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Us(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Hs(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function ks(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Vs(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Zs(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ws(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function js(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Js(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Gs(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ys(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ks(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Xs(e){return e&&e.constructor.prototype.isChain===!0||!1}function wt(e){var t=typeof e;return t==="object"?e===null?"null":Ae(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Ce(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return Ce(r)});if(e instanceof Date)return new Date(e.valueOf());if(Ae(e))return e;if(ei(e))return Qs(e,Ce);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function Qs(e,t){var r={};for(var n in e)Dr(e,n)&&(r[n]=t(e[n]));return r}function ec(e,t){for(var r in t)Dr(t,r)&&(e[r]=t[r]);return e}function $t(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;n++)if(!$t(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!$t(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Dr(e,t){return e&&Object.hasOwnProperty.call(e,t)}function tc(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],u=e[i];u!==void 0&&(r[i]=u)}return r}var rc=["Matrix","Array"],nc=["number","BigNumber","Fraction"],it=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Cu)};Zr(it,Cu,{MATRIX_OPTIONS:rc,NUMBER_OPTIONS:nc});function gi(){return!0}function st(){return!1}function Yt(){}const yi="Argument is not a typed-function.";function Nu(){function e(E){return typeof E=="object"&&E!==null&&E.constructor===Object}const t=[{name:"number",test:function(E){return typeof E=="number"}},{name:"string",test:function(E){return typeof E=="string"}},{name:"boolean",test:function(E){return typeof E=="boolean"}},{name:"Function",test:function(E){return typeof E=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(E){return E instanceof Date}},{name:"RegExp",test:function(E){return E instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(E){return E===null}},{name:"undefined",test:function(E){return E===void 0}}],r={name:"any",test:gi,isAny:!0};let n,i,u=0,a={createCount:0};function o(E){const A=n.get(E);if(A)return A;let S='Unknown type "'+E+'"';const P=E.toLowerCase();let q;for(q of i)if(q.toLowerCase()===P){S+='. Did you mean "'+q+'" ?';break}throw new TypeError(S)}function s(E){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const S=A?o(A).index:i.length,P=[];for(let O=0;O<E.length;++O){if(!E[O]||typeof E[O].name!="string"||typeof E[O].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const j=E[O].name;if(n.has(j))throw new TypeError('Duplicate type name "'+j+'"');P.push(j),n.set(j,{name:j,test:E[O].test,isAny:E[O].isAny,index:S+O,conversionsTo:[]})}const q=i.slice(S);i=i.slice(0,S).concat(P).concat(q);for(let O=S+P.length;O<i.length;++O)n.get(i[O]).index=O}function c(){n=new Map,i=[],u=0,s([r],!1)}c(),s(t);function l(){let E;for(E of i)n.get(E).conversionsTo=[];u=0}function h(E){const A=i.filter(S=>{const P=n.get(S);return!P.isAny&&P.test(E)});return A.length?A:["any"]}function p(E){return E&&typeof E=="function"&&"_typedFunctionData"in E}function d(E,A,S){if(!p(E))throw new TypeError(yi);const P=S&&S.exact,q=Array.isArray(A)?A.join(","):A,O=F(q),j=m(O);if(!P||j in E.signatures){const ve=E._typedFunctionData.signatureMap.get(j);if(ve)return ve}const k=O.length;let J;if(P){J=[];let ve;for(ve in E.signatures)J.push(E._typedFunctionData.signatureMap.get(ve))}else J=E._typedFunctionData.signatures;for(let ve=0;ve<k;++ve){const Ee=O[ve],Ie=[];let Xe;for(Xe of J){const Ye=b(Xe.params,ve);if(!(!Ye||Ee.restParam&&!Ye.restParam)){if(!Ye.hasAny){const ht=g(Ye);if(Ee.types.some(pt=>!ht.has(pt.name)))continue}Ie.push(Xe)}}if(J=Ie,J.length===0)break}let H;for(H of J)if(H.params.length<=k)return H;throw new TypeError("Signature not found (signature: "+(E.name||"unnamed")+"("+m(O,", ")+"))")}function D(E,A,S){return d(E,A,S).implementation}function f(E,A){const S=o(A);if(S.test(E))return E;const P=S.conversionsTo;if(P.length===0)throw new Error("There are no conversions to "+A+" defined.");for(let q=0;q<P.length;q++)if(o(P[q].from).test(E))return P[q].convert(E);throw new Error("Cannot convert "+E+" to "+A)}function m(E){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return E.map(S=>S.name).join(A)}function v(E){const A=E.indexOf("...")===0,P=(A?E.length>3?E.slice(3):"any":E).split("|").map(k=>o(k.trim()));let q=!1,O=A?"...":"";return{types:P.map(function(k){return q=k.isAny||q,O+=k.name+"|",{name:k.name,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:null,conversionIndex:-1}}),name:O.slice(0,-1),hasAny:q,hasConversion:!1,restParam:A}}function _(E){const A=E.types.map(j=>j.name),S=G(A);let P=E.hasAny,q=E.name;const O=S.map(function(j){const k=o(j.from);return P=k.isAny||P,q+="|"+j.from,{name:j.from,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:j,conversionIndex:j.index}});return{types:E.types.concat(O),name:q,hasAny:P,hasConversion:O.length>0,restParam:E.restParam}}function g(E){return E.typeSet||(E.typeSet=new Set,E.types.forEach(A=>E.typeSet.add(A.name))),E.typeSet}function F(E){const A=[];if(typeof E!="string")throw new TypeError("Signatures must be strings");const S=E.trim();if(S==="")return A;const P=S.split(",");for(let q=0;q<P.length;++q){const O=v(P[q].trim());if(O.restParam&&q!==P.length-1)throw new SyntaxError('Unexpected rest parameter "'+P[q]+'": only allowed for the last parameter');if(O.types.length===0)return null;A.push(O)}return A}function w(E){const A=ge(E);return A?A.restParam:!1}function y(E){if(!E||E.types.length===0)return gi;if(E.types.length===1)return o(E.types[0].name).test;if(E.types.length===2){const A=o(E.types[0].name).test,S=o(E.types[1].name).test;return function(q){return A(q)||S(q)}}else{const A=E.types.map(function(S){return o(S.name).test});return function(P){for(let q=0;q<A.length;q++)if(A[q](P))return!0;return!1}}}function C(E){let A,S,P;if(w(E)){A=Ne(E).map(y);const q=A.length,O=y(ge(E)),j=function(k){for(let J=q;J<k.length;J++)if(!O(k[J]))return!1;return!0};return function(J){for(let H=0;H<A.length;H++)if(!A[H](J[H]))return!1;return j(J)&&J.length>=q+1}}else return E.length===0?function(O){return O.length===0}:E.length===1?(S=y(E[0]),function(O){return S(O[0])&&O.length===1}):E.length===2?(S=y(E[0]),P=y(E[1]),function(O){return S(O[0])&&P(O[1])&&O.length===2}):(A=E.map(y),function(O){for(let j=0;j<A.length;j++)if(!A[j](O[j]))return!1;return O.length===A.length})}function b(E,A){return A<E.length?E[A]:w(E)?ge(E):null}function B(E,A){const S=b(E,A);return S?g(S):new Set}function N(E){return E.conversion===null||E.conversion===void 0}function M(E,A){const S=new Set;return E.forEach(P=>{const q=B(P.params,A);let O;for(O of q)S.add(O)}),S.has("any")?["any"]:Array.from(S)}function T(E,A,S){let P,q;const O=E||"unnamed";let j=S,k;for(k=0;k<A.length;k++){const Ee=[];if(j.forEach(Ie=>{const Xe=b(Ie.params,k),Ye=y(Xe);(k<Ie.params.length||w(Ie.params))&&Ye(A[k])&&Ee.push(Ie)}),Ee.length===0){if(q=M(j,k),q.length>0){const Ie=h(A[k]);return P=new TypeError("Unexpected type of argument in function "+O+" (expected: "+q.join(" or ")+", actual: "+Ie.join(" | ")+", index: "+k+")"),P.data={category:"wrongType",fn:O,index:k,actual:Ie,expected:q},P}}else j=Ee}const J=j.map(function(Ee){return w(Ee.params)?1/0:Ee.params.length});if(A.length<Math.min.apply(null,J))return q=M(j,k),P=new TypeError("Too few arguments in function "+O+" (expected: "+q.join(" or ")+", index: "+A.length+")"),P.data={category:"tooFewArgs",fn:O,index:A.length,expected:q},P;const H=Math.max.apply(null,J);if(A.length>H)return P=new TypeError("Too many arguments in function "+O+" (expected: "+H+", actual: "+A.length+")"),P.data={category:"tooManyArgs",fn:O,index:A.length,expectedLength:H},P;const ve=[];for(let Ee=0;Ee<A.length;++Ee)ve.push(h(A[Ee]).join("|"));return P=new TypeError('Arguments of type "'+ve.join(", ")+'" do not match any of the defined signatures of function '+O+"."),P.data={category:"mismatch",actual:ve},P}function V(E){let A=i.length+1;for(let S=0;S<E.types.length;S++)N(E.types[S])&&(A=Math.min(A,E.types[S].typeIndex));return A}function I(E){let A=u+1;for(let S=0;S<E.types.length;S++)N(E.types[S])||(A=Math.min(A,E.types[S].conversionIndex));return A}function z(E,A){if(E.hasAny){if(!A.hasAny)return 1}else if(A.hasAny)return-1;if(E.restParam){if(!A.restParam)return 1}else if(A.restParam)return-1;if(E.hasConversion){if(!A.hasConversion)return 1}else if(A.hasConversion)return-1;const S=V(E)-V(A);if(S<0)return-1;if(S>0)return 1;const P=I(E)-I(A);return P<0?-1:P>0?1:0}function x(E,A){const S=E.params,P=A.params,q=ge(S),O=ge(P),j=w(S),k=w(P);if(j&&q.hasAny){if(!k||!O.hasAny)return 1}else if(k&&O.hasAny)return-1;let J=0,H=0,ve;for(ve of S)ve.hasAny&&++J,ve.hasConversion&&++H;let Ee=0,Ie=0;for(ve of P)ve.hasAny&&++Ee,ve.hasConversion&&++Ie;if(J!==Ee)return J-Ee;if(j&&q.hasConversion){if(!k||!O.hasConversion)return 1}else if(k&&O.hasConversion)return-1;if(H!==Ie)return H-Ie;if(j){if(!k)return 1}else if(k)return-1;const Xe=(S.length-P.length)*(j?-1:1);if(Xe!==0)return Xe;const Ye=[];let ht=0;for(let Gt=0;Gt<S.length;++Gt){const xr=z(S[Gt],P[Gt]);Ye.push(xr),ht+=xr}if(ht!==0)return ht;let pt;for(pt of Ye)if(pt!==0)return pt;return 0}function G(E){if(E.length===0)return[];const A=E.map(o);E.length>1&&A.sort((q,O)=>q.index-O.index);let S=A[0].conversionsTo;if(E.length===1)return S;S=S.concat([]);const P=new Set(E);for(let q=1;q<A.length;++q){let O;for(O of A[q].conversionsTo)P.has(O.from)||(S.push(O),P.add(O.from))}return S}function W(E,A){let S=A;if(E.some(q=>q.hasConversion)){const q=w(E),O=E.map(Y);S=function(){const k=[],J=q?arguments.length-1:arguments.length;for(let H=0;H<J;H++)k[H]=O[H](arguments[H]);return q&&(k[J]=arguments[J].map(O[J])),A.apply(this,k)}}let P=S;if(w(E)){const q=E.length-1;P=function(){return S.apply(this,De(arguments,0,q).concat([De(arguments,q)]))}}return P}function Y(E){let A,S,P,q;const O=[],j=[];switch(E.types.forEach(function(k){k.conversion&&(O.push(o(k.conversion.from).test),j.push(k.conversion.convert))}),j.length){case 0:return function(J){return J};case 1:return A=O[0],P=j[0],function(J){return A(J)?P(J):J};case 2:return A=O[0],S=O[1],P=j[0],q=j[1],function(J){return A(J)?P(J):S(J)?q(J):J};default:return function(J){for(let H=0;H<j.length;H++)if(O[H](J))return j[H](J);return J}}}function ue(E){function A(S,P,q){if(P<S.length){const O=S[P];let j=[];if(O.restParam){const k=O.types.filter(N);k.length<O.types.length&&j.push({types:k,name:"..."+k.map(J=>J.name).join("|"),hasAny:k.some(J=>J.isAny),hasConversion:!1,restParam:!0}),j.push(O)}else j=O.types.map(function(k){return{types:[k],name:k.name,hasAny:k.isAny,hasConversion:k.conversion,restParam:!1}});return ke(j,function(k){return A(S,P+1,q.concat([k]))})}else return[q]}return A(E,0,[])}function de(E,A){const S=Math.max(E.length,A.length);for(let k=0;k<S;k++){const J=B(E,k),H=B(A,k);let ve=!1,Ee;for(Ee of H)if(J.has(Ee)){ve=!0;break}if(!ve)return!1}const P=E.length,q=A.length,O=w(E),j=w(A);return O?j?P===q:q>=P:j?P>=q:P===q}function fe(E){return E.map(A=>Bt(A)?at(A.referToSelf.callback):At(A)?qe(A.referTo.references,A.referTo.callback):A)}function he(E,A,S){const P=[];let q;for(q of E){let O=S[q];if(typeof O!="number")throw new TypeError('No definition for referenced signature "'+q+'"');if(O=A[O],typeof O!="function")return!1;P.push(O)}return P}function Se(E,A,S){const P=fe(E),q=new Array(P.length).fill(!1);let O=!0;for(;O;){O=!1;let j=!0;for(let k=0;k<P.length;++k){if(q[k])continue;const J=P[k];if(Bt(J))P[k]=J.referToSelf.callback(S),P[k].referToSelf=J.referToSelf,q[k]=!0,j=!1;else if(At(J)){const H=he(J.referTo.references,P,A);H?(P[k]=J.referTo.callback.apply(this,H),P[k].referTo=J.referTo,q[k]=!0,j=!1):O=!0}}if(j&&O)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return P}function xe(E){const A=/\bthis(\(|\.signatures\b)/;Object.keys(E).forEach(S=>{const P=E[S];if(A.test(P.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function U(E,A){if(a.createCount++,Object.keys(A).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&xe(A);const S=[],P=[],q={},O=[];let j;for(j in A){if(!Object.prototype.hasOwnProperty.call(A,j))continue;const me=F(j);if(!me)continue;S.forEach(function(fr){if(de(fr,me))throw new TypeError('Conflicting signatures "'+m(fr)+'" and "'+m(me)+'".')}),S.push(me);const Qe=P.length;P.push(A[j]);const Ka=me.map(_);let Nr;for(Nr of ue(Ka)){const fr=m(Nr);O.push({params:Nr,name:fr,fn:Qe}),Nr.every(Xa=>!Xa.hasConversion)&&(q[fr]=Qe)}}O.sort(x);const k=Se(P,q,lr);let J;for(J in q)Object.prototype.hasOwnProperty.call(q,J)&&(q[J]=k[q[J]]);const H=[],ve=new Map;for(J of O)ve.has(J.name)||(J.fn=k[J.fn],H.push(J),ve.set(J.name,J));const Ee=H[0]&&H[0].params.length<=2&&!w(H[0].params),Ie=H[1]&&H[1].params.length<=2&&!w(H[1].params),Xe=H[2]&&H[2].params.length<=2&&!w(H[2].params),Ye=H[3]&&H[3].params.length<=2&&!w(H[3].params),ht=H[4]&&H[4].params.length<=2&&!w(H[4].params),pt=H[5]&&H[5].params.length<=2&&!w(H[5].params),Gt=Ee&&Ie&&Xe&&Ye&&ht&&pt;for(let me=0;me<H.length;++me)H[me].test=C(H[me].params);const xr=Ee?y(H[0].params[0]):st,Fa=Ie?y(H[1].params[0]):st,Ca=Xe?y(H[2].params[0]):st,ba=Ye?y(H[3].params[0]):st,Aa=ht?y(H[4].params[0]):st,Ba=pt?y(H[5].params[0]):st,Ma=Ee?y(H[0].params[1]):st,Sa=Ie?y(H[1].params[1]):st,xa=Xe?y(H[2].params[1]):st,Na=Ye?y(H[3].params[1]):st,Ta=ht?y(H[4].params[1]):st,La=pt?y(H[5].params[1]):st;for(let me=0;me<H.length;++me)H[me].implementation=W(H[me].params,H[me].fn);const Pa=Ee?H[0].implementation:Yt,Ia=Ie?H[1].implementation:Yt,Oa=Xe?H[2].implementation:Yt,Ra=Ye?H[3].implementation:Yt,$a=ht?H[4].implementation:Yt,za=pt?H[5].implementation:Yt,qa=Ee?H[0].params.length:-1,Ua=Ie?H[1].params.length:-1,Ha=Xe?H[2].params.length:-1,ka=Ye?H[3].params.length:-1,Va=ht?H[4].params.length:-1,Za=pt?H[5].params.length:-1,Wa=Gt?6:0,ja=H.length,Ja=H.map(me=>me.test),Ga=H.map(me=>me.implementation),Ya=function(){for(let Qe=Wa;Qe<ja;Qe++)if(Ja[Qe](arguments))return Ga[Qe].apply(this,arguments);return a.onMismatch(E,arguments,H)};function lr(me,Qe){return arguments.length===qa&&xr(me)&&Ma(Qe)?Pa.apply(this,arguments):arguments.length===Ua&&Fa(me)&&Sa(Qe)?Ia.apply(this,arguments):arguments.length===Ha&&Ca(me)&&xa(Qe)?Oa.apply(this,arguments):arguments.length===ka&&ba(me)&&Na(Qe)?Ra.apply(this,arguments):arguments.length===Va&&Aa(me)&&Ta(Qe)?$a.apply(this,arguments):arguments.length===Za&&Ba(me)&&La(Qe)?za.apply(this,arguments):Ya.apply(this,arguments)}try{Object.defineProperty(lr,"name",{value:E})}catch{}return lr.signatures=q,lr._typedFunctionData={signatures:H,signatureMap:ve},lr}function $(E,A,S){throw T(E,A,S)}function Ne(E){return De(E,0,E.length-1)}function ge(E){return E[E.length-1]}function De(E,A,S){return Array.prototype.slice.call(E,A,S)}function ut(E,A){for(let S=0;S<E.length;S++)if(A(E[S]))return E[S]}function ke(E,A){return Array.prototype.concat.apply([],E.map(A))}function ye(){const E=Ne(arguments).map(S=>m(F(S))),A=ge(arguments);if(typeof A!="function")throw new TypeError("Callback function expected as last argument");return qe(E,A)}function qe(E,A){return{referTo:{references:E,callback:A}}}function at(E){if(typeof E!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:E}}}function At(E){return E&&typeof E.referTo=="object"&&Array.isArray(E.referTo.references)&&typeof E.referTo.callback=="function"}function Bt(E){return E&&typeof E.referToSelf=="object"&&typeof E.referToSelf.callback=="function"}function jt(E,A){if(!E)return A;if(A&&A!==E){const S=new Error("Function names do not match (expected: "+E+", actual: "+A+")");throw S.data={actual:A,expected:E},S}return E}function Jt(E){let A;for(const S in E)Object.prototype.hasOwnProperty.call(E,S)&&(p(E[S])||typeof E[S].signature=="string")&&(A=jt(A,E[S].name));return A}function En(E,A){let S;for(S in A)if(Object.prototype.hasOwnProperty.call(A,S)){if(S in E&&A[S]!==E[S]){const P=new Error('Signature "'+S+'" is defined twice');throw P.data={signature:S,sourceFunction:A[S],destFunction:E[S]},P}E[S]=A[S]}}const _a=a;a=function(E){const A=typeof E=="string",S=A?1:0;let P=A?E:"";const q={};for(let O=S;O<arguments.length;++O){const j=arguments[O];let k={},J;if(typeof j=="function"?(J=j.name,typeof j.signature=="string"?k[j.signature]=j:p(j)&&(k=j.signatures)):e(j)&&(k=j,A||(J=Jt(j))),Object.keys(k).length===0){const H=new TypeError("Argument to 'typed' at index "+O+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw H.data={index:O,argument:j},H}A||(P=jt(P,J)),En(q,k)}return U(P||"",q)},a.create=Nu,a.createCount=_a.createCount,a.onMismatch=$,a.throwMismatchError=$,a.createError=T,a.clear=c,a.clearConversions=l,a.addTypes=s,a._findType=o,a.referTo=ye,a.referToSelf=at,a.convert=f,a.findSignature=d,a.find=D,a.isTypedFunction=p,a.warnAgainstDeprecatedThis=!0,a.addType=function(E,A){let S="any";A!==!1&&n.has("Object")&&(S="Object"),a.addTypes([E],S)};function oi(E){if(!E||typeof E.from!="string"||typeof E.to!="string"||typeof E.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(E.to===E.from)throw new SyntaxError('Illegal to define conversion from "'+E.from+'" to itself.')}return a.addConversion=function(E){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};oi(E);const S=o(E.to),P=S.conversionsTo.find(q=>q.from===E.from);if(P)if(A&&A.override)a.removeConversion({from:P.from,to:E.to,convert:P.convert});else throw new Error('There is already a conversion from "'+E.from+'" to "'+S.name+'"');S.conversionsTo.push({from:E.from,convert:E.convert,index:u++})},a.addConversions=function(E,A){E.forEach(S=>a.addConversion(S,A))},a.removeConversion=function(E){oi(E);const A=o(E.to),S=ut(A.conversionsTo,q=>q.from===E.from);if(!S)throw new Error("Attempt to remove nonexistent conversion from "+E.from+" to "+E.to);if(S.convert!==E.convert)throw new Error("Conversion to remove does not match existing conversion");const P=A.conversionsTo.indexOf(S);A.conversionsTo.splice(P,1)},a.resolve=function(E,A){if(!p(E))throw new TypeError(yi);const S=E._typedFunctionData.signatures;for(let P=0;P<S.length;++P)if(S[P].test(A))return S[P];return null},a}const Jr=Nu();function K(e,t,r,n){function i(u){var a=tc(u,t.map(ac));return ic(e,t,u),r(a)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),n&&(i.meta=n),i}function ic(e,t,r){var n=t.filter(u=>!uc(u)).every(u=>r[u]!==void 0);if(!n){var i=t.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function uc(e){return e&&e[0]==="?"}function ac(e){return e&&e[0]==="?"?e.slice(1):e}function Pe(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function Mn(e,t,r){var n={2:"0b",8:"0o",16:"0x"},i=n[t],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Pe(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Pe(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),u="i".concat(r)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(i).concat(e.toString(t)).concat(u)}function $n(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:r,precision:n,wordSize:i}=Tu(t);switch(r){case"fixed":return sc(e,n);case"exponential":return Lu(e,n);case"engineering":return oc(e,n);case"bin":return Mn(e,2,i);case"oct":return Mn(e,8,i);case"hex":return Mn(e,16,i);case"auto":return cc(e,n,t).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],a=arguments[4];return u!=="."?u+a:a});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Tu(e){var t="auto",r,n;if(e!==void 0)if(be(e))r=e;else if(Ae(e))r=e.toNumber();else if(ei(e))e.precision!==void 0&&(r=wi(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(n=wi(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:r,wordSize:n}}function hn(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],i=parseFloat(t[4]||"0"),u=n.indexOf(".");i+=u!==-1?u-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return a.length===0&&(a.push(0),i++),{sign:r,coefficients:a,exponent:i}}function oc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=hn(e),n=pn(r,t),i=n.exponent,u=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(be(t))for(;t>u.length||i-a+1>u.length;)u.push(0);else for(var o=Math.abs(i-a)-(u.length-1),s=0;s<o;s++)u.push(0);for(var c=Math.abs(i-a),l=1;c>0;)l++,c--;var h=u.slice(l).join(""),p=be(t)&&h.length||h.match(/[1-9]/)?"."+h:"",d=u.slice(0,l).join("")+p+"e"+(i>=0?"+":"")+a.toString();return n.sign+d}function sc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=hn(e),n=typeof t=="number"?pn(r,r.exponent+1+t):r,i=n.coefficients,u=n.exponent+1,a=u+(t||0);return i.length<a&&(i=i.concat(rr(a-i.length))),u<0&&(i=rr(-u+1).concat(i),u=1),u<i.length&&i.splice(u,0,u===0?"0.":"."),n.sign+i.join("")}function Lu(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=hn(e),n=t?pn(r,t):r,i=n.coefficients,u=n.exponent;i.length<t&&(i=i.concat(rr(t-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(u>=0?"+":"")+u}function cc(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=Ei(r==null?void 0:r.lowerExp,-3),i=Ei(r==null?void 0:r.upperExp,5),u=hn(e),a=t?pn(u,t):u;if(a.exponent<n||a.exponent>=i)return Lu(e,t);var o=a.coefficients,s=a.exponent;o.length<t&&(o=o.concat(rr(t-o.length))),o=o.concat(rr(s-o.length+1+(o.length<t?t-o.length:0))),o=rr(-s).concat(o);var c=s>0?s:0;return c<o.length-1&&o.splice(c+1,0,"."),a.sign+o.join("")}function pn(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var i=n.splice(t,n.length-t);if(i[0]>=5){var u=t-1;for(n[u]++;n[u]===10;)n.pop(),u===0&&(n.unshift(0),r.exponent++,u++),u--,n[u]++}}return r}function rr(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function lc(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Nt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(r*Math.max(Math.abs(e),Math.abs(t)),n)}function wi(e,t){if(be(e))return e;if(Ae(e))return e.toNumber();t()}function Ei(e,t){return be(e)?e:Ae(e)?e.toNumber():t}var Pu=function(){return Pu=Jr.create,Jr},fc=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],hc=K("typed",fc,function(t){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:u}=t,a=Pu();return a.clear(),a.addTypes([{name:"number",test:be},{name:"Complex",test:Bu},{name:"BigNumber",test:Ae},{name:"bigint",test:Cs},{name:"Fraction",test:Mu},{name:"Unit",test:Su},{name:"identifier",test:o=>ft&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:ft},{name:"Chain",test:Xs},{name:"Array",test:Fe},{name:"Matrix",test:Me},{name:"DenseMatrix",test:bs},{name:"SparseMatrix",test:As},{name:"Range",test:xu},{name:"Index",test:fn},{name:"boolean",test:Bs},{name:"ResultSet",test:Ms},{name:"Help",test:Ss},{name:"function",test:xs},{name:"Date",test:Ns},{name:"RegExp",test:Ts},{name:"null",test:Ps},{name:"undefined",test:Is},{name:"AccessorNode",test:Os},{name:"ArrayNode",test:Rs},{name:"AssignmentNode",test:$s},{name:"BlockNode",test:zs},{name:"ConditionalNode",test:qs},{name:"ConstantNode",test:Us},{name:"FunctionNode",test:ks},{name:"FunctionAssignmentNode",test:Hs},{name:"IndexNode",test:Vs},{name:"Node",test:Zs},{name:"ObjectNode",test:Ws},{name:"OperatorNode",test:js},{name:"ParenthesisNode",test:Js},{name:"RangeNode",test:Gs},{name:"RelationalNode",test:Ys},{name:"SymbolNode",test:Ks},{name:"Map",test:Ls},{name:"Object",test:ei}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(s){if(r||Pr(s),lc(s)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+s+"). Use function bignumber(x) to convert to BigNumber.");return new r(s)}},{from:"number",to:"Complex",convert:function(s){return n||Ir(s),new n(s,0)}},{from:"BigNumber",to:"Complex",convert:function(s){return n||Ir(s),new n(s.toNumber(),0)}},{from:"bigint",to:"number",convert:function(s){if(s>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+s+")");return Number(s)}},{from:"bigint",to:"BigNumber",convert:function(s){return r||Pr(s),new r(s.toString())}},{from:"bigint",to:"Fraction",convert:function(s){return u||Or(s),new u(s)}},{from:"Fraction",to:"BigNumber",convert:function(s){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(s){return n||Ir(s),new n(s.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(s){u||Or(s);var c=new u(s);if(c.valueOf()!==s)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+s+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(s){var c=Number(s);if(isNaN(c))throw new Error('Cannot convert "'+s+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(s){r||Pr(s);try{return new r(s)}catch{throw new Error('Cannot convert "'+s+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(s){try{return BigInt(s)}catch{throw new Error('Cannot convert "'+s+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(s){u||Or(s);try{return new u(s)}catch{throw new Error('Cannot convert "'+s+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(s){n||Ir(s);try{return new n(s)}catch{throw new Error('Cannot convert "'+s+'" to Complex')}}},{from:"boolean",to:"number",convert:function(s){return+s}},{from:"boolean",to:"BigNumber",convert:function(s){return r||Pr(s),new r(+s)}},{from:"boolean",to:"bigint",convert:function(s){return BigInt(+s)}},{from:"boolean",to:"Fraction",convert:function(s){return u||Or(s),new u(+s)}},{from:"boolean",to:"string",convert:function(s){return String(s)}},{from:"Array",to:"Matrix",convert:function(s){return i||pc(),new i(s)}},{from:"Matrix",to:"Array",convert:function(s){return s.valueOf()}}]),a.onMismatch=(o,s,c)=>{var l=a.createError(o,s,c);if(["wrongType","mismatch"].includes(l.data.category)&&s.length===1&&jr(s[0])&&c.some(p=>!p.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=l.data,h}throw l},a.onMismatch=(o,s,c)=>{var l=a.createError(o,s,c);if(["wrongType","mismatch"].includes(l.data.category)&&s.length===1&&jr(s[0])&&c.some(p=>!p.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=l.data,h}throw l},a});function Pr(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Ir(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function pc(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Or(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var er=9e15,qt=1e9,zn="0123456789abcdef",Gr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Yr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",qn={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-er,maxE:er,crypto:!1},Iu,St,ae=!0,dn="[DecimalError] ",zt=dn+"Invalid argument: ",Ou=dn+"Precision limit exceeded",Ru=dn+"crypto unavailable",$u="[object Decimal]",Ge=Math.floor,$e=Math.pow,dc=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,mc=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Dc=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,zu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,gt=1e7,ne=7,vc=9007199254740991,gc=Gr.length-1,Un=Yr.length-1,R={toStringTag:$u};R.absoluteValue=R.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),te(e)};R.ceil=function(){return te(new this.constructor(this),this.e+1,2)};R.clampedTo=R.clamp=function(e,t){var r,n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(zt+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new i(n)};R.comparedTo=R.cmp=function(e){var t,r,n,i,u=this,a=u.d,o=(e=new u.constructor(e)).d,s=u.s,c=e.s;if(!a||!o)return!s||!c?NaN:s!==c?s:a===o?0:!a^s<0?1:-1;if(!a[0]||!o[0])return a[0]?s:o[0]?-c:0;if(s!==c)return s;if(u.e!==e.e)return u.e>e.e^s<0?1:-1;for(n=a.length,i=o.length,t=0,r=n<i?n:i;t<r;++t)if(a[t]!==o[t])return a[t]>o[t]^s<0?1:-1;return n===i?0:n>i^s<0?1:-1};R.cosine=R.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+ne,n.rounding=1,r=yc(n,Vu(n,r)),n.precision=e,n.rounding=t,te(St==2||St==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)};R.cubeRoot=R.cbrt=function(){var e,t,r,n,i,u,a,o,s,c,l=this,h=l.constructor;if(!l.isFinite()||l.isZero())return new h(l);for(ae=!1,u=l.s*$e(l.s*l,1/3),!u||Math.abs(u)==1/0?(r=Ze(l.d),e=l.e,(u=(e-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=$e(r,1/3),e=Ge((e+1)/3)-(e%3==(e<0?-1:2)),u==1/0?r="5e"+e:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new h(r),n.s=l.s):n=new h(u.toString()),a=(e=h.precision)+3;;)if(o=n,s=o.times(o).times(o),c=s.plus(l),n=we(c.plus(l).times(o),c.plus(s),a+2,1),Ze(o.d).slice(0,a)===(r=Ze(n.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!i&&r=="4999"){if(!i&&(te(o,e+1,0),o.times(o).times(o).eq(l))){n=o;break}a+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(te(n,e+1,1),t=!n.times(n).times(n).eq(l));break}return ae=!0,te(n,e,h.rounding,t)};R.decimalPlaces=R.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Ge(this.e/ne))*ne,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};R.dividedBy=R.div=function(e){return we(this,new this.constructor(e))};R.dividedToIntegerBy=R.divToInt=function(e){var t=this,r=t.constructor;return te(we(t,new r(e),0,1,1),r.precision,r.rounding)};R.equals=R.eq=function(e){return this.cmp(e)===0};R.floor=function(){return te(new this.constructor(this),this.e+1,3)};R.greaterThan=R.gt=function(e){return this.cmp(e)>0};R.greaterThanOrEqualTo=R.gte=function(e){var t=this.cmp(e);return t==1||t===0};R.hyperbolicCosine=R.cosh=function(){var e,t,r,n,i,u=this,a=u.constructor,o=new a(1);if(!u.isFinite())return new a(u.s?1/0:NaN);if(u.isZero())return o;r=a.precision,n=a.rounding,a.precision=r+Math.max(u.e,u.sd())+4,a.rounding=1,i=u.d.length,i<32?(e=Math.ceil(i/3),t=(1/Dn(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),u=nr(a,1,u.times(t),new a(1),!0);for(var s,c=e,l=new a(8);c--;)s=u.times(u),u=o.minus(s.times(l.minus(s.times(l))));return te(u,a.precision=r,a.rounding=n,!0)};R.hyperbolicSine=R.sinh=function(){var e,t,r,n,i=this,u=i.constructor;if(!i.isFinite()||i.isZero())return new u(i);if(t=u.precision,r=u.rounding,u.precision=t+Math.max(i.e,i.sd())+4,u.rounding=1,n=i.d.length,n<3)i=nr(u,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,i=i.times(1/Dn(5,e)),i=nr(u,2,i,i,!0);for(var a,o=new u(5),s=new u(16),c=new u(20);e--;)a=i.times(i),i=i.times(o.plus(a.times(s.times(a).plus(c))))}return u.precision=t,u.rounding=r,te(i,t,r,!0)};R.hyperbolicTangent=R.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,we(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)};R.inverseCosine=R.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),n=t.precision,i=t.rounding;return r!==-1?r===0?e.isNeg()?yt(t,n,i):new t(0):new t(NaN):e.isZero()?yt(t,n+4,i).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=i,e.times(2))};R.inverseHyperbolicCosine=R.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ae=!1,r=r.times(r).minus(1).sqrt().plus(r),ae=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)};R.inverseHyperbolicSine=R.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ae=!1,r=r.times(r).plus(1).sqrt().plus(r),ae=!0,n.precision=e,n.rounding=t,r.ln())};R.inverseHyperbolicTangent=R.atanh=function(){var e,t,r,n,i=this,u=i.constructor;return i.isFinite()?i.e>=0?new u(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=u.precision,t=u.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?te(new u(i),e,t,!0):(u.precision=r=n-i.e,i=we(i.plus(1),new u(1).minus(i),r+e,1),u.precision=e+4,u.rounding=1,i=i.ln(),u.precision=e,u.rounding=t,i.times(.5))):new u(NaN)};R.inverseSine=R.asin=function(){var e,t,r,n,i=this,u=i.constructor;return i.isZero()?new u(i):(t=i.abs().cmp(1),r=u.precision,n=u.rounding,t!==-1?t===0?(e=yt(u,r+4,n).times(.5),e.s=i.s,e):new u(NaN):(u.precision=r+6,u.rounding=1,i=i.div(new u(1).minus(i.times(i)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,i.times(2)))};R.inverseTangent=R.atan=function(){var e,t,r,n,i,u,a,o,s,c=this,l=c.constructor,h=l.precision,p=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=Un)return a=yt(l,h+4,p).times(.25),a.s=c.s,a}else{if(!c.s)return new l(NaN);if(h+4<=Un)return a=yt(l,h+4,p).times(.5),a.s=c.s,a}for(l.precision=o=h+10,l.rounding=1,r=Math.min(28,o/ne+2|0),e=r;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(ae=!1,t=Math.ceil(o/ne),n=1,s=c.times(c),a=new l(c),i=c;e!==-1;)if(i=i.times(s),u=a.minus(i.div(n+=2)),i=i.times(s),a=u.plus(i.div(n+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===u.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),ae=!0,te(a,l.precision=h,l.rounding=p,!0)};R.isFinite=function(){return!!this.d};R.isInteger=R.isInt=function(){return!!this.d&&Ge(this.e/ne)>this.d.length-2};R.isNaN=function(){return!this.s};R.isNegative=R.isNeg=function(){return this.s<0};R.isPositive=R.isPos=function(){return this.s>0};R.isZero=function(){return!!this.d&&this.d[0]===0};R.lessThan=R.lt=function(e){return this.cmp(e)<0};R.lessThanOrEqualTo=R.lte=function(e){return this.cmp(e)<1};R.logarithm=R.log=function(e){var t,r,n,i,u,a,o,s,c=this,l=c.constructor,h=l.precision,p=l.rounding,d=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(r=c.d,c.s<0||!r||!r[0]||c.eq(1))return new l(r&&!r[0]?-1/0:c.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)u=!0;else{for(i=r[0];i%10===0;)i/=10;u=i!==1}if(ae=!1,o=h+d,a=Rt(c,o),n=t?Kr(l,o+10):Rt(e,o),s=we(a,n,o,1),vr(s.d,i=h,p))do if(o+=10,a=Rt(c,o),n=t?Kr(l,o+10):Rt(e,o),s=we(a,n,o,1),!u){+Ze(s.d).slice(i+1,i+15)+1==1e14&&(s=te(s,h+1,0));break}while(vr(s.d,i+=10,p));return ae=!0,te(s,h,p)};R.minus=R.sub=function(e){var t,r,n,i,u,a,o,s,c,l,h,p,d=this,D=d.constructor;if(e=new D(e),!d.d||!e.d)return!d.s||!e.s?e=new D(NaN):d.d?e.s=-e.s:e=new D(e.d||d.s!==e.s?d:NaN),e;if(d.s!=e.s)return e.s=-e.s,d.plus(e);if(c=d.d,p=e.d,o=D.precision,s=D.rounding,!c[0]||!p[0]){if(p[0])e.s=-e.s;else if(c[0])e=new D(d);else return new D(s===3?-0:0);return ae?te(e,o,s):e}if(r=Ge(e.e/ne),l=Ge(d.e/ne),c=c.slice(),u=l-r,u){for(h=u<0,h?(t=c,u=-u,a=p.length):(t=p,r=l,a=c.length),n=Math.max(Math.ceil(o/ne),a)+2,u>n&&(u=n,t.length=1),t.reverse(),n=u;n--;)t.push(0);t.reverse()}else{for(n=c.length,a=p.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(c[n]!=p[n]){h=c[n]<p[n];break}u=0}for(h&&(t=c,c=p,p=t,e.s=-e.s),a=c.length,n=p.length-a;n>0;--n)c[a++]=0;for(n=p.length;n>u;){if(c[--n]<p[n]){for(i=n;i&&c[--i]===0;)c[i]=gt-1;--c[i],c[n]+=gt}c[n]-=p[n]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=mn(c,r),ae?te(e,o,s):e):new D(s===3?-0:0)};R.modulo=R.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?te(new n(r),n.precision,n.rounding):(ae=!1,n.modulo==9?(t=we(r,e.abs(),0,3,1),t.s*=e.s):t=we(r,e,0,n.modulo,1),t=t.times(e),ae=!0,r.minus(t))};R.naturalExponential=R.exp=function(){return Hn(this)};R.naturalLogarithm=R.ln=function(){return Rt(this)};R.negated=R.neg=function(){var e=new this.constructor(this);return e.s=-e.s,te(e)};R.plus=R.add=function(e){var t,r,n,i,u,a,o,s,c,l,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d||(e=new p(e.d||h.s===e.s?h:NaN)),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=h.d,l=e.d,o=p.precision,s=p.rounding,!c[0]||!l[0])return l[0]||(e=new p(h)),ae?te(e,o,s):e;if(u=Ge(h.e/ne),n=Ge(e.e/ne),c=c.slice(),i=u-n,i){for(i<0?(r=c,i=-i,a=l.length):(r=l,n=u,a=c.length),u=Math.ceil(o/ne),a=u>a?u+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=c.length,i=l.length,a-i<0&&(i=a,r=l,l=c,c=r),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/gt|0,c[i]%=gt;for(t&&(c.unshift(t),++n),a=c.length;c[--a]==0;)c.pop();return e.d=c,e.e=mn(c,n),ae?te(e,o,s):e};R.precision=R.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zt+e);return r.d?(t=qu(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};R.round=function(){var e=this,t=e.constructor;return te(new t(e),e.e+1,t.rounding)};R.sine=R.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+ne,n.rounding=1,r=Ec(n,Vu(n,r)),n.precision=e,n.rounding=t,te(St>2?r.neg():r,e,t,!0)):new n(NaN)};R.squareRoot=R.sqrt=function(){var e,t,r,n,i,u,a=this,o=a.d,s=a.e,c=a.s,l=a.constructor;if(c!==1||!o||!o[0])return new l(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);for(ae=!1,c=Math.sqrt(+a),c==0||c==1/0?(t=Ze(o),(t.length+s)%2==0&&(t+="0"),c=Math.sqrt(t),s=Ge((s+1)/2)-(s<0||s%2),c==1/0?t="5e"+s:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+s),n=new l(t)):n=new l(c.toString()),r=(s=l.precision)+3;;)if(u=n,n=u.plus(we(a,u,r+2,1)).times(.5),Ze(u.d).slice(0,r)===(t=Ze(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!i&&t=="4999"){if(!i&&(te(u,s+1,0),u.times(u).eq(a))){n=u;break}r+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(te(n,s+1,1),e=!n.times(n).eq(a));break}return ae=!0,te(n,s,l.rounding,e)};R.tangent=R.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=we(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,te(St==2||St==4?r.neg():r,e,t,!0)):new n(NaN)};R.times=R.mul=function(e){var t,r,n,i,u,a,o,s,c,l=this,h=l.constructor,p=l.d,d=(e=new h(e)).d;if(e.s*=l.s,!p||!p[0]||!d||!d[0])return new h(!e.s||p&&!p[0]&&!d||d&&!d[0]&&!p?NaN:!p||!d?e.s/0:e.s*0);for(r=Ge(l.e/ne)+Ge(e.e/ne),s=p.length,c=d.length,s<c&&(u=p,p=d,d=u,a=s,s=c,c=a),u=[],a=s+c,n=a;n--;)u.push(0);for(n=c;--n>=0;){for(t=0,i=s+n;i>n;)o=u[i]+d[n]*p[i-n-1]+t,u[i--]=o%gt|0,t=o/gt|0;u[i]=(u[i]+t)%gt|0}for(;!u[--a];)u.pop();return t?++r:u.shift(),e.d=u,e.e=mn(u,r),ae?te(e,h.precision,h.rounding):e};R.toBinary=function(e,t){return ti(this,2,e,t)};R.toDecimalPlaces=R.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(nt(e,0,qt),t===void 0?t=n.rounding:nt(t,0,8),te(r,e+r.e+1,t))};R.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=_t(n,!0):(nt(e,0,qt),t===void 0?t=i.rounding:nt(t,0,8),n=te(new i(n),e+1,t),r=_t(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};R.toFixed=function(e,t){var r,n,i=this,u=i.constructor;return e===void 0?r=_t(i):(nt(e,0,qt),t===void 0?t=u.rounding:nt(t,0,8),n=te(new u(i),e+i.e+1,t),r=_t(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};R.toFraction=function(e){var t,r,n,i,u,a,o,s,c,l,h,p,d=this,D=d.d,f=d.constructor;if(!D)return new f(d);if(c=r=new f(1),n=s=new f(0),t=new f(n),u=t.e=qu(D)-d.e-1,a=u%ne,t.d[0]=$e(10,a<0?ne+a:a),e==null)e=u>0?t:c;else{if(o=new f(e),!o.isInt()||o.lt(c))throw Error(zt+o);e=o.gt(t)?u>0?t:c:o}for(ae=!1,o=new f(Ze(D)),l=f.precision,f.precision=u=D.length*ne*2;h=we(o,t,0,1,1),i=r.plus(h.times(n)),i.cmp(e)!=1;)r=n,n=i,i=c,c=s.plus(h.times(i)),s=i,i=t,t=o.minus(h.times(i)),o=i;return i=we(e.minus(r),n,0,1,1),s=s.plus(i.times(c)),r=r.plus(i.times(n)),s.s=c.s=d.s,p=we(c,n,u,1).minus(d).abs().cmp(we(s,r,u,1).minus(d).abs())<1?[c,n]:[s,r],f.precision=l,ae=!0,p};R.toHexadecimal=R.toHex=function(e,t){return ti(this,16,e,t)};R.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:nt(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ae=!1,r=we(r,e,0,t,1).times(e),ae=!0,te(r)):(e.s=r.s,r=e),r};R.toNumber=function(){return+this};R.toOctal=function(e,t){return ti(this,8,e,t)};R.toPower=R.pow=function(e){var t,r,n,i,u,a,o=this,s=o.constructor,c=+(e=new s(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new s($e(+o,c));if(o=new s(o),o.eq(1))return o;if(n=s.precision,u=s.rounding,e.eq(1))return te(o,n,u);if(t=Ge(e.e/ne),t>=e.d.length-1&&(r=c<0?-c:c)<=vc)return i=Uu(s,o,r,n),e.s<0?new s(1).div(i):te(i,n,u);if(a=o.s,a<0){if(t<e.d.length-1)return new s(NaN);if(e.d[t]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return r=$e(+o,c),t=r==0||!isFinite(r)?Ge(c*(Math.log("0."+Ze(o.d))/Math.LN10+o.e+1)):new s(r+"").e,t>s.maxE+1||t<s.minE-1?new s(t>0?a/0:0):(ae=!1,s.rounding=o.s=1,r=Math.min(12,(t+"").length),i=Hn(e.times(Rt(o,n+r)),n),i.d&&(i=te(i,n+5,1),vr(i.d,n,u)&&(t=n+10,i=te(Hn(e.times(Rt(o,t+r)),t),t+5,1),+Ze(i.d).slice(n+1,n+15)+1==1e14&&(i=te(i,n+1,0)))),i.s=a,ae=!0,s.rounding=u,te(i,n,u))};R.toPrecision=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=_t(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(nt(e,1,qt),t===void 0?t=i.rounding:nt(t,0,8),n=te(new i(n),e,t),r=_t(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r};R.toSignificantDigits=R.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(nt(e,1,qt),t===void 0?t=n.rounding:nt(t,0,8)),te(new n(r),e,t)};R.toString=function(){var e=this,t=e.constructor,r=_t(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};R.truncated=R.trunc=function(){return te(new this.constructor(this),this.e+1,1)};R.valueOf=R.toJSON=function(){var e=this,t=e.constructor,r=_t(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Ze(e){var t,r,n,i=e.length-1,u="",a=e[0];if(i>0){for(u+=a,t=1;t<i;t++)n=e[t]+"",r=ne-n.length,r&&(u+=Ot(r)),u+=n;a=e[t],n=a+"",r=ne-n.length,r&&(u+=Ot(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return u+a}function nt(e,t,r){if(e!==~~e||e<t||e>r)throw Error(zt+e)}function vr(e,t,r,n){var i,u,a,o;for(u=e[0];u>=10;u/=10)--t;return--t<0?(t+=ne,i=0):(i=Math.ceil((t+1)/ne),t%=ne),u=$e(10,ne-t),o=e[i]%u|0,n==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),a=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):a=(r<4&&o+1==u||r>3&&o+1==u/2)&&(e[i+1]/u/100|0)==$e(10,t-2)-1||(o==u/2||o==0)&&(e[i+1]/u/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),a=(n||r<4)&&o==9999||!n&&r>3&&o==4999):a=((n||r<4)&&o+1==u||!n&&r>3&&o+1==u/2)&&(e[i+1]/u/1e3|0)==$e(10,t-3)-1,a}function zr(e,t,r){for(var n,i=[0],u,a=0,o=e.length;a<o;){for(u=i.length;u--;)i[u]*=t;for(i[0]+=zn.indexOf(e.charAt(a++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function yc(e,t){var r,n,i;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),i=(1/Dn(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),e.precision+=r,t=nr(e,1,t.times(i),new e(1));for(var u=r;u--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var we=function(){function e(n,i,u){var a,o=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+o,n[s]=a%u|0,o=a/u|0;return o&&n.unshift(o),n}function t(n,i,u,a){var o,s;if(u!=a)s=u>a?1:-1;else for(o=s=0;o<u;o++)if(n[o]!=i[o]){s=n[o]>i[o]?1:-1;break}return s}function r(n,i,u,a){for(var o=0;u--;)n[u]-=o,o=n[u]<i[u]?1:0,n[u]=o*a+n[u]-i[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,u,a,o,s){var c,l,h,p,d,D,f,m,v,_,g,F,w,y,C,b,B,N,M,T,V=n.constructor,I=n.s==i.s?1:-1,z=n.d,x=i.d;if(!z||!z[0]||!x||!x[0])return new V(!n.s||!i.s||(z?x&&z[0]==x[0]:!x)?NaN:z&&z[0]==0||!x?I*0:I/0);for(s?(d=1,l=n.e-i.e):(s=gt,d=ne,l=Ge(n.e/d)-Ge(i.e/d)),M=x.length,B=z.length,v=new V(I),_=v.d=[],h=0;x[h]==(z[h]||0);h++);if(x[h]>(z[h]||0)&&l--,u==null?(y=u=V.precision,a=V.rounding):o?y=u+(n.e-i.e)+1:y=u,y<0)_.push(1),D=!0;else{if(y=y/d+2|0,h=0,M==1){for(p=0,x=x[0],y++;(h<B||p)&&y--;h++)C=p*s+(z[h]||0),_[h]=C/x|0,p=C%x|0;D=p||h<B}else{for(p=s/(x[0]+1)|0,p>1&&(x=e(x,p,s),z=e(z,p,s),M=x.length,B=z.length),b=M,g=z.slice(0,M),F=g.length;F<M;)g[F++]=0;T=x.slice(),T.unshift(0),N=x[0],x[1]>=s/2&&++N;do p=0,c=t(x,g,M,F),c<0?(w=g[0],M!=F&&(w=w*s+(g[1]||0)),p=w/N|0,p>1?(p>=s&&(p=s-1),f=e(x,p,s),m=f.length,F=g.length,c=t(f,g,m,F),c==1&&(p--,r(f,M<m?T:x,m,s))):(p==0&&(c=p=1),f=x.slice()),m=f.length,m<F&&f.unshift(0),r(g,f,F,s),c==-1&&(F=g.length,c=t(x,g,M,F),c<1&&(p++,r(g,M<F?T:x,F,s))),F=g.length):c===0&&(p++,g=[0]),_[h++]=p,c&&g[0]?g[F++]=z[b]||0:(g=[z[b]],F=1);while((b++<B||g[0]!==void 0)&&y--);D=g[0]!==void 0}_[0]||_.shift()}if(d==1)v.e=l,Iu=D;else{for(h=1,p=_[0];p>=10;p/=10)h++;v.e=h+l*d-1,te(v,o?u+v.e+1:u,a,D)}return v}}();function te(e,t,r,n){var i,u,a,o,s,c,l,h,p,d=e.constructor;e:if(t!=null){if(h=e.d,!h)return e;for(i=1,o=h[0];o>=10;o/=10)i++;if(u=t-i,u<0)u+=ne,a=t,l=h[p=0],s=l/$e(10,i-a-1)%10|0;else if(p=Math.ceil((u+1)/ne),o=h.length,p>=o)if(n){for(;o++<=p;)h.push(0);l=s=0,i=1,u%=ne,a=u-ne+1}else break e;else{for(l=o=h[p],i=1;o>=10;o/=10)i++;u%=ne,a=u-ne+i,s=a<0?0:l/$e(10,i-a-1)%10|0}if(n=n||t<0||h[p+1]!==void 0||(a<0?l:l%$e(10,i-a-1)),c=r<4?(s||n)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||n||r==6&&(u>0?a>0?l/$e(10,i-a):0:h[p-1])%10&1||r==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(t-=e.e+1,h[0]=$e(10,(ne-t%ne)%ne),e.e=-t||0):h[0]=e.e=0,e;if(u==0?(h.length=p,o=1,p--):(h.length=p+1,o=$e(10,ne-u),h[p]=a>0?(l/$e(10,i-a)%$e(10,a)|0)*o:0),c)for(;;)if(p==0){for(u=1,a=h[0];a>=10;a/=10)u++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;u!=o&&(e.e++,h[0]==gt&&(h[0]=1));break}else{if(h[p]+=o,h[p]!=gt)break;h[p--]=0,o=1}for(u=h.length;h[--u]===0;)h.pop()}return ae&&(e.e>d.maxE?(e.d=null,e.e=NaN):e.e<d.minE&&(e.e=0,e.d=[0])),e}function _t(e,t,r){if(!e.isFinite())return ku(e);var n,i=e.e,u=Ze(e.d),a=u.length;return t?(r&&(n=r-a)>0?u=u.charAt(0)+"."+u.slice(1)+Ot(n):a>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(e.e<0?"e":"e+")+e.e):i<0?(u="0."+Ot(-i-1)+u,r&&(n=r-a)>0&&(u+=Ot(n))):i>=a?(u+=Ot(i+1-a),r&&(n=r-i-1)>0&&(u=u+"."+Ot(n))):((n=i+1)<a&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(u+="."),u+=Ot(n))),u}function mn(e,t){var r=e[0];for(t*=ne;r>=10;r/=10)t++;return t}function Kr(e,t,r){if(t>gc)throw ae=!0,r&&(e.precision=r),Error(Ou);return te(new e(Gr),t,1,!0)}function yt(e,t,r){if(t>Un)throw Error(Ou);return te(new e(Yr),t,r,!0)}function qu(e){var t=e.length-1,r=t*ne+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Ot(e){for(var t="";e--;)t+="0";return t}function Uu(e,t,r,n){var i,u=new e(1),a=Math.ceil(n/ne+4);for(ae=!1;;){if(r%2&&(u=u.times(t),Fi(u.d,a)&&(i=!0)),r=Ge(r/2),r===0){r=u.d.length-1,i&&u.d[r]===0&&++u.d[r];break}t=t.times(t),Fi(t.d,a)}return ae=!0,u}function _i(e){return e.d[e.d.length-1]&1}function Hu(e,t,r){for(var n,i,u=new e(t[0]),a=0;++a<t.length;){if(i=new e(t[a]),!i.s){u=i;break}n=u.cmp(i),(n===r||n===0&&u.s===r)&&(u=i)}return u}function Hn(e,t){var r,n,i,u,a,o,s,c=0,l=0,h=0,p=e.constructor,d=p.rounding,D=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(ae=!1,s=D):s=t,o=new p(.03125);e.e>-2;)e=e.times(o),h+=5;for(n=Math.log($e(2,h))/Math.LN10*2+5|0,s+=n,r=u=a=new p(1),p.precision=s;;){if(u=te(u.times(e),s,1),r=r.times(++l),o=a.plus(we(u,r,s,1)),Ze(o.d).slice(0,s)===Ze(a.d).slice(0,s)){for(i=h;i--;)a=te(a.times(a),s,1);if(t==null)if(c<3&&vr(a.d,s-n,d,c))p.precision=s+=10,r=u=o=new p(1),l=0,c++;else return te(a,p.precision=D,d,ae=!0);else return p.precision=D,a}a=o}}function Rt(e,t){var r,n,i,u,a,o,s,c,l,h,p,d=1,D=10,f=e,m=f.d,v=f.constructor,_=v.rounding,g=v.precision;if(f.s<0||!m||!m[0]||!f.e&&m[0]==1&&m.length==1)return new v(m&&!m[0]?-1/0:f.s!=1?NaN:m?0:f);if(t==null?(ae=!1,l=g):l=t,v.precision=l+=D,r=Ze(m),n=r.charAt(0),Math.abs(u=f.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)f=f.times(e),r=Ze(f.d),n=r.charAt(0),d++;u=f.e,n>1?(f=new v("0."+r),u++):f=new v(n+"."+r.slice(1))}else return c=Kr(v,l+2,g).times(u+""),f=Rt(new v(n+"."+r.slice(1)),l-D).plus(c),v.precision=g,t==null?te(f,g,_,ae=!0):f;for(h=f,s=a=f=we(f.minus(1),f.plus(1),l,1),p=te(f.times(f),l,1),i=3;;){if(a=te(a.times(p),l,1),c=s.plus(we(a,new v(i),l,1)),Ze(c.d).slice(0,l)===Ze(s.d).slice(0,l))if(s=s.times(2),u!==0&&(s=s.plus(Kr(v,l+2,g).times(u+""))),s=we(s,new v(d),l,1),t==null)if(vr(s.d,l-D,_,o))v.precision=l+=D,c=a=f=we(h.minus(1),h.plus(1),l,1),p=te(f.times(f),l,1),i=o=1;else return te(s,v.precision=g,_,ae=!0);else return v.precision=g,s;s=c,i+=2}}function ku(e){return String(e.s*e.s/0)}function qr(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(n,i),t){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%ne,r<0&&(n+=ne),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=ne;n<i;)e.d.push(+t.slice(n,n+=ne));t=t.slice(n),n=ne-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),ae&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function wc(e,t){var r,n,i,u,a,o,s,c,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),zu.test(t))return qr(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(mc.test(t))r=16,t=t.toLowerCase();else if(dc.test(t))r=2;else if(Dc.test(t))r=8;else throw Error(zt+t);for(u=t.search(/p/i),u>0?(s=+t.slice(u+1),t=t.substring(2,u)):t=t.slice(2),u=t.indexOf("."),a=u>=0,n=e.constructor,a&&(t=t.replace(".",""),o=t.length,u=o-u,i=Uu(n,new n(r),u,u*2)),c=zr(t,r,gt),l=c.length-1,u=l;c[u]===0;--u)c.pop();return u<0?new n(e.s*0):(e.e=mn(c,l),e.d=c,ae=!1,a&&(e=we(e,i,o*4)),s&&(e=e.times(Math.abs(s)<54?$e(2,s):ir.pow(2,s))),ae=!0,e)}function Ec(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:nr(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/Dn(5,r)),t=nr(e,2,t,t);for(var i,u=new e(5),a=new e(16),o=new e(20);r--;)i=t.times(t),t=t.times(u.plus(i.times(a.times(i).minus(o))));return t}function nr(e,t,r,n,i){var u,a,o,s,c=e.precision,l=Math.ceil(c/ne);for(ae=!1,s=r.times(r),o=new e(n);;){if(a=we(o.times(s),new e(t++*t++),c,1),o=i?n.plus(a):n.minus(a),n=we(a.times(s),new e(t++*t++),c,1),a=o.plus(n),a.d[l]!==void 0){for(u=l;a.d[u]===o.d[u]&&u--;);if(u==-1)break}u=o,o=n,n=a,a=u}return ae=!0,a.d.length=l+1,a}function Dn(e,t){for(var r=e;--t;)r*=e;return r}function Vu(e,t){var r,n=t.s<0,i=yt(e,e.precision,1),u=i.times(.5);if(t=t.abs(),t.lte(u))return St=n?4:1,t;if(r=t.divToInt(i),r.isZero())St=n?3:2;else{if(t=t.minus(r.times(i)),t.lte(u))return St=_i(r)?n?2:3:n?4:1,t;St=_i(r)?n?1:4:n?3:2}return t.minus(i).abs()}function ti(e,t,r,n){var i,u,a,o,s,c,l,h,p,d=e.constructor,D=r!==void 0;if(D?(nt(r,1,qt),n===void 0?n=d.rounding:nt(n,0,8)):(r=d.precision,n=d.rounding),!e.isFinite())l=ku(e);else{for(l=_t(e),a=l.indexOf("."),D?(i=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):i=t,a>=0&&(l=l.replace(".",""),p=new d(1),p.e=l.length-a,p.d=zr(_t(p),10,i),p.e=p.d.length),h=zr(l,10,i),u=s=h.length;h[--s]==0;)h.pop();if(!h[0])l=D?"0p+0":"0";else{if(a<0?u--:(e=new d(e),e.d=h,e.e=u,e=we(e,p,r,n,0,i),h=e.d,u=e.e,c=Iu),a=h[r],o=i/2,c=c||h[r+1]!==void 0,c=n<4?(a!==void 0||c)&&(n===0||n===(e.s<0?3:2)):a>o||a===o&&(n===4||c||n===6&&h[r-1]&1||n===(e.s<0?8:7)),h.length=r,c)for(;++h[--r]>i-1;)h[r]=0,r||(++u,h.unshift(1));for(s=h.length;!h[s-1];--s);for(a=0,l="";a<s;a++)l+=zn.charAt(h[a]);if(D){if(s>1)if(t==16||t==8){for(a=t==16?4:3,--s;s%a;s++)l+="0";for(h=zr(l,i,t),s=h.length;!h[s-1];--s);for(a=1,l="1.";a<s;a++)l+=zn.charAt(h[a])}else l=l.charAt(0)+"."+l.slice(1);l=l+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)l="0"+l;l="0."+l}else if(++u>s)for(u-=s;u--;)l+="0";else u<s&&(l=l.slice(0,u)+"."+l.slice(u))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function Fi(e,t){if(e.length>t)return e.length=t,!0}function _c(e){return new this(e).abs()}function Fc(e){return new this(e).acos()}function Cc(e){return new this(e).acosh()}function bc(e,t){return new this(e).plus(t)}function Ac(e){return new this(e).asin()}function Bc(e){return new this(e).asinh()}function Mc(e){return new this(e).atan()}function Sc(e){return new this(e).atanh()}function xc(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,u=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=yt(this,u,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?yt(this,n,i):new this(0),r.s=e.s):!e.d||t.isZero()?(r=yt(this,u,1).times(.5),r.s=e.s):t.s<0?(this.precision=u,this.rounding=1,r=this.atan(we(e,t,u,1)),t=yt(this,u,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(we(e,t,u,1)),r}function Nc(e){return new this(e).cbrt()}function Tc(e){return te(e=new this(e),e.e+1,2)}function Lc(e,t,r){return new this(e).clamp(t,r)}function Pc(e){if(!e||typeof e!="object")throw Error(dn+"Object expected");var t,r,n,i=e.defaults===!0,u=["precision",1,qt,"rounding",0,8,"toExpNeg",-er,0,"toExpPos",0,er,"maxE",0,er,"minE",-er,0,"modulo",0,9];for(t=0;t<u.length;t+=3)if(r=u[t],i&&(this[r]=qn[r]),(n=e[r])!==void 0)if(Ge(n)===n&&n>=u[t+1]&&n<=u[t+2])this[r]=n;else throw Error(zt+r+": "+n);if(r="crypto",i&&(this[r]=qn[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Ru);else this[r]=!1;else throw Error(zt+r+": "+n);return this}function Ic(e){return new this(e).cos()}function Oc(e){return new this(e).cosh()}function Zu(e){var t,r,n;function i(u){var a,o,s,c=this;if(!(c instanceof i))return new i(u);if(c.constructor=i,Ci(u)){c.s=u.s,ae?!u.d||u.e>i.maxE?(c.e=NaN,c.d=null):u.e<i.minE?(c.e=0,c.d=[0]):(c.e=u.e,c.d=u.d.slice()):(c.e=u.e,c.d=u.d?u.d.slice():u.d);return}if(s=typeof u,s==="number"){if(u===0){c.s=1/u<0?-1:1,c.e=0,c.d=[0];return}if(u<0?(u=-u,c.s=-1):c.s=1,u===~~u&&u<1e7){for(a=0,o=u;o>=10;o/=10)a++;ae?a>i.maxE?(c.e=NaN,c.d=null):a<i.minE?(c.e=0,c.d=[0]):(c.e=a,c.d=[u]):(c.e=a,c.d=[u]);return}if(u*0!==0){u||(c.s=NaN),c.e=NaN,c.d=null;return}return qr(c,u.toString())}if(s==="string")return(o=u.charCodeAt(0))===45?(u=u.slice(1),c.s=-1):(o===43&&(u=u.slice(1)),c.s=1),zu.test(u)?qr(c,u):wc(c,u);if(s==="bigint")return u<0?(u=-u,c.s=-1):c.s=1,qr(c,u.toString());throw Error(zt+u)}if(i.prototype=R,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Pc,i.clone=Zu,i.isDecimal=Ci,i.abs=_c,i.acos=Fc,i.acosh=Cc,i.add=bc,i.asin=Ac,i.asinh=Bc,i.atan=Mc,i.atanh=Sc,i.atan2=xc,i.cbrt=Nc,i.ceil=Tc,i.clamp=Lc,i.cos=Ic,i.cosh=Oc,i.div=Rc,i.exp=$c,i.floor=zc,i.hypot=qc,i.ln=Uc,i.log=Hc,i.log10=Vc,i.log2=kc,i.max=Zc,i.min=Wc,i.mod=jc,i.mul=Jc,i.pow=Gc,i.random=Yc,i.round=Kc,i.sign=Xc,i.sin=Qc,i.sinh=el,i.sqrt=tl,i.sub=rl,i.sum=nl,i.tan=il,i.tanh=ul,i.trunc=al,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Rc(e,t){return new this(e).div(t)}function $c(e){return new this(e).exp()}function zc(e){return te(e=new this(e),e.e+1,3)}function qc(){var e,t,r=new this(0);for(ae=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ae=!0,new this(1/0);r=t}return ae=!0,r.sqrt()}function Ci(e){return e instanceof ir||e&&e.toStringTag===$u||!1}function Uc(e){return new this(e).ln()}function Hc(e,t){return new this(e).log(t)}function kc(e){return new this(e).log(2)}function Vc(e){return new this(e).log(10)}function Zc(){return Hu(this,arguments,-1)}function Wc(){return Hu(this,arguments,1)}function jc(e,t){return new this(e).mod(t)}function Jc(e,t){return new this(e).mul(t)}function Gc(e,t){return new this(e).pow(t)}function Yc(e){var t,r,n,i,u=0,a=new this(1),o=[];if(e===void 0?e=this.precision:nt(e,1,qt),n=Math.ceil(e/ne),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));u<n;)i=t[u],i>=429e7?t[u]=crypto.getRandomValues(new Uint32Array(1))[0]:o[u++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);u<n;)i=t[u]+(t[u+1]<<8)+(t[u+2]<<16)+((t[u+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,u):(o.push(i%1e7),u+=4);u=n/4}else throw Error(Ru);else for(;u<n;)o[u++]=Math.random()*1e7|0;for(n=o[--u],e%=ne,n&&e&&(i=$e(10,ne-e),o[u]=(n/i|0)*i);o[u]===0;u--)o.pop();if(u<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=ne)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<ne&&(r-=ne-n)}return a.e=r,a.d=o,a}function Kc(e){return te(e=new this(e),e.e+1,this.rounding)}function Xc(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Qc(e){return new this(e).sin()}function el(e){return new this(e).sinh()}function tl(e){return new this(e).sqrt()}function rl(e,t){return new this(e).sub(t)}function nl(){var e=0,t=arguments,r=new this(t[e]);for(ae=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ae=!0,te(r,this.precision,this.rounding)}function il(e){return new this(e).tan()}function ul(e){return new this(e).tanh()}function al(e){return te(e=new this(e),e.e+1,1)}R[Symbol.for("nodejs.util.inspect.custom")]=R.toString;R[Symbol.toStringTag]="Decimal";var ir=R.constructor=Zu(qn);Gr=new ir(Gr);Yr=new ir(Yr);var ol="BigNumber",sl=["?on","config"],cl=K(ol,sl,e=>{var{on:t,config:r}=e,n=ir.clone({precision:r.precision,modulo:ir.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},t&&t("config",function(i,u){i.precision!==u.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const je=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},ct=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},ll=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Sn=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},Kt=function(){throw SyntaxError("Invalid Param")};function xn(e,t){const r=Math.abs(e),n=Math.abs(t);return e===0?Math.log(n):t===0?Math.log(r):r<3e3&&n<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const fl={re:0,im:0},Ut=function(e,t){const r=fl;if(e==null)r.re=r.im=0;else if(t!==void 0)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return L.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return L.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else e.length===2?(r.re=e[0],r.im=e[1]):Kt();break;case"string":r.im=r.re=0;const n=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,u=0;n===null&&Kt();for(let a=0;a<n.length;a++){const o=n[a];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?u++:o==="i"||o==="I"?(i+u===0&&Kt(),n[a+1]!==" "&&!isNaN(n[a+1])?(r.im+=parseFloat((u%2?"-":"")+n[a+1]),a++):r.im+=parseFloat((u%2?"-":"")+"1"),i=u=0):((i+u===0||isNaN(o))&&Kt(),n[a+1]==="i"||n[a+1]==="I"?(r.im+=parseFloat((u%2?"-":"")+o),a++):r.re+=parseFloat((u%2?"-":"")+o),i=u=0))}i+u>0&&Kt();break;case"number":r.im=0,r.re=e;break;default:Kt()}return isNaN(r.re)||isNaN(r.im),r};function L(e,t){if(!(this instanceof L))return new L(e,t);const r=Ut(e,t);this.re=r.re,this.im=r.im}L.prototype={re:0,im:0,sign:function(){const e=Sn(this.re,this.im);return new L(this.re/e,this.im/e)},add:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?L.NAN:L.INFINITY:new L(this.re+r.re,this.im+r.im)},sub:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?L.NAN:L.INFINITY:new L(this.re-r.re,this.im-r.im)},mul:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,a=r.re===0&&r.im===0;return n&&a||i&&u?L.NAN:n||i?L.INFINITY:r.im===0&&this.im===0?new L(this.re*r.re,0):new L(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,a=r.re===0&&r.im===0;if(u&&a||n&&i)return L.NAN;if(a||n)return L.INFINITY;if(u||i)return L.ZERO;if(r.im===0)return new L(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const o=r.re/r.im,s=r.re*o+r.im;return new L((this.re*o+this.im)/s,(this.im*o-this.re)/s)}else{const o=r.im/r.re,s=r.im*o+r.re;return new L((this.re+this.im*o)/s,(this.im-this.re*o)/s)}},pow:function(e,t){const r=Ut(e,t),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return L.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new L(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new L(Math.pow(this.im,r.re),0);case 1:return new L(0,Math.pow(this.im,r.re));case 2:return new L(-Math.pow(this.im,r.re),0);case 3:return new L(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return L.ZERO;const u=Math.atan2(this.im,this.re),a=xn(this.re,this.im);let o=Math.exp(r.re*a-r.im*u),s=r.im*a+r.re*u;return new L(o*Math.cos(s),o*Math.sin(s))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new L(Math.sqrt(e),0):new L(0,Math.sqrt(-e));const r=Sn(e,t);let n=Math.sqrt(.5*(r+Math.abs(e))),i=Math.abs(t)/(2*n);return e>=0?new L(n,t<0?-i:i):new L(i,t<0?-n:n)},exp:function(){const e=Math.exp(this.re);return this.im===0?new L(e,0):new L(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new L(Math.expm1(e)*Math.cos(t)+ll(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new L(Math.log(e),0):new L(xn(e,t),Math.atan2(t,e))},abs:function(){return Sn(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new L(Math.sin(e)*je(t),Math.cos(e)*ct(t))},cos:function(){const e=this.re,t=this.im;return new L(Math.cos(e)*je(t),-Math.sin(e)*ct(t))},tan:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)+je(t);return new L(Math.sin(e)/r,ct(t)/r)},cot:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)-je(t);return new L(-Math.sin(e)/r,ct(t)/r)},sec:function(){const e=this.re,t=this.im,r=.5*je(2*t)+.5*Math.cos(2*e);return new L(Math.cos(e)*je(t)/r,Math.sin(e)*ct(t)/r)},csc:function(){const e=this.re,t=this.im,r=.5*je(2*t)-.5*Math.cos(2*e);return new L(Math.sin(e)*je(t)/r,-Math.cos(e)*ct(t)/r)},asin:function(){const e=this.re,t=this.im,r=new L(t*t-e*e+1,-2*e*t).sqrt(),n=new L(r.re-t,r.im+e).log();return new L(n.im,-n.re)},acos:function(){const e=this.re,t=this.im,r=new L(t*t-e*e+1,-2*e*t).sqrt(),n=new L(r.re-t,r.im+e).log();return new L(Math.PI/2-n.im,n.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new L(0,1/0);if(t===-1)return new L(0,-1/0)}const r=e*e+(1-t)*(1-t),n=new L((1-t*t-e*e)/r,-2*e/r).log();return new L(-.5*n.im,.5*n.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new L(Math.atan2(1,e),0);const r=e*e+t*t;return r!==0?new L(e/r,-t/r).atan():new L(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new L(0,1/0);const r=e*e+t*t;return r!==0?new L(e/r,-t/r).acos():new L(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new L(Math.PI/2,1/0);const r=e*e+t*t;return r!==0?new L(e/r,-t/r).asin():new L(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new L(ct(e)*Math.cos(t),je(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new L(je(e)*Math.cos(t),ct(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,r=je(e)+Math.cos(t);return new L(ct(e)/r,Math.sin(t)/r)},coth:function(){const e=2*this.re,t=2*this.im,r=je(e)-Math.cos(t);return new L(ct(e)/r,-Math.sin(t)/r)},csch:function(){const e=this.re,t=this.im,r=Math.cos(2*t)-je(2*e);return new L(-2*ct(e)*Math.cos(t)/r,2*je(e)*Math.sin(t)/r)},sech:function(){const e=this.re,t=this.im,r=Math.cos(2*t)+je(2*e);return new L(2*je(e)*Math.cos(t)/r,-2*ct(e)*Math.sin(t)/r)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,r=e>1&&t===0,n=1-e,i=1+e,u=n*n+t*t,a=u!==0?new L((i*n-t*t)/u,(t*n+i*t)/u):new L(e!==-1?e/0:0,t!==0?t/0:0),o=a.re;return a.re=xn(a.re,a.im)/2,a.im=Math.atan2(a.im,o)/2,r&&(a.im=-a.im),a},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new L(0,Math.PI/2);const r=e*e+t*t;return r!==0?new L(e/r,-t/r).atanh():new L(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new L(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const r=e*e+t*t;return r!==0?new L(e/r,-t/r).asinh():new L(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return L.INFINITY;const r=e*e+t*t;return r!==0?new L(e/r,-t/r).acosh():new L(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return L.INFINITY;if(this.isInfinite())return L.ZERO;const e=this.re,t=this.im,r=e*e+t*t;return new L(e/r,-t/r)},conjugate:function(){return new L(this.re,-this.im)},neg:function(){return new L(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new L(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new L(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new L(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const r=Ut(e,t);return Math.abs(r.re-this.re)<=L.EPSILON&&Math.abs(r.im-this.im)<=L.EPSILON},clone:function(){return new L(this.re,this.im)},toString:function(){let e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<L.EPSILON&&(e=0),Math.abs(t)<L.EPSILON&&(t=0),t===0?r+e:(e!==0?(r+=e,r+=" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),t!==1&&(r+=t),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};L.ZERO=new L(0,0);L.ONE=new L(1,0);L.I=new L(0,1);L.PI=new L(Math.PI,0);L.E=new L(Math.E,0);L.INFINITY=new L(1/0,1/0);L.NAN=new L(NaN,NaN);L.EPSILON=1e-15;var hl="Complex",pl=[],dl=K(hl,pl,()=>(Object.defineProperty(L,"name",{value:"Complex"}),L.prototype.constructor=L,L.prototype.type="Complex",L.prototype.isComplex=!0,L.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},L.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},L.prototype.format=function(e){var t="",r=this.im,n=this.re,i=$n(this.re,e),u=$n(this.im,e),a=be(e)?e:e?e.precision:null;if(a!==null){var o=Math.pow(10,-a);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?t=i:n===0?r===1?t="i":r===-1?t="-i":t=u+"i":r<0?r===-1?t=i+" - i":t=i+" - "+u.substring(1)+"i":r===1?t=i+" + i":t=i+" + "+u+"i",t},L.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return L(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(be(r)){if(Su(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),be(n))return new L({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},L.prototype.valueOf=L.prototype.toString,L.fromJSON=function(e){return new L(e)},L.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},L),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const ee=BigInt(0),oe=BigInt(1),gr=BigInt(2),kn=BigInt(5),tt=BigInt(10),ml=2e3,Z={s:oe,n:ee,d:oe};function Mt(e,t){try{e=BigInt(e)}catch{throw It()}return e*t}function mt(e){return typeof e=="bigint"?e:Math.floor(e)}function Be(e,t){if(t===ee)throw ri();const r=Object.create(lt.prototype);r.s=e<ee?-oe:oe,e=e<ee?-e:e;const n=Ht(e,t);return r.n=e/n,r.d=t/n,r}function Xt(e){const t={};let r=e,n=gr,i=kn-oe;for(;i<=r;){for(;r%n===ee;)r/=n,t[n]=(t[n]||ee)+oe;i+=oe+gr*n++}return r!==e?r>1&&(t[r]=(t[r]||ee)+oe):t[e]=(t[e]||ee)+oe,t}const He=function(e,t){let r=ee,n=oe,i=oe;if(e!=null)if(t!==void 0){if(typeof e=="bigint")r=e;else{if(isNaN(e))throw It();if(e%1!==0)throw bi();r=BigInt(e)}if(typeof t=="bigint")n=t;else{if(isNaN(t))throw It();if(t%1!==0)throw bi();n=BigInt(t)}i=r*n}else if(typeof e=="object"){if("d"in e&&"n"in e)r=BigInt(e.n),n=BigInt(e.d),"s"in e&&(r*=BigInt(e.s));else if(0 in e)r=BigInt(e[0]),1 in e&&(n=BigInt(e[1]));else if(typeof e=="bigint")r=e;else throw It();i=r*n}else if(typeof e=="number"){if(isNaN(e))throw It();if(e<0&&(i=-oe,e=-e),e%1===0)r=BigInt(e);else{let u=1,a=0,o=1,s=1,c=1,l=1e7;for(e>=1&&(u=10**Math.floor(1+Math.log10(e)),e/=u);o<=l&&c<=l;){let h=(a+s)/(o+c);if(e===h){o+c<=l?(r=a+s,n=o+c):c>o?(r=s,n=c):(r=a,n=o);break}else e>h?(a+=s,o+=c):(s+=a,c+=o),o>l?(r=s,n=c):(r=a,n=o)}r=BigInt(r)*BigInt(u),n=BigInt(n)}}else if(typeof e=="string"){let u=0,a=ee,o=ee,s=ee,c=oe,l=oe,h=e.replace(/_/g,"").match(/\d+|./g);if(h===null)throw It();if(h[u]==="-"?(i=-oe,u++):h[u]==="+"&&u++,h.length===u+1?o=Mt(h[u++],i):h[u+1]==="."||h[u]==="."?(h[u]!=="."&&(a=Mt(h[u++],i)),u++,(u+1===h.length||h[u+1]==="("&&h[u+3]===")"||h[u+1]==="'"&&h[u+3]==="'")&&(o=Mt(h[u],i),c=tt**BigInt(h[u].length),u++),(h[u]==="("&&h[u+2]===")"||h[u]==="'"&&h[u+2]==="'")&&(s=Mt(h[u+1],i),l=tt**BigInt(h[u+1].length)-oe,u+=3)):h[u+1]==="/"||h[u+1]===":"?(o=Mt(h[u],i),c=Mt(h[u+2],oe),u+=3):h[u+3]==="/"&&h[u+1]===" "&&(a=Mt(h[u],i),o=Mt(h[u+2],i),c=Mt(h[u+4],oe),u+=5),h.length<=u)n=c*l,i=r=s+n*a+l*o;else throw It()}else if(typeof e=="bigint")r=e,i=e,n=oe;else throw It();if(n===ee)throw ri();Z.s=i<ee?-oe:oe,Z.n=r<ee?-r:r,Z.d=n<ee?-n:n};function Dl(e,t,r){let n=oe;for(;t>ee;e=e*e%r,t>>=oe)t&oe&&(n=n*e%r);return n}function vl(e,t){for(;t%gr===ee;t/=gr);for(;t%kn===ee;t/=kn);if(t===oe)return ee;let r=tt%t,n=1;for(;r!==oe;n++)if(r=r*tt%t,n>ml)return ee;return BigInt(n)}function gl(e,t,r){let n=oe,i=Dl(tt,r,t);for(let u=0;u<300;u++){if(n===i)return BigInt(u);n=n*tt%t,i=i*tt%t}return 0}function Ht(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function lt(e,t){if(He(e,t),this instanceof lt)e=Ht(Z.d,Z.n),this.s=Z.s,this.n=Z.n/e,this.d=Z.d/e;else return Be(Z.s*Z.n,Z.d)}var ri=function(){return new Error("Division by Zero")},It=function(){return new Error("Invalid argument")},bi=function(){return new Error("Parameters must be integer")};lt.prototype={s:oe,n:ee,d:oe,abs:function(){return Be(this.n,this.d)},neg:function(){return Be(-this.s*this.n,this.d)},add:function(e,t){return He(e,t),Be(this.s*this.n*Z.d+Z.s*this.d*Z.n,this.d*Z.d)},sub:function(e,t){return He(e,t),Be(this.s*this.n*Z.d-Z.s*this.d*Z.n,this.d*Z.d)},mul:function(e,t){return He(e,t),Be(this.s*Z.s*this.n*Z.n,this.d*Z.d)},div:function(e,t){return He(e,t),Be(this.s*Z.s*this.n*Z.d,this.d*Z.n)},clone:function(){return Be(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return Be(this.s*this.n%this.d,oe);if(He(e,t),ee===Z.n*this.d)throw ri();return Be(this.s*(Z.d*this.n)%(Z.n*this.d),Z.d*this.d)},gcd:function(e,t){return He(e,t),Be(Ht(Z.n,this.n)*Ht(Z.d,this.d),Z.d*this.d)},lcm:function(e,t){return He(e,t),Z.n===ee&&this.n===ee?Be(ee,oe):Be(Z.n*this.n,Ht(Z.n,this.n)*Ht(Z.d,this.d))},inverse:function(){return Be(this.s*this.d,this.n)},pow:function(e,t){if(He(e,t),Z.d===oe)return Z.s<ee?Be((this.s*this.d)**Z.n,this.n**Z.n):Be((this.s*this.n)**Z.n,this.d**Z.n);if(this.s<ee)return null;let r=Xt(this.n),n=Xt(this.d),i=oe,u=oe;for(let a in r)if(a!=="1"){if(a==="0"){i=ee;break}if(r[a]*=Z.n,r[a]%Z.d===ee)r[a]/=Z.d;else return null;i*=BigInt(a)**r[a]}for(let a in n)if(a!=="1"){if(n[a]*=Z.n,n[a]%Z.d===ee)n[a]/=Z.d;else return null;u*=BigInt(a)**n[a]}return Z.s<ee?Be(u,i):Be(i,u)},log:function(e,t){if(He(e,t),this.s<=ee||Z.s<=ee)return null;const r={},n=Xt(Z.n),i=Xt(Z.d),u=Xt(this.n),a=Xt(this.d);for(const c in i)n[c]=(n[c]||ee)-i[c];for(const c in a)u[c]=(u[c]||ee)-a[c];for(const c in n)c!=="1"&&(r[c]=!0);for(const c in u)c!=="1"&&(r[c]=!0);let o=null,s=null;for(const c in r){const l=n[c]||ee,h=u[c]||ee;if(l===ee){if(h!==ee)return null;continue}let p=h,d=l;const D=Ht(p,d);if(p/=D,d/=D,o===null&&s===null)o=p,s=d;else if(p*s!==o*d)return null}return o!==null&&s!==null?Be(o,s):null},equals:function(e,t){return He(e,t),this.s*this.n*Z.d===Z.s*Z.n*this.d},lt:function(e,t){return He(e,t),this.s*this.n*Z.d<Z.s*Z.n*this.d},lte:function(e,t){return He(e,t),this.s*this.n*Z.d<=Z.s*Z.n*this.d},gt:function(e,t){return He(e,t),this.s*this.n*Z.d>Z.s*Z.n*this.d},gte:function(e,t){return He(e,t),this.s*this.n*Z.d>=Z.s*Z.n*this.d},compare:function(e,t){He(e,t);let r=this.s*this.n*Z.d-Z.s*Z.n*this.d;return(ee<r)-(r<ee)},ceil:function(e){return e=tt**BigInt(e||0),Be(mt(this.s*e*this.n/this.d)+(e*this.n%this.d>ee&&this.s>=ee?oe:ee),e)},floor:function(e){return e=tt**BigInt(e||0),Be(mt(this.s*e*this.n/this.d)-(e*this.n%this.d>ee&&this.s<ee?oe:ee),e)},round:function(e){return e=tt**BigInt(e||0),Be(mt(this.s*e*this.n/this.d)+this.s*((this.s>=ee?oe:ee)+gr*(e*this.n%this.d)>this.d?oe:ee),e)},roundTo:function(e,t){He(e,t);const r=this.n*Z.d,n=this.d*Z.n,i=r%n;let u=mt(r/n);return i+i>=n&&u++,Be(this.s*u*Z.n,Z.d)},divisible:function(e,t){return He(e,t),!(!(Z.n*this.d)||this.n*Z.d%(Z.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,r=this.d;e=e||15;let n=vl(t,r),i=gl(t,r,n),u=this.s<ee?"-":"";if(u+=mt(t/r),t%=r,t*=tt,t&&(u+="."),n){for(let a=i;a--;)u+=mt(t/r),t%=r,t*=tt;u+="(";for(let a=n;a--;)u+=mt(t/r),t%=r,t*=tt;u+=")"}else for(let a=e;t&&a--;)u+=mt(t/r),t%=r,t*=tt;return u},toFraction:function(e){let t=this.n,r=this.d,n=this.s<ee?"-":"";if(r===oe)n+=t;else{let i=mt(t/r);e&&i>ee&&(n+=i,n+=" ",t%=r),n+=t,n+="/",n+=r}return n},toLatex:function(e){let t=this.n,r=this.d,n=this.s<ee?"-":"";if(r===oe)n+=t;else{let i=mt(t/r);e&&i>ee&&(n+=i,t%=r),n+="\\frac{",n+=t,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let e=this.n,t=this.d,r=[];do{r.push(mt(e/t));let n=e%t;e=t,t=n}while(e!==oe);return r},simplify:function(e){const t=BigInt(1/(e||.001)|0),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let u=Be(n[i-1],oe);for(let o=i-2;o>=0;o--)u=u.inverse().add(n[o]);let a=u.sub(r);if(a.n*t<a.d)return u.mul(this.s)}return this}};var yl="Fraction",wl=[],El=K(yl,wl,()=>(Object.defineProperty(lt,"name",{value:"Fraction"}),lt.prototype.constructor=lt,lt.prototype.type="Fraction",lt.prototype.isFraction=!0,lt.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},lt.fromJSON=function(e){return new lt(e)},lt),{isClass:!0}),_l="Matrix",Fl=[],Cl=K(_l,Fl,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function Nn(e,t,r){var n=e.constructor,i=new n(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Pe(r))throw new Error("size must be an integer");if(e.greaterThan(i.pow(r-1).sub(1))||e.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(r))),u="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(u);case 8:return"".concat(e.toOctal()).concat(u);case 16:return"".concat(e.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(t," not supported "))}}function bl(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=Tu(t);switch(r){case"fixed":return Bl(e,n);case"exponential":return Ai(e,n);case"engineering":return Al(e,n);case"bin":return Nn(e,2,i);case"oct":return Nn(e,8,i);case"hex":return Nn(e,16,i);case"auto":{var u=Bi(t==null?void 0:t.lowerExp,-3),a=Bi(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var o,s=e.toSignificantDigits(n),c=s.e;return c>=u&&c<a?o=s.toFixed():o=Ai(e,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var l=arguments[2],h=arguments[4];return l!=="."?l+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Al(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)),u=i.toPrecision(t);if(u.includes("e")){var a=e.constructor;u=new a(u).toFixed()}return u+"e"+(r>=0?"+":"")+n.toString()}function Ai(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Bl(e,t){return e.toFixed(t)}function Bi(e,t){return be(e)?e:Ae(e)?e.toNumber():t}function Re(e,t){var r=Ml(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function Ml(e,t){if(typeof e=="number")return $n(e,t);if(Ae(e))return bl(e,t);if(Sl(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return Wu(e,t);if(ft(e))return Mi(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>Mi(n)+": "+Re(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function Mi(e){for(var t=String(e),r="",n=0;n<t.length;){var i=t.charAt(n);r+=i in Si?Si[i]:i,n++}return'"'+r+'"'}var Si={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Wu(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Wu(e[i],t);return r+="]",r}else return Re(e,t)}function Sl(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function le(e,t,r){if(!(this instanceof le))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}le.prototype=new RangeError;le.prototype.constructor=RangeError;le.prototype.name="DimensionError";le.prototype.isDimensionError=!0;function Zt(e,t,r){if(!(this instanceof Zt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Zt.prototype=new RangeError;Zt.prototype.constructor=RangeError;Zt.prototype.name="IndexError";Zt.prototype.isIndexError=!0;function Je(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function ju(e,t,r){var n,i=e.length;if(i!==t[r])throw new le(i,t[r]);if(r<t.length-1){var u=r+1;for(n=0;n<i;n++){var a=e[n];if(!Array.isArray(a))throw new le(t.length-1,t.length,"<");ju(e[n],t,u)}}else for(n=0;n<i;n++)if(Array.isArray(e[n]))throw new le(t.length+1,t.length,">")}function xi(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new le(e.length,0)}else ju(e,t,0)}function Xr(e,t){var r=e.isMatrix?e._size:Je(e),n=t._sourceSize;n.forEach((i,u)=>{if(i!==null&&i!==r[u])throw new le(i,r[u])})}function _e(e,t){if(e!==void 0){if(!be(e)||!Pe(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Zt(e,t)}}function ur(e){for(var t=0;t<e._dimensions.length;++t){var r=e._dimensions[t];if(r._data&&Fe(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(ft(r)&&r.length===0)return!0}return!1}function yr(e,t,r){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!be(i)||!Pe(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Re(t)+")")}),(be(e)||Ae(e))&&(e=[e]);var n=r!==void 0?r:0;return Vn(e,t,0,n),e}function Vn(e,t,r,n){var i,u,a=e.length,o=t[r],s=Math.min(a,o);if(e.length=o,r<t.length-1){var c=r+1;for(i=0;i<s;i++)u=e[i],Array.isArray(u)||(u=[u],e[i]=u),Vn(u,t,c,n);for(i=s;i<o;i++)u=[],e[i]=u,Vn(u,t,c,n)}else{for(i=0;i<s;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=s;i<o;i++)e[i]=n}}function Ju(e,t){var r=Nl(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new le(0,n,"!=");t=ni(t,n);var i=Gu(t);if(n!==i)throw new le(i,n,"!=");try{return xl(r,t)}catch(u){throw u instanceof le?new le(i,n,"!="):u}}function ni(e,t){var r=Gu(e),n=e.slice(),i=-1,u=e.indexOf(i),a=e.indexOf(i,u+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var o=u>=0,s=t%r===0;if(o)if(s)n[u]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function Gu(e){return e.reduce((t,r)=>t*r,1)}function xl(e,t){for(var r=e,n,i=t.length-1;i>0;i--){var u=t[i];n=[];for(var a=r.length/u,o=0;o<a;o++)n.push(r.slice(o*u,(o+1)*u));r=n}return r}function Yu(e,t,r,n){var i=n||Je(e);if(r)for(var u=0;u<r;u++)e=[e],i.unshift(1);for(e=Ku(e,t,0);i.length<t;)i.push(1);return e}function Ku(e,t,r){var n,i;if(Array.isArray(e)){var u=r+1;for(n=0,i=e.length;n<i;n++)e[n]=Ku(e[n],t,u)}else for(var a=r;a<t;a++)e=[e];return e}function Nl(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(n){Array.isArray(n)?n.forEach(r):t.push(n)}),t}function vn(e,t){for(var r,n=0,i=0;i<e.length;i++){var u=e[i],a=Array.isArray(u);if(i===0&&a&&(n=u.length),a&&u.length!==n)return;var o=a?vn(u,t):t(u);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function Xu(e,t,r,n){if(n<r){if(e.length!==t.length)throw new le(e.length,t.length);for(var i=[],u=0;u<e.length;u++)i[u]=Xu(e[u],t[u],r,n+1);return i}else return e.concat(t)}function Qu(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(r,n){return Xu(r,n,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function ea(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=t.map(p=>p.length),i=Math.max(...n),u=new Array(i).fill(null),a=0;a<t.length;a++)for(var o=t[a],s=n[a],c=0;c<s;c++){var l=i-s+c;o[c]>u[l]&&(u[l]=o[c])}for(var h=0;h<t.length;h++)ta(t[h],u);return u}function ta(e,t){for(var r=t.length,n=e.length,i=0;i<n;i++){var u=r-n+i;if(e[i]<t[u]&&e[i]>1||e[i]>t[u])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(n," with size ").concat(e[i]," to size ").concat(t[u]))}}function Zn(e,t){var r=Je(e);if($t(r,t))return e;ta(r,t);var n=ea(r,t),i=n.length,u=[...Array(i-r.length).fill(1),...r],a=Ll(e);r.length<i&&(a=Ju(a,u),r=Je(a));for(var o=0;o<i;o++)r[o]<n[o]&&(a=Tl(a,n[o],o),r=Je(a));return a}function Tl(e,t,r){return Qu(...Array(t).fill(e),r)}function ra(e,t){if(!Array.isArray(e))throw new Error("Array expected");var r=Je(e);if(t.length!==r.length)throw new le(t.length,r.length);for(var n=0;n<t.length;n++)_e(t[n],r[n]);return t.reduce((i,u)=>i[u],e)}function Ll(e){return Zr([],e)}function Qr(e,t,r){if(Jr.isTypedFunction(e)){var n=(t.isMatrix?t.size():Je(t)).map(()=>0),i=t.isMatrix?t.get(n):ra(t,n),u=Object.keys(e.signatures).length===1,a=Pl(e,i,n,t),o=u?Object.values(e.signatures)[0]:e;return a>=1&&a<=3?function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return Ni(o,c.slice(0,a),r,e.name)}:function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return Ni(o,c,r,e.name)}}return e}function Pl(e,t,r,n){for(var i=[t,r,n],u=3;u>0;u--){var a=i.slice(0,u);if(Jr.resolve(e,a)!==null)return u}}function Ni(e,t,r,n){try{return e(...t)}catch(i){Il(i,t,r,n)}}function Il(e,t,r,n){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var u=[];throw u.push("value: ".concat(wt(t[0]))),t.length>=2&&u.push("index: ".concat(wt(t[1]))),t.length>=3&&u.push("array: ".concat(wt(t[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(u.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(e.message))}var Ol="DenseMatrix",Rl=["Matrix"],$l=K(Ol,Rl,e=>{var{Matrix:t}=e;function r(l,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!ft(h))throw new Error("Invalid datatype: "+h);if(Me(l))l.type==="DenseMatrix"?(this._data=Ce(l._data),this._size=Ce(l._size),this._datatype=h||l._datatype):(this._data=l.toArray(),this._size=l.size(),this._datatype=h||l._datatype);else if(l&&Fe(l.data)&&Fe(l.size))this._data=l.data,this._size=l.size,xi(this._data,this._size),this._datatype=h||l.datatype;else if(Fe(l))this._data=c(l),this._size=Je(this._data),xi(this._data,this._size),this._datatype=h;else{if(l)throw new TypeError("Unsupported type of data ("+wt(l)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new t,r.prototype.createDenseMatrix=function(l,h){return new r(l,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return vn(this._data,wt)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(l,h){return new r(l,h)},r.prototype.subset=function(l,h,p){switch(arguments.length){case 1:return n(this,l);case 2:case 3:return u(this,l,h,p);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(l){return ra(this._data,l)},r.prototype.set=function(l,h,p){if(!Fe(l))throw new TypeError("Array expected");if(l.length<this._size.length)throw new le(l.length,this._size.length,"<");var d,D,f,m=l.map(function(_){return _+1});s(this,m,p);var v=this._data;for(d=0,D=l.length-1;d<D;d++)f=l[d],_e(f,v.length),v=v[f];return f=l[l.length-1],_e(f,v.length),v[f]=h,this};function n(l,h){if(!fn(h))throw new TypeError("Invalid index");var p=h.isScalar();if(p)return l.get(h.min());var d=h.size();if(d.length!==l._size.length)throw new le(d.length,l._size.length);for(var D=h.min(),f=h.max(),m=0,v=l._size.length;m<v;m++)_e(D[m],l._size[m]),_e(f[m],l._size[m]);return new r(i(l._data,h,d.length,0),l._datatype)}function i(l,h,p,d){var D=d===p-1,f=h.dimension(d);return D?f.map(function(m){return _e(m,l.length),l[m]}).valueOf():f.map(function(m){_e(m,l.length);var v=l[m];return i(v,h,p,d+1)}).valueOf()}function u(l,h,p,d){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var D=h.size(),f=h.isScalar(),m;if(Me(p)?(m=p.size(),p=p.valueOf()):m=Je(p),f){if(m.length!==0)throw new TypeError("Scalar expected");l.set(h.min(),p,d)}else{if(!$t(m,D))try{m.length===0?p=Zn([p],D):p=Zn(p,D),m=Je(p)}catch{}if(D.length<l._size.length)throw new le(D.length,l._size.length,"<");if(m.length<D.length){for(var v=0,_=0;D[v]===1&&m[v]===1;)v++;for(;D[v]===1;)_++,v++;p=Yu(p,D.length,_,m)}if(!$t(D,m))throw new le(D,m,">");var g=h.max().map(function(y){return y+1});s(l,g,d);var F=D.length,w=0;a(l._data,h,p,F,w)}return l}function a(l,h,p,d,D){var f=D===d-1,m=h.dimension(D);f?m.forEach(function(v,_){_e(v),l[v]=p[_[0]]}):m.forEach(function(v,_){_e(v),a(l[v],h,p[_[0]],d,D+1)})}r.prototype.resize=function(l,h,p){if(!jr(l))throw new TypeError("Array or Matrix expected");var d=l.valueOf().map(f=>Array.isArray(f)&&f.length===1?f[0]:f),D=p?this.clone():this;return o(D,d,h)};function o(l,h,p){if(h.length===0){for(var d=l._data;Fe(d);)d=d[0];return d}return l._size=h.slice(0),l._data=yr(l._data,l._size,p),l}r.prototype.reshape=function(l,h){var p=h?this.clone():this;p._data=Ju(p._data,l);var d=p._size.reduce((D,f)=>D*f);return p._size=ni(l,d),p};function s(l,h,p){for(var d=l._size.slice(0),D=!1;d.length<h.length;)d.push(0),D=!0;for(var f=0,m=h.length;f<m;f++)h[f]>d[f]&&(d[f]=h[f],D=!0);D&&o(l,d,p)}r.prototype.clone=function(){var l=new r({data:Ce(this._data),size:Ce(this._size),datatype:this._datatype});return l},r.prototype.size=function(){return this._size.slice(0)},r.prototype._forEach=function(l){var h=this,p=h.size();if(p.length===1){for(var d=0;d<p[0];d++)l(h._data,d,[d]);return}var D=Array(p.length).fill(0),f=Array(p.length-1),m=f.length-1;f[0]=h._data[0];for(var v=0;v<m;v++)f[v+1]=f[v][0];for(D[m]=-1;;){var _=void 0;for(_=m;_>=0;_--){if(D[_]++,D[_]===p[_]){D[_]=0;continue}f[_]=_===0?h._data[D[_]]:f[_-1][D[_]];for(var g=_;g<m;g++)f[g+1]=f[g][0];for(var F=0;F<p[f.length];F++)D[f.length]=F,l(f[m],F,D.slice(0));break}if(_===-1)break}},r.prototype.map=function(l){var h=this,p=new r(h),d=Qr(l,h._data,"map");return p._forEach(function(D,f,m){D[f]=d(D[f],m,h)}),p},r.prototype.forEach=function(l){var h=this,p=Qr(l,h._data,"map");h._forEach(function(d,D,f){p(d[D],f,h)})},r.prototype[Symbol.iterator]=function*(){var l=function*(p,d){if(Fe(p))for(var D=0;D<p.length;D++)yield*l(p[D],d.concat(D));else yield{value:p,index:d}};yield*l(this._data,[])},r.prototype.rows=function(){var l=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var d of p)l.push(new r([d],this._datatype));return l},r.prototype.columns=function(){var l=this,h=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,D=function(v){var _=d.map(g=>[g[v]]);h.push(new r(_,l._datatype))},f=0;f<p[1];f++)D(f);return h},r.prototype.toArray=function(){return Ce(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(l){return Re(this._data,l)},r.prototype.toString=function(){return Re(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(l){if(l){if(Ae(l)&&(l=l.toNumber()),!be(l)||!Pe(l))throw new TypeError("The parameter k must be an integer number")}else l=0;for(var h=l>0?l:0,p=l<0?-l:0,d=this._size[0],D=this._size[1],f=Math.min(d-p,D-h),m=[],v=0;v<f;v++)m[v]=this._data[v+p][v+h];return new r({data:m,size:[f],datatype:this._datatype})},r.diagonal=function(l,h,p,d){if(!Fe(l))throw new TypeError("Array expected, size parameter");if(l.length!==2)throw new Error("Only two dimensions matrix are supported");if(l=l.map(function(C){if(Ae(C)&&(C=C.toNumber()),!be(C)||!Pe(C)||C<1)throw new Error("Size values must be positive integers");return C}),p){if(Ae(p)&&(p=p.toNumber()),!be(p)||!Pe(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var D=p>0?p:0,f=p<0?-p:0,m=l[0],v=l[1],_=Math.min(m-f,v-D),g;if(Fe(h)){if(h.length!==_)throw new Error("Invalid value array length");g=function(b){return h[b]}}else if(Me(h)){var F=h.size();if(F.length!==1||F[0]!==_)throw new Error("Invalid matrix length");g=function(b){return h.get([b])}}else g=function(){return h};d||(d=Ae(g(0))?g(0).mul(0):0);var w=[];if(l.length>0){w=yr(w,l,d);for(var y=0;y<_;y++)w[y+f][y+D]=g(y)}return new r({data:w,size:[m,v]})},r.fromJSON=function(l){return new r(l)},r.prototype.swapRows=function(l,h){if(!be(l)||!Pe(l)||!be(h)||!Pe(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _e(l,this._size[0]),_e(h,this._size[0]),r._swapRows(l,h,this._data),this},r._swapRows=function(l,h,p){var d=p[l];p[l]=p[h],p[h]=d};function c(l){return Me(l)?c(l.valueOf()):Fe(l)?l.map(c):l}return r},{isClass:!0});function Ct(e,t,r){return e&&typeof e.map=="function"?e.map(function(n){return Ct(n,t)}):t(e)}var Ti="isInteger",zl=["typed"],ql=K(Ti,zl,e=>{var{typed:t}=e;return t(Ti,{number:Pe,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":t.referToSelf(r=>n=>Ct(n,r))})}),na="number",ii="number, number";function ia(e){return Math.abs(e)}ia.signature=na;function ua(e,t){return e+t}ua.signature=ii;function aa(e,t){return e-t}aa.signature=ii;function oa(e,t){return e*t}oa.signature=ii;function sa(e){return-e}sa.signature=na;var Ul="number";function ca(e){return e>0}ca.signature=Ul;function or(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(r),n))}var Li="isPositive",Hl=["typed","config"],kl=K(Li,Hl,e=>{var{typed:t,config:r}=e;return t(Li,{number:n=>Nt(n,0,r.relTol,r.absTol)?!1:ca(n),BigNumber:n=>or(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:t.referToSelf(n=>i=>t.find(n,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(n=>i=>Ct(i,n))})}),Pi="isZero",Vl=["typed","equalScalar"],Zl=K(Pi,Vl,e=>{var{typed:t,equalScalar:r}=e;return t(Pi,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:t.referToSelf(n=>i=>t.find(n,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(n=>i=>Ct(i,n))})});function Wl(e,t,r,n){return Nt(e.re,t.re,r,n)&&Nt(e.im,t.im,r,n)}var br=K("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),en="equalScalar",jl=["typed","config"],Jl=K(en,jl,e=>{var{typed:t,config:r}=e,n=br({typed:t});return t(en,{"boolean, boolean":function(u,a){return u===a},"number, number":function(u,a){return Nt(u,a,r.relTol,r.absTol)},"BigNumber, BigNumber":function(u,a){return u.eq(a)||or(u,a,r.relTol,r.absTol)},"bigint, bigint":function(u,a){return u===a},"Fraction, Fraction":function(u,a){return u.equals(a)},"Complex, Complex":function(u,a){return Wl(u,a,r.relTol,r.absTol)}},n)});K(en,["typed","config"],e=>{var{typed:t,config:r}=e;return t(en,{"number, number":function(i,u){return Nt(i,u,r.relTol,r.absTol)}})});var Gl="SparseMatrix",Yl=["typed","equalScalar","Matrix"],Kl=K(Gl,Yl,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function i(f,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!ft(m))throw new Error("Invalid datatype: "+m);if(Me(f))u(this,f,m);else if(f&&Fe(f.index)&&Fe(f.ptr)&&Fe(f.size))this._values=f.values,this._index=f.index,this._ptr=f.ptr,this._size=f.size,this._datatype=m||f.datatype;else if(Fe(f))a(this,f,m);else{if(f)throw new TypeError("Unsupported type of data ("+wt(f)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function u(f,m,v){m.type==="SparseMatrix"?(f._values=m._values?Ce(m._values):void 0,f._index=Ce(m._index),f._ptr=Ce(m._ptr),f._size=Ce(m._size),f._datatype=v||m._datatype):a(f,m.valueOf(),v||m._datatype)}function a(f,m,v){f._values=[],f._index=[],f._ptr=[],f._datatype=v;var _=m.length,g=0,F=r,w=0;if(ft(v)&&(F=t.find(r,[v,v])||r,w=t.convert(0,v)),_>0){var y=0;do{f._ptr.push(f._index.length);for(var C=0;C<_;C++){var b=m[C];if(Fe(b)){if(y===0&&g<b.length&&(g=b.length),y<b.length){var B=b[y];F(B,w)||(f._values.push(B),f._index.push(C))}}else y===0&&g<1&&(g=1),F(b,w)||(f._values.push(b),f._index.push(C))}y++}while(y<g)}f._ptr.push(f._index.length),f._size=[_,g]}i.prototype=new n,i.prototype.createSparseMatrix=function(f,m){return new i(f,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return vn(this._values,wt)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(f,m){return new i(f,m)},i.prototype.density=function(){var f=this._size[0],m=this._size[1];return f!==0&&m!==0?this._index.length/(f*m):0},i.prototype.subset=function(f,m,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,f);case 2:case 3:return s(this,f,m,v);default:throw new SyntaxError("Wrong number of arguments")}};function o(f,m){if(!fn(m))throw new TypeError("Invalid index");var v=m.isScalar();if(v)return f.get(m.min());var _=m.size();if(_.length!==f._size.length)throw new le(_.length,f._size.length);var g,F,w,y,C=m.min(),b=m.max();for(g=0,F=f._size.length;g<F;g++)_e(C[g],f._size[g]),_e(b[g],f._size[g]);var B=f._values,N=f._index,M=f._ptr,T=m.dimension(0),V=m.dimension(1),I=[],z=[];T.forEach(function(Y,ue){z[Y]=ue[0],I[Y]=!0});var x=B?[]:void 0,G=[],W=[];return V.forEach(function(Y){for(W.push(G.length),w=M[Y],y=M[Y+1];w<y;w++)g=N[w],I[g]===!0&&(G.push(z[g]),x&&x.push(B[w]))}),W.push(G.length),new i({values:x,index:G,ptr:W,size:_,datatype:f._datatype})}function s(f,m,v,_){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var g=m.size(),F=m.isScalar(),w;if(Me(v)?(w=v.size(),v=v.toArray()):w=Je(v),F){if(w.length!==0)throw new TypeError("Scalar expected");f.set(m.min(),v,_)}else{if(g.length!==1&&g.length!==2)throw new le(g.length,f._size.length,"<");if(w.length<g.length){for(var y=0,C=0;g[y]===1&&w[y]===1;)y++;for(;g[y]===1;)C++,y++;v=Yu(v,g.length,C,w)}if(!$t(g,w))throw new le(g,w,">");if(g.length===1){var b=m.dimension(0);b.forEach(function(M,T){_e(M),f.set([M,0],v[T[0]],_)})}else{var B=m.dimension(0),N=m.dimension(1);B.forEach(function(M,T){_e(M),N.forEach(function(V,I){_e(V),f.set([M,V],v[T[0]][I[0]],_)})})}}return f}i.prototype.get=function(f){if(!Fe(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new le(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=f[0],v=f[1];_e(m,this._size[0]),_e(v,this._size[1]);var _=c(m,this._ptr[v],this._ptr[v+1],this._index);return _<this._ptr[v+1]&&this._index[_]===m?this._values[_]:0},i.prototype.set=function(f,m,v){if(!Fe(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new le(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var _=f[0],g=f[1],F=this._size[0],w=this._size[1],y=r,C=0;ft(this._datatype)&&(y=t.find(r,[this._datatype,this._datatype])||r,C=t.convert(0,this._datatype)),(_>F-1||g>w-1)&&(p(this,Math.max(_+1,F),Math.max(g+1,w),v),F=this._size[0],w=this._size[1]),_e(_,F),_e(g,w);var b=c(_,this._ptr[g],this._ptr[g+1],this._index);return b<this._ptr[g+1]&&this._index[b]===_?y(m,C)?l(b,g,this._values,this._index,this._ptr):this._values[b]=m:y(m,C)||h(b,_,g,m,this._values,this._index,this._ptr),this};function c(f,m,v,_){if(v-m===0)return v;for(var g=m;g<v;g++)if(_[g]===f)return g;return m}function l(f,m,v,_,g){v.splice(f,1),_.splice(f,1);for(var F=m+1;F<g.length;F++)g[F]--}function h(f,m,v,_,g,F,w){g.splice(f,0,_),F.splice(f,0,m);for(var y=v+1;y<w.length;y++)w[y]++}i.prototype.resize=function(f,m,v){if(!jr(f))throw new TypeError("Array or Matrix expected");var _=f.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(_.length!==2)throw new Error("Only two dimensions matrix are supported");_.forEach(function(F){if(!be(F)||!Pe(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Re(_)+")")});var g=v?this.clone():this;return p(g,_[0],_[1],m)};function p(f,m,v,_){var g=_||0,F=r,w=0;ft(f._datatype)&&(F=t.find(r,[f._datatype,f._datatype])||r,w=t.convert(0,f._datatype),g=t.convert(g,f._datatype));var y=!F(g,w),C=f._size[0],b=f._size[1],B,N,M;if(v>b){for(N=b;N<v;N++)if(f._ptr[N]=f._values.length,y)for(B=0;B<C;B++)f._values.push(g),f._index.push(B);f._ptr[v]=f._values.length}else v<b&&(f._ptr.splice(v+1,b-v),f._values.splice(f._ptr[v],f._values.length),f._index.splice(f._ptr[v],f._index.length));if(b=v,m>C){if(y){var T=0;for(N=0;N<b;N++){f._ptr[N]=f._ptr[N]+T,M=f._ptr[N+1]+T;var V=0;for(B=C;B<m;B++,V++)f._values.splice(M+V,0,g),f._index.splice(M+V,0,B),T++}f._ptr[b]=f._values.length}}else if(m<C){var I=0;for(N=0;N<b;N++){f._ptr[N]=f._ptr[N]-I;var z=f._ptr[N],x=f._ptr[N+1]-I;for(M=z;M<x;M++)B=f._index[M],B>m-1&&(f._values.splice(M,1),f._index.splice(M,1),I++)}f._ptr[N]=f._values.length}return f._size[0]=m,f._size[1]=v,f}i.prototype.reshape=function(f,m){if(!Fe(f))throw new TypeError("Array expected");if(f.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");f.forEach(function(Y){if(!be(Y)||!Pe(Y)||Y<=-2||Y===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Re(f)+")")});var v=this._size[0]*this._size[1];f=ni(f,v);var _=f[0]*f[1];if(v!==_)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=m?this.clone():this;if(this._size[0]===f[0]&&this._size[1]===f[1])return g;for(var F=[],w=0;w<g._ptr.length;w++)for(var y=0;y<g._ptr[w+1]-g._ptr[w];y++)F.push(w);for(var C=g._values.slice(),b=g._index.slice(),B=0;B<g._index.length;B++){var N=b[B],M=F[B],T=N*g._size[1]+M;F[B]=T%f[1],b[B]=Math.floor(T/f[1])}g._values.length=0,g._index.length=0,g._ptr.length=f[1]+1,g._size=f.slice();for(var V=0;V<g._ptr.length;V++)g._ptr[V]=0;for(var I=0;I<C.length;I++){var z=b[I],x=F[I],G=C[I],W=c(z,g._ptr[x],g._ptr[x+1],g._index);h(W,z,x,G,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var f=new i({values:this._values?Ce(this._values):void 0,index:Ce(this._index),ptr:Ce(this._ptr),size:Ce(this._size),datatype:this._datatype});return f},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(f,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,_=this._size[0],g=this._size[1],F=Qr(f,v,"map"),w=function(C,b,B){return F(C,[b,B],v)};return d(this,0,_-1,0,g-1,w,m)};function d(f,m,v,_,g,F,w){var y=[],C=[],b=[],B=r,N=0;ft(f._datatype)&&(B=t.find(r,[f._datatype,f._datatype])||r,N=t.convert(0,f._datatype));for(var M=function(he,Se,xe){var U=F(he,Se,xe);B(U,N)||(y.push(U),C.push(Se))},T=_;T<=g;T++){b.push(y.length);var V=f._ptr[T],I=f._ptr[T+1];if(w)for(var z=V;z<I;z++){var x=f._index[z];x>=m&&x<=v&&M(f._values[z],x-m,T-_)}else{for(var G={},W=V;W<I;W++){var Y=f._index[W];G[Y]=f._values[W]}for(var ue=m;ue<=v;ue++){var de=ue in G?G[ue]:0;M(de,ue-m,T-_)}}}return b.push(y.length),new i({values:y,index:C,ptr:b,size:[v-m+1,g-_+1]})}i.prototype.forEach=function(f,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,_=this._size[0],g=this._size[1],F=Qr(f,v,"forEach"),w=0;w<g;w++){var y=this._ptr[w],C=this._ptr[w+1];if(m)for(var b=y;b<C;b++){var B=this._index[b];F(this._values[b],[B,w],v)}else{for(var N={},M=y;M<C;M++){var T=this._index[M];N[T]=this._values[M]}for(var V=0;V<_;V++){var I=V in N?N[V]:0;F(I,[V,w],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var f=this._size[1],m=0;m<f;m++)for(var v=this._ptr[m],_=this._ptr[m+1],g=v;g<_;g++){var F=this._index[g];yield{value:this._values[g],index:[F,m]}}},i.prototype.toArray=function(){return D(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return D(this._values,this._index,this._ptr,this._size,!1)};function D(f,m,v,_,g){var F=_[0],w=_[1],y=[],C,b;for(C=0;C<F;C++)for(y[C]=[],b=0;b<w;b++)y[C][b]=0;for(b=0;b<w;b++)for(var B=v[b],N=v[b+1],M=B;M<N;M++)C=m[M],y[C][b]=f?g?Ce(f[M]):f[M]:1;return y}return i.prototype.format=function(f){for(var m=this._size[0],v=this._size[1],_=this.density(),g="Sparse Matrix ["+Re(m,f)+" x "+Re(v,f)+"] density: "+Re(_,f)+`
`,F=0;F<v;F++)for(var w=this._ptr[F],y=this._ptr[F+1],C=w;C<y;C++){var b=this._index[C];g+=`
    (`+Re(b,f)+", "+Re(F,f)+") ==> "+(this._values?Re(this._values[C],f):"X")}return g},i.prototype.toString=function(){return Re(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(f){if(f){if(Ae(f)&&(f=f.toNumber()),!be(f)||!Pe(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var m=f>0?f:0,v=f<0?-f:0,_=this._size[0],g=this._size[1],F=Math.min(_-v,g-m),w=[],y=[],C=[];C[0]=0;for(var b=m;b<g&&w.length<F;b++)for(var B=this._ptr[b],N=this._ptr[b+1],M=B;M<N;M++){var T=this._index[M];if(T===b-m+v){w.push(this._values[M]),y[w.length-1]=T-v;break}}return C.push(w.length),new i({values:w,index:y,ptr:C,size:[F,1]})},i.fromJSON=function(f){return new i(f)},i.diagonal=function(f,m,v,_,g){if(!Fe(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(Y){if(Ae(Y)&&(Y=Y.toNumber()),!be(Y)||!Pe(Y)||Y<1)throw new Error("Size values must be positive integers");return Y}),v){if(Ae(v)&&(v=v.toNumber()),!be(v)||!Pe(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var F=r,w=0;ft(g)&&(F=t.find(r,[g,g])||r,w=t.convert(0,g));var y=v>0?v:0,C=v<0?-v:0,b=f[0],B=f[1],N=Math.min(b-C,B-y),M;if(Fe(m)){if(m.length!==N)throw new Error("Invalid value array length");M=function(ue){return m[ue]}}else if(Me(m)){var T=m.size();if(T.length!==1||T[0]!==N)throw new Error("Invalid matrix length");M=function(ue){return m.get([ue])}}else M=function(){return m};for(var V=[],I=[],z=[],x=0;x<B;x++){z.push(V.length);var G=x-y;if(G>=0&&G<N){var W=M(G);F(W,w)||(I.push(G+C),V.push(W))}}return z.push(V.length),new i({values:V,index:I,ptr:z,size:[b,B]})},i.prototype.swapRows=function(f,m){if(!be(f)||!Pe(f)||!be(m)||!Pe(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _e(f,this._size[0]),_e(m,this._size[0]),i._swapRows(f,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(f,m,v,_,g){for(var F=_[f],w=_[f+1],y=F;y<w;y++)g(v[y],m[y])},i._swapRows=function(f,m,v,_,g,F){for(var w=0;w<v;w++){var y=F[w],C=F[w+1],b=c(f,y,C,g),B=c(m,y,C,g);if(b<C&&B<C&&g[b]===f&&g[B]===m){if(_){var N=_[b];_[b]=_[B],_[B]=N}continue}if(b<C&&g[b]===f&&(B>=C||g[B]!==m)){var M=_?_[b]:void 0;g.splice(B,0,m),_&&_.splice(B,0,M),g.splice(B<=b?b+1:b,1),_&&_.splice(B<=b?b+1:b,1);continue}if(B<C&&g[B]===m&&(b>=C||g[b]!==f)){var T=_?_[B]:void 0;g.splice(b,0,f),_&&_.splice(b,0,T),g.splice(b<=B?B+1:B,1),_&&_.splice(b<=B?B+1:B,1)}}},i},{isClass:!0}),Xl="number",Ql=["typed"];function ef(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],n=t[2],i=t[3];return{input:e,radix:r,integerPart:n,fractionalPart:i}}else return null}function tf(e){for(var t=parseInt(e.integerPart,e.radix),r=0,n=0;n<e.fractionalPart.length;n++){var i=parseInt(e.fractionalPart[n],e.radix);r+=i/Math.pow(e.radix,n+1)}var u=t+r;if(isNaN(u))throw new SyntaxError('String "'+e.input+'" is not a valid number');return u}var rf=K(Xl,Ql,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var u=ef(i);if(u)return tf(u);var a=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),i=o[1]);var s=Number(i);if(isNaN(s))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(s>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));s>=2**(a-1)&&(s=s-2**a)}return s},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),null:function(i){return 0},"Unit, string | Unit":function(i,u){return i.toNumber(u)},"Array | Matrix":t.referToSelf(n=>i=>Ct(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),nf="bignumber",uf=["typed","BigNumber"],af=K(nf,uf,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var u=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(u){var a=u[2],o=r(u[1]),s=new r(2).pow(Number(a));if(o.gt(s.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var c=new r(2).pow(Number(a)-1);return o.gte(c)?o.sub(s):o}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":t.referToSelf(n=>i=>Ct(i,n))})}),of="fraction",sf=["typed","Fraction"],cf=K(of,sf,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,u){return new r(i,u)},"bigint, bigint":function(i,u){return new r(i,u)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),Object:function(i){return new r(i)},"Array | Matrix":t.referToSelf(n=>i=>Ct(i,n))})}),Ii="matrix",lf=["typed","Matrix","DenseMatrix","SparseMatrix"],ff=K(Ii,lf,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(Ii,{"":function(){return u([])},string:function(o){return u([],o)},"string, string":function(o,s){return u([],o,s)},Array:function(o){return u(o)},Matrix:function(o){return u(o,o.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(a,o,s){if(o==="dense"||o==="default"||o===void 0)return new n(a,s);if(o==="sparse")return new i(a,s);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),Oi="unaryMinus",hf=["typed"],pf=K(Oi,hf,e=>{var{typed:t}=e;return t(Oi,{number:sa,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:t.referToSelf(r=>n=>{var i=n.clone();return i.value=t.find(r,i.valueType())(n.value),i}),"Array | Matrix":t.referToSelf(r=>n=>Ct(n,r))})}),Ri="abs",df=["typed"],mf=K(Ri,df,e=>{var{typed:t}=e;return t(Ri,{number:ia,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":t.referToSelf(r=>n=>Ct(n,r))})}),$i="addScalar",Df=["typed"],vf=K($i,Df,e=>{var{typed:t}=e;return t($i,{"number, number":ua,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),zi="subtractScalar",gf=["typed"],yf=K(zi,gf,e=>{var{typed:t}=e;return t(zi,{"number, number":aa,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),wf="matAlgo11xS0s",Ef=["typed","equalScalar"],_f=K(wf,Ef,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a,o){var s=i._values,c=i._index,l=i._ptr,h=i._size,p=i._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=h[0],D=h[1],f,m=r,v=0,_=a;typeof p=="string"&&(f=p,m=t.find(r,[f,f]),v=t.convert(0,f),u=t.convert(u,f),_=t.find(a,[f,f]));for(var g=[],F=[],w=[],y=0;y<D;y++){w[y]=F.length;for(var C=l[y],b=l[y+1],B=C;B<b;B++){var N=c[B],M=o?_(u,s[B]):_(s[B],u);m(M,v)||(F.push(N),g.push(M))}}return w[D]=F.length,i.createSparseMatrix({values:g,index:F,ptr:w,size:[d,D],datatype:f})}}),Ff="matAlgo12xSfs",Cf=["typed","DenseMatrix"],Ar=K(Ff,Cf,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,u,a,o){var s=i._values,c=i._index,l=i._ptr,h=i._size,p=i._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=h[0],D=h[1],f,m=a;typeof p=="string"&&(f=p,u=t.convert(u,f),m=t.find(a,[f,f]));for(var v=[],_=[],g=[],F=0;F<D;F++){for(var w=F+1,y=l[F],C=l[F+1],b=y;b<C;b++){var B=c[b];_[B]=s[b],g[B]=w}for(var N=0;N<d;N++)F===0&&(v[N]=[]),g[N]===w?v[N][F]=o?m(u,_[N]):m(_[N],u):v[N][F]=o?m(u,0):m(0,u)}return new r({data:v,size:[d,D],datatype:f})}}),bf="matAlgo14xDs",Af=["typed"],la=K(bf,Af,e=>{var{typed:t}=e;return function(i,u,a,o){var s=i._data,c=i._size,l=i._datatype,h,p=a;typeof l=="string"&&(h=l,u=t.convert(u,h),p=t.find(a,[h,h]));var d=c.length>0?r(p,0,c,c[0],s,u,o):[];return i.createDenseMatrix({data:d,size:Ce(c),datatype:h})};function r(n,i,u,a,o,s,c){var l=[];if(i===u.length-1)for(var h=0;h<a;h++)l[h]=c?n(s,o[h]):n(o[h],s);else for(var p=0;p<a;p++)l[p]=r(n,i+1,u,u[i+1],o[p],s,c);return l}}),Bf="matAlgo03xDSf",Mf=["typed"],Br=K(Bf,Mf,e=>{var{typed:t}=e;return function(n,i,u,a){var o=n._data,s=n._size,c=n._datatype||n.getDataType(),l=i._values,h=i._index,p=i._ptr,d=i._size,D=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(s.length!==d.length)throw new le(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=s[0],m=s[1],v,_=0,g=u;typeof c=="string"&&c===D&&c!=="mixed"&&(v=c,_=t.convert(0,v),g=t.find(u,[v,v]));for(var F=[],w=0;w<f;w++)F[w]=[];for(var y=[],C=[],b=0;b<m;b++){for(var B=b+1,N=p[b],M=p[b+1],T=N;T<M;T++){var V=h[T];y[V]=a?g(l[T],o[V][b]):g(o[V][b],l[T]),C[V]=B}for(var I=0;I<f;I++)C[I]===B?F[I][b]=y[I]:F[I][b]=a?g(_,o[I][b]):g(o[I][b],_)}return n.createDenseMatrix({data:F,size:[f,m],datatype:c===n._datatype&&D===i._datatype?v:void 0})}}),Sf="matAlgo05xSfSf",xf=["typed","equalScalar"],Nf=K(Sf,xf,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var o=i._values,s=i._index,c=i._ptr,l=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),p=u._values,d=u._index,D=u._ptr,f=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(l.length!==f.length)throw new le(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var v=l[0],_=l[1],g,F=r,w=0,y=a;typeof h=="string"&&h===m&&h!=="mixed"&&(g=h,F=t.find(r,[g,g]),w=t.convert(0,g),y=t.find(a,[g,g]));var C=o&&p?[]:void 0,b=[],B=[],N=C?[]:void 0,M=C?[]:void 0,T=[],V=[],I,z,x,G;for(z=0;z<_;z++){B[z]=b.length;var W=z+1;for(x=c[z],G=c[z+1];x<G;x++)I=s[x],b.push(I),T[I]=W,N&&(N[I]=o[x]);for(x=D[z],G=D[z+1];x<G;x++)I=d[x],T[I]!==W&&b.push(I),V[I]=W,M&&(M[I]=p[x]);if(C)for(x=B[z];x<b.length;){I=b[x];var Y=T[I],ue=V[I];if(Y===W||ue===W){var de=Y===W?N[I]:w,fe=ue===W?M[I]:w,he=y(de,fe);F(he,w)?b.splice(x,1):(C.push(he),x++)}}}return B[_]=b.length,i.createSparseMatrix({values:C,index:b,ptr:B,size:[v,_],datatype:h===i._datatype&&m===u._datatype?g:void 0})}}),Tf="matAlgo13xDD",Lf=["typed"],Pf=K(Tf,Lf,e=>{var{typed:t}=e;return function(i,u,a){var o=i._data,s=i._size,c=i._datatype,l=u._data,h=u._size,p=u._datatype,d=[];if(s.length!==h.length)throw new le(s.length,h.length);for(var D=0;D<s.length;D++){if(s[D]!==h[D])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+h+")");d[D]=s[D]}var f,m=a;typeof c=="string"&&c===p&&(f=c,m=t.find(a,[f,f]));var v=d.length>0?r(m,0,d,d[0],o,l):[];return i.createDenseMatrix({data:v,size:d,datatype:f})};function r(n,i,u,a,o,s){var c=[];if(i===u.length-1)for(var l=0;l<a;l++)c[l]=n(o[l],s[l]);else for(var h=0;h<a;h++)c[h]=r(n,i+1,u,u[i+1],o[h],s[h]);return c}});function Ue(e,t){if($t(e.size(),t.size()))return[e,t];var r=ea(e.size(),t.size());return[e,t].map(n=>If(n,r))}function If(e,t){return $t(e.size(),t)?e:e.create(Zn(e.valueOf(),t),e.datatype())}var Of="matrixAlgorithmSuite",Rf=["typed","matrix"],sr=K(Of,Rf,e=>{var{typed:t,matrix:r}=e,n=Pf({typed:t}),i=la({typed:t});return function(a){var o=a.elop,s=a.SD||a.DS,c;o?(c={"DenseMatrix, DenseMatrix":(d,D)=>n(...Ue(d,D),o),"Array, Array":(d,D)=>n(...Ue(r(d),r(D)),o).valueOf(),"Array, DenseMatrix":(d,D)=>n(...Ue(r(d),D),o),"DenseMatrix, Array":(d,D)=>n(...Ue(d,r(D)),o)},a.SS&&(c["SparseMatrix, SparseMatrix"]=(d,D)=>a.SS(...Ue(d,D),o,!1)),a.DS&&(c["DenseMatrix, SparseMatrix"]=(d,D)=>a.DS(...Ue(d,D),o,!1),c["Array, SparseMatrix"]=(d,D)=>a.DS(...Ue(r(d),D),o,!1)),s&&(c["SparseMatrix, DenseMatrix"]=(d,D)=>s(...Ue(D,d),o,!0),c["SparseMatrix, Array"]=(d,D)=>s(...Ue(r(D),d),o,!0))):(c={"DenseMatrix, DenseMatrix":t.referToSelf(d=>(D,f)=>n(...Ue(D,f),d)),"Array, Array":t.referToSelf(d=>(D,f)=>n(...Ue(r(D),r(f)),d).valueOf()),"Array, DenseMatrix":t.referToSelf(d=>(D,f)=>n(...Ue(r(D),f),d)),"DenseMatrix, Array":t.referToSelf(d=>(D,f)=>n(...Ue(D,r(f)),d))},a.SS&&(c["SparseMatrix, SparseMatrix"]=t.referToSelf(d=>(D,f)=>a.SS(...Ue(D,f),d,!1))),a.DS&&(c["DenseMatrix, SparseMatrix"]=t.referToSelf(d=>(D,f)=>a.DS(...Ue(D,f),d,!1)),c["Array, SparseMatrix"]=t.referToSelf(d=>(D,f)=>a.DS(...Ue(r(D),f),d,!1))),s&&(c["SparseMatrix, DenseMatrix"]=t.referToSelf(d=>(D,f)=>s(...Ue(f,D),d,!0)),c["SparseMatrix, Array"]=t.referToSelf(d=>(D,f)=>s(...Ue(r(f),D),d,!0))));var l=a.scalar||"any",h=a.Ds||a.Ss;h&&(o?(c["DenseMatrix,"+l]=(d,D)=>i(d,D,o,!1),c[l+", DenseMatrix"]=(d,D)=>i(D,d,o,!0),c["Array,"+l]=(d,D)=>i(r(d),D,o,!1).valueOf(),c[l+", Array"]=(d,D)=>i(r(D),d,o,!0).valueOf()):(c["DenseMatrix,"+l]=t.referToSelf(d=>(D,f)=>i(D,f,d,!1)),c[l+", DenseMatrix"]=t.referToSelf(d=>(D,f)=>i(f,D,d,!0)),c["Array,"+l]=t.referToSelf(d=>(D,f)=>i(r(D),f,d,!1).valueOf()),c[l+", Array"]=t.referToSelf(d=>(D,f)=>i(r(f),D,d,!0).valueOf())));var p=a.sS!==void 0?a.sS:a.Ss;return o?(a.Ss&&(c["SparseMatrix,"+l]=(d,D)=>a.Ss(d,D,o,!1)),p&&(c[l+", SparseMatrix"]=(d,D)=>p(D,d,o,!0))):(a.Ss&&(c["SparseMatrix,"+l]=t.referToSelf(d=>(D,f)=>a.Ss(D,f,d,!1))),p&&(c[l+", SparseMatrix"]=t.referToSelf(d=>(D,f)=>p(f,D,d,!0)))),o&&o.signatures&&ec(c,o.signatures),c}}),$f="matAlgo01xDSid",zf=["typed"],fa=K($f,zf,e=>{var{typed:t}=e;return function(n,i,u,a){var o=n._data,s=n._size,c=n._datatype||n.getDataType(),l=i._values,h=i._index,p=i._ptr,d=i._size,D=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(s.length!==d.length)throw new le(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=s[0],m=s[1],v=typeof c=="string"&&c!=="mixed"&&c===D?c:void 0,_=v?t.find(u,[v,v]):u,g,F,w=[];for(g=0;g<f;g++)w[g]=[];var y=[],C=[];for(F=0;F<m;F++){for(var b=F+1,B=p[F],N=p[F+1],M=B;M<N;M++)g=h[M],y[g]=a?_(l[M],o[g][F]):_(o[g][F],l[M]),C[g]=b;for(g=0;g<f;g++)C[g]===b?w[g][F]=y[g]:w[g][F]=o[g][F]}return n.createDenseMatrix({data:w,size:[f,m],datatype:c===n._datatype&&D===i._datatype?v:void 0})}}),qf="matAlgo04xSidSid",Uf=["typed","equalScalar"],Hf=K(qf,Uf,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var o=i._values,s=i._index,c=i._ptr,l=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),p=u._values,d=u._index,D=u._ptr,f=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(l.length!==f.length)throw new le(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var v=l[0],_=l[1],g,F=r,w=0,y=a;typeof h=="string"&&h===m&&h!=="mixed"&&(g=h,F=t.find(r,[g,g]),w=t.convert(0,g),y=t.find(a,[g,g]));var C=o&&p?[]:void 0,b=[],B=[],N=o&&p?[]:void 0,M=o&&p?[]:void 0,T=[],V=[],I,z,x,G,W;for(z=0;z<_;z++){B[z]=b.length;var Y=z+1;for(G=c[z],W=c[z+1],x=G;x<W;x++)I=s[x],b.push(I),T[I]=Y,N&&(N[I]=o[x]);for(G=D[z],W=D[z+1],x=G;x<W;x++)if(I=d[x],T[I]===Y){if(N){var ue=y(N[I],p[x]);F(ue,w)?T[I]=null:N[I]=ue}}else b.push(I),V[I]=Y,M&&(M[I]=p[x]);if(N&&M)for(x=B[z];x<b.length;)I=b[x],T[I]===Y?(C[x]=N[I],x++):V[I]===Y?(C[x]=M[I],x++):b.splice(x,1)}return B[_]=b.length,i.createSparseMatrix({values:C,index:b,ptr:B,size:[v,_],datatype:h===i._datatype&&m===u._datatype?g:void 0})}}),kf="matAlgo10xSids",Vf=["typed","DenseMatrix"],ha=K(kf,Vf,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,u,a,o){var s=i._values,c=i._index,l=i._ptr,h=i._size,p=i._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=h[0],D=h[1],f,m=a;typeof p=="string"&&(f=p,u=t.convert(u,f),m=t.find(a,[f,f]));for(var v=[],_=[],g=[],F=0;F<D;F++){for(var w=F+1,y=l[F],C=l[F+1],b=y;b<C;b++){var B=c[b];_[B]=s[b],g[B]=w}for(var N=0;N<d;N++)F===0&&(v[N]=[]),g[N]===w?v[N][F]=o?m(u,_[N]):m(_[N],u):v[N][F]=u}return new r({data:v,size:[d,D],datatype:f})}}),Zf="multiplyScalar",Wf=["typed"],jf=K(Zf,Wf,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":oa,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),qi="multiply",Jf=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Gf=K(qi,Jf,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:u,dot:a}=e,o=_f({typed:t,equalScalar:u}),s=la({typed:t});function c(w,y){switch(w.length){case 1:switch(y.length){case 1:if(w[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(w[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+y[0]+")");break;case 2:if(w[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function l(w,y,C){if(C===0)throw new Error("Cannot multiply two empty vectors");return a(w,y)}function h(w,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(w,y)}function p(w,y){var C=w._data,b=w._size,B=w._datatype||w.getDataType(),N=y._data,M=y._size,T=y._datatype||y.getDataType(),V=b[0],I=M[1],z,x=n,G=i;B&&T&&B===T&&typeof B=="string"&&B!=="mixed"&&(z=B,x=t.find(n,[z,z]),G=t.find(i,[z,z]));for(var W=[],Y=0;Y<I;Y++){for(var ue=G(C[0],N[0][Y]),de=1;de<V;de++)ue=x(ue,G(C[de],N[de][Y]));W[Y]=ue}return w.createDenseMatrix({data:W,size:[I],datatype:B===w._datatype&&T===y._datatype?z:void 0})}var d=t("_multiplyMatrixVector",{"DenseMatrix, any":f,"SparseMatrix, any":_}),D=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":F});function f(w,y){var C=w._data,b=w._size,B=w._datatype||w.getDataType(),N=y._data,M=y._datatype||y.getDataType(),T=b[0],V=b[1],I,z=n,x=i;B&&M&&B===M&&typeof B=="string"&&B!=="mixed"&&(I=B,z=t.find(n,[I,I]),x=t.find(i,[I,I]));for(var G=[],W=0;W<T;W++){for(var Y=C[W],ue=x(Y[0],N[0]),de=1;de<V;de++)ue=z(ue,x(Y[de],N[de]));G[W]=ue}return w.createDenseMatrix({data:G,size:[T],datatype:B===w._datatype&&M===y._datatype?I:void 0})}function m(w,y){var C=w._data,b=w._size,B=w._datatype||w.getDataType(),N=y._data,M=y._size,T=y._datatype||y.getDataType(),V=b[0],I=b[1],z=M[1],x,G=n,W=i;B&&T&&B===T&&typeof B=="string"&&B!=="mixed"&&B!=="mixed"&&(x=B,G=t.find(n,[x,x]),W=t.find(i,[x,x]));for(var Y=[],ue=0;ue<V;ue++){var de=C[ue];Y[ue]=[];for(var fe=0;fe<z;fe++){for(var he=W(de[0],N[0][fe]),Se=1;Se<I;Se++)he=G(he,W(de[Se],N[Se][fe]));Y[ue][fe]=he}}return w.createDenseMatrix({data:Y,size:[V,z],datatype:B===w._datatype&&T===y._datatype?x:void 0})}function v(w,y){var C=w._data,b=w._size,B=w._datatype||w.getDataType(),N=y._values,M=y._index,T=y._ptr,V=y._size,I=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!N)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=b[0],x=V[1],G,W=n,Y=i,ue=u,de=0;B&&I&&B===I&&typeof B=="string"&&B!=="mixed"&&(G=B,W=t.find(n,[G,G]),Y=t.find(i,[G,G]),ue=t.find(u,[G,G]),de=t.convert(0,G));for(var fe=[],he=[],Se=[],xe=y.createSparseMatrix({values:fe,index:he,ptr:Se,size:[z,x],datatype:B===w._datatype&&I===y._datatype?G:void 0}),U=0;U<x;U++){Se[U]=he.length;var $=T[U],Ne=T[U+1];if(Ne>$)for(var ge=0,De=0;De<z;De++){for(var ut=De+1,ke=void 0,ye=$;ye<Ne;ye++){var qe=M[ye];ge!==ut?(ke=Y(C[De][qe],N[ye]),ge=ut):ke=W(ke,Y(C[De][qe],N[ye]))}ge===ut&&!ue(ke,de)&&(he.push(De),fe.push(ke))}}return Se[x]=he.length,xe}function _(w,y){var C=w._values,b=w._index,B=w._ptr,N=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=y._data,T=y._datatype||y.getDataType(),V=w._size[0],I=y._size[0],z=[],x=[],G=[],W,Y=n,ue=i,de=u,fe=0;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&(W=N,Y=t.find(n,[W,W]),ue=t.find(i,[W,W]),de=t.find(u,[W,W]),fe=t.convert(0,W));var he=[],Se=[];G[0]=0;for(var xe=0;xe<I;xe++){var U=M[xe];if(!de(U,fe))for(var $=B[xe],Ne=B[xe+1],ge=$;ge<Ne;ge++){var De=b[ge];Se[De]?he[De]=Y(he[De],ue(U,C[ge])):(Se[De]=!0,x.push(De),he[De]=ue(U,C[ge]))}}for(var ut=x.length,ke=0;ke<ut;ke++){var ye=x[ke];z[ke]=he[ye]}return G[1]=x.length,w.createSparseMatrix({values:z,index:x,ptr:G,size:[V,1],datatype:N===w._datatype&&T===y._datatype?W:void 0})}function g(w,y){var C=w._values,b=w._index,B=w._ptr,N=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=y._data,T=y._datatype||y.getDataType(),V=w._size[0],I=y._size[0],z=y._size[1],x,G=n,W=i,Y=u,ue=0;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&(x=N,G=t.find(n,[x,x]),W=t.find(i,[x,x]),Y=t.find(u,[x,x]),ue=t.convert(0,x));for(var de=[],fe=[],he=[],Se=w.createSparseMatrix({values:de,index:fe,ptr:he,size:[V,z],datatype:N===w._datatype&&T===y._datatype?x:void 0}),xe=[],U=[],$=0;$<z;$++){he[$]=fe.length;for(var Ne=$+1,ge=0;ge<I;ge++){var De=M[ge][$];if(!Y(De,ue))for(var ut=B[ge],ke=B[ge+1],ye=ut;ye<ke;ye++){var qe=b[ye];U[qe]!==Ne?(U[qe]=Ne,fe.push(qe),xe[qe]=W(De,C[ye])):xe[qe]=G(xe[qe],W(De,C[ye]))}}for(var at=he[$],At=fe.length,Bt=at;Bt<At;Bt++){var jt=fe[Bt];de[Bt]=xe[jt]}}return he[z]=fe.length,Se}function F(w,y){var C=w._values,b=w._index,B=w._ptr,N=w._datatype||w._data===void 0?w._datatype:w.getDataType(),M=y._values,T=y._index,V=y._ptr,I=y._datatype||y._data===void 0?y._datatype:y.getDataType(),z=w._size[0],x=y._size[1],G=C&&M,W,Y=n,ue=i;N&&I&&N===I&&typeof N=="string"&&N!=="mixed"&&(W=N,Y=t.find(n,[W,W]),ue=t.find(i,[W,W]));for(var de=G?[]:void 0,fe=[],he=[],Se=w.createSparseMatrix({values:de,index:fe,ptr:he,size:[z,x],datatype:N===w._datatype&&I===y._datatype?W:void 0}),xe=G?[]:void 0,U=[],$,Ne,ge,De,ut,ke,ye,qe,at=0;at<x;at++){he[at]=fe.length;var At=at+1;for(ut=V[at],ke=V[at+1],De=ut;De<ke;De++)if(qe=T[De],G)for(Ne=B[qe],ge=B[qe+1],$=Ne;$<ge;$++)ye=b[$],U[ye]!==At?(U[ye]=At,fe.push(ye),xe[ye]=ue(M[De],C[$])):xe[ye]=Y(xe[ye],ue(M[De],C[$]));else for(Ne=B[qe],ge=B[qe+1],$=Ne;$<ge;$++)ye=b[$],U[ye]!==At&&(U[ye]=At,fe.push(ye));if(G)for(var Bt=he[at],jt=fe.length,Jt=Bt;Jt<jt;Jt++){var En=fe[Jt];de[Jt]=xe[En]}}return he[x]=fe.length,Se}return t(qi,i,{"Array, Array":t.referTo("Matrix, Matrix",w=>(y,C)=>{c(Je(y),Je(C));var b=w(r(y),r(C));return Me(b)?b.valueOf():b}),"Matrix, Matrix":function(y,C){var b=y.size(),B=C.size();return c(b,B),b.length===1?B.length===1?l(y,C,b[0]):h(y,C):B.length===1?d(y,C):D(y,C)},"Matrix, Array":t.referTo("Matrix,Matrix",w=>(y,C)=>w(y,r(C))),"Array, Matrix":t.referToSelf(w=>(y,C)=>w(r(y,C.storage()),C)),"SparseMatrix, any":function(y,C){return o(y,C,i,!1)},"DenseMatrix, any":function(y,C){return s(y,C,i,!1)},"any, SparseMatrix":function(y,C){return o(C,y,i,!0)},"any, DenseMatrix":function(y,C){return s(C,y,i,!0)},"Array, any":function(y,C){return s(r(y),C,i,!1).valueOf()},"any, Array":function(y,C){return s(r(C),y,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(w=>(y,C,b)=>{for(var B=w(y,C),N=0;N<b.length;N++)B=w(B,b[N]);return B})})}),Ui="subtract",Yf=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Kf=K(Ui,Yf,e=>{var{typed:t,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:u,DenseMatrix:a,concat:o}=e,s=fa({typed:t}),c=Br({typed:t}),l=Nf({typed:t,equalScalar:n}),h=ha({typed:t,DenseMatrix:a}),p=Ar({typed:t,DenseMatrix:a}),d=sr({typed:t,matrix:r,concat:o});return t(Ui,{"any, any":i},d({elop:i,SS:l,DS:s,SD:c,Ss:p,sS:h}))}),Xf="matAlgo07xSSf",Qf=["typed","SparseMatrix"],gn=K(Xf,Qf,e=>{var{typed:t,SparseMatrix:r}=e;return function(u,a,o){var s=u._size,c=u._datatype||u._data===void 0?u._datatype:u.getDataType(),l=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(s.length!==l.length)throw new le(s.length,l.length);if(s[0]!==l[0]||s[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+l+")");var p=s[0],d=s[1],D,f=0,m=o;typeof c=="string"&&c===h&&c!=="mixed"&&(D=c,f=t.convert(0,D),m=t.find(o,[D,D]));for(var v=[],_=[],g=new Array(d+1).fill(0),F=[],w=[],y=[],C=[],b=0;b<d;b++){var B=b+1,N=0;n(u,b,y,F,B),n(a,b,C,w,B);for(var M=0;M<p;M++){var T=y[M]===B?F[M]:f,V=C[M]===B?w[M]:f,I=m(T,V);I!==0&&I!==!1&&(_.push(M),v.push(I),N++)}g[b+1]=g[b]+N}return new r({values:v,index:_,ptr:g,size:[p,d],datatype:c===u._datatype&&h===a._datatype?D:void 0})};function n(i,u,a,o,s){for(var c=i._values,l=i._index,h=i._ptr,p=h[u],d=h[u+1];p<d;p++){var D=l[p];a[D]=s,o[D]=c[p]}}}),Hi="conj",e0=["typed"],t0=K(Hi,e0,e=>{var{typed:t}=e;return t(Hi,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>n=>Ct(n,r))})}),ki="concat",r0=["typed","matrix","isInteger"],n0=K(ki,r0,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(ki,{"...Array | Matrix | number | BigNumber":function(u){var a,o=u.length,s=-1,c,l=!1,h=[];for(a=0;a<o;a++){var p=u[a];if(Me(p)&&(l=!0),be(p)||Ae(p)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(c=s,s=p.valueOf(),!n(s))throw new TypeError("Integer number expected for dimension");if(s<0||a>0&&s>c)throw new Zt(s,c+1)}else{var d=Ce(p).valueOf(),D=Je(d);if(h[a]=d,c=s,s=D.length-1,a>0&&s!==c)throw new le(c+1,s+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var f=h.shift();h.length;)f=Qu(f,h.shift(),s);return l?r(f):f},"...string":function(u){return u.join("")}})}),Vi="getMatrixDataType",i0=["typed"],u0=K(Vi,i0,e=>{var{typed:t}=e;return t(Vi,{Array:function(n){return vn(n,wt)},Matrix:function(n){return n.getDataType()}})}),Zi="identity",a0=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],o0=K(Zi,a0,e=>{var{typed:t,config:r,matrix:n,BigNumber:i,DenseMatrix:u,SparseMatrix:a}=e;return t(Zi,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(l){return n(l)},"number | BigNumber":function(l){return s(l,l,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(l,h){return s(l,l,h)},"number | BigNumber, number | BigNumber":function(l,h){return s(l,h,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(l,h,p){return s(l,h,p)},Array:function(l){return o(l)},"Array, string":function(l,h){return o(l,h)},Matrix:function(l){return o(l.valueOf(),l.storage())},"Matrix, string":function(l,h){return o(l.valueOf(),h)}});function o(c,l){switch(c.length){case 0:return l?n(l):[];case 1:return s(c[0],c[0],l);case 2:return s(c[0],c[1],l);default:throw new Error("Vector containing two values expected")}}function s(c,l,h){var p=Ae(c)||Ae(l)?i:null;if(Ae(c)&&(c=c.toNumber()),Ae(l)&&(l=l.toNumber()),!Pe(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!Pe(l)||l<1)throw new Error("Parameters in function identity must be positive integers");var d=p?new i(1):1,D=p?new p(0):0,f=[c,l];if(h){if(h==="sparse")return a.diagonal(f,d,0,D);if(h==="dense")return u.diagonal(f,d,0,D);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var m=yr([],f,D),v=c<l?c:l,_=0;_<v;_++)m[_][_]=d;return m}}),s0="ones",c0=["typed","config","matrix","BigNumber"],l0=K(s0,c0,e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t("ones",{"":function(){return r.matrix==="Array"?u([]):u([],"default")},"...number | BigNumber | string":function(c){var l=c[c.length-1];if(typeof l=="string"){var h=c.pop();return u(c,h)}else return r.matrix==="Array"?u(c):u(c,"default")},Array:u,Matrix:function(c){var l=c.storage();return u(c.valueOf(),l)},"Array | Matrix, string":function(c,l){return u(c.valueOf(),l)}});function u(s,c){var l=a(s),h=l?new i(1):1;if(o(s),c){var p=n(c);return s.length>0?p.resize(s,h):p}else{var d=[];return s.length>0?yr(d,s,h):d}}function a(s){var c=!1;return s.forEach(function(l,h,p){Ae(l)&&(c=!0,p[h]=l.toNumber())}),c}function o(s){s.forEach(function(c){if(typeof c!="number"||!Pe(c)||c<0)throw new Error("Parameters in function ones must be positive integers")})}});function pa(){throw new Error('No "bignumber" implementation available')}function f0(){throw new Error('No "fraction" implementation available')}function da(){throw new Error('No "matrix" implementation available')}var Wi="range",h0=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],p0=K(Wi,h0,e=>{var{typed:t,config:r,matrix:n,bignumber:i,smaller:u,smallerEq:a,larger:o,largerEq:s,add:c,isPositive:l}=e;return t(Wi,{string:p,"string, boolean":p,number:function(m){throw new TypeError("Too few arguments to function range(): ".concat(m))},boolean:function(m){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(m,", number|bigint|BigNumber|Fraction"))},"number, number":function(m,v){return h(d(m,v,1,!1))},"number, number, number":function(m,v,_){return h(d(m,v,_,!1))},"number, number, boolean":function(m,v,_){return h(d(m,v,1,_))},"number, number, number, boolean":function(m,v,_,g){return h(d(m,v,_,g))},"bigint, bigint|number":function(m,v){return h(d(m,v,1n,!1))},"number, bigint":function(m,v){return h(d(BigInt(m),v,1n,!1))},"bigint, bigint|number, bigint|number":function(m,v,_){return h(d(m,v,BigInt(_),!1))},"number, bigint, bigint|number":function(m,v,_){return h(d(BigInt(m),v,BigInt(_),!1))},"bigint, bigint|number, boolean":function(m,v,_){return h(d(m,v,1n,_))},"number, bigint, boolean":function(m,v,_){return h(d(BigInt(m),v,1n,_))},"bigint, bigint|number, bigint|number, boolean":function(m,v,_,g){return h(d(m,v,BigInt(_),g))},"number, bigint, bigint|number, boolean":function(m,v,_,g){return h(d(BigInt(m),v,BigInt(_),g))},"BigNumber, BigNumber":function(m,v){var _=m.constructor;return h(d(m,v,new _(1),!1))},"BigNumber, BigNumber, BigNumber":function(m,v,_){return h(d(m,v,_,!1))},"BigNumber, BigNumber, boolean":function(m,v,_){var g=m.constructor;return h(d(m,v,new g(1),_))},"BigNumber, BigNumber, BigNumber, boolean":function(m,v,_,g){return h(d(m,v,_,g))},"Fraction, Fraction":function(m,v){return h(d(m,v,1,!1))},"Fraction, Fraction, Fraction":function(m,v,_){return h(d(m,v,_,!1))},"Fraction, Fraction, boolean":function(m,v,_){return h(d(m,v,1,_))},"Fraction, Fraction, Fraction, boolean":function(m,v,_,g){return h(d(m,v,_,g))},"Unit, Unit, Unit":function(m,v,_){return h(d(m,v,_,!1))},"Unit, Unit, Unit, boolean":function(m,v,_,g){return h(d(m,v,_,g))}});function h(f){return r.matrix==="Matrix"?n?n(f):da():f}function p(f,m){var v=D(f);if(!v)throw new SyntaxError('String "'+f+'" is no valid range');return r.number==="BigNumber"?(i===void 0&&pa(),h(d(i(v.start),i(v.end),i(v.step)))):h(d(v.start,v.end,v.step,m))}function d(f,m,v,_){for(var g=[],F=l(v)?_?a:u:_?s:o,w=f;F(w,m);)g.push(w),w=c(w,v);return g}function D(f){var m=f.split(":"),v=m.map(function(g){return Number(g)}),_=v.some(function(g){return isNaN(g)});if(_)return null;switch(v.length){case 2:return{start:v[0],end:v[1],step:1};case 3:return{start:v[0],end:v[2],step:v[1]};default:return null}}}),ji="size",d0=["typed","config","?matrix"],m0=K(ji,d0,e=>{var{typed:t,config:r,matrix:n}=e;return t(ji,{Matrix:function(u){return u.create(u.size(),"number")},Array:Je,string:function(u){return r.matrix==="Array"?[u.length]:n([u.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:n?n([],"dense","number"):da()}})}),Ji="subset",D0=["typed","matrix","zeros","add"],v0=K(Ji,D0,e=>{var{typed:t,matrix:r,zeros:n,add:i}=e;return t(Ji,{"Matrix, Index":function(o,s){return ur(s)?r():(Xr(o,s),o.subset(s))},"Array, Index":t.referTo("Matrix, Index",function(a){return function(o,s){var c=a(r(o),s);return s.isScalar()?c:c.valueOf()}}),"Object, Index":y0,"string, Index":g0,"Matrix, Index, any, any":function(o,s,c,l){return ur(s)?o:(Xr(o,s),o.clone().subset(s,u(c,s),l))},"Array, Index, any, any":t.referTo("Matrix, Index, any, any",function(a){return function(o,s,c,l){var h=a(r(o),s,c,l);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":t.referTo("Matrix, Index, any, any",function(a){return function(o,s,c){return a(r(o),s,c,void 0).valueOf()}}),"Matrix, Index, any":t.referTo("Matrix, Index, any, any",function(a){return function(o,s,c){return a(o,s,c,void 0)}}),"string, Index, string":Gi,"string, Index, string, string":Gi,"Object, Index, any":w0});function u(a,o){if(typeof a=="string")throw new Error("can't boradcast a string");if(o._isScalar)return a;var s=o.size();if(s.every(c=>c>0))try{return i(a,n(s))}catch{return a}else return a}});function g0(e,t){if(!fn(t))throw new TypeError("Index expected");if(ur(t))return"";if(Xr(Array.from(e),t),t.size().length!==1)throw new le(t.size().length,1);var r=e.length;_e(t.min()[0],r),_e(t.max()[0],r);var n=t.dimension(0),i="";return n.forEach(function(u){i+=e.charAt(u)}),i}function Gi(e,t,r,n){if(!t||t.isIndex!==!0)throw new TypeError("Index expected");if(ur(t))return e;if(Xr(Array.from(e),t),t.size().length!==1)throw new le(t.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=t.dimension(0),u=i.size()[0];if(u!==r.length)throw new le(i.size()[0],r.length);var a=e.length;_e(t.min()[0]),_e(t.max()[0]);for(var o=[],s=0;s<a;s++)o[s]=e.charAt(s);if(i.forEach(function(h,p){o[h]=r.charAt(p[0])}),o.length>a)for(var c=a-1,l=o.length;c<l;c++)o[c]||(o[c]=n);return o.join("")}function y0(e,t){if(!ur(t)){if(t.size().length!==1)throw new le(t.size(),1);var r=t.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return bu(e,r)}}function w0(e,t,r){if(ur(t))return e;if(t.size().length!==1)throw new le(t.size(),1);var n=t.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Ce(e);return Au(i,n,r),i}var Yi="zeros",E0=["typed","config","matrix","BigNumber"],_0=K(Yi,E0,e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t(Yi,{"":function(){return r.matrix==="Array"?u([]):u([],"default")},"...number | BigNumber | string":function(c){var l=c[c.length-1];if(typeof l=="string"){var h=c.pop();return u(c,h)}else return r.matrix==="Array"?u(c):u(c,"default")},Array:u,Matrix:function(c){var l=c.storage();return u(c.valueOf(),l)},"Array | Matrix, string":function(c,l){return u(c.valueOf(),l)}});function u(s,c){var l=a(s),h=l?new i(0):0;if(o(s),c){var p=n(c);return s.length>0?p.resize(s,h):p}else{var d=[];return s.length>0?yr(d,s,h):d}}function a(s){var c=!1;return s.forEach(function(l,h,p){Ae(l)&&(c=!0,p[h]=l.toNumber())}),c}function o(s){s.forEach(function(c){if(typeof c!="number"||!Pe(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}}),F0="numeric",C0=["number","?bignumber","?fraction"],b0=K(F0,C0,e=>{var{number:t,bignumber:r,fraction:n}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:a=>t(a),BigNumber:r?a=>r(a):pa,bigint:a=>BigInt(a),Fraction:n?a=>n(a):f0};return function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(c!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var l=wt(o);if(!(l in i))throw new TypeError("Cannot convert "+o+' of type "'+l+'"; valid input types are '+Object.keys(i).join(", "));if(!(s in u))throw new TypeError("Cannot convert "+o+' to type "'+s+'"; valid output types are '+Object.keys(u).join(", "));return s===l?o:u[s](o)}}),Ki="divideScalar",A0=["typed","numeric"],B0=K(Ki,A0,e=>{var{typed:t,numeric:r}=e;return t(Ki,{"number, number":function(i,u){return i/u},"Complex, Complex":function(i,u){return i.div(u)},"BigNumber, BigNumber":function(i,u){return i.div(u)},"bigint, bigint":function(i,u){return i/u},"Fraction, Fraction":function(i,u){return i.div(u)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),tn="smaller",M0=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],S0=K(tn,M0,e=>{var{typed:t,config:r,bignumber:n,matrix:i,DenseMatrix:u,concat:a,SparseMatrix:o}=e,s=Br({typed:t}),c=gn({typed:t,SparseMatrix:o}),l=Ar({typed:t,DenseMatrix:u}),h=sr({typed:t,matrix:i,concat:a}),p=br({typed:t});function d(D,f){return D.lt(f)&&!or(D,f,r.relTol,r.absTol)}return t(tn,x0({typed:t,config:r}),{"boolean, boolean":(D,f)=>D<f,"BigNumber, BigNumber":d,"bigint, bigint":(D,f)=>D<f,"Fraction, Fraction":(D,f)=>D.compare(f)===-1,"Fraction, BigNumber":function(f,m){return d(n(f),m)},"BigNumber, Fraction":function(f,m){return d(f,n(m))},"Complex, Complex":function(f,m){throw new TypeError("No ordering relation is defined for complex numbers")}},p,h({SS:c,DS:s,Ss:l}))}),x0=K(tn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(tn,{"number, number":function(i,u){return i<u&&!Nt(i,u,r.relTol,r.absTol)}})}),rn="smallerEq",N0=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],T0=K(rn,N0,e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i,concat:u,SparseMatrix:a}=e,o=Br({typed:t}),s=gn({typed:t,SparseMatrix:a}),c=Ar({typed:t,DenseMatrix:i}),l=sr({typed:t,matrix:n,concat:u}),h=br({typed:t});return t(rn,L0({typed:t,config:r}),{"boolean, boolean":(p,d)=>p<=d,"BigNumber, BigNumber":function(d,D){return d.lte(D)||or(d,D,r.relTol,r.absTol)},"bigint, bigint":(p,d)=>p<=d,"Fraction, Fraction":(p,d)=>p.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,l({SS:s,DS:o,Ss:c}))}),L0=K(rn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(rn,{"number, number":function(i,u){return i<=u||Nt(i,u,r.relTol,r.absTol)}})}),nn="larger",P0=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],I0=K(nn,P0,e=>{var{typed:t,config:r,bignumber:n,matrix:i,DenseMatrix:u,concat:a,SparseMatrix:o}=e,s=Br({typed:t}),c=gn({typed:t,SparseMatrix:o}),l=Ar({typed:t,DenseMatrix:u}),h=sr({typed:t,matrix:i,concat:a}),p=br({typed:t});function d(D,f){return D.gt(f)&&!or(D,f,r.relTol,r.absTol)}return t(nn,O0({typed:t,config:r}),{"boolean, boolean":(D,f)=>D>f,"BigNumber, BigNumber":d,"bigint, bigint":(D,f)=>D>f,"Fraction, Fraction":(D,f)=>D.compare(f)===1,"Fraction, BigNumber":function(f,m){return d(n(f),m)},"BigNumber, Fraction":function(f,m){return d(f,n(m))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,h({SS:c,DS:s,Ss:l}))}),O0=K(nn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(nn,{"number, number":function(i,u){return i>u&&!Nt(i,u,r.relTol,r.absTol)}})}),un="largerEq",R0=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],$0=K(un,R0,e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i,concat:u,SparseMatrix:a}=e,o=Br({typed:t}),s=gn({typed:t,SparseMatrix:a}),c=Ar({typed:t,DenseMatrix:i}),l=sr({typed:t,matrix:n,concat:u}),h=br({typed:t});return t(un,z0({typed:t,config:r}),{"boolean, boolean":(p,d)=>p>=d,"BigNumber, BigNumber":function(d,D){return d.gte(D)||or(d,D,r.relTol,r.absTol)},"bigint, bigint":function(d,D){return d>=D},"Fraction, Fraction":(p,d)=>p.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,l({SS:s,DS:o,Ss:c}))}),z0=K(un,["typed","config"],e=>{var{typed:t,config:r}=e;return t(un,{"number, number":function(i,u){return i>=u||Nt(i,u,r.relTol,r.absTol)}})}),q0="ImmutableDenseMatrix",U0=["smaller","DenseMatrix"],H0=K(q0,U0,e=>{var{smaller:t,DenseMatrix:r}=e;function n(i,u){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(u&&!ft(u))throw new Error("Invalid datatype: "+u);if(Me(i)||Fe(i)){var a=new r(i,u);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&Fe(i.data)&&Fe(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+wt(i)+")");this._data=[],this._size=[0],this._datatype=u,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var u=r.prototype.subset.call(this,i);return Me(u)?new n({data:u._data,size:u._size,datatype:u._datatype}):u}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Ce(this._data),size:Ce(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(u){(i===null||t(u,i))&&(i=u)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(u){(i===null||t(i,u))&&(i=u)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),k0="Index",V0=["ImmutableDenseMatrix","getMatrixDataType"],Z0=K(k0,V0,e=>{var{ImmutableDenseMatrix:t,getMatrixDataType:r}=e;function n(u){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,o=arguments.length;a<o;a++){var s=arguments[a],c=Fe(s),l=Me(s),h=typeof s,p=null;if(xu(s))this._dimensions.push(s),this._isScalar=!1;else if(c||l){var d=void 0;r(s)==="boolean"?(c&&(d=i(Xi(s).valueOf())),l&&(d=i(Xi(s._data).valueOf())),p=s.valueOf().length):d=i(s.valueOf()),this._dimensions.push(d);var D=d.size();(D.length!==1||D[0]!==1||p!==null)&&(this._isScalar=!1)}else if(h==="number")this._dimensions.push(i([s]));else if(h==="bigint")this._dimensions.push(i([Number(s)]));else if(h==="string")this._dimensions.push(s);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(p)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(u){for(var a=0,o=u.length;a<o;a++)if(typeof u[a]!="number"||!Pe(u[a]))throw new TypeError("Index parameters must be positive integer numbers");return new t(u)}return n.prototype.clone=function(){var u=new n;return u._dimensions=Ce(this._dimensions),u._isScalar=this._isScalar,u._sourceSize=this._sourceSize,u},n.create=function(u){var a=new n;return n.apply(a,u),a},n.prototype.size=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u[a]=typeof s=="string"?1:s.size()[0]}return u},n.prototype.max=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u[a]=typeof s=="string"?s:s.max()}return u},n.prototype.min=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u[a]=typeof s=="string"?s:s.min()}return u},n.prototype.forEach=function(u){for(var a=0,o=this._dimensions.length;a<o;a++)u(this._dimensions[a],a,this)},n.prototype.dimension=function(u){return typeof u!="number"?null:this._dimensions[u]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u.push(typeof s=="string"?s:s.toArray())}return u},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];typeof s=="string"?u.push(JSON.stringify(s)):u.push(s.toString())}return"["+u.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(u){return n.create(u.dimensions)},n},{isClass:!0});function Xi(e){var t=[];return e.forEach((r,n)=>{r&&t.push(n)}),t}var Qi="add",W0=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],j0=K(Qi,W0,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:u,SparseMatrix:a,concat:o}=e,s=fa({typed:t}),c=Hf({typed:t,equalScalar:i}),l=ha({typed:t,DenseMatrix:u}),h=sr({typed:t,matrix:r,concat:o});return t(Qi,{"any, any":n,"any, any, ...any":t.referToSelf(p=>(d,D,f)=>{for(var m=p(d,D),v=0;v<f.length;v++)m=p(m,f[v]);return m})},h({elop:n,DS:s,SS:c,Ss:l}))}),eu="dot",J0=["typed","addScalar","multiplyScalar","conj","size"],G0=K(eu,J0,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:i,size:u}=e;return t(eu,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":s});function a(l,h){var p=c(l),d=c(h),D,f;if(p.length===1)D=p[0];else if(p.length===2&&p[1]===1)D=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(d.length===1)f=d[0];else if(d.length===2&&d[1]===1)f=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(D!==f)throw new RangeError("Vectors must have equal length ("+D+" != "+f+")");if(D===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return D}function o(l,h){var p=a(l,h),d=Me(l)?l._data:l,D=Me(l)?l._datatype||l.getDataType():void 0,f=Me(h)?h._data:h,m=Me(h)?h._datatype||h.getDataType():void 0,v=c(l).length===2,_=c(h).length===2,g=r,F=n;if(D&&m&&D===m&&typeof D=="string"&&D!=="mixed"){var w=D;g=t.find(r,[w,w]),F=t.find(n,[w,w])}if(!v&&!_){for(var y=F(i(d[0]),f[0]),C=1;C<p;C++)y=g(y,F(i(d[C]),f[C]));return y}if(!v&&_){for(var b=F(i(d[0]),f[0][0]),B=1;B<p;B++)b=g(b,F(i(d[B]),f[B][0]));return b}if(v&&!_){for(var N=F(i(d[0][0]),f[0]),M=1;M<p;M++)N=g(N,F(i(d[M][0]),f[M]));return N}if(v&&_){for(var T=F(i(d[0][0]),f[0][0]),V=1;V<p;V++)T=g(T,F(i(d[V][0]),f[V][0]));return T}}function s(l,h){a(l,h);for(var p=l._index,d=l._values,D=h._index,f=h._values,m=0,v=r,_=n,g=0,F=0;g<p.length&&F<D.length;){var w=p[g],y=D[F];if(w<y){g++;continue}if(w>y){F++;continue}w===y&&(m=v(m,_(d[g],f[F])),g++,F++)}return m}function c(l){return Me(l)?l.size():u(l)}}),tu="index",Y0=["typed","Index"],K0=K(tu,Y0,e=>{var{typed:t,Index:r}=e;return t(tu,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var u=i.map(function(o){return Ae(o)?o.toNumber():Fe(o)||Me(o)?o.map(function(s){return Ae(s)?s.toNumber():s}):o}),a=new r;return r.apply(a,u),a}})}),ru="det",X0=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Q0=K(ru,X0,e=>{var{typed:t,matrix:r,subtractScalar:n,multiply:i,divideScalar:u,isZero:a,unaryMinus:o}=e;return t(ru,{any:function(l){return Ce(l)},"Array | Matrix":function(l){var h;switch(Me(l)?h=l.size():Array.isArray(l)?(l=r(l),h=l.size()):h=[],h.length){case 0:return Ce(l);case 1:if(h[0]===1)return Ce(l.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Re(h)+")");case 2:{var p=h[0],d=h[1];if(p===d)return s(l.clone().valueOf(),p);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+Re(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Re(h)+")")}}});function s(c,l,h){if(l===1)return Ce(c[0][0]);if(l===2)return n(i(c[0][0],c[1][1]),i(c[1][0],c[0][1]));for(var p=!1,d=new Array(l).fill(0).map((C,b)=>b),D=0;D<l;D++){var f=d[D];if(a(c[f][D])){var m=void 0;for(m=D+1;m<l;m++)if(!a(c[d[m]][D])){f=d[m],d[m]=d[D],d[D]=f,p=!p;break}if(m===l)return c[f][D]}for(var v=c[f][D],_=D===0?1:c[d[D-1]][D-1],g=D+1;g<l;g++)for(var F=d[g],w=D+1;w<l;w++)c[F][w]=u(n(i(c[F][w],v),i(c[F][D],c[f][w])),_)}var y=c[d[l-1]][l-1];return p?o(y):y}}),nu="inv",eh=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],th=K(nu,eh,e=>{var{typed:t,matrix:r,divideScalar:n,addScalar:i,multiply:u,unaryMinus:a,det:o,identity:s,abs:c}=e;return t(nu,{"Array | Matrix":function(p){var d=Me(p)?p.size():Je(p);switch(d.length){case 1:if(d[0]===1)return Me(p)?r([n(1,p.valueOf()[0])]):[n(1,p[0])];throw new RangeError("Matrix must be square (size: "+Re(d)+")");case 2:{var D=d[0],f=d[1];if(D===f)return Me(p)?r(l(p.valueOf(),D,f),p.storage()):l(p,D,f);throw new RangeError("Matrix must be square (size: "+Re(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Re(d)+")")}},any:function(p){return n(1,p)}});function l(h,p,d){var D,f,m,v,_;if(p===1){if(v=h[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,v)]]}else if(p===2){var g=o(h);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],g),n(a(h[0][1]),g)],[n(a(h[1][0]),g),n(h[0][0],g)]]}else{var F=h.concat();for(D=0;D<p;D++)F[D]=F[D].concat();for(var w=s(p).valueOf(),y=0;y<d;y++){var C=c(F[y][y]),b=y;for(D=y+1;D<p;)c(F[D][y])>C&&(C=c(F[D][y]),b=D),D++;if(C===0)throw Error("Cannot calculate inverse, determinant is zero");D=b,D!==y&&(_=F[y],F[y]=F[D],F[D]=_,_=w[y],w[y]=w[D],w[D]=_);var B=F[y],N=w[y];for(D=0;D<p;D++){var M=F[D],T=w[D];if(D!==y){if(M[y]!==0){for(m=n(a(M[y]),B[y]),f=y;f<d;f++)M[f]=i(M[f],u(m,B[f]));for(f=0;f<d;f++)T[f]=i(T[f],u(m,N[f]))}}else{for(m=B[y],f=y;f<d;f++)M[f]=n(M[f],m);for(f=0;f<d;f++)T[f]=n(T[f],m)}}}return w}}}),Mr=cl({config:it}),rh=dl({}),ma=El({}),ui=Cl({}),bt=$l({Matrix:ui}),pe=hc({BigNumber:Mr,Complex:rh,DenseMatrix:bt,Fraction:ma}),nh=mf({typed:pe}),yn=vf({typed:pe}),ih=t0({typed:pe}),Sr=Jl({config:it,typed:pe}),uh=u0({typed:pe}),ah=ql({typed:pe}),oh=kl({config:it,typed:pe}),sh=Zl({equalScalar:Sr,typed:pe}),Da=jf({typed:pe}),ch=rf({typed:pe}),Wt=Kl({Matrix:ui,equalScalar:Sr,typed:pe}),va=yf({typed:pe}),wn=af({BigNumber:Mr,typed:pe}),We=ff({DenseMatrix:bt,Matrix:ui,SparseMatrix:Wt,typed:pe}),lh=l0({BigNumber:Mr,config:it,matrix:We,typed:pe}),Ur=_0({BigNumber:Mr,config:it,matrix:We,typed:pe}),cr=n0({isInteger:ah,matrix:We,typed:pe}),fh=cf({Fraction:ma,typed:pe}),ga=o0({BigNumber:Mr,DenseMatrix:bt,SparseMatrix:Wt,config:it,matrix:We,typed:pe}),hh=$0({DenseMatrix:bt,SparseMatrix:Wt,concat:cr,config:it,matrix:We,typed:pe}),ph=b0({bignumber:wn,fraction:fh,number:ch}),dh=m0({matrix:We,config:it,typed:pe}),ya=S0({DenseMatrix:bt,SparseMatrix:Wt,bignumber:wn,concat:cr,config:it,matrix:We,typed:pe}),ai=pf({typed:pe}),wa=j0({DenseMatrix:bt,SparseMatrix:Wt,addScalar:yn,concat:cr,equalScalar:Sr,matrix:We,typed:pe}),Ea=B0({numeric:ph,typed:pe}),mh=H0({DenseMatrix:bt,smaller:ya}),Dh=Z0({ImmutableDenseMatrix:mh,getMatrixDataType:uh}),vh=I0({DenseMatrix:bt,SparseMatrix:Wt,bignumber:wn,concat:cr,config:it,matrix:We,typed:pe}),gh=T0({DenseMatrix:bt,SparseMatrix:Wt,concat:cr,config:it,matrix:We,typed:pe}),Tn=v0({add:wa,matrix:We,typed:pe,zeros:Ur}),yh=Kf({DenseMatrix:bt,concat:cr,equalScalar:Sr,matrix:We,subtractScalar:va,typed:pe,unaryMinus:ai}),wh=G0({addScalar:yn,conj:ih,multiplyScalar:Da,size:dh,typed:pe}),Ln=K0({Index:Dh,typed:pe}),dr=Gf({addScalar:yn,dot:wh,equalScalar:Sr,matrix:We,multiplyScalar:Da,typed:pe}),Rr=p0({bignumber:wn,matrix:We,add:wa,config:it,isPositive:oh,larger:vh,largerEq:hh,smaller:ya,smallerEq:gh,typed:pe}),Eh=Q0({divideScalar:Ea,isZero:sh,matrix:We,multiply:dr,subtractScalar:va,typed:pe,unaryMinus:ai}),_h=th({abs:nh,addScalar:yn,det:Eh,divideScalar:Ea,identity:ga,matrix:We,multiply:dr,typed:pe,unaryMinus:ai});class tp extends Xn{constructor(r){super({project:`${ar("强化")}+${r.enhanceLevel}`,action:"enhancing",...r});se(this,"protectLevel");se(this,"originLevel");se(this,"escapeLevel");se(this,"protectionItem");se(this,"_ingredientList");se(this,"_targetRate");se(this,"_productList");se(this,"_maxProfitApproximate");this.enhanceLevel=r.enhanceLevel,this.protectLevel=r.protectLevel,this.originLevel=r.originLevel??0,this.escapeLevel=r.escapeLevel??-1;let n=[{hrid:super.item.hrid,count:1,marketPrice:ce(super.item.hrid).ask}];super.item.protectionItemHrids&&(n=super.item.protectionItemHrids.map(u=>({hrid:u,count:1,marketPrice:ce(u).ask})));const i=super.handlePrice(n.concat([{hrid:"/items/mirror_of_protection",count:1,marketPrice:ce("/items/mirror_of_protection").ask}]),[],"ask");this.protectionItem=i.reduce((u,a)=>u.price===-1?a:a.price===-1?u:a.price<u.price?a:u,i[0])}get className(){return"EnhanceCalculator"}get timeCost(){return An()/this.speed}get speed(){return super.speed+Math.max(0,this.playerLevel-this.actionLevel)*.01}get efficiency(){return 1}get ingredientList(){if(!this._ingredientList){const{actions:r,protects:n}=this.enhancelate();this._ingredientList=[{hrid:this.item.hrid,count:1/r,marketPrice:ce(this.item.hrid,this.originLevel).ask,level:this.originLevel},{hrid:this.protectionItem.hrid,count:n/r,marketPrice:this.protectionItem.marketPrice}].concat(this.item.enhancementCosts.map(i=>({hrid:i.itemHrid,count:i.count,marketPrice:ce(i.itemHrid).ask}))),this._ingredientList=this._ingredientList.concat(Fr(this))}return this._ingredientList}get targetRate(){return this._targetRate}get productList(){if(!this._productList){const{actions:r,escapeRate:n,targetRate:i,leapRate:u}=this.enhancelate(),a=i+u;this._targetRate=a,this._productList=[{hrid:this.item.hrid,count:1/r*a,marketPrice:ce(this.item.hrid,this.enhanceLevel).bid,level:this.enhanceLevel}],n>0&&this._productList.push({hrid:this.item.hrid,count:1/r*n,marketPrice:ce(this.item.hrid,this.realEscapeLevel).bid,level:this.realEscapeLevel}),this._productList=this._productList.concat(Uo(this.item,An()).map(o=>({hrid:o.itemHrid,rate:o.dropRate*(1+this.rareRatio),count:(o.minCount+o.maxCount)/2,marketPrice:ce(o.itemHrid).bid}))).concat(qo(this.item,An()).map(o=>({hrid:o.itemHrid,count:(o.minCount+o.maxCount)/2,rate:o.dropRate*(1+this.essenceRatio),marketPrice:ce(o.itemHrid).bid})))}return this._productList}get profitable(){return!!this.item.enhancementCosts&&this.maxProfitApproximate>0}get available(){return!!this.item.enhancementCosts&&this.originLevel<this.enhanceLevel&&this.escapeLevel<this.originLevel&&this.protectLevel<=this.enhanceLevel}get isEnhance(){return!!this.item.enhancementCosts}get actionLevel(){return this.item.itemLevel}get exp(){const{exp:r,actions:n}=this.enhancelate();return r*(1+rt(this.action,"Experience"))/n}run(){super.run();const r=this.successRateEnhance(xt().enhancementLevelSuccessRateTable[0]);return this.result.successRate=r,this.result.successRateFormat=Qt(r),this.result.targetRateFormat=Qt(this.targetRate),this}get realEscapeLevel(){return this.escapeLevel===-1?-1:this.protectLevel>this.escapeLevel+1?0:this.escapeLevel}get maxProfitApproximate(){if(this._maxProfitApproximate!==void 0)return this._maxProfitApproximate;const r=new vs({hrid:this.item.hrid,catalystRank:2,enhanceLevel:this.enhanceLevel});if(!r.available)return this._maxProfitApproximate=-1,this._maxProfitApproximate;const{actions:n}=this.enhancelate(),i=this.ingredientListWithPrice.reduce((s,c)=>s+c.price*c.count*n,0),u=this.productListWithPrice.slice(1).reduce((s,c)=>s+c.price*c.count*n*(c.rate||1),0),a=r.successRate*r.productListWithPrice.reduce((s,c)=>s+c.price*c.count*(c.rate||1),0),o=r.ingredientListWithPrice.slice(1).reduce((s,c)=>s+c.price*c.count,0);return this._maxProfitApproximate=(a*(this._targetRate||1)+u)*.98-i-o*(this._targetRate||1),this._maxProfitApproximate}enhancelate(){let r=Oo({enhanceLevel:this.enhanceLevel,protectLevel:this.protectLevel,itemLevel:this.item.itemLevel,originLevel:this.originLevel,escapeLevel:this.escapeLevel});if(r)return r;const n=this.enhanceLevel,i=xt().enhancementLevelSuccessRateTable,u=this.escapeLevel+1,a=n-u;let o=We(Ur(n,n));for(let F=0;F<n;F++)F<n-1&&o.set([F,F+1],this.levelUpRate(i[F])),F<n-2&&o.set([F,F+2],this.levelLeapRate(i[F])),o.set([F,F>=this.protectLevel?F-1:0],this.failRate(i[F]));o=Tn(o,Ln(Rr(u,n),Rr(u,n)));const s=_h(yh(ga(a),o)),c=dr(s,lh(a,1));let l=Ur(n,1);for(let F=this.protectLevel;F<n;F++)l.set([F,0],this.failRate(i[F]));l=Tn(l,Ln(Rr(u,n),0));let h=Ur(n,1);for(let F=0;F<n;F++)h.set([F,0],(this.successRateEnhance(i[F])+.1*(1-this.successRateEnhance(i[F])))*Ho(this.item,F));h=Tn(h,Ln(Rr(u,n),0));const d=dr(s,h).get([this.originLevel-u,0]),D=dr(s,l),f=c.get([this.originLevel-u,0]),m=D.get([this.originLevel-u,0]),v=this.levelLeapRate(i[n-2])*(a>1?s.get([this.originLevel-u,a-2]):0)+ +this.levelUpRate(i[n-1])*s.get([this.originLevel-u,a-1]),_=this.levelLeapRate(i[n-1])*s.get([this.originLevel-u,a-1]);let g=1-v-_;return g=Math.abs(g)<1e-10?0:g,r={actions:f,protects:m,targetRate:v,leapRate:_,escapeRate:g,exp:d},Ro({enhanceLevel:this.enhanceLevel,protectLevel:this.protectLevel,itemLevel:this.item.itemLevel,originLevel:this.originLevel,escapeLevel:this.escapeLevel},r),r}successRateEnhance(r){return r*(1+cs(this.item))}levelUpRate(r){const n=this.successRateEnhance(r)*(1-rt(this.action,"Blessed"));return Math.min(1,n)}levelLeapRate(r){return this.successRateEnhance(r)*rt(this.action,"Blessed")}failRate(r){return 1-this.successRateEnhance(r)}}class rp extends Xn{constructor(r){super(r);se(this,"originLevel");se(this,"_actionItem");se(this,"_ingredientList");se(this,"_productList");this.originLevel=r.originLevel||0}get className(){return"ManufactureCalculator"}get actionLevel(){return this.actionItem.levelRequirement.level}get available(){return!!this.actionItem}get actionItem(){return this._actionItem||(this._actionItem=Er(`/actions/${this.action}/${this.key}`)),this._actionItem}get timeCost(){return this.actionItem.baseTimeCost/this.speed}get ingredientList(){if(!this._ingredientList){let r=[];this.actionItem.upgradeItemHrid&&r.push({hrid:this.actionItem.upgradeItemHrid,count:1,level:this.originLevel,marketPrice:ce(this.actionItem.upgradeItemHrid,this.originLevel).ask});const n=rt(this.action,"Artisan");r=r.concat(this.actionItem.inputItems.map(i=>({hrid:i.itemHrid,count:i.count*(1-n),marketPrice:ce(i.itemHrid).ask}))),r=r.concat(Fr(this)),this._ingredientList=r}return this._ingredientList}get targetLevel(){let r=Math.round(this.originLevel*.7*100)/100;return ao(this.item)&&(r=this.originLevel),r}get productList(){var r,n;if(!this._productList){const i=rt(this.action,"Gourmet");let u=[];const a=this.targetLevel%1;if(this.targetLevel%1===0)u=this.actionItem.outputItems.map(o=>({hrid:o.itemHrid,count:o.count*(1+i),level:Math.floor(this.targetLevel),marketPrice:ce(o.itemHrid,Math.floor(this.targetLevel)).bid}));else{let o=ce(this.item.hrid,Math.ceil(this.targetLevel)).bid;o<=0&&(o=ce(this.item.hrid,Math.floor(this.targetLevel)).bid),u=u.concat([{hrid:this.item.hrid,count:1-a,level:Math.floor(this.targetLevel),marketPrice:ce(this.item.hrid,Math.floor(this.targetLevel)).bid},{hrid:this.item.hrid,count:a,level:Math.ceil(this.targetLevel),marketPrice:o}])}u=u.concat(((r=this.actionItem.essenceDropTable)==null?void 0:r.map(o=>({hrid:o.itemHrid,count:o.maxCount,rate:o.dropRate*(1+this.essenceRatio),marketPrice:ce(o.itemHrid).bid})))||[]),u=u.concat(((n=this.actionItem.rareDropTable)==null?void 0:n.map(o=>({hrid:o.itemHrid,count:o.maxCount,rate:o.dropRate*(1+this.rareRatio),marketPrice:ce(o.itemHrid).bid})))||[]),this._productList=u}return this._productList}}const Fh={class:"flex items-center"},Ch={class:"flex items-center p-1 pl-2 pr-2",style:{border:"1px solid var(--el-border-color)","border-radius":"4px"}},bh={key:0,class:"community-buff ml-2"},Ah={key:0,class:"community-level"},Bh={class:"flex flex-wrap items-baseline"},Mh={class:"mr-3 mb-2"},Sh={style:{display:"flex","align-items":"center",gap:"10px"}},xh={style:{display:"flex","align-items":"center",gap:"10px"}},Nh={style:{display:"flex","align-items":"center",gap:"10px"}},Th={style:{display:"flex","align-items":"center",gap:"10px"}},Lh={style:{"line-height":"32px"}},Ph={style:{display:"flex","align-items":"center",gap:"10px"}},Ih={style:{"line-height":"32px"}},Oh={class:"community-buff"},Rh={style:{"text-align":"center"}},$h=au({__name:"ActionConfig",props:{actions:{},equipments:{},communityBuffs:{}},setup(e){const t=pu(),r=ot(!1),n=ot([]),i=ot([]),u=ot([]),a=ot(""),o=ot(""),s=ot(0);function c(M,T){const V=Rn("","");n.value=structuredClone(an.map(I=>{const z=M.actionConfigMap.get(I)??V.actionConfigMap.get(I),x=V.actionConfigMap.get(I);for(const G in x){const W=x[G];W!==void 0&&z[G]===void 0&&(z[G]=W)}return{...Ve(z)}})),i.value=structuredClone(sn.map(I=>({...Ve(M.specialEquimentMap.get(I.type)??V.specialEquimentMap.get(I.type))}))),u.value=structuredClone(hu.map(I=>({...Ve(M.communityBuffMap.get(I.type)??V.communityBuffMap.get(I.type))}))),a.value=M.name,o.value=M.color,r.value=!0,s.value=T}function l(M,T){T===t.presetIndex?c(M,T):t.switchTo(T)}function h(){const M=t.presets.length;c(Rn(C("{0}新预设",[M]),"#90ee90"),M)}function p(){const M={actionConfigMap:new Map,specialEquimentMap:new Map,communityBuffMap:new Map,name:a.value,color:o.value};for(const T of n.value)M.actionConfigMap.set(T.action,Ve(T));for(const T of i.value)M.specialEquimentMap.set(T.type,Ve(T));for(const T of u.value)M.communityBuffMap.set(T.type,Ve(T));return M}function d(){try{const M=p();Qo(M,s.value),r.value=!1}catch(M){Lr.error(M.message)}}const D=ot(!1),f=ot(0),m=ot(0),v=ot(),_=ot(0);function g(M,T,V){const x=document.body.offsetWidth-100,G=V.clientX+10;m.value=G>x?x:G,f.value=V.clientY,D.value=!0,_.value=T,v.value=M}function F(){D.value=!1}Ft(D,M=>{M?document.body.addEventListener("click",F):document.body.removeEventListener("click",F)});function w(){c(v.value,t.presets.length)}function y(){li.confirm(C("确定删除该预设吗？"),"",{confirmButtonText:C("确定"),cancelButtonText:C("取消"),type:"warning"}).then(()=>{t.removePreset(_.value)}).catch(()=>{})}const{t:C}=ou(),{activeThemeName:b}=no();function B(){li.prompt(C("请粘贴导出的预设配置"),C("导入"),{confirmButtonText:C("确定"),cancelButtonText:C("取消"),inputPattern:/^\s*\{.*\}\s*$/,inputErrorMessage:C("请输入正确的JSON格式")}).then(({value:M})=>{try{const T=JSON.parse(M);if(!T.name||!T.color||!T.actionConfigMap||!T.specialEquimentMap)throw new Error(C("无效的预设配置"));const V={name:T.name,color:T.color,actionConfigMap:new Map(Object.entries(T.actionConfigMap)),specialEquimentMap:new Map(Object.entries(T.specialEquimentMap)),communityBuffMap:new Map(Object.entries(T.communityBuffMap))};c(V,t.presets.length)}catch(T){console.error(T),Lr.error(C("无效的预设配置"))}}).catch(()=>{})}function N(){const M=p(),T=JSON.stringify({name:M.name,color:M.color,actionConfigMap:Object.fromEntries(M.actionConfigMap.entries()),specialEquimentMap:Object.fromEntries(M.specialEquimentMap.entries()),communityBuffMap:Object.fromEntries(M.communityBuffMap.entries())});navigator.clipboard.writeText(T).then(()=>{Lr.success(C("已复制到剪贴板"))}).catch(()=>{Lr.error(C("复制失败，请检查浏览器权限设置"))})}return(M,T)=>{const V=ho,I=Ao,z=wo,x=Eo,G=Fo,W=_o,Y=bo,ue=Co,de=yo,fe=go,he=vo,Se=Do,xe=fo;return Te(),Ke(Dt,null,[so(Le("ul",{class:"contextmenu",style:lo({left:`${Q(m)}px`,top:`${Q(f)}px`})},[Q(t).isOverflow()?hr("",!0):(Te(),Ke("li",{key:0,onClick:w}," 复制 ")),Q(t).presets.length>1?(Te(),Ke("li",{key:1,onClick:y}," 删除 ")):hr("",!0)],4),[[co,Q(D)]]),Le("div",Fh,[Le("div",Ch,[Le("div",null,Oe(Q(C)("预设"))+":",1),(Te(!0),Ke(Dt,null,Lt(Q(t).presets,(U,$)=>(Te(),Tt(V,{class:"ml-1 w-32px",plain:Q(t).presetIndex!==$,color:"#16ab1b",dark:Q(b).includes("dark"),key:$,onClick:Ne=>l(U,$),onContextmenu:mo(Ne=>g(U,$,Ne),["prevent"])},{default:re(()=>{var Ne;return[dt(Oe((Ne=U.name)==null?void 0:Ne.substring(0,1)),1)]}),_:2},1032,["plain","dark","onClick","onContextmenu"]))),128)),Q(t).isOverflow()?hr("",!0):(Te(),Tt(V,{key:0,class:"ml-1 w-24px",size:"small",icon:Q(po),plain:"",onClick:h},null,8,["icon"]))]),(Te(!0),Ke(Dt,null,Lt(Q(t).config.communityBuffMap.entries(),([U,$])=>(Te(),Ke(Dt,{key:U},[$.level?(Te(),Ke("div",bh,[X(et,{hrid:Q(On)($.hrid).buff.typeHrid,width:22,height:22},null,8,["hrid"]),$.level?(Te(),Ke("div",Ah," Lv."+Oe($.level),1)):hr("",!0)])):hr("",!0)],64))),128))]),X(xe,{modelValue:Q(r),"onUpdate:modelValue":T[1]||(T[1]=U=>ci(r)?r.value=U:null),"show-close":!1,width:"80%"},{footer:re(()=>[Le("div",Rh,[X(V,{type:"primary",onClick:d},{default:re(()=>[dt(Oe(Q(C)("保存")),1)]),_:1})])]),default:re(()=>[X(Se,{gutter:20,class:"mt-[-30px]"},{default:re(()=>[X(he,{xs:24,sm:24,md:24,lg:24,xl:16},{default:re(()=>[X(fe,{class:"mt-5"},{header:re(()=>[Le("div",Bh,[Le("div",Mh,Oe(Q(C)("预设名称"))+": ",1),X(I,{class:"w-300px",maxlength:20,modelValue:Q(a),"onUpdate:modelValue":T[0]||(T[0]=U=>ci(a)?a.value=U:null)},null,8,["modelValue"]),X(V,{type:"success",plain:"",class:"ml-4",onClick:B},{default:re(()=>[dt(Oe(Q(C)("导入")),1)]),_:1}),X(V,{type:"success",plain:"",class:"ml-4",onClick:N},{default:re(()=>[dt(Oe(Q(C)("导出")),1)]),_:1})])]),default:re(()=>[X(de,{data:Q(n).filter(U=>M.actions?M.actions.includes(U.action):!0)},{default:re(()=>[X(z,{prop:"name",width:"54"},{default:re(({row:U})=>[X(et,{hrid:`/actions/${U.action}`},null,8,["hrid"])]),_:1}),X(z,{label:Q(C)("Action"),width:"125",align:"center"},{default:re(({row:U})=>[dt(Oe(Q(C)(U.action)),1)]),_:1},8,["label"]),X(z,{label:Q(C)("技能等级"),width:"85",align:"center"},{default:re(({row:U})=>[X(x,{modelValue:U.playerLevel,"onUpdate:modelValue":$=>U.playerLevel=$,min:1,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(z,{label:Q(C)("房子等级"),width:"85",align:"center"},{default:re(({row:U})=>[X(x,{modelValue:U.houseLevel,"onUpdate:modelValue":$=>U.houseLevel=$,min:0,max:10,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(z,{label:Q(C)("工具"),align:"center","min-width":"105"},{default:re(({row:U})=>[X(W,{style:{width:"80px"},modelValue:U.tool.hrid,"onUpdate:modelValue":$=>U.tool.hrid=$,placeholder:Q(C)("无"),clearable:""},{label:re(()=>[X(et,{style:{"margin-top":"4px"},hrid:U.tool.hrid},null,8,["hrid"])]),default:re(()=>[(Te(!0),Ke(Dt,null,Lt(Q(wu)(U.action),$=>(Te(),Tt(G,{key:$.hrid,label:$.name,value:$.hrid},{default:re(()=>[Le("div",Sh,[X(et,{hrid:$.hrid},null,8,["hrid"]),Le("div",null,Oe($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),T[2]||(T[2]=dt("  +  ")),X(x,{modelValue:U.tool.enhanceLevel,"onUpdate:modelValue":$=>U.tool.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(z,{label:Q(C)("身体"),align:"center","min-width":"105"},{default:re(({row:U})=>[X(W,{style:{width:"80px"},modelValue:U.body.hrid,"onUpdate:modelValue":$=>U.body.hrid=$,placeholder:Q(C)("无"),clearable:""},{label:re(()=>[X(et,{style:{"margin-top":"4px"},hrid:U.body.hrid},null,8,["hrid"])]),default:re(()=>[(Te(!0),Ke(Dt,null,Lt(Q(Bn)(U.action,"body"),$=>(Te(),Tt(G,{key:$.hrid,label:$.name,value:$.hrid},{default:re(()=>[Le("div",xh,[X(et,{hrid:$.hrid},null,8,["hrid"]),Le("div",null,Oe($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),T[3]||(T[3]=dt("  +  ")),X(x,{modelValue:U.body.enhanceLevel,"onUpdate:modelValue":$=>U.body.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(z,{label:Q(C)("腿部"),align:"center","min-width":"105"},{default:re(({row:U})=>[X(W,{style:{width:"80px"},modelValue:U.legs.hrid,"onUpdate:modelValue":$=>U.legs.hrid=$,placeholder:Q(C)("无"),clearable:""},{label:re(()=>[X(et,{style:{"margin-top":"4px"},hrid:U.legs.hrid},null,8,["hrid"])]),default:re(()=>[(Te(!0),Ke(Dt,null,Lt(Q(Bn)(U.action,"legs"),$=>(Te(),Tt(G,{key:$.hrid,label:$.name,value:$.hrid},{default:re(()=>[Le("div",Nh,[X(et,{hrid:$.hrid},null,8,["hrid"]),Le("div",null,Oe($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),T[4]||(T[4]=dt("  +  ")),X(x,{modelValue:U.legs.enhanceLevel,"onUpdate:modelValue":$=>U.legs.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(z,{label:Q(C)("护符"),align:"center","min-width":"105"},{default:re(({row:U})=>[X(W,{style:{width:"80px"},modelValue:U.charm.hrid,"onUpdate:modelValue":$=>U.charm.hrid=$,placeholder:Q(C)("无"),clearable:""},{label:re(()=>[X(et,{style:{"margin-top":"4px"},hrid:U.charm.hrid},null,8,["hrid"])]),default:re(()=>[(Te(!0),Ke(Dt,null,Lt(Q(Bn)(U.action,"charm").sort(($,Ne)=>$.itemLevel-Ne.itemLevel),$=>(Te(),Tt(G,{key:$.hrid,label:$.name,value:$.hrid},{default:re(()=>[Le("div",Th,[X(et,{hrid:$.hrid},null,8,["hrid"]),Le("div",null,Oe($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),T[5]||(T[5]=dt("  +  ")),X(x,{modelValue:U.charm.enhanceLevel,"onUpdate:modelValue":$=>U.charm.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(z,{label:Q(C)("茶"),align:"center","min-width":"155"},{default:re(({row:U})=>[X(ue,{modelValue:U.tea,"onUpdate:modelValue":$=>U.tea=$,size:"large",max:3},{default:re(()=>[(Te(!0),Ke(Dt,null,Lt(Q(as)(U.action),$=>(Te(),Tt(Y,{key:$.hrid,value:$.hrid,border:""},{default:re(()=>[X(et,{hrid:$.hrid},null,8,["hrid"])]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1}),X(he,{xs:24,sm:24,md:24,lg:24,xl:8},{default:re(()=>[X(Se,{gutter:20},{default:re(()=>[X(he,{xs:24,sm:24,md:14,lg:12,xl:24},{default:re(()=>[X(fe,{class:"mt-5"},{header:re(()=>[Le("div",Lh,Oe(Q(C)("其他")),1)]),default:re(()=>[X(de,{data:Q(i).filter(U=>M.equipments?M.equipments.includes(U.type):!0)},{default:re(()=>[X(z,{prop:"type",label:Q(C)("部位"),width:"120"},{default:re(({row:U})=>[dt(Oe(Q(C)(U.type.replace(/_/g," ").replace(/\b\w+\b/g,$=>$.substring(0,1).toUpperCase()+$.substring(1)))),1)]),_:1},8,["label"]),X(z,{label:Q(C)("装备")},{default:re(({row:U})=>[X(W,{style:{width:"80px"},modelValue:U.hrid,"onUpdate:modelValue":$=>U.hrid=$,placeholder:Q(C)("无"),clearable:""},{label:re(()=>[X(et,{style:{"margin-top":"4px"},hrid:U.hrid},null,8,["hrid"])]),default:re(()=>[(Te(!0),Ke(Dt,null,Lt(Q(ns)(U.type),$=>(Te(),Tt(G,{key:$.hrid,label:$.name,value:$.hrid},{default:re(()=>[Le("div",Ph,[X(et,{hrid:$.hrid},null,8,["hrid"]),Le("div",null,Oe($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),T[6]||(T[6]=dt("  +  ")),X(x,{modelValue:U.enhanceLevel,"onUpdate:modelValue":$=>U.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1}),X(he,{xs:24,sm:24,md:10,lg:12,xl:24},{default:re(()=>[X(fe,{class:"mt-5"},{header:re(()=>[Le("div",Ih,Oe(Q(C)("社区Buff")),1)]),default:re(()=>[X(de,{data:Q(u).filter(U=>M.communityBuffs?M.communityBuffs.includes(U.type):!0)},{default:re(()=>[X(z,{prop:"type",label:Q(C)("Buff"),width:"120"},{default:re(({row:U})=>[Le("div",Oh,[X(et,{hrid:Q(On)(U.hrid).buff.typeHrid,width:22,height:22},null,8,["hrid"])])]),_:1},8,["label"]),X(z,{label:Q(C)("等级")},{default:re(({row:U})=>[X(x,{modelValue:U.level,"onUpdate:modelValue":$=>U.level=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),np=su($h,[["__scopeId","data-v-2421d177"]]),zh={href:"https://www.milkywayidle.com/game_data/marketplace.json",target:"_blank",rel:"noopener noreferrer"},qh=au({__name:"GameInfo",setup(e){const t="1.3.401",{t:r}=ou();return(n,i)=>{var u,a,o;return Te(),Ke(Dt,null,[Le("div",null,Oe(Q(r)("Milkonomy"))+" v"+Oe(Q(t)),1),Le("div",{class:Bo({error:((u=Q(In)())==null?void 0:u.timestamp)*1e3<Date.now()-1e3*60*120,success:((a=Q(In)())==null?void 0:a.timestamp)*1e3>Date.now()-1e3*60*120})},[Le("a",zh,Oe(Q(r)("市场数据来源(MilkyWayIdle)"))+" : "+Oe(new Date(((o=Q(io)().marketData)==null?void 0:o.timestamp)*1e3).toLocaleString()),1)],2)],64)}}}),ip=su(qh,[["__scopeId","data-v-87d51891"]]);export{np as A,ep as C,vs as D,tp as E,ip as G,rp as M,Qh as T,kt as a,ce as b,So as c,In as d,Wh as e,ls as f,Jh as g,xt as h,Xh as i,Yn as j,Xn as k,Er as l,Pt as m,Hr as n,Fr as o,Qt as p,rt as q,jh as r,Yh as s,Vr as t,pu as u,Kh as v,Gh as w};
