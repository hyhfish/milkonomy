import{k as Xe,u as Ye,S as Ze,r as V,l as ue,H as et,w as ne,f as w,h,ao as tt,i as v,s as a,ar as lt,v as e,aq as we,q as c,av as at,au as ot,D as F,O as $,aw as K,ax as nt,G as A,F as P,p as L,ay as rt,ab as it,P as X,aS as st,a5 as Y,aQ as ct,aR as ut,ad as dt,az as pt,aA as ht,aB as ke,aC as ft,aD as mt,R as $e,aE as gt,aF as vt,aH as bt,aI as _t,at as yt,al as de}from"./vue-0ucuI9Mt.js";import{_ as B,g as xt}from"./index.vue_vue_type_script_setup_true_lang-CjRkRCNG.js";import{g as Pt,a as Z,M as ye,E as wt,b as pe,p as kt,m as ee,c as Ct,n as O,G as Vt,A as Lt,d as St,e as Et,u as Ht}from"./GameInfo-CACRhTjH.js";import{u as Oe,W as It,g as Ft}from"./useMemory-_hQ8NBJD.js";import{u as Mt}from"./enhancer-CCUWJ4II.js";import{v as je,P as ze,C as Ae,y as Be}from"./index-D39Z4Gps.js";import{_ as Tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Rt={class:"app-container"},Ut={class:"game-info"},Wt={class:"flex flex-col gap-2"},Nt={class:"whitespace-nowrap flex-shrink-0"},$t={class:"flex flex-wrap items-center gap-x-4 gap-y-2"},Ot={key:0,class:"flex items-center gap-2"},jt={class:"w-10 whitespace-nowrap"},zt={class:"text-xs color-gray-500 mb-1"},At={style:{position:"relative",width:"100%","padding-bottom":"100%"}},Bt={key:0,class:"absolute bottom-0 right-0"},qt={class:"mb-2 color-gray-500"},Dt={"color-gray-600":""},Gt={class:"flex flex-wrap"},Qt={class:"absolute bottom-0 right-0"},Jt={style:{display:"flex","flex-wrap":"wrap","margin-top":"10px"}},Kt={key:0,class:"absolute bottom-0 right-0"},Xt={class:"flex justify-between items-center"},Yt={class:"font-size-14px"},Zt={class:"flex justify-between items-center"},el={class:"font-size-14px"},tl={class:"grid w-full items-center gap-x-1",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},ll={class:"font-size-14px whitespace-nowrap"},al={class:"grid w-full items-center gap-x-1 gap-y-1 mt-2",style:{gridTemplateColumns:"44px minmax(0, 1fr)"}},ol={class:"font-size-14px whitespace-nowrap"},nl={class:"flex flex-col gap-2"},rl={class:"whitespace-nowrap flex-shrink-0"},il={key:0,class:"flex items-center gap-2"},sl={class:"w-10 whitespace-nowrap"},cl=Xe({__name:"index",setup(ul){const u=Mt(),he=je(),{t:s}=Ye(),xe=Ze();function Ce(o){if(typeof o=="string")return o;if(Array.isArray(o)&&typeof o[0]=="string")return o[0]}function Ve(o={}){const t=Ce(xe.query.hrid),r=Ce(xe.query.enhanceLevel);if(r){const n=Math.floor(Number(r));Number.isFinite(n)&&n>=1&&n<=20&&(u.config.enhanceLevel=n)}if(t&&!(d.value.hrid===t&&!o.selectItem)&&(u.config.hrid=t,o.selectItem))try{se(Z(t))}catch(n){console.warn("Invalid hrid from route query",t,n)}}const re=V(!1),te=V(""),qe=ue(()=>Pt().filter(o=>s(o.name).toLocaleLowerCase().includes(te.value.toLowerCase())).sort((o,t)=>o.sortIndex-t.sortIndex)),d=V({protection:{},originPrice:0}),M=V([]),q=V([]),le=V([]),T=V([]),D={hourlyRate:5e6,taxRate:2,enhanceLevel:10},Pe=ue({get:()=>u.config.ignoreTax?0:2,set:o=>{u.config.ignoreTax=o===0}});et(()=>{Ve({selectItem:!1}),u.hrid&&se(Z(u.hrid))}),ne(()=>xe.query,()=>{Ve({selectItem:!0})},{immediate:!1}),ne(()=>u.config,()=>{u.saveConfig()},{deep:!0});const R=V(!1),J=V(!1),ae=Oe("enhancer-gear-cost-buy-status",ze.ASK),ie=Oe("enhancer-enhancement-cost-buy-status",ze.ASK);ne([()=>M.value,()=>R.value,()=>J.value,()=>ae.value,()=>ie.value],Qe,{deep:!0}),ne([()=>R.value,()=>J.value,()=>ae.value],()=>{Se()},{deep:!1});function fe(o){return Z(o).categoryHrid==="/item_categories/drink"}function U(o,t){return pe(o,t,ae.value,he.sellStatus).ask}function oe(o,t){return pe(o,t,ie.value,he.sellStatus).ask}function Le(o){const t=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]];let r;for(const[n,p]of t){const i=new ye({hrid:o,project:n,action:p});if(i.available){r=i;break}}return r!=null&&r.available?r.ingredientList.filter(n=>!fe(n.hrid)).map(n=>({hrid:n.hrid,count:n.count,level:n.level,originPrice:U(n.hrid,n.level)})):[]}function De(o){var S;const t=Z(o),r=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]],n=xt(t)==="charm"||U(o)===-1?7:3;let p;for(const[_,E]of r)for(const[W,Q]of r){const y=new ye({hrid:o,project:W,action:Q});if(!y.available)continue;const j=[y],z=[[...j]];let l=y,g=1;for(;(S=l.actionItem)!=null&&S.upgradeItemHrid&&g<n;){const f=new ye({hrid:l.actionItem.upgradeItemHrid,project:_,action:E});if(!f.available)break;j.unshift(f),g++,z.push([...j]),l=f}for(const f of z){const N=new It(f.map(I=>Ft(I)),s("{0}步{1}",[f.length,W]));N.run();const _e=N.productListWithPricePreprocess.list.filter(I=>I.hrid===o).reduce((I,ce)=>I+(ce.countPH||0),0);if(!_e||_e<=1e-12)continue;let Re=!1;const Ke=N.ingredientListWithPrice.filter(I=>!fe(I.hrid)).reduce((I,ce)=>{const We=ce.countPH||0;if(We>1e-12){const Ne=U(ce.hrid,ce.level);return Ne===-1?(Re=!0,I):I+We*Ne}return I},0);if(Re)continue;const Ue=Ke/_e;(!p||Ue<p.costPerItem)&&(p={workflow:N,outputPH:_e,costPerItem:Ue})}}if(!p)return;const{workflow:i,outputPH:m}=p,b=(_,E)=>`${_}|${E??""}`,x=i.ingredientListWithPrice.filter(_=>!fe(_.hrid)).filter(_=>(_.countPH||0)>1e-12).map(_=>({hrid:_.hrid,count:(_.countPH||0)/m,level:_.level,originPrice:U(_.hrid,_.level)})),k=[],C=new Set;for(let _=0;_<i.calculatorList.length;_++){const E=i.calculatorList[_];if(Array.isArray(E))continue;const W=i.workMultiplier[_],Q=E.ingredientListWithPrice.filter(y=>!fe(y.hrid)).map(y=>{const j=C.has(y.hrid)||C.has(b(y.hrid,y.level));return{hrid:y.hrid,count:(y.countPH||0)*W/m,level:y.level,originPrice:U(y.hrid,y.level),fromWorkflow:j}});k.push({title:`${s("{0}步{1}",[k.length+1,E.project])}:`,ingredients:Q});for(const y of E.productListWithPrice)C.add(y.hrid),C.add(b(y.hrid,y.level))}return{totalIngredients:x,stepList:k}}function me(o){return o.originPriceText?o.originPriceText:o.fromWorkflow?s("由制作链产出"):o.originPrice===-1?"-1":O(o.originPrice)}let H=!1;function Ge(o,t){if(H)return;const r=d.value,n=r==null?void 0:r.hrid;if(!n||typeof o!="number")return;if(o<-1){H=!0,r.productPrice=-1,de(()=>{H=!1});return}const p=u.enhanceLevel??D.enhanceLevel,i=pe(n,p).bid,m=typeof t=="number",b=m?o-t:Number.NaN;let x,k;if(m&&t===-1&&o===0){H=!0,r.productPrice=1,de(()=>{H=!1});return}else if(m&&Math.abs(Math.abs(b)-1)<1e-9)x=b>0,k=t;else if(!m&&(o===0||o===1)&&typeof i=="number"&&i>0)x=o===1,k=i;else if(!m&&o===-1){if(typeof i!="number"||i<=0){H=!0,r.productPrice=-1,de(()=>{H=!1});return}x=!1,k=i}else return;const C=St(k,x);if(C<=0){H=!0,r.productPrice=-1,de(()=>{H=!1});return}H=!0,r.productPrice=C,de(()=>{H=!1})}function Se(){const o=d.value.hrid;if(!o){M.value=[],q.value=[];return}if(!R.value){q.value=[];return}if(!J.value){M.value=Le(o),q.value=[];return}const t=De(o);if(!t){M.value=Le(o),q.value=[];return}M.value=t.totalIngredients,q.value=t.stepList}function se(o){if(!o)return;u.config.hrid=o.hrid,d.value={hrid:o.hrid,originPrice:0},re.value=!1;const t=[[s("锻造"),"cheesesmithing"],[s("制造"),"crafting"],[s("裁缝"),"tailoring"]];let r;for(const[n,p]of t)if(r=new ye({hrid:o.hrid,project:n,action:p}),r.available)break;M.value=r.available?r.ingredientList.filter(n=>Z(n.hrid).categoryHrid!=="/item_categories/drink").map(n=>({hrid:n.hrid,count:n.count,level:n.level,originPrice:U(n.hrid,n.level)})):[],le.value=o.enhancementCosts.map(n=>({hrid:n.itemHrid,count:n.count,originPrice:oe(n.itemHrid)})),T.value=o.protectionItemHrids?o.protectionItemHrids.map(n=>({hrid:n,count:1,originPrice:oe(n)})):[],T.value.length||T.value.push({hrid:o.hrid,count:1,originPrice:oe(o.hrid)}),T.value.push({hrid:"/items/mirror_of_protection",count:1,originPrice:oe("/items/mirror_of_protection")}),d.value.protection=T.value.reduce((n,p)=>n&&n.originPrice<p.originPrice?n:p),Se()}const G=ue(()=>{var p,i;if(!d.value.hrid)return[];const o=[],t=!!u.config.ignoreTax,r=t?1:.98,n=u.enhanceLevel??D.enhanceLevel;for(let m=1;m<=n;++m){const b=new wt({hrid:d.value.hrid,enhanceLevel:n,protectLevel:m}),{actions:x,protects:k}=b.enhancelate(),C=le.value.reduce((j,z)=>{const l=typeof z.price=="number"?z.price:z.originPrice;return j+l*z.count*x},0)+(typeof((p=d.value.protection)==null?void 0:p.price)=="number"?d.value.protection.price:d.value.protection.originPrice)*k,S=C+(typeof((i=d.value)==null?void 0:i.price)=="number"?d.value.price:d.value.originPrice);let _=S+(u.hourlyRate??D.hourlyRate)*(x/b.actionsPH);t||(_*=1+(u.taxRate??D.taxRate)/100);const E=typeof d.value.productPrice=="number"?d.value.productPrice:pe(d.value.hrid,n).bid,W=(E*r-S)/x*b.actionsPH,Q=E*r-S,y=x/b.actionsPH*3600;o.push({actions:x,actionsFormatted:O(x,2),protects:k,protectsFormatted:O(k,2),protectLevel:m,time:Ct(y*1e9),expPHFormat:ee(b.exp*b.actionsPH),matCost:ee(C),totalCostFormatted:ee(_),totalCost:_,totalCostNoHourly:S,matCostPH:`${ee(C/y*3600)} / h`,hourlyCost:W,hourlyCostFormatted:ee(W),profitPPFormatted:ee(Q),profitRateFormatted:kt(Q/S)})}return o}),ge=ue(()=>{if(!G.value.length)return{};const o=Object.keys(G.value[0]),t={};for(const r of o){const n=Math.max(...G.value.map(p=>{var i;return((i=p[r])==null?void 0:i.toString().length)||0}));t[r]=Math.max(n*10+20,60)}for(const r of le.value){const n=Math.max(...G.value.map(p=>O(r.count*p.actions).toString().length||0));t[r.hrid]=Math.max(n*10+20,60)}return t}),Ee=V(null),He=ue(()=>{var r;const t=(((r=Ee.value)==null?void 0:r.columns)??[]).reduce((n,p)=>n+(p.minWidth||0),0)??0;return Math.max(t+100,1100)});ne([()=>Et(),()=>Ht().config],()=>u.hrid&&se(Z(u.hrid)),{immediate:!1});function Qe(){var o,t;if(d.value.hrid){if(d.value=JSON.parse(JSON.stringify(d.value)),!R.value)d.value.originPrice=U(d.value.hrid);else{const r=M.value;d.value.originPrice=r.length?r.reduce((n,p)=>{const i=typeof p.price=="number"?p.price:p.originPrice;return n+i*p.count},0):U(d.value.hrid)}if(M.value.forEach(r=>{r.originPrice=U(r.hrid,r.level)}),q.value.forEach(r=>{r.ingredients.forEach(n=>{n.originPrice=U(n.hrid,n.level)})}),le.value.forEach(r=>{r.originPrice=oe(r.hrid,r.level)}),T.value.forEach(r=>{r.originPrice=oe(r.hrid,r.level)}),T.value.length){const r=(o=d.value.protection)==null?void 0:o.hrid,n=(t=d.value.protection)==null?void 0:t.price,p=r?T.value.find(b=>b.hrid===r):void 0,i=T.value.reduce((b,x)=>b.originPrice<x.originPrice?b:x),m=p||i;typeof n=="number"&&(m.price=n),d.value.protection=m}}}function Je({row:o}){if(u.config.tab==="1"){if(o.hourlyCost===Math.max(...G.value.map(t=>t.hourlyCost)))return{background:"rgb(34, 68, 34)"}}else if(o.totalCost===Math.min(...G.value.map(t=>t.totalCost)))return{background:"rgb(34, 68, 34)"};if(o.totalCostNoHourly===Math.min(...G.value.map(t=>t.totalCostNoHourly)))return{background:"rgb(34, 51, 85)"}}const ve=V(!1),Ie=V(0),Fe=V(0),be=V("");function Me(o,t){const p=document.body.offsetWidth-100,i=t.clientX+10;Fe.value=i>p?p:i,Ie.value=t.clientY,ve.value=!0,be.value=o}function Te(){ve.value=!1}return ne(ve,o=>{o?document.body.addEventListener("click",Te):document.body.removeEventListener("click",Te)}),(o,t)=>{const r=st,n=ut,p=ct,i=nt,m=rt,b=it,x=ot,k=at,C=dt,S=pt,_=mt,E=ft,W=vt,Q=gt,y=_t,j=bt,z=yt;return h(),w("div",Rt,[tt(v("ul",{class:"contextmenu",style:we({left:`${e(Fe)}px`,top:`${e(Ie)}px`})},[e(u).hasFavorite(e(be))?(h(),w("li",{key:1,onClick:t[1]||(t[1]=l=>e(u).removeFavorite(e(be)))}," 取消收藏 ")):(h(),w("li",{key:0,onClick:t[0]||(t[0]=l=>e(u).addFavorite(e(be)))}," 收藏 "))],4),[[lt,e(ve)]]),v("div",Ut,[a(Vt),v("div",null,[a(Lt,{actions:["enhancing"],equipments:["hands","neck","earrings","ring","pouch"]})])]),a(z,{gutter:20,class:"row max-w-1100px mx-auto!"},{default:c(()=>[a(k,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:c(()=>[a(x,null,{header:c(()=>[v("div",Wt,[v("span",Nt,P(e(s)("装备成本")),1),v("div",$t,[a(r,{modelValue:e(R),"onUpdate:modelValue":t[2]||(t[2]=l=>Y(R)?R.value=l:null)},{default:c(()=>[A(P(e(s)("制作装备")),1)]),_:1},8,["modelValue"]),a(r,{modelValue:e(J),"onUpdate:modelValue":t[3]||(t[3]=l=>Y(J)?J.value=l:null),disabled:!e(R)},{default:c(()=>[A(P(e(s)("最佳制作方案")),1)]),_:1},8,["modelValue","disabled"])]),e(he).checkSecret()?(h(),w("div",Ot,[v("div",jt,P(e(s)("买价")),1),a(p,{modelValue:e(ae),"onUpdate:modelValue":t[4]||(t[4]=l=>Y(ae)?ae.value=l:null),placeholder:e(s)("左价"),style:{width:"110px"}},{default:c(()=>[(h(!0),w($,null,X(e(Be),l=>(h(),L(n,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])])):F("",!0)])]),default:c(()=>[e(R)&&e(M).length?(h(),w($,{key:0},[a(e(K),{data:e(M),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:c(()=>[a(i,{label:e(s)("物品")},{default:c(({row:l})=>[a(B,{hrid:l.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(i,{prop:"count",label:e(s)("数量")},{default:c(({row:l})=>[A(P(O(l.count,2)),1)]),_:1},8,["label"]),a(i,{label:e(s)("价格"),align:"center","min-width":"120"},{default:c(({row:l})=>[l.hrid!==e(Ae)?(h(),L(m,{key:0,class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":g=>l.price=g,placeholder:me(l),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):F("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"})],64)):F("",!0),e(R)&&e(J)&&e(q).length?(h(),w($,{key:1},[(h(!0),w($,null,X(e(q),l=>(h(),w("div",{key:l.title,class:"mb-3"},[v("div",zt,P(l.title),1),a(e(K),{data:l.ingredients,style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"},size:"small"},{default:c(()=>[a(i,{label:e(s)("物品")},{default:c(({row:g})=>[a(B,{hrid:g.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(i,{prop:"count",label:e(s)("数量")},{default:c(({row:g})=>[A(P(O(g.count,4)),1)]),_:1},8,["label"])]),_:2},1032,["data"])]))),128)),a(b,{class:"mt-2 mb-2"})],64)):F("",!0),a(e(K),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(i,null,{default:c(({row:l})=>[a(B,{hrid:l.hrid},null,8,["hrid"])]),_:1}),a(i,{prop:"count"}),a(i,{"min-width":"120",align:"center"},{default:c(({row:l})=>[a(m,{class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":g=>l.price=g,placeholder:me(l),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),a(k,{xs:16,sm:10,md:10,lg:6,xl:6,class:"max-w-300px mx-auto"},{default:c(()=>[a(x,null,{default:c(()=>{var l,g;return[v("div",At,[a(B,{hrid:(l=e(d))==null?void 0:l.hrid,style:{position:"absolute",bottom:"10%",left:"10%",width:"80%",height:"80%"}},null,8,["hrid"]),a(C,{style:{position:"absolute",width:"100%",height:"100%",opacity:"0.5"},onClick:t[5]||(t[5]=f=>(re.value=!0,te.value=""))},{default:c(()=>{var f;return[A(P((f=e(d))!=null&&f.hrid?"":e(s)("选择装备")),1)]}),_:1}),(g=e(d))!=null&&g.hrid?(h(),w("div",Bt,[e(u).hasFavorite(e(d).hrid)?(h(),L(S,{key:1,underline:!1,icon:e(ke),type:"primary",onClick:t[7]||(t[7]=f=>e(u).removeFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"])):(h(),L(S,{key:0,underline:!1,type:"info",icon:e(ht),onClick:t[6]||(t[6]=f=>e(u).addFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"]))])):F("",!0),a(E,{modelValue:e(re),"onUpdate:modelValue":t[9]||(t[9]=f=>Y(re)?re.value=f:null),"show-close":!1},{default:c(()=>[a(_,{modelValue:e(te),"onUpdate:modelValue":t[8]||(t[8]=f=>Y(te)?te.value=f:null),placeholder:e(s)("搜索")},null,8,["modelValue","placeholder"]),e(u).favorite.length&&!e(te)?(h(),w($,{key:0},[a(b,{class:"mt-2 mb-2"}),v("div",qt,[A(P(e(s)("收藏"))+" ",1),v("span",Dt," ("+P(e(s)("右键/长按取消收藏"))+")",1)]),v("div",Gt,[(h(!0),w($,null,X(e(u).favorite,f=>(h(),L(C,{key:f,class:"relative",style:{width:"50px",height:"50px",margin:"2px"},onClick:N=>se(e(Z)(f)),onContextmenu:$e(N=>Me(f,N),["prevent"])},{default:c(()=>[a(B,{hrid:f},null,8,["hrid"]),v("div",Qt,[a(S,{underline:!1,icon:e(ke),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])]),_:2},1032,["onClick","onContextmenu"]))),128))]),a(b,{class:"mt-2 mb-1"})],64)):F("",!0),v("div",Jt,[(h(!0),w($,null,X(e(qe),f=>(h(),L(C,{key:f.hrid,style:{width:"50px",height:"50px",margin:"2px"},class:"relative",onClick:N=>se(f),onContextmenu:$e(N=>Me(f.hrid,N),["prevent"])},{default:c(()=>[a(B,{hrid:f.hrid},null,8,["hrid"]),e(u).hasFavorite(f.hrid)?(h(),w("div",Kt,[a(S,{underline:!1,icon:e(ke),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])):F("",!0)]),_:2},1032,["onClick","onContextmenu"]))),128))])]),_:1},8,["modelValue"])])]}),_:1}),a(x,{class:"mt-2"},{default:c(()=>[a(Q,{modelValue:e(u).config.tab,"onUpdate:modelValue":t[14]||(t[14]=l=>e(u).config.tab=l),type:"border-card",stretch:""},{default:c(()=>[a(W,{label:e(s)("工时费")},{default:c(()=>[v("div",Xt,[v("div",Yt,P(e(s)("工时费/h")),1),a(m,{class:"w-120px",modelValue:e(u).config.hourlyRate,"onUpdate:modelValue":t[10]||(t[10]=l=>e(u).config.hourlyRate=l),step:1,min:0,max:5e9,placeholder:O(D.hourlyRate),controls:!1},null,8,["modelValue","placeholder"])]),v("div",Zt,[v("div",el,P(e(s)("溢价率%")),1),a(m,{class:"w-120px",modelValue:e(u).config.taxRate,"onUpdate:modelValue":t[11]||(t[11]=l=>e(u).config.taxRate=l),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",placeholder:D.taxRate.toString()},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),a(W,{label:e(s)("成品售价")},{default:c(()=>[v("div",tl,[v("div",ll,P(e(s)("价格")),1),a(m,{class:"w-full",style:{width:"100%"},modelValue:e(d).productPrice,"onUpdate:modelValue":t[12]||(t[12]=l=>e(d).productPrice=l),step:1,min:-1,placeholder:O(e(pe)(e(d).hrid,e(u).enhanceLevel??D.enhanceLevel).bid),"controls-position":"right",controls:!0,onChange:Ge},null,8,["modelValue","placeholder"])]),v("div",al,[v("div",ol,P(e(s)("税率%")),1),a(m,{class:"w-full",style:{width:"100%"},modelValue:e(Pe),"onUpdate:modelValue":t[13]||(t[13]=l=>Y(Pe)?Pe.value=l:null),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",controls:!0},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(k,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:c(()=>[a(x,null,{header:c(()=>[v("div",nl,[v("span",rl,P(e(s)("强化消耗")),1),e(he).checkSecret()?(h(),w("div",il,[v("div",sl,P(e(s)("买价")),1),a(p,{modelValue:e(ie),"onUpdate:modelValue":t[15]||(t[15]=l=>Y(ie)?ie.value=l:null),placeholder:e(s)("左价"),style:{width:"110px"}},{default:c(()=>[(h(!0),w($,null,X(e(Be),l=>(h(),L(n,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])])):F("",!0)])]),default:c(()=>[a(e(K),{data:e(le),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:c(()=>[a(i,{label:e(s)("物品")},{default:c(({row:l})=>[a(B,{hrid:l.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(i,{prop:"count",label:e(s)("数量")},{default:c(({row:l})=>[A(P(O(l.count,2)),1)]),_:1},8,["label"]),a(i,{label:e(s)("价格"),align:"center","min-width":"120"},{default:c(({row:l})=>[l.hrid!==e(Ae)?(h(),L(m,{key:0,class:"max-w-100%",modelValue:l.price,"onUpdate:modelValue":g=>l.price=g,placeholder:me(l),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):F("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"}),a(e(K),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(i,{"min-width":"160"},{default:c(({row:l})=>[a(j,{modelValue:l.protection.hrid,"onUpdate:modelValue":g=>l.protection.hrid=g},{default:c(()=>[(h(!0),w($,null,X(e(T),g=>(h(),L(y,{key:g.hrid,value:g.hrid,border:"",style:{width:"50px",height:"50px",margin:"2px"},onClick:()=>l.protection=g},{default:c(()=>[a(B,{hrid:g.hrid},null,8,["hrid"])]),_:2},1032,["value","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(i,{"min-width":"120",align:"center"},{default:c(({row:l})=>[a(m,{class:"max-w-100%",modelValue:l.protection.price,"onUpdate:modelValue":g=>l.protection.price=g,placeholder:me(l.protection),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),a(b,{class:"mt-2 mb-2"}),a(e(K),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:c(()=>[a(i,null,{default:c(()=>[A(P(e(s)("目标"))+": ",1)]),_:1}),a(i),a(i,{"min-width":"120",align:"center"},{default:c(()=>[a(m,{class:"max-w-100%",max:20,min:1,modelValue:e(u).config.enhanceLevel,"onUpdate:modelValue":t[16]||(t[16]=l=>e(u).config.enhanceLevel=l),placeholder:O(D.enhanceLevel),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),a(x,{class:"mx-auto",style:we({width:`${e(He)}px`,maxWidth:"100%"})},{default:c(()=>[a(e(K),{ref_key:"refTable",ref:Ee,data:e(G),size:"large",border:"",fit:"","header-cell-style":{padding:"8px 0"},style:we({width:`${e(He)}px`}),"row-style":Je},{default:c(()=>[a(i,{prop:"protectLevel",label:e(s)("Prot"),"min-width":e(ge).protectLevel,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(i,{prop:"actionsFormatted",label:e(s)("次数"),"min-width":e(ge).actionsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(i,{prop:"time",label:e(s)("时间"),"min-width":e(ge).time,align:"right"},null,8,["label","min-width"]),a(i,{prop:"expPHFormat",label:e(s)("经验 / h"),"min-width":100,align:"right"},null,8,["label"]),(h(!0),w($,null,X(e(le),l=>(h(),L(i,{key:l.hrid,"min-width":100,"header-align":"center",align:"right"},{header:c(()=>[a(B,{class:"mt-[8px]",width:20,height:20,hrid:l.hrid},null,8,["hrid"])]),default:c(({row:g})=>[A(P(ee(l.count*g.actions)),1)]),_:2},1024))),128)),a(i,{prop:"protectsFormatted",label:e(s)("保护"),"min-width":e(ge).protectsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(i,{prop:"matCost",label:e(s)("材料费用"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"]),a(i,{prop:"matCostPH",label:e(s)("损耗"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]),e(u).config.tab==="1"&&e(je)().checkSecret()?(h(),L(i,{key:0,prop:"profitRateFormatted",label:e(s)("利润率"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):F("",!0),e(u).config.tab==="1"?(h(),L(i,{key:1,prop:"profitPPFormatted",label:e(s)("单个利润"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):F("",!0),e(u).config.tab==="1"?(h(),L(i,{key:2,prop:"hourlyCostFormatted",label:e(s)("工时费"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):(h(),L(i,{key:3,prop:"totalCostFormatted",label:e(s)("总费用"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]))]),_:1},8,["data","style"])]),_:1},8,["style"])])}}}),bl=Tt(cl,[["__scopeId","data-v-772da940"]]);export{bl as default};
