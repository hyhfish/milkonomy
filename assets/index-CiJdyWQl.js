import{k as se,r as h,aJ as ie,w as T,u as re,f as b,i,s as a,v as l,F as s,q as t,at as ue,a5 as G,av as ce,au as de,aK as me,ao as pe,aL as fe,p as L,ax as _e,D as v,Y as P,az as ge,aM as he,G as m,a0 as ve,V as be,n as Le,O as xe,P as ye,aN as Ce,aw as Ve,aO as Pe,aP as ke,aD as Se,ay as De,aQ as Ee,aR as O,aS as ze,h as f}from"./vue-CMGQ9A1z.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-BTWGwO90.js";import{u as Ie,a as Fe,A as Me,_ as Re,M as Ue}from"./ManualPriceCard-CYFf2-hT.js";import{G as $e,A as je,e as Be,f as M,b as Ae,n as He,u as Ne}from"./GameInfo-KBkgcGKJ.js";import{g as Te}from"./index-Dd4YNrPX.js";import{u as Ge}from"./usePriceStatus-bziXz29p.js";import{v as R}from"./index-CMIaIRUM.js";import{_ as Oe}from"./PriceStatusSelect.vue_vue_type_script_setup_true_lang-IyBPEn8W.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./workflow-B0jYlNl-.js";const We={class:"app-container"},Je={class:"game-info"},Ke={class:"title"},Qe={style:{display:"flex"}},Ye={key:0},Xe={key:1},Ze={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},we={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},el={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},ll={class:"pager-wrapper"},al=se({__name:"index",setup(tl){const{paginationData:d,handleCurrentChange:q,handleSizeChange:W}=Ie({},"jungle-leaderboard-pagination"),S=h([]),J=h(null),r=Fe("jungle-leaderboard-search-data",{name:"",project:"",profitRate:"",maxLevel:20,minLevel:1,banEquipment:!1,banCharm:!1,maxItemLevel:void 0,bestManufacture:!1}),D=h(!1),x=ie(()=>{D.value=!0,Te({currentPage:d.currentPage,size:d.pageSize,...r.value,sort:U.value}).then(u=>{d.total=u.total,S.value=u.list}).catch(u=>{console.error(u),S.value=[]}).finally(()=>{D.value=!1})},300);function _(){d.currentPage===1?x():d.currentPage=1}const U=h();function K(u){U.value=u,x()}T([()=>d.currentPage,()=>d.pageSize,()=>R().marketData,()=>Ne().config,()=>R().buyStatus,()=>R().sellStatus],x,{immediate:!0}),T(()=>M(),()=>{x()},{deep:!0});const $=h(),y=h(!1);async function Q(u){$.value=O(u),y.value=!0}const C=h(!1),j=h();function Y(u){if(!M().activated){ze.confirm(n("是否确定开启自定义价格？"),n("需先开启自定义价格"),{confirmButtonText:n("确定"),cancelButtonText:n("取消"),closeOnClickModal:!0}).then(()=>{M().setActivated(!0)});return}j.value=O(u),C.value=!0}const{t:n}=re();function X(u){var g;const o=u==null?void 0:u.hrid,E=((g=u==null?void 0:u.calculator)==null?void 0:g.enhanceLevel)??0,p=Ae(o,E).vol??-1;return p<0?"-":He(p)}const Z=Ge("jungle-price-status");return(u,o)=>{const E=Se,p=ke,g=De,B=Ee,w=Pe,c=_e,A=ge,z=Le("Warning"),I=be,F=ve,ee=Ve,le=me,ae=de,H=ce,te=ue,ne=fe;return f(),b("div",We,[i("div",Je,[a($e),i("div",null,[a(je,{actions:["enhancing","cheesesmithing","crafting","tailoring"],equipments:["off_hand","hands","neck","earrings","ring","pouch"]})]),a(Oe,{onChange:l(Z)},null,8,["onChange"]),i("div",null,s(l(n)("打野爽！")),1)]),a(te,{gutter:20,class:"row"},{default:t(()=>[a(H,{xs:24,sm:24,md:24,lg:24,xl:16},{default:t(()=>[a(ae,null,{header:t(()=>[a(w,{class:"rank-card",ref_key:"ldSearchFormRef",ref:J,inline:!0,model:l(r)},{default:t(()=>[i("div",Ke,s(l(n)("利润排行")),1),a(p,{prop:"name",label:l(n)("物品")},{default:t(()=>[a(E,{style:{width:"100px"},modelValue:l(r).name,"onUpdate:modelValue":o[0]||(o[0]=e=>l(r).name=e),placeholder:l(n)("请输入"),clearable:"",onInput:_},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(p,{label:l(n)("目标等级从")},{default:t(()=>[a(g,{style:{width:"80px"},min:1,max:20,modelValue:l(r).minLevel,"onUpdate:modelValue":o[1]||(o[1]=e=>l(r).minLevel=e),placeholder:"1",clearable:"",onChange:_,"controls-position":"right"},null,8,["modelValue"]),m(" "+s(l(n)("到"))+"  ",1),a(g,{style:{width:"80px"},min:1,max:20,modelValue:l(r).maxLevel,"onUpdate:modelValue":o[2]||(o[2]=e=>l(r).maxLevel=e),placeholder:"20",clearable:"",onChange:_,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:`${l(n)("售价")} ≥`},{default:t(()=>[a(g,{style:{width:"80px"},modelValue:l(r).minSellPrice,"onUpdate:modelValue":o[3]||(o[3]=e=>l(r).minSellPrice=e),placeholder:"0",clearable:"",onChange:_,controls:!1},null,8,["modelValue"]),o[11]||(o[11]=m(" M "))]),_:1},8,["label"]),a(p,{label:`${l(n)("物品等级")} ≥`},{default:t(()=>[a(g,{style:{width:"80px"},modelValue:l(r).minItemLevel,"onUpdate:modelValue":o[4]||(o[4]=e=>l(r).minItemLevel=e),placeholder:"0",clearable:"",onChange:_,controls:!1},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:`${l(n)("物品等级")} ≤`},{default:t(()=>[a(g,{style:{width:"80px"},modelValue:l(r).maxItemLevel,"onUpdate:modelValue":o[5]||(o[5]=e=>l(r).maxItemLevel=e),placeholder:"",clearable:"",onChange:_,controls:!1},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:`${l(n)("风险")} ≤`},{default:t(()=>[a(g,{style:{width:"80px"},modelValue:l(r).maxRisk,"onUpdate:modelValue":o[6]||(o[6]=e=>l(r).maxRisk=e),clearable:"",onChange:_,controls:!1},null,8,["modelValue"])]),_:1},8,["label"]),a(p,null,{default:t(()=>[a(B,{modelValue:l(r).bestManufacture,"onUpdate:modelValue":o[7]||(o[7]=e=>l(r).bestManufacture=e),onChange:_},{default:t(()=>[m(s(l(n)("最佳制作方案")),1)]),_:1},8,["modelValue"])]),_:1}),a(p,null,{default:t(()=>[a(B,{modelValue:l(r).banCharm,"onUpdate:modelValue":o[8]||(o[8]=e=>l(r).banCharm=e),onChange:_},{default:t(()=>[m(s(l(n)("排除护符")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),default:t(()=>[pe((f(),L(ee,{data:l(S),onSortChange:K},{default:t(()=>[a(c,{width:"54"},{default:t(({row:e})=>[a(k,{hrid:e.hrid},null,8,["hrid"])]),_:1}),a(c,{prop:"result.name",label:l(n)("物品")},null,8,["label"]),a(c,{"min-width":"70"},{default:t(({row:e})=>[i("div",Qe,[e.calculatorList&&e.calculatorList[e.calculatorList.length-1].protectLevel<e.calculatorList[e.calculatorList.length-1].enhanceLevel?(f(),L(k,{key:0,hrid:e.calculatorList[e.calculatorList.length-1].protectionItem.hrid},null,8,["hrid"])):v("",!0),e.protectLevel<e.enhanceLevel?(f(),L(k,{key:1,hrid:e.protectionItem.hrid},null,8,["hrid"])):v("",!0),e.catalyst?(f(),L(k,{key:2,hrid:`/items/${e.catalyst}`},null,8,["hrid"])):v("",!0)]),e.calculatorList&&e.calculatorList[e.calculatorList.length-1].protectLevel<e.calculatorList[e.calculatorList.length-1].enhanceLevel?(f(),b("div",Ye,s(l(n)("从{0}保护",[e.calculatorList[e.calculatorList.length-1].protectLevel])),1)):v("",!0),e.protectLevel<e.enhanceLevel?(f(),b("div",Xe,s(l(n)("从{0}保护",[e.protectLevel])),1)):v("",!0)]),_:1}),a(c,{prop:"project",label:l(n)("动作")},null,8,["label"]),a(c,{prop:"result.profitPH",label:l(n)("利润 / h"),align:"center","min-width":"120",sortable:"custom","sort-orders":["ascending",null]},{default:t(({row:e})=>[i("span",{class:P(e.hasManualPrice?"manual":"")},s(e.result.profitPHFormat)+"  ",3),a(A,{type:"primary",icon:l(he),onClick:V=>Y(e)},{default:t(()=>[m(s(l(n)("自定义")),1)]),_:2},1032,["icon","onClick"])]),_:1},8,["label"]),a(c,{label:l(n)("损耗 / h"),align:"center"},{default:t(({row:e})=>[m(s(e.result.cost4EnhancePHFormat),1)]),_:1},8,["label"]),a(c,{align:"center","min-width":"120"},{header:t(()=>[i("div",Ze,[i("div",null,s(l(n)("风险系数")),1),a(F,{placement:"top",effect:"light"},{content:t(()=>[m(s(l(n)("损耗 ÷ 利润")),1)]),default:t(()=>[a(I,null,{default:t(()=>[a(z)]),_:1})]),_:1})])]),default:t(({row:e})=>[i("span",{class:P({error:e.result.risk>7,success:e.result.risk<5})},s(e.result.profitPH>0?e.result.riskFormat:""),3)]),_:1}),a(c,{align:"center",label:l(n)("利润率")},{default:t(({row:e})=>[i("span",{class:P(e.hasManualPrice?"manual":"")},s(e.result.profitRateFormat)+"  ",3)]),_:1},8,["label"]),a(c,{align:"center","min-width":"120"},{header:t(()=>[i("div",we,[i("div",null,s(l(n)("利润 / 次")),1),a(F,{placement:"top",effect:"light"},{content:t(()=>[m(s(l(n)("单次动作产生的利润。"))+" ",1),o[12]||(o[12]=i("br",null,null,-1)),m(" "+s(l(n)("#多步动作利润提示"))+" ",1),o[13]||(o[13]=i("br",null,null,-1)),m(" "+s(l(n)("#多步动作利润举例")),1)]),default:t(()=>[a(I,null,{default:t(()=>[a(z)]),_:1})]),_:1})])]),default:t(({row:e})=>[i("span",{class:P(e.hasManualPrice?"manual":"")},s(e.result.profitPPFormat)+"  ",3)]),_:1}),a(c,{label:l(n)("售价"),align:"center"},{default:t(({row:e})=>[i("span",null,s(Be(e.calculator.productListWithPrice[0].price)),1)]),_:1},8,["label"]),a(c,{label:l(n)("成交量(1h)"),align:"center","min-width":"120"},{default:t(({row:e})=>[m(s(X(e)),1)]),_:1},8,["label"]),a(c,{"min-width":"120",label:l(n)("经验 / h"),align:"center"},{default:t(({row:e})=>{var V;return[i("div",el,[i("div",null,s(e.result.expPHFormat),1),((V=e.expList)==null?void 0:V.length)>1?(f(),L(F,{key:0,placement:"top",effect:"light"},{content:t(()=>[(f(!0),b(xe,null,ye(e.expList,(N,oe)=>(f(),b("div",{key:oe,style:{display:"flex",gap:"10px"}},[i("div",null,s(l(n)(N.action)),1),i("div",null,s(N.expPHFormat),1)]))),128))]),default:t(()=>[a(I,null,{default:t(()=>[a(z)]),_:1})]),_:2},1024)):v("",!0)])]}),_:1},8,["label"]),a(c,{label:l(n)("详情"),align:"center"},{default:t(({row:e})=>[a(A,{type:"primary",icon:l(Ce),onClick:V=>Q(e)},{default:t(()=>[m(s(l(n)("查看")),1)]),_:2},1032,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[ne,l(D)]])]),footer:t(()=>[i("div",ll,[a(le,{background:"",layout:l(d).layout,"page-sizes":l(d).pageSizes,total:l(d).total,"page-size":l(d).pageSize,"current-page":l(d).currentPage,onSizeChange:l(W),onCurrentChange:l(q)},null,8,["layout","page-sizes","total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1})]),_:1}),a(H,{xs:24,sm:24,md:24,lg:24,xl:8},{default:t(()=>[a(Ue,{"memory-key":"jungle"})]),_:1})]),_:1}),a(Me,{modelValue:l(y),"onUpdate:modelValue":o[9]||(o[9]=e=>G(y)?y.value=e:null),data:l($)},null,8,["modelValue","data"]),a(Re,{modelValue:l(C),"onUpdate:modelValue":o[10]||(o[10]=e=>G(C)?C.value=e:null),data:l(j)},null,8,["modelValue","data"])])}}}),fl=qe(al,[["__scopeId","data-v-876c5912"]]);export{fl as default};
