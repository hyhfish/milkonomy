var so=Object.defineProperty;var co=(e,t,r)=>t in e?so(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fe=(e,t,r)=>co(e,typeof t!="symbol"?t+"":t,r);import{w as ke,C as Fr,P as Pr,A as br,p as su,E as lo,z as fo,B as ho,H as li,x as sr,n as po,v as mo}from"./index-DYCH4vBP.js";import{g as Gn,a as vo,i as go,_ as Ze}from"./index.vue_vue_type_script_setup_true_lang-CjRkRCNG.js";import{g as Do,w as At,t as qe,d as cu,k as lu,r as tt,u as fu,f as Re,O as rt,ao as yo,i as de,s as X,ar as _o,v as K,aq as wo,D as mr,p as xt,F as Ee,P as lt,aC as Eo,a5 as fi,q as ne,aU as hi,ad as Fo,b4 as bo,h as _e,G as ut,R as Co,at as Ao,av as Bo,au as Mo,aw as So,ax as xo,ay as No,aQ as To,aR as Lo,b5 as Io,aS as Po,aD as Oo,y as Or,Y as Ro}from"./vue-0ucuI9Mt.js";import{_ as hu}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Wr(e,t=0){return Math.abs(e)>=0&&Math.abs(e)<2?e=Math.round(e*10**t)/10**t:Math.abs(e)>=0&&Math.abs(e)<10?e=Math.round(e*10**Math.min(t,2))/10**Math.min(t,2):Math.abs(e)>=10&&Math.abs(e)<100?e=Math.round(e*10**Math.min(t,1))/10**Math.min(t,1):e=Math.round(e),$o(e)}function $o(e){const t=e.toString();if(Math.abs(e)<1e3)return t;let r="";const n=t[0]==="-",i=t.length;for(let u=n?1:0;u<i;u++)u>0&&(i-u)%3===0&&(r+=","),r+=t[u];return n?`-${r}`:r}function zo(e){let t="";e/=1e9;const r=Math.floor(e/3600),n=Math.floor(e%3600/60),i=r||n?0:2,u=Math.floor(e%60*10**i)/10**i;return r&&(t+=`${r}h`),n&&(t+=`${n<10?"0":""}${n}m`),u&&(t+=`${u<10?"0":""}${u}s`),t}function er(e,t=2){return`${Math.round(e*100*10**t)/10**t}%`}const jr=["","K","M","B","T"];function vp(e){for(let t=0;t<jr.length;t++)if(Math.abs(e)<10**((t+2)*3-1))return`${Wr(e/1e3**t)}${jr[t]}`;return Wr(e)}function It(e){for(let t=0;t<jr.length;t++)if(Math.abs(e)<10**((t+1)*3))return`${Wr(e/1e3**t,2)}${jr[t]}`;return`${e.toLocaleString("en-US")}`}var bn,pi;function qo(){return pi||(pi=1,bn=function e(t){Object.freeze(t);var r=typeof t=="function",n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(function(i){n.call(t,i)&&(!r||i!=="caller"&&i!=="callee"&&i!=="arguments")&&t[i]!==null&&(typeof t[i]=="object"||typeof t[i]=="function")&&!Object.isFrozen(t[i])&&e(t[i])}),t}),bn}var ko=qo();const Uo=Do(ko),Vt={gameData:null,marketData:null};let Pn={};const di={},mi={},vi={};let Ur={},yt={},pu=ke().buyStatus,du=ke().sellStatus;At(()=>ke().gameData,()=>{const e=structuredClone(qe(ke().gameData));Vt.gameData=e&&Uo(e),Pn={},yt={},Zo()},{immediate:!0});At(()=>ke().marketData,()=>{const e=Object.freeze(structuredClone(qe(ke().marketData)));Vt.marketData=e,yt={}},{immediate:!0});At([()=>ke().buyStatus,()=>ke().sellStatus],()=>{yt={}},{immediate:!0});At(()=>ke().buyStatus,e=>{pu=e},{immediate:!0});At(()=>ke().sellStatus,e=>{du=e},{immediate:!0});function Ft(){return Vt.gameData}function On(){return Vt.marketData}const gi={"/items/cowbell":()=>({ask:he("/items/bag_of_10_cowbells").ask/10||4e4,bid:he("/items/bag_of_10_cowbells").bid/10||4e4,avg:-1,vol:-1}),"/items/coin":()=>({ask:1,bid:1,avg:1,vol:-1})};function Di(e,t,r){function n(i){const u={price:-1};switch(i){case Pr.ASK:u.price=e.ask;break;case Pr.BID:u.price=e.bid;break;case Pr.ASK_LOW:u.price=e.ask,u.price>0&&(u.price=yi(u.price,!1));break;case Pr.BID_HIGH:u.price=e.bid,u.price>0&&(u.price=yi(u.price,!0));break}return u}return{ask:n(t).price,bid:n(r).price,avg:e.avg,vol:e.vol}}const vr=[[0,1],[50,2],[100,5],[300,10]];function yi(e,t=!0){if(e<=0)return-1;let r=0;for(;e>300;)e/=10,r+=1;let n=0,i=0;for(let u=0;u<vr.length;u++)if(e<=vr[u][0]){n=i=u-1,e===vr[u][0]&&(n=u);break}return t?(e+vr[n][1])*10**r:(e-vr[i][1])*10**r}function he(e,t=0,r=pu,n=du){var s,c;if(!e)return{ask:-1,bid:-1,avg:-1,vol:-1};const i=$t(e);if(t){const l=(s=Vt.marketData)==null?void 0:s.marketData[e],h=l?l[t]:void 0,p={ask:(h==null?void 0:h.ask)??-1,bid:(h==null?void 0:h.bid)??-1,avg:(h==null?void 0:h.avg)??-1,vol:(h==null?void 0:h.vol)??-1};return Di(p,r,n)}const u=`${e}|${r}|${n}`;if(yt[u])return yt[u];if(gi[e])return yt[u]=gi[e](),yt[u];if(Ho(e)&&e!=="/items/bag_of_10_cowbells")return yt[u]=Vo(e),yt[u];const a=Ft().shopItemDetailMap[`/shop_items/${i.hrid.split("/").pop()}`],o=((c=On().marketData[i.hrid])==null?void 0:c[0])||{ask:-1,bid:-1,avg:-1,vol:-1};return a&&a.costs[0].itemHrid===Fr&&(o.ask=o.ask===-1?a.costs[0].count:Math.min(o.ask,a.costs[0].count)),yt[u]=Di(o,r,n),yt[u]}function Ho(e){return $t(e).categoryHrid==="/item_categories/loot"}function Vo(e){return Ft().openableLootDropMap[e].reduce((r,n)=>{const i=(n.maxCount+n.minCount)/2,u=he(n.itemHrid);return r.ask+=u.ask*i*n.dropRate,r.bid+=u.bid*i*n.dropRate,r},{ask:0,bid:0})}function $t(e){let t=di[e];return t||(t=Ft().itemDetailMap[e],t&&(di[e]=t)),t}function Cr(e){let t=Pn[e];return t||(t=Ft().actionDetailMap[e],t&&(Pn[e]=t)),t}function Rn(e){let t=mi[e];return t||(t=Ft().communityBuffTypeDetailMap[e],t&&(mi[e]=t)),t}function $n(e){let t=vi[e];if(!t){const r=Ft().achievementTierDetailMap;if(!r)return;t=r[e],t&&(vi[e]=t)}return t}function Cn(){return Cr("/actions/alchemy/transmute").baseTimeCost}function An(){return Cr("/actions/alchemy/decompose").baseTimeCost}function Bn(){return Cr("/actions/alchemy/coinify").baseTimeCost}function Mn(){return Cr("/actions/enhancing/enhance").baseTimeCost}function Zo(){Ur={},Vt.gameData&&Object.entries(Vt.gameData.actionDetailMap).forEach(([e,t])=>{(e.match(/fabric$/)||e.match(/lumber$/)||e.match(/cheese$/))&&(Ur[t.inputItems[0].itemHrid]=t.outputItems[0].itemHrid)}),Ur["/items/rainbow_milk"]="/items/rainbow_cheese"}function gp(e){return Ur[e]}let Jn={};function Wo(e){return Jn[`${e.originLevel}-${e.enhanceLevel}-${e.protectLevel}-${e.itemLevel}-${e.escapeLevel}`]}function jo(e,t){Jn[`${e.originLevel}-${e.enhanceLevel}-${e.protectLevel}-${e.itemLevel}-${e.escapeLevel}`]=t}function Go(){Jn={}}const ln={MINUTE:6e10,HOUR:36e11};function Yn(e,t){let r="/items/small_artisans_crate";const n=1*t/(8*ln.HOUR);let i=0;return e.itemLevel<35?(r="/items/small_artisans_crate",i=(e.itemLevel+100)/100):e.itemLevel<70?(r="/items/medium_artisans_crate",i=(e.itemLevel-35+100)/150):(r="/items/large_artisans_crate",i=(e.itemLevel-70+100)/200),[{itemHrid:r,dropRate:n*i,minCount:1,maxCount:1}]}function Kn(e,t){return[{itemHrid:"/items/alchemy_essence",dropRate:1*t/(6*ln.MINUTE)*((e.itemLevel+100)/100),minCount:1,maxCount:1}]}function Jo(e,t){return t===0?0:Math.round(2*(.5+.1*1.05**(e.itemLevel||0))*2**t)}function Yo(e,t){return[{itemHrid:"/items/enhancing_essence",dropRate:1*t/(2*ln.MINUTE)*((e.itemLevel+100)/100),minCount:1,maxCount:1}]}function Ko(e,t){let r="/items/small_artisans_crate";const n=1*t/(4*ln.HOUR);let i=0;return e.itemLevel<35?(r="/items/small_artisans_crate",i=(e.itemLevel+100)/100):e.itemLevel<70?(r="/items/medium_artisans_crate",i=(e.itemLevel-35+100)/150):(r="/items/large_artisans_crate",i=(e.itemLevel-70+100)/200),[{itemHrid:r,dropRate:n*i,minCount:1,maxCount:1}]}function Xo(e,t){return 1.4*(1+t)*(10+e.itemLevel)}function Qo(e){return 1*(10+e.itemLevel)}function es(e){return 1.4*(10+e.itemLevel)}function ts(e){return 1.6*(10+e.itemLevel)}const fn=[{type:"off_hand",hrid:"/items/eye_watch",enhanceLevel:10},{type:"head",hrid:"/items/red_culinary_hat",enhanceLevel:10},{type:"hands",hrid:"/items/enchanted_gloves",enhanceLevel:10},{type:"feet",hrid:"/items/collectors_boots",enhanceLevel:10},{type:"neck",hrid:"",enhanceLevel:void 0},{type:"earrings",hrid:"",enhanceLevel:void 0},{type:"ring",hrid:"",enhanceLevel:void 0},{type:"pouch",hrid:"",enhanceLevel:void 0}],mu=Object.freeze({milking:["/items/processing_tea","/items/gathering_tea","/items/efficiency_tea"],foraging:["/items/processing_tea","/items/gathering_tea","/items/efficiency_tea"],woodcutting:["/items/processing_tea","/items/gathering_tea","/items/efficiency_tea"],cheesesmithing:["/items/wisdom_tea","/items/artisan_tea","/items/efficiency_tea"],crafting:["/items/wisdom_tea","/items/artisan_tea","/items/efficiency_tea"],tailoring:["/items/wisdom_tea","/items/artisan_tea","/items/efficiency_tea"],brewing:["/items/gourmet_tea","/items/artisan_tea","/items/efficiency_tea"],cooking:["/items/gourmet_tea","/items/artisan_tea","/items/efficiency_tea"],alchemy:["/items/wisdom_tea","/items/efficiency_tea","/items/catalytic_tea"],enhancing:["/items/wisdom_tea","/items/blessed_tea","/items/super_enhancing_tea"]}),vu=[{type:"experience",hrid:"/community_buff_types/experience",level:void 0},{type:"gathering_quantity",hrid:"/community_buff_types/gathering_quantity",level:void 0},{type:"production_efficiency",hrid:"/community_buff_types/production_efficiency",level:void 0},{type:"enhancing_speed",hrid:"/community_buff_types/enhancing_speed",level:void 0}],gu=[{type:"beginner",enabled:!1},{type:"novice",enabled:!1},{type:"adept",enabled:!1},{type:"veteran",enabled:!1},{type:"champion",enabled:!1}],rs=5,Du=cu("player",{state:()=>({config:as(),presets:_u(),presetIndex:bu()}),actions:{commit(){os(this.presets)},setActionConfig(e,t){this.config=e,this.presets[t]=e,this.commit(),this.setPresetIndex(t)},switchTo(e){this.config=this.presets[e],this.setPresetIndex(e)},removePreset(e){this.presets.length<=1||(this.presets.splice(e,1),this.commit(),this.presetIndex===e?this.setPresetIndex(0):this.presetIndex>e&&this.setPresetIndex(this.presetIndex-1),this.config=this.presets[this.presetIndex])},setPresetIndex(e){this.presetIndex=e,ss(e),ns()},isOverflow(){return this.presets.length>=rs}}});function ns(){ke().clearAllCaches(),Go()}function zn(e,t){const r=new Map;for(const a of Object.values(br)){const o=Object.values(ke().gameData.itemDetailMap).filter(s=>{var c,l;return((c=s.equipmentDetail)==null?void 0:c.noncombatStats)&&Object.keys((l=s.equipmentDetail)==null?void 0:l.noncombatStats).length>0}).filter(s=>{var c;return((c=s.equipmentDetail)==null?void 0:c.type)===`/equipment_types/${a}_tool`}).find(s=>s.itemLevel===80);r.set(a,{action:a,playerLevel:100,tool:{type:`${a}_tool`,hrid:o==null?void 0:o.hrid,enhanceLevel:10},legs:{type:"legs",hrid:void 0,enhanceLevel:void 0},body:{type:"body",hrid:void 0,enhanceLevel:void 0},back:{type:"back",hrid:void 0,enhanceLevel:void 0},charm:{type:"charm",hrid:void 0,enhanceLevel:void 0},houseLevel:4,tea:structuredClone(mu[a])})}const n=new Map;for(const a of Object.values(fn))n.set(a.type,{type:a.type,hrid:a.hrid,enhanceLevel:a.enhanceLevel});const i=new Map;for(const a of Object.values(vu))i.set(a.type,{type:a.type,hrid:a.hrid,level:a.level});const u=new Map;for(const a of Object.values(gu))u.set(a.type,{type:a.type,enabled:a.enabled});return{actionConfigMap:r,specialEquimentMap:n,communityBuffMap:i,achievementBuffMap:u,seals:[],name:e,color:t}}const is="player-action-config",yu="player-action-config-presets";function us(){const e={actionConfigMap:new Map,specialEquimentMap:new Map,communityBuffMap:new Map,achievementBuffMap:new Map,seals:[],name:"0",color:"#11BF11"};try{const t=JSON.parse(localStorage.getItem(is)||"{}");e.actionConfigMap=new Map(Object.entries(t.actionConfigMap||{})),e.specialEquimentMap=new Map(Object.entries(t.specialEquimentMap||{})),e.communityBuffMap=new Map(Object.entries(t.communityBuffMap||{})),e.achievementBuffMap=new Map(Object.entries(t.achievementBuffMap||{})),e.seals=Eu(t.seals||t.seal||wu(e.actionConfigMap))}catch{}return e}function as(){const e=_u(),t=Math.min(bu(),e.length-1);return e[t]}function _u(){var t;const e=[];try{const r=JSON.parse(localStorage.getItem(yu)||"[]");for(const n of r){const i={name:n.name,color:n.color,seals:Eu(n.seals||n.seal),actionConfigMap:new Map(Object.entries(n.actionConfigMap||{})),specialEquimentMap:new Map(Object.entries(n.specialEquimentMap||{})),communityBuffMap:new Map(Object.entries(n.communityBuffMap||{})),achievementBuffMap:new Map(Object.entries(n.achievementBuffMap||{}))};(t=i.seals)!=null&&t.length||(i.seals=wu(i.actionConfigMap)),e.push(i)}e.length===0&&e.push(us())}catch{}return e.length===0&&e.push(zn("0","#11BF11")),e}function wu(e){const t=new Set;for(const r of e.values()){const n=r.seal;n&&t.add(n)}return[...t]}function Eu(e){return Array.isArray(e)?[...new Set(e.filter(t=>typeof t=="string"))]:typeof e=="string"&&e?[e]:[]}function os(e){const t=e.map(r=>{const n={};for(const[i,u]of Object.entries(r))u instanceof Map?n[i]=Object.fromEntries(u.entries()):n[i]=u;return n});localStorage.setItem(yu,JSON.stringify(t))}const Fu="player-action-preset-index";function bu(){const e=localStorage.getItem(Fu);return e?Number.parseInt(e,10):0}function ss(e){localStorage.setItem(Fu,String(e))}function Dr(){return Du(su)}function cs(e,t){Dr().setActionConfig(e,t),Dr().commit()}let cr=structuredClone(qe(Dr().config));const Zt=structuredClone(qe(Dr().config));let hn=[],Cu=[],Au=[],Bu=[],ie={};const Mu={"/items/seal_of_action_speed":"Speed","/items/seal_of_efficiency":"Efficiency","/items/seal_of_gathering":"Gathering","/items/seal_of_processing":"Processing","/items/seal_of_gourmet":"Gourmet","/items/seal_of_wisdom":"Experience","/items/seal_of_rare_find":"RareFind"},tr=[...br],_i={Gourmet:["cooking","brewing"],Gathering:["milking","foraging","woodcutting"],Processing:["milking","foraging","woodcutting"],Efficiency:tr.filter(e=>e!=="enhancing"),Speed:tr,Experience:tr,RareFind:tr,Success:["enhancing"]};At(()=>ke().gameData,()=>{ke().gameData&&(hn=Object.freeze(structuredClone(Object.values(qe(ke().gameData.itemDetailMap)))).filter(e=>{var t,r;return((t=e.equipmentDetail)==null?void 0:t.noncombatStats)&&Object.keys((r=e.equipmentDetail)==null?void 0:r.noncombatStats).length>0}),Cu=Object.freeze(structuredClone(Object.values(qe(ke().gameData.itemDetailMap)))).filter(e=>e.equipmentDetail),Au=Object.freeze(structuredClone(Object.values(qe(ke().gameData.itemDetailMap)))).filter(e=>e.categoryHrid==="/item_categories/drink"),Bu=Object.freeze(structuredClone(Object.values(qe(ke().gameData.itemDetailMap)))).filter(e=>e.hrid.startsWith("/items/seal_of_")),ls(),fs(),xu())},{immediate:!0});At(()=>Dr().config,e=>{cr=structuredClone(qe(e)),xu()},{immediate:!0});function ls(){for(const e of Object.values(br)){const t=Su(e).find(r=>r.itemLevel===80);Zt.actionConfigMap.set(e,{action:e,playerLevel:100,tool:{type:`${e}_tool`,hrid:t==null?void 0:t.hrid,enhanceLevel:10},legs:{type:"legs",hrid:void 0,enhanceLevel:void 0},body:{type:"body",hrid:void 0,enhanceLevel:void 0},back:{type:"back",hrid:void 0,enhanceLevel:void 0},charm:{type:"charm",hrid:void 0,enhanceLevel:void 0},houseLevel:4,tea:structuredClone(mu[e])})}}function fs(){const e=new Map;for(const t of Object.values(fn))Zt.specialEquimentMap.set(t.type,{type:t.type,hrid:t.hrid,enhanceLevel:t.enhanceLevel});return e}function Xn(e){return cr.actionConfigMap.get(e)??Zt.actionConfigMap.get(e)}function Su(e){return hn.filter(t=>{var r;return((r=t.equipmentDetail)==null?void 0:r.type)===`/equipment_types/${e}_tool`}).sort((t,r)=>t.itemLevel-r.itemLevel)}function Dp(){return Cu}function Rr(e,t){return hn.filter(r=>Object.keys(r.equipmentDetail.noncombatStats).find(n=>n.includes(e))).filter(r=>Gn(r)===t)}function hs(){return hn.filter(e=>fn.find(t=>t.type===Gn(e)))}function ps(e){return hs().filter(t=>Gn(t)===e)}function ds(e){return cr.specialEquimentMap.get(e)??Zt.specialEquimentMap.get(e)}function ms(e){return cr.communityBuffMap.get(e)??Zt.communityBuffMap.get(e)}function vs(e){return cr.achievementBuffMap.get(e)??Zt.achievementBuffMap.get(e)}function gs(){const e=cr.seals??Zt.seals;return Array.isArray(e)?e:[]}function Ds(e){return Au.filter(t=>{var r;return(r=t.consumableDetail)==null?void 0:r.usableInActionTypeMap[`/action_types/${e}`]}).sort((t,r)=>t.itemLevel-r.itemLevel).sort((t,r)=>Number(t.hrid.includes(e))-Number(r.hrid.includes(e)))}function Ar(e){return(Xn(e.action).tea||[]).map(t=>({hrid:t,count:3600/300/e.consumePH*(1+Es()),marketPrice:he(t).ask}))}function ys(){const e=new Set(Object.keys(Mu));return Bu.filter(t=>e.has(t.hrid)).sort((t,r)=>t.sortIndex-r.sortIndex)}function xu(){var t,r,n;if(!Ft())return;ie={};const e=Ft().enhancementLevelTotalBonusMultiplierTable;for(const i of lo){const u=ds(i);if(u&&u.hrid){const a=$t(u.hrid);(t=a.equipmentDetail)!=null&&t.noncombatStats&&Object.entries(a.equipmentDetail.noncombatStats).forEach(([o,s])=>{var l;const c=(l=a.equipmentDetail)==null?void 0:l.noncombatEnhancementBonuses[o];ie[o]=(ie[o]||0)+s+(c||0)*e[u.enhanceLevel||0]})}}for(const i of fo){const u=ms(i);if(u&&u.hrid&&u.level){const a=Rn(u.hrid),o=a.buff;for(const s in a.usableInActionTypeMap){const c=vo(s);o.typeHrid==="/buff_types/action_speed"&&(ie[`${c}Speed`]=(ie[`${c}Speed`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1))),o.typeHrid==="/buff_types/wisdom"&&(ie[`${c}Experience`]=(ie[`${c}Experience`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1))),o.typeHrid==="/buff_types/gathering"&&(ie[`${c}Gathering`]=(ie[`${c}Gathering`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1))),o.typeHrid==="/buff_types/efficiency"&&(ie[`${c}Efficiency`]=(ie[`${c}Efficiency`]||0)+(o.flatBoost+o.flatBoostLevelBonus*(u.level-1)))}}}for(const i of ho){if(i==="elite")continue;const u=vs(i);if(!(u!=null&&u.enabled))continue;const a=$n(`/achievement_tiers/${i}`);if(!a)continue;const o=a.buff,s=ws(o.typeHrid);if(!s)continue;const c=_i[s]||tr;for(const l of c){const h=`${l}${s}`;ie[h]=(ie[h]||0)+o.flatBoost+o.ratioBoost}}for(const i of br){const u=Xn(i);for(const a of Object.values(u))if(a&&typeof a=="object"&&!Array.isArray(a)&&a.hrid){const o=$t(a.hrid);(r=o.equipmentDetail)!=null&&r.noncombatStats&&Object.entries(o.equipmentDetail.noncombatStats).forEach(([s,c])=>{var h;const l=(h=o.equipmentDetail)==null?void 0:h.noncombatEnhancementBonuses[s];ie[s]=(ie[s]||0)+c+(l||0)*e[a.enhanceLevel||0]})}Object.keys(li[i]).forEach(a=>{let o=i;(a==="RareFind"||a==="Experience")&&(o="skilling"),ie[`${o}${a}`]=(ie[`${o}${a}`]||0)+(li[i][a]||0)*(u.houseLevel||0)});for(const a of u.tea||[]){const o=$t(a);(n=o.consumableDetail)!=null&&n.buffs&&o.consumableDetail.buffs.forEach(s=>{s.typeHrid===`/buff_types/${i}_level`&&(ie[`${i}Level`]=(ie[`${i}Level`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/efficiency"&&(ie[`${i}Efficiency`]=(ie[`${i}Efficiency`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/artisan"&&(ie[`${i}Artisan`]=(ie[`${i}Artisan`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/action_level"&&(ie[`${i}Level`]=(ie[`${i}Level`]||0)-s.flatBoost),s.typeHrid==="/buff_types/gourmet"&&(ie[`${i}Gourmet`]=(ie[`${i}Gourmet`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid===`/buff_types/${i}_success`&&(ie[`${i}Success`]=(ie[`${i}Success`]||0)+s.ratioBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/blessed"&&(ie[`${i}Blessed`]=(ie[`${i}Blessed`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/action_speed"&&(ie[`${i}Speed`]=(ie[`${i}Speed`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/gathering"&&(ie[`${i}Gathering`]=(ie[`${i}Gathering`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/processing"&&(ie[`${i}Processing`]=(ie[`${i}Processing`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0))),s.typeHrid==="/buff_types/wisdom"&&(ie[`${i}Experience`]=(ie[`${i}Experience`]||0)+s.flatBoost*(1+(ie.drinkConcentration||0)))})}}for(const i of gs()){const u=Mu[i],a=_s(i);if(u&&a>0){const o=_i[u]||tr;for(const s of o){const c=`${s}${u}`;ie[c]=(ie[c]||0)+a}}}}function _s(e){const t=$t(e);if(!(t!=null&&t.description))return 0;const r=t.description.match(/([+-]?\d+(?:\.\d+)?)%/);if(!(r!=null&&r[1]))return 0;const n=Number.parseFloat(r[1])/100;return Number.isFinite(n)?n:0}function ws(e){if(e==="/buff_types/action_speed")return"Speed";if(e==="/buff_types/wisdom")return"Experience";if(e==="/buff_types/gathering")return"Gathering";if(e==="/buff_types/efficiency")return"Efficiency";if(e==="/buff_types/rare_find")return"RareFind";if(e==="/buff_types/enhancing_success")return"Success"}function ot(e,t){return(ie[`${e}${t}`]||0)+(ie[`skilling${t}`]||0)}function Es(){return ie.drinkConcentration||0}function Qn(e){return Xn(e).playerLevel+ot(e,"Level")}function Fs(e){const r=Qn("alchemy");return r>=e.itemLevel?0:-.9*(1-r/e.itemLevel)}function bs(e){const t="enhancing",r=Qn(t),n=r>=e.itemLevel?(r-e.itemLevel)*5e-4:-.5*(1-r/e.itemLevel),i=ot(t,"Success");return n+i}const Cs=cu("price",{state:()=>({map:As(),activated:Ms()}),actions:{commit(){Bs(this.map),ke().clearAllCaches()},setPrice(e){var r,n;let t=this.map.get(nr(e.hrid,e.level));t||(t={hrid:e.hrid,level:e.level,ask:{manual:!1,manualPrice:void 0},bid:{manual:!1,manualPrice:void 0}},this.map.set(nr(e.hrid,e.level),t)),Object.assign(t.ask,e.ask),Object.assign(t.bid,e.bid);for(const[i,u]of this.map)!((r=u.ask)!=null&&r.manual)&&!((n=u.bid)!=null&&n.manual)&&this.map.delete(i)},deletePrice(e){this.map.delete(nr(e.hrid,e.level)),this.commit()},setActivated(e){this.activated=e,Ss(String(e)),ke().clearAllCaches()}}}),Nu="price-list";function As(){const e=new Map;try{const t=JSON.parse(localStorage.getItem(Nu)||"[]");for(const r of t)e.set(nr(r.hrid,r.level),r)}catch{}return e}function Bs(e){const t=Array.from(e.values());localStorage.setItem(Nu,JSON.stringify(t))}const Tu="price-activated";function Ms(){return localStorage.getItem(Tu)==="true"}function Ss(e){localStorage.setItem(Tu,e)}function nr(e,t){return t?`${e}-${t}`:e}function bt(){return Cs(su)}async function yp(e){await new Promise(r=>setTimeout(r,0));let t=structuredClone(Array.from(qe(bt().map).values()));return e.name&&(t=t.filter(r=>sr($t(r.hrid).name).toLocaleLowerCase().includes(e.name.toLowerCase()))),{list:t.slice((e.currentPage-1)*e.size,e.currentPage*e.size),total:t.length}}function _p(e,t,r){wi(e,t,"ingredient"),wi(e,r,"product"),bt().commit()}function wi(e,t,r){for(let n=0;n<t.length;n++){const i=e[`${r}ListWithPrice`][n].hrid,u=e[`${r}ListWithPrice`][n].level,a=xs(i,u),o=!!t[n].manual;(o||a)&&bt().setPrice({hrid:i,level:u,[r==="ingredient"?"ask":"bid"]:{manual:o,manualPrice:t[n].price}})}}function wp(e){bt().setPrice(e),bt().commit()}const Br=structuredClone(qe(bt().$state));At(()=>bt().map,()=>{Br.map=Object.freeze(structuredClone(qe(bt().map)))},{deep:!0});At(()=>bt().activated,()=>{Br.activated=bt().activated});function Gr(e,t){return Ns()?Br.map.get(nr(e,t)):null}function xs(e,t){return Br.map.has(nr(e,t))}function Ns(){return Br.activated}function Ep(e,t,r){var u,a,o,s;const n=(a=(u=Gr(e,t))==null?void 0:u[r])==null?void 0:a.manual,i=(s=(o=Gr(e,t))==null?void 0:o[r])==null?void 0:s.manualPrice;return n?i:he(e,t)[r]}class ei{constructor(t){fe(this,"hrid");fe(this,"project");fe(this,"action");fe(this,"ingredientPriceConfigList");fe(this,"productPriceConfigList");fe(this,"catalystRank");fe(this,"result");fe(this,"favorite");fe(this,"hasManualPrice",!1);fe(this,"config");fe(this,"enhanceLevel",0);fe(this,"sellTaxFactor",.98);fe(this,"_item");fe(this,"_key");fe(this,"_ingredientListWithPrice");fe(this,"_productListWithPrice");fe(this,"_actionsPH");fe(this,"_consumePH");fe(this,"_gainPH");const{hrid:r,project:n,action:i,ingredientPriceConfigList:u=[],productPriceConfigList:a=[],catalystRank:o}=t;this.config=t,this.hrid=r,this.project=n,this.action=i,this.ingredientPriceConfigList=u,this.productPriceConfigList=a,this.catalystRank=o,typeof t.sellTaxFactor=="number"&&(this.sellTaxFactor=t.sellTaxFactor)}setSellTaxFactor(t){return this.sellTaxFactor=t,this}get item(){return this._item||(this._item=$t(this.hrid)),this._item}get id(){return`${this.hrid}-${this.project}-${this.action}`}get key(){return this._key||(this._key=this.item.hrid.substring(this.item.hrid.lastIndexOf("/")+1)),this._key}get efficiency(){return 1+Math.max(0,(this.playerLevel-this.actionLevel)*.01)+ot(this.action,"Efficiency")}get speed(){return 1+ot(this.action,"Speed")}get isEquipment(){return this.item.categoryHrid==="/item_categories/equipment"}handlePrice(t,r,n){var u,a,o,s;const i=[];for(let c=0;c<t.length;c++){const l=t[c],h=r[c],p=(a=(u=Gr(l.hrid,l.level))==null?void 0:u[n])==null?void 0:a.manual,d=(s=(o=Gr(l.hrid,l.level))==null?void 0:o[n])==null?void 0:s.manualPrice;!(h!=null&&h.immutable)&&p&&(this.hasManualPrice=!0);const v=h!=null&&h.immutable?h.price:p?d:l.marketPrice;i.push(Object.assign(l,{price:v}))}return i}get ingredientListWithPrice(){if(!this._ingredientListWithPrice){const t=this.ingredientList.map(r=>({...r,countPH:r.count*this.consumePH,counterCountPH:r.counterCount?r.counterCount*this.consumePH:void 0}));this._ingredientListWithPrice=this.handlePrice(t,this.ingredientPriceConfigList,"ask")}return this._ingredientListWithPrice}get productListWithPrice(){if(!this._productListWithPrice){const t=this.productList.map(r=>({...r,countPH:r.count*this.gainPH*(r.rate||1),counterCountPH:r.counterCount?r.counterCount*this.gainPH*(r.rate||1):void 0}));this._productListWithPrice=this.handlePrice(t,this.productPriceConfigList,"bid")}return this._productListWithPrice}get cost(){return this.ingredientListWithPrice.reduce((t,r)=>t+r.count*r.price,0)}get cost4Mat(){return this.ingredientListWithPrice.slice(1).reduce((t,r)=>t+r.count*r.price,0)}get gainEscapePH(){const t=this.ingredientListWithPrice[0],r=this.productListWithPrice[1];return t?!r||r.hrid!==t.hrid?t.countPH*t.price:t.countPH*r.price*this.sellTaxFactor:0}get income(){return this.productListWithPrice.reduce((r,n)=>{const i=n.hrid===Fr?this.sellTaxFactor:1;return r+n.count*(n.rate||1)*n.price/i},0)*this.sellTaxFactor}get actionsPH(){return this._actionsPH===void 0&&(this._actionsPH=60*60*1e9/this.timeCost*this.efficiency),this._actionsPH}get consumePH(){return this._consumePH===void 0&&(this._consumePH=this.actionsPH),this._consumePH}get gainPH(){return this._gainPH===void 0&&(this._gainPH=this.actionsPH*this.successRate),this._gainPH}get valid(){for(const t of this.ingredientListWithPrice)if(t.price===-1)return!1;return!0}get actionItem(){}get calculator(){return this}get exp(){var t,r;return(((r=(t=this.actionItem)==null?void 0:t.experienceGain)==null?void 0:r.value)||0)*(1+ot(this.action,"Experience"))}run(){const t=this.exp*this.actionsPH,r=this.cost*this.consumePH,n=this.cost4Mat*this.consumePH,i=this.income*this.gainPH;let u=i-r;const a=u/this.actionsPH;let o=r?u/r:0;this.valid||(u=-1/24,o=-1);const s=r-this.gainEscapePH,c=s/u;return this.result={hrid:this.item.hrid,name:sr(this.item.name),project:this.project,successRate:this.successRate,costPH:r,cost4MatPH:n,consumePH:this.consumePH,gainPH:this.gainPH,incomePH:i,profitPH:u,profitRate:o,costPHFormat:It(r),cost4MatPHFormat:It(n),incomePHFormat:It(i),profitPHFormat:It(u),profitPDFormat:It(u*24),profitPP:a,profitPPFormat:It(a),profitRateFormat:er(o),efficiencyFormat:er(this.efficiency-1),speedFormat:er(this.speed-1),timeCostFormat:zo(this.timeCost),successRateFormat:er(this.successRate),expPH:t,expPHFormat:It(t),cost4EnhancePHFormat:It(s),risk:c,riskFormat:Wr(c,2)},this}get playerLevel(){return Qn(this.action)}get essenceRatio(){return ot(this.action,"EssenceFind")||0}get rareRatio(){return ot(this.action,"RareFind")||0}get successRate(){return 1}}class ti extends ei{get actionLevel(){return this.item.itemLevel}constructor(t){super({...t,action:"alchemy"})}get catalystRatio(){let t=ot(this.action,"Success")||0;return t+=this.catalystRank?this.catalystRank*.1+.05:0,t}get successRate(){return Math.min(1,this.baseSuccessRate*(1+Fs(this.item)+this.catalystRatio))}get exp(){return this.baseExp*(1+ot(this.action,"Experience"))}}class Fp extends ti{constructor(r){super({...r,project:sr("转化")});fe(this,"_ingredientList");fe(this,"_productList")}get className(){return"TransmuteCalculator"}get catalyst(){if(this.catalystRank===1)return"catalyst_of_transmutation";if(this.catalystRank===2)return"prime_catalyst"}get available(){var r;return((r=this.item.alchemyDetail)==null?void 0:r.transmuteDropTable)!=null}get timeCost(){return Cn()/this.speed}get baseSuccessRate(){return this.item.alchemyDetail.transmuteSuccessRate}get baseExp(){return ts(this.item)}get ingredientList(){if(!this._ingredientList){let r=[{hrid:this.item.hrid,count:this.item.alchemyDetail.bulkMultiplier*(1-this.sameItemCounter),counterCount:this.item.alchemyDetail.bulkMultiplier*this.sameItemCounter,marketPrice:he(this.item.hrid).ask},{hrid:Fr,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:Math.max(Math.floor(this.item.sellPrice/5),50)}];this.catalyst&&r.push({hrid:`/items/${this.catalyst}`,count:this.successRate,marketPrice:he(`/items/${this.catalyst}`).ask}),r=r.concat(Ar(this)),this._ingredientList=r}return this._ingredientList}get productList(){if(!this._productList){const r=this.item.alchemyDetail.transmuteDropTable;this._productList=r.map(n=>({hrid:n.itemHrid,count:(n.maxCount-(n.itemHrid===this.item.hrid?n.maxCount:0))*this.item.alchemyDetail.bulkMultiplier,counterCount:(n.itemHrid===this.item.hrid?n.maxCount:0)*this.item.alchemyDetail.bulkMultiplier,rate:n.dropRate,marketPrice:he(n.itemHrid).bid})).concat(Yn(this.item,Cn()).map(n=>({hrid:n.itemHrid,count:(n.minCount+n.maxCount)/2/this.successRate,counterCount:0,rate:n.dropRate*(1+this.rareRatio),marketPrice:he(n.itemHrid).bid}))).concat(Kn(this.item,Cn()).map(n=>({hrid:n.itemHrid,count:(n.minCount+n.maxCount)/2/this.successRate,counterCount:0,rate:n.dropRate*(1+this.essenceRatio),marketPrice:he(n.itemHrid).bid})))}return this._productList}get sameItemCounter(){const r=this.item.alchemyDetail.transmuteDropTable.find(n=>n.itemHrid===this.item.hrid);return r?Math.min(1,r.maxCount*(r.dropRate||1)*this.successRate):0}}class Ts extends ti{constructor(r){super({...r,project:sr("分解")});fe(this,"enhanceLevel");fe(this,"_ingredientList");fe(this,"_productList");this.enhanceLevel=r.enhanceLevel||0}get className(){return"DecomposeCalculator"}get catalyst(){if(this.catalystRank===1)return"catalyst_of_decomposition";if(this.catalystRank===2)return"prime_catalyst"}get available(){var r;return((r=this.item.alchemyDetail)==null?void 0:r.decomposeItems)!=null}get timeCost(){return An()/this.speed}get baseSuccessRate(){return .6}get baseExp(){return es(this.item)}get ingredientList(){if(!this._ingredientList){let r=[{hrid:this.item.hrid,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:he(this.item.hrid,this.enhanceLevel).ask,level:this.enhanceLevel},{hrid:Fr,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:50+5*this.item.itemLevel}];this.catalyst&&r.push({hrid:`/items/${this.catalyst}`,count:this.successRate,marketPrice:he(`/items/${this.catalyst}`).ask}),r=r.concat(Ar(this)),this._ingredientList=r}return this._ingredientList}get productList(){if(!this._productList){let r=[];this.enhanceLevel>0&&r.push({hrid:"/items/enhancing_essence",count:Jo(this.item,this.enhanceLevel),marketPrice:he("/items/enhancing_essence").bid}),r=r.concat(this.item.alchemyDetail.decomposeItems.map(n=>({hrid:n.itemHrid,count:n.count*this.item.alchemyDetail.bulkMultiplier,marketPrice:he(n.itemHrid).bid}))).concat(Yn(this.item,An()).map(n=>({hrid:n.itemHrid,rate:n.dropRate*(1+this.rareRatio),count:(n.minCount+n.maxCount)/2/this.successRate,marketPrice:he(n.itemHrid).bid}))).concat(Kn(this.item,An()).map(n=>({hrid:n.itemHrid,count:(n.minCount+n.maxCount)/2/this.successRate,rate:n.dropRate*(1+this.essenceRatio),marketPrice:he(n.itemHrid).bid}))),this._productList=r}return this._productList}}class bp extends ti{constructor(r){super({...r,project:sr("点金")});fe(this,"_ingredientList");fe(this,"_productList")}get className(){return"CoinifyCalculator"}get catalyst(){if(this.catalystRank===1)return"catalyst_of_coinification";if(this.catalystRank===2)return"prime_catalyst"}get available(){var r;return(r=this.item.alchemyDetail)==null?void 0:r.isCoinifiable}get timeCost(){return Bn()/this.speed}get baseSuccessRate(){return .7}get baseExp(){return Qo(this.item)}get ingredientList(){if(!this._ingredientList){let r=[{hrid:this.item.hrid,count:this.item.alchemyDetail.bulkMultiplier,marketPrice:he(this.item.hrid).ask}];this.catalyst&&r.push({hrid:`/items/${this.catalyst}`,count:this.successRate,marketPrice:he(`/items/${this.catalyst}`).ask}),r=r.concat(Ar(this)),this._ingredientList=r}return this._ingredientList}get productList(){return this._productList||(this._productList=[{hrid:Fr,count:1,marketPrice:this.item.sellPrice*5*this.item.alchemyDetail.bulkMultiplier}].concat(Yn(this.item,Bn()).map(r=>({hrid:r.itemHrid,count:(r.minCount+r.maxCount)/2/this.successRate,rate:r.dropRate*(1+this.rareRatio),marketPrice:he(r.itemHrid).bid}))).concat(Kn(this.item,Bn()).map(r=>({hrid:r.itemHrid,count:(r.minCount+r.maxCount)/2/this.successRate,rate:r.dropRate*(1+this.essenceRatio),marketPrice:he(r.itemHrid).bid})))),this._productList}}function Jr(){return Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jr.apply(null,arguments)}var Lu={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Iu(e,t){if(Yr(e,t))return e[t];throw typeof e[t]=="function"&&Ls(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Pu(e,t,r){if(Yr(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Yr(e,t){return!Is(e)&&!Array.isArray(e)?!1:yr(Ps,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Ls(e,t){return e==null||typeof e[t]!="function"||yr(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:yr(Os,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Is(e){return typeof e=="object"&&e&&e.constructor===Object}var Ps={length:!0,name:!0},Os={toString:!0,valueOf:!0,toLocaleString:!0};class Rs{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return Iu(this.wrappedObject,t)}set(t,r){return Pu(this.wrappedObject,t,r),this}has(t){return Yr(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return $s(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var r of this.keys())t(this.get(r),r,this)}delete(t){Yr(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function $s(e,t){return{next:()=>{var r=e.next();return r.done?r:{value:t(r.value),done:!1}}}}function Ne(e){return typeof e=="number"}function Te(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function zs(e){return typeof e=="bigint"}function Ou(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Ru(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function $u(e){return e&&e.constructor.prototype.isUnit===!0||!1}function dt(e){return typeof e=="string"}var Se=Array.isArray;function Ie(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Kr(e){return Array.isArray(e)||Ie(e)}function qs(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function ks(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function zu(e){return e&&e.constructor.prototype.isRange===!0||!1}function pn(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Us(e){return typeof e=="boolean"}function Hs(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Vs(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Zs(e){return typeof e=="function"}function Ws(e){return e instanceof Date}function js(e){return e instanceof RegExp}function ri(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Ou(e)&&!Ru(e))}function Gs(e){return e?e instanceof Map||e instanceof Rs||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function Js(e){return e===null}function Ys(e){return e===void 0}function Ks(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Xs(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function Qs(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function ec(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function tc(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function rc(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function nc(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function ic(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function uc(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function ac(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function oc(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function sc(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function cc(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function lc(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function fc(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function hc(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function pc(e){return e&&e.constructor.prototype.isChain===!0||!1}function Et(e){var t=typeof e;return t==="object"?e===null?"null":Te(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function xe(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return xe(r)});if(e instanceof Date)return new Date(e.valueOf());if(Te(e))return e;if(ri(e))return dc(e,xe);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function dc(e,t){var r={};for(var n in e)yr(e,n)&&(r[n]=t(e[n]));return r}function mc(e,t){for(var r in t)yr(t,r)&&(e[r]=t[r]);return e}function zt(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;n++)if(!zt(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!zt(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function yr(e,t){return e&&Object.hasOwnProperty.call(e,t)}function vc(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],u=e[i];u!==void 0&&(r[i]=u)}return r}var gc=["Matrix","Array"],Dc=["number","BigNumber","Fraction"],ct=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Lu)};Jr(ct,Lu,{MATRIX_OPTIONS:gc,NUMBER_OPTIONS:Dc});function Ei(){return!0}function ft(){return!1}function Kt(){}const Fi="Argument is not a typed-function.";function qu(){function e(w){return typeof w=="object"&&w!==null&&w.constructor===Object}const t=[{name:"number",test:function(w){return typeof w=="number"}},{name:"string",test:function(w){return typeof w=="string"}},{name:"boolean",test:function(w){return typeof w=="boolean"}},{name:"Function",test:function(w){return typeof w=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(w){return w instanceof Date}},{name:"RegExp",test:function(w){return w instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(w){return w===null}},{name:"undefined",test:function(w){return w===void 0}}],r={name:"any",test:Ei,isAny:!0};let n,i,u=0,a={createCount:0};function o(w){const C=n.get(w);if(C)return C;let M='Unknown type "'+w+'"';const R=w.toLowerCase();let U;for(U of i)if(U.toLowerCase()===R){M+='. Did you mean "'+U+'" ?';break}throw new TypeError(M)}function s(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const M=C?o(C).index:i.length,R=[];for(let z=0;z<w.length;++z){if(!w[z]||typeof w[z].name!="string"||typeof w[z].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const j=w[z].name;if(n.has(j))throw new TypeError('Duplicate type name "'+j+'"');R.push(j),n.set(j,{name:j,test:w[z].test,isAny:w[z].isAny,index:M+z,conversionsTo:[]})}const U=i.slice(M);i=i.slice(0,M).concat(R).concat(U);for(let z=M+R.length;z<i.length;++z)n.get(i[z]).index=z}function c(){n=new Map,i=[],u=0,s([r],!1)}c(),s(t);function l(){let w;for(w of i)n.get(w).conversionsTo=[];u=0}function h(w){const C=i.filter(M=>{const R=n.get(M);return!R.isAny&&R.test(w)});return C.length?C:["any"]}function p(w){return w&&typeof w=="function"&&"_typedFunctionData"in w}function d(w,C,M){if(!p(w))throw new TypeError(Fi);const R=M&&M.exact,U=Array.isArray(C)?C.join(","):C,z=F(U),j=m(z);if(!R||j in w.signatures){const Fe=w._typedFunctionData.signatureMap.get(j);if(Fe)return Fe}const V=z.length;let G;if(R){G=[];let Fe;for(Fe in w.signatures)G.push(w._typedFunctionData.signatureMap.get(Fe))}else G=w._typedFunctionData.signatures;for(let Fe=0;Fe<V;++Fe){const Be=z[Fe],$e=[];let nt;for(nt of G){const et=b(nt.params,Fe);if(!(!et||Be.restParam&&!et.restParam)){if(!et.hasAny){const vt=D(et);if(Be.types.some(gt=>!vt.has(gt.name)))continue}$e.push(nt)}}if(G=$e,G.length===0)break}let H;for(H of G)if(H.params.length<=V)return H;throw new TypeError("Signature not found (signature: "+(w.name||"unnamed")+"("+m(z,", ")+"))")}function v(w,C,M){return d(w,C,M).implementation}function f(w,C){const M=o(C);if(M.test(w))return w;const R=M.conversionsTo;if(R.length===0)throw new Error("There are no conversions to "+C+" defined.");for(let U=0;U<R.length;U++)if(o(R[U].from).test(w))return R[U].convert(w);throw new Error("Cannot convert "+w+" to "+C)}function m(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return w.map(M=>M.name).join(C)}function g(w){const C=w.indexOf("...")===0,R=(C?w.length>3?w.slice(3):"any":w).split("|").map(V=>o(V.trim()));let U=!1,z=C?"...":"";return{types:R.map(function(V){return U=V.isAny||U,z+=V.name+"|",{name:V.name,typeIndex:V.index,test:V.test,isAny:V.isAny,conversion:null,conversionIndex:-1}}),name:z.slice(0,-1),hasAny:U,hasConversion:!1,restParam:C}}function E(w){const C=w.types.map(j=>j.name),M=Q(C);let R=w.hasAny,U=w.name;const z=M.map(function(j){const V=o(j.from);return R=V.isAny||R,U+="|"+j.from,{name:j.from,typeIndex:V.index,test:V.test,isAny:V.isAny,conversion:j,conversionIndex:j.index}});return{types:w.types.concat(z),name:U,hasAny:R,hasConversion:z.length>0,restParam:w.restParam}}function D(w){return w.typeSet||(w.typeSet=new Set,w.types.forEach(C=>w.typeSet.add(C.name))),w.typeSet}function F(w){const C=[];if(typeof w!="string")throw new TypeError("Signatures must be strings");const M=w.trim();if(M==="")return C;const R=M.split(",");for(let U=0;U<R.length;++U){const z=g(R[U].trim());if(z.restParam&&U!==R.length-1)throw new SyntaxError('Unexpected rest parameter "'+R[U]+'": only allowed for the last parameter');if(z.types.length===0)return null;C.push(z)}return C}function _(w){const C=ye(w);return C?C.restParam:!1}function y(w){if(!w||w.types.length===0)return Ei;if(w.types.length===1)return o(w.types[0].name).test;if(w.types.length===2){const C=o(w.types[0].name).test,M=o(w.types[1].name).test;return function(U){return C(U)||M(U)}}else{const C=w.types.map(function(M){return o(M.name).test});return function(R){for(let U=0;U<C.length;U++)if(C[U](R))return!0;return!1}}}function A(w){let C,M,R;if(_(w)){C=Ve(w).map(y);const U=C.length,z=y(ye(w)),j=function(V){for(let G=U;G<V.length;G++)if(!z(V[G]))return!1;return!0};return function(G){for(let H=0;H<C.length;H++)if(!C[H](G[H]))return!1;return j(G)&&G.length>=U+1}}else return w.length===0?function(z){return z.length===0}:w.length===1?(M=y(w[0]),function(z){return M(z[0])&&z.length===1}):w.length===2?(M=y(w[0]),R=y(w[1]),function(z){return M(z[0])&&R(z[1])&&z.length===2}):(C=w.map(y),function(z){for(let j=0;j<C.length;j++)if(!C[j](z[j]))return!1;return z.length===C.length})}function b(w,C){return C<w.length?w[C]:_(w)?ye(w):null}function B(w,C){const M=b(w,C);return M?D(M):new Set}function S(w){return w.conversion===null||w.conversion===void 0}function L(w,C){const M=new Set;return w.forEach(R=>{const U=B(R.params,C);let z;for(z of U)M.add(z)}),M.has("any")?["any"]:Array.from(M)}function x(w,C,M){let R,U;const z=w||"unnamed";let j=M,V;for(V=0;V<C.length;V++){const Be=[];if(j.forEach($e=>{const nt=b($e.params,V),et=y(nt);(V<$e.params.length||_($e.params))&&et(C[V])&&Be.push($e)}),Be.length===0){if(U=L(j,V),U.length>0){const $e=h(C[V]);return R=new TypeError("Unexpected type of argument in function "+z+" (expected: "+U.join(" or ")+", actual: "+$e.join(" | ")+", index: "+V+")"),R.data={category:"wrongType",fn:z,index:V,actual:$e,expected:U},R}}else j=Be}const G=j.map(function(Be){return _(Be.params)?1/0:Be.params.length});if(C.length<Math.min.apply(null,G))return U=L(j,V),R=new TypeError("Too few arguments in function "+z+" (expected: "+U.join(" or ")+", index: "+C.length+")"),R.data={category:"tooFewArgs",fn:z,index:C.length,expected:U},R;const H=Math.max.apply(null,G);if(C.length>H)return R=new TypeError("Too many arguments in function "+z+" (expected: "+H+", actual: "+C.length+")"),R.data={category:"tooManyArgs",fn:z,index:C.length,expectedLength:H},R;const Fe=[];for(let Be=0;Be<C.length;++Be)Fe.push(h(C[Be]).join("|"));return R=new TypeError('Arguments of type "'+Fe.join(", ")+'" do not match any of the defined signatures of function '+z+"."),R.data={category:"mismatch",actual:Fe},R}function Y(w){let C=i.length+1;for(let M=0;M<w.types.length;M++)S(w.types[M])&&(C=Math.min(C,w.types[M].typeIndex));return C}function k(w){let C=u+1;for(let M=0;M<w.types.length;M++)S(w.types[M])||(C=Math.min(C,w.types[M].conversionIndex));return C}function Z(w,C){if(w.hasAny){if(!C.hasAny)return 1}else if(C.hasAny)return-1;if(w.restParam){if(!C.restParam)return 1}else if(C.restParam)return-1;if(w.hasConversion){if(!C.hasConversion)return 1}else if(C.hasConversion)return-1;const M=Y(w)-Y(C);if(M<0)return-1;if(M>0)return 1;const R=k(w)-k(C);return R<0?-1:R>0?1:0}function T(w,C){const M=w.params,R=C.params,U=ye(M),z=ye(R),j=_(M),V=_(R);if(j&&U.hasAny){if(!V||!z.hasAny)return 1}else if(V&&z.hasAny)return-1;let G=0,H=0,Fe;for(Fe of M)Fe.hasAny&&++G,Fe.hasConversion&&++H;let Be=0,$e=0;for(Fe of R)Fe.hasAny&&++Be,Fe.hasConversion&&++$e;if(G!==Be)return G-Be;if(j&&U.hasConversion){if(!V||!z.hasConversion)return 1}else if(V&&z.hasConversion)return-1;if(H!==$e)return H-$e;if(j){if(!V)return 1}else if(V)return-1;const nt=(M.length-R.length)*(j?-1:1);if(nt!==0)return nt;const et=[];let vt=0;for(let Yt=0;Yt<M.length;++Yt){const Lr=Z(M[Yt],R[Yt]);et.push(Lr),vt+=Lr}if(vt!==0)return vt;let gt;for(gt of et)if(gt!==0)return gt;return 0}function Q(w){if(w.length===0)return[];const C=w.map(o);w.length>1&&C.sort((U,z)=>U.index-z.index);let M=C[0].conversionsTo;if(w.length===1)return M;M=M.concat([]);const R=new Set(w);for(let U=1;U<C.length;++U){let z;for(z of C[U].conversionsTo)R.has(z.from)||(M.push(z),R.add(z.from))}return M}function I(w,C){let M=C;if(w.some(U=>U.hasConversion)){const U=_(w),z=w.map(P);M=function(){const V=[],G=U?arguments.length-1:arguments.length;for(let H=0;H<G;H++)V[H]=z[H](arguments[H]);return U&&(V[G]=arguments[G].map(z[G])),C.apply(this,V)}}let R=M;if(_(w)){const U=w.length-1;R=function(){return M.apply(this,ge(arguments,0,U).concat([ge(arguments,U)]))}}return R}function P(w){let C,M,R,U;const z=[],j=[];switch(w.types.forEach(function(V){V.conversion&&(z.push(o(V.conversion.from).test),j.push(V.conversion.convert))}),j.length){case 0:return function(G){return G};case 1:return C=z[0],R=j[0],function(G){return C(G)?R(G):G};case 2:return C=z[0],M=z[1],R=j[0],U=j[1],function(G){return C(G)?R(G):M(G)?U(G):G};default:return function(G){for(let H=0;H<j.length;H++)if(z[H](G))return j[H](G);return G}}}function J(w){function C(M,R,U){if(R<M.length){const z=M[R];let j=[];if(z.restParam){const V=z.types.filter(S);V.length<z.types.length&&j.push({types:V,name:"..."+V.map(G=>G.name).join("|"),hasAny:V.some(G=>G.isAny),hasConversion:!1,restParam:!0}),j.push(z)}else j=z.types.map(function(V){return{types:[V],name:V.name,hasAny:V.isAny,hasConversion:V.conversion,restParam:!1}});return Ue(j,function(V){return C(M,R+1,U.concat([V]))})}else return[U]}return C(w,0,[])}function oe(w,C){const M=Math.max(w.length,C.length);for(let V=0;V<M;V++){const G=B(w,V),H=B(C,V);let Fe=!1,Be;for(Be of H)if(G.has(Be)){Fe=!0;break}if(!Fe)return!1}const R=w.length,U=C.length,z=_(w),j=_(C);return z?j?R===U:U>=R:j?R>=U:R===U}function ae(w){return w.map(C=>St(C)?Pe(C.referToSelf.callback):mt(C)?$(C.referTo.references,C.referTo.callback):C)}function se(w,C,M){const R=[];let U;for(U of w){let z=M[U];if(typeof z!="number")throw new TypeError('No definition for referenced signature "'+U+'"');if(z=C[z],typeof z!="function")return!1;R.push(z)}return R}function ve(w,C,M){const R=ae(w),U=new Array(R.length).fill(!1);let z=!0;for(;z;){z=!1;let j=!0;for(let V=0;V<R.length;++V){if(U[V])continue;const G=R[V];if(St(G))R[V]=G.referToSelf.callback(M),R[V].referToSelf=G.referToSelf,U[V]=!0,j=!1;else if(mt(G)){const H=se(G.referTo.references,R,C);H?(R[V]=G.referTo.callback.apply(this,H),R[V].referTo=G.referTo,U[V]=!0,j=!1):z=!0}}if(j&&z)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return R}function De(w){const C=/\bthis(\(|\.signatures\b)/;Object.keys(w).forEach(M=>{const R=w[M];if(C.test(R.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ae(w,C){if(a.createCount++,Object.keys(C).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&De(C);const M=[],R=[],U={},z=[];let j;for(j in C){if(!Object.prototype.hasOwnProperty.call(C,j))continue;const we=F(j);if(!we)continue;M.forEach(function(dr){if(oe(dr,we))throw new TypeError('Conflicting signatures "'+m(dr)+'" and "'+m(we)+'".')}),M.push(we);const it=R.length;R.push(C[j]);const ao=we.map(E);let Ir;for(Ir of J(ao)){const dr=m(Ir);z.push({params:Ir,name:dr,fn:it}),Ir.every(oo=>!oo.hasConversion)&&(U[dr]=it)}}z.sort(T);const V=ve(R,U,pr);let G;for(G in U)Object.prototype.hasOwnProperty.call(U,G)&&(U[G]=V[U[G]]);const H=[],Fe=new Map;for(G of z)Fe.has(G.name)||(G.fn=V[G.fn],H.push(G),Fe.set(G.name,G));const Be=H[0]&&H[0].params.length<=2&&!_(H[0].params),$e=H[1]&&H[1].params.length<=2&&!_(H[1].params),nt=H[2]&&H[2].params.length<=2&&!_(H[2].params),et=H[3]&&H[3].params.length<=2&&!_(H[3].params),vt=H[4]&&H[4].params.length<=2&&!_(H[4].params),gt=H[5]&&H[5].params.length<=2&&!_(H[5].params),Yt=Be&&$e&&nt&&et&&vt&&gt;for(let we=0;we<H.length;++we)H[we].test=A(H[we].params);const Lr=Be?y(H[0].params[0]):ft,Ta=$e?y(H[1].params[0]):ft,La=nt?y(H[2].params[0]):ft,Ia=et?y(H[3].params[0]):ft,Pa=vt?y(H[4].params[0]):ft,Oa=gt?y(H[5].params[0]):ft,Ra=Be?y(H[0].params[1]):ft,$a=$e?y(H[1].params[1]):ft,za=nt?y(H[2].params[1]):ft,qa=et?y(H[3].params[1]):ft,ka=vt?y(H[4].params[1]):ft,Ua=gt?y(H[5].params[1]):ft;for(let we=0;we<H.length;++we)H[we].implementation=I(H[we].params,H[we].fn);const Ha=Be?H[0].implementation:Kt,Va=$e?H[1].implementation:Kt,Za=nt?H[2].implementation:Kt,Wa=et?H[3].implementation:Kt,ja=vt?H[4].implementation:Kt,Ga=gt?H[5].implementation:Kt,Ja=Be?H[0].params.length:-1,Ya=$e?H[1].params.length:-1,Ka=nt?H[2].params.length:-1,Xa=et?H[3].params.length:-1,Qa=vt?H[4].params.length:-1,eo=gt?H[5].params.length:-1,to=Yt?6:0,ro=H.length,no=H.map(we=>we.test),io=H.map(we=>we.implementation),uo=function(){for(let it=to;it<ro;it++)if(no[it](arguments))return io[it].apply(this,arguments);return a.onMismatch(w,arguments,H)};function pr(we,it){return arguments.length===Ja&&Lr(we)&&Ra(it)?Ha.apply(this,arguments):arguments.length===Ya&&Ta(we)&&$a(it)?Va.apply(this,arguments):arguments.length===Ka&&La(we)&&za(it)?Za.apply(this,arguments):arguments.length===Xa&&Ia(we)&&qa(it)?Wa.apply(this,arguments):arguments.length===Qa&&Pa(we)&&ka(it)?ja.apply(this,arguments):arguments.length===eo&&Oa(we)&&Ua(it)?Ga.apply(this,arguments):uo.apply(this,arguments)}try{Object.defineProperty(pr,"name",{value:w})}catch{}return pr.signatures=U,pr._typedFunctionData={signatures:H,signatureMap:Fe},pr}function be(w,C,M){throw x(w,C,M)}function Ve(w){return ge(w,0,w.length-1)}function ye(w){return w[w.length-1]}function ge(w,C,M){return Array.prototype.slice.call(w,C,M)}function Qe(w,C){for(let M=0;M<w.length;M++)if(C(w[M]))return w[M]}function Ue(w,C){return Array.prototype.concat.apply([],w.map(C))}function O(){const w=Ve(arguments).map(M=>m(F(M))),C=ye(arguments);if(typeof C!="function")throw new TypeError("Callback function expected as last argument");return $(w,C)}function $(w,C){return{referTo:{references:w,callback:C}}}function Pe(w){if(typeof w!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:w}}}function mt(w){return w&&typeof w.referTo=="object"&&Array.isArray(w.referTo.references)&&typeof w.referTo.callback=="function"}function St(w){return w&&typeof w.referToSelf=="object"&&typeof w.referToSelf.callback=="function"}function Gt(w,C){if(!w)return C;if(C&&C!==w){const M=new Error("Function names do not match (expected: "+w+", actual: "+C+")");throw M.data={actual:C,expected:w},M}return w}function Jt(w){let C;for(const M in w)Object.prototype.hasOwnProperty.call(w,M)&&(p(w[M])||typeof w[M].signature=="string")&&(C=Gt(C,w[M].name));return C}function Fn(w,C){let M;for(M in C)if(Object.prototype.hasOwnProperty.call(C,M)){if(M in w&&C[M]!==w[M]){const R=new Error('Signature "'+M+'" is defined twice');throw R.data={signature:M,sourceFunction:C[M],destFunction:w[M]},R}w[M]=C[M]}}const Na=a;a=function(w){const C=typeof w=="string",M=C?1:0;let R=C?w:"";const U={};for(let z=M;z<arguments.length;++z){const j=arguments[z];let V={},G;if(typeof j=="function"?(G=j.name,typeof j.signature=="string"?V[j.signature]=j:p(j)&&(V=j.signatures)):e(j)&&(V=j,C||(G=Jt(j))),Object.keys(V).length===0){const H=new TypeError("Argument to 'typed' at index "+z+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw H.data={index:z,argument:j},H}C||(R=Gt(R,G)),Fn(U,V)}return Ae(R||"",U)},a.create=qu,a.createCount=Na.createCount,a.onMismatch=be,a.throwMismatchError=be,a.createError=x,a.clear=c,a.clearConversions=l,a.addTypes=s,a._findType=o,a.referTo=O,a.referToSelf=Pe,a.convert=f,a.findSignature=d,a.find=v,a.isTypedFunction=p,a.warnAgainstDeprecatedThis=!0,a.addType=function(w,C){let M="any";C!==!1&&n.has("Object")&&(M="Object"),a.addTypes([w],M)};function ci(w){if(!w||typeof w.from!="string"||typeof w.to!="string"||typeof w.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(w.to===w.from)throw new SyntaxError('Illegal to define conversion from "'+w.from+'" to itself.')}return a.addConversion=function(w){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ci(w);const M=o(w.to),R=M.conversionsTo.find(U=>U.from===w.from);if(R)if(C&&C.override)a.removeConversion({from:R.from,to:w.to,convert:R.convert});else throw new Error('There is already a conversion from "'+w.from+'" to "'+M.name+'"');M.conversionsTo.push({from:w.from,convert:w.convert,index:u++})},a.addConversions=function(w,C){w.forEach(M=>a.addConversion(M,C))},a.removeConversion=function(w){ci(w);const C=o(w.to),M=Qe(C.conversionsTo,U=>U.from===w.from);if(!M)throw new Error("Attempt to remove nonexistent conversion from "+w.from+" to "+w.to);if(M.convert!==w.convert)throw new Error("Conversion to remove does not match existing conversion");const R=C.conversionsTo.indexOf(M);C.conversionsTo.splice(R,1)},a.resolve=function(w,C){if(!p(w))throw new TypeError(Fi);const M=w._typedFunctionData.signatures;for(let R=0;R<M.length;++R)if(M[R].test(C))return M[R];return null},a}const Xr=qu();function ee(e,t,r,n){function i(u){var a=vc(u,t.map(wc));return yc(e,t,u),r(a)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),n&&(i.meta=n),i}function yc(e,t,r){var n=t.filter(u=>!_c(u)).every(u=>r[u]!==void 0);if(!n){var i=t.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function _c(e){return e&&e[0]==="?"}function wc(e){return e&&e[0]==="?"?e.slice(1):e}function Oe(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function Sn(e,t,r){var n={2:"0b",8:"0o",16:"0x"},i=n[t],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Oe(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Oe(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),u="i".concat(r)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(i).concat(e.toString(t)).concat(u)}function qn(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:r,precision:n,wordSize:i}=ku(t);switch(r){case"fixed":return Fc(e,n);case"exponential":return Uu(e,n);case"engineering":return Ec(e,n);case"bin":return Sn(e,2,i);case"oct":return Sn(e,8,i);case"hex":return Sn(e,16,i);case"auto":return bc(e,n,t).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],a=arguments[4];return u!=="."?u+a:a});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ku(e){var t="auto",r,n;if(e!==void 0)if(Ne(e))r=e;else if(Te(e))r=e.toNumber();else if(ri(e))e.precision!==void 0&&(r=bi(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(n=bi(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:r,wordSize:n}}function dn(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],i=parseFloat(t[4]||"0"),u=n.indexOf(".");i+=u!==-1?u-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return a.length===0&&(a.push(0),i++),{sign:r,coefficients:a,exponent:i}}function Ec(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=dn(e),n=mn(r,t),i=n.exponent,u=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Ne(t))for(;t>u.length||i-a+1>u.length;)u.push(0);else for(var o=Math.abs(i-a)-(u.length-1),s=0;s<o;s++)u.push(0);for(var c=Math.abs(i-a),l=1;c>0;)l++,c--;var h=u.slice(l).join(""),p=Ne(t)&&h.length||h.match(/[1-9]/)?"."+h:"",d=u.slice(0,l).join("")+p+"e"+(i>=0?"+":"")+a.toString();return n.sign+d}function Fc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=dn(e),n=typeof t=="number"?mn(r,r.exponent+1+t):r,i=n.coefficients,u=n.exponent+1,a=u+(t||0);return i.length<a&&(i=i.concat(ir(a-i.length))),u<0&&(i=ir(-u+1).concat(i),u=1),u<i.length&&i.splice(u,0,u===0?"0.":"."),n.sign+i.join("")}function Uu(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=dn(e),n=t?mn(r,t):r,i=n.coefficients,u=n.exponent;i.length<t&&(i=i.concat(ir(t-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(u>=0?"+":"")+u}function bc(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=Ci(r==null?void 0:r.lowerExp,-3),i=Ci(r==null?void 0:r.upperExp,5),u=dn(e),a=t?mn(u,t):u;if(a.exponent<n||a.exponent>=i)return Uu(e,t);var o=a.coefficients,s=a.exponent;o.length<t&&(o=o.concat(ir(t-o.length))),o=o.concat(ir(s-o.length+1+(o.length<t?t-o.length:0))),o=ir(-s).concat(o);var c=s>0?s:0;return c<o.length-1&&o.splice(c+1,0,"."),a.sign+o.join("")}function mn(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var i=n.splice(t,n.length-t);if(i[0]>=5){var u=t-1;for(n[u]++;n[u]===10;)n.pop(),u===0&&(n.unshift(0),r.exponent++,u++),u--,n[u]++}}return r}function ir(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Cc(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Lt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(r*Math.max(Math.abs(e),Math.abs(t)),n)}function bi(e,t){if(Ne(e))return e;if(Te(e))return e.toNumber();t()}function Ci(e,t){return Ne(e)?e:Te(e)?e.toNumber():t}var Hu=function(){return Hu=Xr.create,Xr},Ac=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Bc=ee("typed",Ac,function(t){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:u}=t,a=Hu();return a.clear(),a.addTypes([{name:"number",test:Ne},{name:"Complex",test:Ou},{name:"BigNumber",test:Te},{name:"bigint",test:zs},{name:"Fraction",test:Ru},{name:"Unit",test:$u},{name:"identifier",test:o=>dt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:dt},{name:"Chain",test:pc},{name:"Array",test:Se},{name:"Matrix",test:Ie},{name:"DenseMatrix",test:qs},{name:"SparseMatrix",test:ks},{name:"Range",test:zu},{name:"Index",test:pn},{name:"boolean",test:Us},{name:"ResultSet",test:Hs},{name:"Help",test:Vs},{name:"function",test:Zs},{name:"Date",test:Ws},{name:"RegExp",test:js},{name:"null",test:Js},{name:"undefined",test:Ys},{name:"AccessorNode",test:Ks},{name:"ArrayNode",test:Xs},{name:"AssignmentNode",test:Qs},{name:"BlockNode",test:ec},{name:"ConditionalNode",test:tc},{name:"ConstantNode",test:rc},{name:"FunctionNode",test:ic},{name:"FunctionAssignmentNode",test:nc},{name:"IndexNode",test:uc},{name:"Node",test:ac},{name:"ObjectNode",test:oc},{name:"OperatorNode",test:sc},{name:"ParenthesisNode",test:cc},{name:"RangeNode",test:lc},{name:"RelationalNode",test:fc},{name:"SymbolNode",test:hc},{name:"Map",test:Gs},{name:"Object",test:ri}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(s){if(r||$r(s),Cc(s)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+s+"). Use function bignumber(x) to convert to BigNumber.");return new r(s)}},{from:"number",to:"Complex",convert:function(s){return n||zr(s),new n(s,0)}},{from:"BigNumber",to:"Complex",convert:function(s){return n||zr(s),new n(s.toNumber(),0)}},{from:"bigint",to:"number",convert:function(s){if(s>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+s+")");return Number(s)}},{from:"bigint",to:"BigNumber",convert:function(s){return r||$r(s),new r(s.toString())}},{from:"bigint",to:"Fraction",convert:function(s){return u||qr(s),new u(s)}},{from:"Fraction",to:"BigNumber",convert:function(s){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(s){return n||zr(s),new n(s.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(s){u||qr(s);var c=new u(s);if(c.valueOf()!==s)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+s+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(s){var c=Number(s);if(isNaN(c))throw new Error('Cannot convert "'+s+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(s){r||$r(s);try{return new r(s)}catch{throw new Error('Cannot convert "'+s+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(s){try{return BigInt(s)}catch{throw new Error('Cannot convert "'+s+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(s){u||qr(s);try{return new u(s)}catch{throw new Error('Cannot convert "'+s+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(s){n||zr(s);try{return new n(s)}catch{throw new Error('Cannot convert "'+s+'" to Complex')}}},{from:"boolean",to:"number",convert:function(s){return+s}},{from:"boolean",to:"BigNumber",convert:function(s){return r||$r(s),new r(+s)}},{from:"boolean",to:"bigint",convert:function(s){return BigInt(+s)}},{from:"boolean",to:"Fraction",convert:function(s){return u||qr(s),new u(+s)}},{from:"boolean",to:"string",convert:function(s){return String(s)}},{from:"Array",to:"Matrix",convert:function(s){return i||Mc(),new i(s)}},{from:"Matrix",to:"Array",convert:function(s){return s.valueOf()}}]),a.onMismatch=(o,s,c)=>{var l=a.createError(o,s,c);if(["wrongType","mismatch"].includes(l.data.category)&&s.length===1&&Kr(s[0])&&c.some(p=>!p.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=l.data,h}throw l},a.onMismatch=(o,s,c)=>{var l=a.createError(o,s,c);if(["wrongType","mismatch"].includes(l.data.category)&&s.length===1&&Kr(s[0])&&c.some(p=>!p.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=l.data,h}throw l},a});function $r(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function zr(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Mc(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function qr(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var rr=9e15,kt=1e9,kn="0123456789abcdef",Qr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",en="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Un={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-rr,maxE:rr,crypto:!1},Vu,Tt,ce=!0,vn="[DecimalError] ",qt=vn+"Invalid argument: ",Zu=vn+"Precision limit exceeded",Wu=vn+"crypto unavailable",ju="[object Decimal]",Xe=Math.floor,He=Math.pow,Sc=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,xc=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Nc=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Gu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_t=1e7,ue=7,Tc=9007199254740991,Lc=Qr.length-1,Hn=en.length-1,q={toStringTag:ju};q.absoluteValue=q.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),re(e)};q.ceil=function(){return re(new this.constructor(this),this.e+1,2)};q.clampedTo=q.clamp=function(e,t){var r,n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(qt+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new i(n)};q.comparedTo=q.cmp=function(e){var t,r,n,i,u=this,a=u.d,o=(e=new u.constructor(e)).d,s=u.s,c=e.s;if(!a||!o)return!s||!c?NaN:s!==c?s:a===o?0:!a^s<0?1:-1;if(!a[0]||!o[0])return a[0]?s:o[0]?-c:0;if(s!==c)return s;if(u.e!==e.e)return u.e>e.e^s<0?1:-1;for(n=a.length,i=o.length,t=0,r=n<i?n:i;t<r;++t)if(a[t]!==o[t])return a[t]>o[t]^s<0?1:-1;return n===i?0:n>i^s<0?1:-1};q.cosine=q.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+ue,n.rounding=1,r=Ic(n,Qu(n,r)),n.precision=e,n.rounding=t,re(Tt==2||Tt==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)};q.cubeRoot=q.cbrt=function(){var e,t,r,n,i,u,a,o,s,c,l=this,h=l.constructor;if(!l.isFinite()||l.isZero())return new h(l);for(ce=!1,u=l.s*He(l.s*l,1/3),!u||Math.abs(u)==1/0?(r=Ge(l.d),e=l.e,(u=(e-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=He(r,1/3),e=Xe((e+1)/3)-(e%3==(e<0?-1:2)),u==1/0?r="5e"+e:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new h(r),n.s=l.s):n=new h(u.toString()),a=(e=h.precision)+3;;)if(o=n,s=o.times(o).times(o),c=s.plus(l),n=Ce(c.plus(l).times(o),c.plus(s),a+2,1),Ge(o.d).slice(0,a)===(r=Ge(n.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!i&&r=="4999"){if(!i&&(re(o,e+1,0),o.times(o).times(o).eq(l))){n=o;break}a+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(re(n,e+1,1),t=!n.times(n).times(n).eq(l));break}return ce=!0,re(n,e,h.rounding,t)};q.decimalPlaces=q.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Xe(this.e/ue))*ue,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};q.dividedBy=q.div=function(e){return Ce(this,new this.constructor(e))};q.dividedToIntegerBy=q.divToInt=function(e){var t=this,r=t.constructor;return re(Ce(t,new r(e),0,1,1),r.precision,r.rounding)};q.equals=q.eq=function(e){return this.cmp(e)===0};q.floor=function(){return re(new this.constructor(this),this.e+1,3)};q.greaterThan=q.gt=function(e){return this.cmp(e)>0};q.greaterThanOrEqualTo=q.gte=function(e){var t=this.cmp(e);return t==1||t===0};q.hyperbolicCosine=q.cosh=function(){var e,t,r,n,i,u=this,a=u.constructor,o=new a(1);if(!u.isFinite())return new a(u.s?1/0:NaN);if(u.isZero())return o;r=a.precision,n=a.rounding,a.precision=r+Math.max(u.e,u.sd())+4,a.rounding=1,i=u.d.length,i<32?(e=Math.ceil(i/3),t=(1/Dn(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),u=ur(a,1,u.times(t),new a(1),!0);for(var s,c=e,l=new a(8);c--;)s=u.times(u),u=o.minus(s.times(l.minus(s.times(l))));return re(u,a.precision=r,a.rounding=n,!0)};q.hyperbolicSine=q.sinh=function(){var e,t,r,n,i=this,u=i.constructor;if(!i.isFinite()||i.isZero())return new u(i);if(t=u.precision,r=u.rounding,u.precision=t+Math.max(i.e,i.sd())+4,u.rounding=1,n=i.d.length,n<3)i=ur(u,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,i=i.times(1/Dn(5,e)),i=ur(u,2,i,i,!0);for(var a,o=new u(5),s=new u(16),c=new u(20);e--;)a=i.times(i),i=i.times(o.plus(a.times(s.times(a).plus(c))))}return u.precision=t,u.rounding=r,re(i,t,r,!0)};q.hyperbolicTangent=q.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,Ce(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)};q.inverseCosine=q.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),n=t.precision,i=t.rounding;return r!==-1?r===0?e.isNeg()?wt(t,n,i):new t(0):new t(NaN):e.isZero()?wt(t,n+4,i).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=i,e.times(2))};q.inverseHyperbolicCosine=q.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ce=!1,r=r.times(r).minus(1).sqrt().plus(r),ce=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)};q.inverseHyperbolicSine=q.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ce=!1,r=r.times(r).plus(1).sqrt().plus(r),ce=!0,n.precision=e,n.rounding=t,r.ln())};q.inverseHyperbolicTangent=q.atanh=function(){var e,t,r,n,i=this,u=i.constructor;return i.isFinite()?i.e>=0?new u(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=u.precision,t=u.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?re(new u(i),e,t,!0):(u.precision=r=n-i.e,i=Ce(i.plus(1),new u(1).minus(i),r+e,1),u.precision=e+4,u.rounding=1,i=i.ln(),u.precision=e,u.rounding=t,i.times(.5))):new u(NaN)};q.inverseSine=q.asin=function(){var e,t,r,n,i=this,u=i.constructor;return i.isZero()?new u(i):(t=i.abs().cmp(1),r=u.precision,n=u.rounding,t!==-1?t===0?(e=wt(u,r+4,n).times(.5),e.s=i.s,e):new u(NaN):(u.precision=r+6,u.rounding=1,i=i.div(new u(1).minus(i.times(i)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,i.times(2)))};q.inverseTangent=q.atan=function(){var e,t,r,n,i,u,a,o,s,c=this,l=c.constructor,h=l.precision,p=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=Hn)return a=wt(l,h+4,p).times(.25),a.s=c.s,a}else{if(!c.s)return new l(NaN);if(h+4<=Hn)return a=wt(l,h+4,p).times(.5),a.s=c.s,a}for(l.precision=o=h+10,l.rounding=1,r=Math.min(28,o/ue+2|0),e=r;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(ce=!1,t=Math.ceil(o/ue),n=1,s=c.times(c),a=new l(c),i=c;e!==-1;)if(i=i.times(s),u=a.minus(i.div(n+=2)),i=i.times(s),a=u.plus(i.div(n+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===u.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),ce=!0,re(a,l.precision=h,l.rounding=p,!0)};q.isFinite=function(){return!!this.d};q.isInteger=q.isInt=function(){return!!this.d&&Xe(this.e/ue)>this.d.length-2};q.isNaN=function(){return!this.s};q.isNegative=q.isNeg=function(){return this.s<0};q.isPositive=q.isPos=function(){return this.s>0};q.isZero=function(){return!!this.d&&this.d[0]===0};q.lessThan=q.lt=function(e){return this.cmp(e)<0};q.lessThanOrEqualTo=q.lte=function(e){return this.cmp(e)<1};q.logarithm=q.log=function(e){var t,r,n,i,u,a,o,s,c=this,l=c.constructor,h=l.precision,p=l.rounding,d=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(r=c.d,c.s<0||!r||!r[0]||c.eq(1))return new l(r&&!r[0]?-1/0:c.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)u=!0;else{for(i=r[0];i%10===0;)i/=10;u=i!==1}if(ce=!1,o=h+d,a=Rt(c,o),n=t?tn(l,o+10):Rt(e,o),s=Ce(a,n,o,1),_r(s.d,i=h,p))do if(o+=10,a=Rt(c,o),n=t?tn(l,o+10):Rt(e,o),s=Ce(a,n,o,1),!u){+Ge(s.d).slice(i+1,i+15)+1==1e14&&(s=re(s,h+1,0));break}while(_r(s.d,i+=10,p));return ce=!0,re(s,h,p)};q.minus=q.sub=function(e){var t,r,n,i,u,a,o,s,c,l,h,p,d=this,v=d.constructor;if(e=new v(e),!d.d||!e.d)return!d.s||!e.s?e=new v(NaN):d.d?e.s=-e.s:e=new v(e.d||d.s!==e.s?d:NaN),e;if(d.s!=e.s)return e.s=-e.s,d.plus(e);if(c=d.d,p=e.d,o=v.precision,s=v.rounding,!c[0]||!p[0]){if(p[0])e.s=-e.s;else if(c[0])e=new v(d);else return new v(s===3?-0:0);return ce?re(e,o,s):e}if(r=Xe(e.e/ue),l=Xe(d.e/ue),c=c.slice(),u=l-r,u){for(h=u<0,h?(t=c,u=-u,a=p.length):(t=p,r=l,a=c.length),n=Math.max(Math.ceil(o/ue),a)+2,u>n&&(u=n,t.length=1),t.reverse(),n=u;n--;)t.push(0);t.reverse()}else{for(n=c.length,a=p.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(c[n]!=p[n]){h=c[n]<p[n];break}u=0}for(h&&(t=c,c=p,p=t,e.s=-e.s),a=c.length,n=p.length-a;n>0;--n)c[a++]=0;for(n=p.length;n>u;){if(c[--n]<p[n]){for(i=n;i&&c[--i]===0;)c[i]=_t-1;--c[i],c[n]+=_t}c[n]-=p[n]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=gn(c,r),ce?re(e,o,s):e):new v(s===3?-0:0)};q.modulo=q.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?re(new n(r),n.precision,n.rounding):(ce=!1,n.modulo==9?(t=Ce(r,e.abs(),0,3,1),t.s*=e.s):t=Ce(r,e,0,n.modulo,1),t=t.times(e),ce=!0,r.minus(t))};q.naturalExponential=q.exp=function(){return Vn(this)};q.naturalLogarithm=q.ln=function(){return Rt(this)};q.negated=q.neg=function(){var e=new this.constructor(this);return e.s=-e.s,re(e)};q.plus=q.add=function(e){var t,r,n,i,u,a,o,s,c,l,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d||(e=new p(e.d||h.s===e.s?h:NaN)),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=h.d,l=e.d,o=p.precision,s=p.rounding,!c[0]||!l[0])return l[0]||(e=new p(h)),ce?re(e,o,s):e;if(u=Xe(h.e/ue),n=Xe(e.e/ue),c=c.slice(),i=u-n,i){for(i<0?(r=c,i=-i,a=l.length):(r=l,n=u,a=c.length),u=Math.ceil(o/ue),a=u>a?u+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=c.length,i=l.length,a-i<0&&(i=a,r=l,l=c,c=r),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/_t|0,c[i]%=_t;for(t&&(c.unshift(t),++n),a=c.length;c[--a]==0;)c.pop();return e.d=c,e.e=gn(c,n),ce?re(e,o,s):e};q.precision=q.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(qt+e);return r.d?(t=Ju(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};q.round=function(){var e=this,t=e.constructor;return re(new t(e),e.e+1,t.rounding)};q.sine=q.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+ue,n.rounding=1,r=Oc(n,Qu(n,r)),n.precision=e,n.rounding=t,re(Tt>2?r.neg():r,e,t,!0)):new n(NaN)};q.squareRoot=q.sqrt=function(){var e,t,r,n,i,u,a=this,o=a.d,s=a.e,c=a.s,l=a.constructor;if(c!==1||!o||!o[0])return new l(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);for(ce=!1,c=Math.sqrt(+a),c==0||c==1/0?(t=Ge(o),(t.length+s)%2==0&&(t+="0"),c=Math.sqrt(t),s=Xe((s+1)/2)-(s<0||s%2),c==1/0?t="5e"+s:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+s),n=new l(t)):n=new l(c.toString()),r=(s=l.precision)+3;;)if(u=n,n=u.plus(Ce(a,u,r+2,1)).times(.5),Ge(u.d).slice(0,r)===(t=Ge(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!i&&t=="4999"){if(!i&&(re(u,s+1,0),u.times(u).eq(a))){n=u;break}r+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(re(n,s+1,1),e=!n.times(n).eq(a));break}return ce=!0,re(n,s,l.rounding,e)};q.tangent=q.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=Ce(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,re(Tt==2||Tt==4?r.neg():r,e,t,!0)):new n(NaN)};q.times=q.mul=function(e){var t,r,n,i,u,a,o,s,c,l=this,h=l.constructor,p=l.d,d=(e=new h(e)).d;if(e.s*=l.s,!p||!p[0]||!d||!d[0])return new h(!e.s||p&&!p[0]&&!d||d&&!d[0]&&!p?NaN:!p||!d?e.s/0:e.s*0);for(r=Xe(l.e/ue)+Xe(e.e/ue),s=p.length,c=d.length,s<c&&(u=p,p=d,d=u,a=s,s=c,c=a),u=[],a=s+c,n=a;n--;)u.push(0);for(n=c;--n>=0;){for(t=0,i=s+n;i>n;)o=u[i]+d[n]*p[i-n-1]+t,u[i--]=o%_t|0,t=o/_t|0;u[i]=(u[i]+t)%_t|0}for(;!u[--a];)u.pop();return t?++r:u.shift(),e.d=u,e.e=gn(u,r),ce?re(e,h.precision,h.rounding):e};q.toBinary=function(e,t){return ni(this,2,e,t)};q.toDecimalPlaces=q.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(st(e,0,kt),t===void 0?t=n.rounding:st(t,0,8),re(r,e+r.e+1,t))};q.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Ct(n,!0):(st(e,0,kt),t===void 0?t=i.rounding:st(t,0,8),n=re(new i(n),e+1,t),r=Ct(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};q.toFixed=function(e,t){var r,n,i=this,u=i.constructor;return e===void 0?r=Ct(i):(st(e,0,kt),t===void 0?t=u.rounding:st(t,0,8),n=re(new u(i),e+i.e+1,t),r=Ct(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};q.toFraction=function(e){var t,r,n,i,u,a,o,s,c,l,h,p,d=this,v=d.d,f=d.constructor;if(!v)return new f(d);if(c=r=new f(1),n=s=new f(0),t=new f(n),u=t.e=Ju(v)-d.e-1,a=u%ue,t.d[0]=He(10,a<0?ue+a:a),e==null)e=u>0?t:c;else{if(o=new f(e),!o.isInt()||o.lt(c))throw Error(qt+o);e=o.gt(t)?u>0?t:c:o}for(ce=!1,o=new f(Ge(v)),l=f.precision,f.precision=u=v.length*ue*2;h=Ce(o,t,0,1,1),i=r.plus(h.times(n)),i.cmp(e)!=1;)r=n,n=i,i=c,c=s.plus(h.times(i)),s=i,i=t,t=o.minus(h.times(i)),o=i;return i=Ce(e.minus(r),n,0,1,1),s=s.plus(i.times(c)),r=r.plus(i.times(n)),s.s=c.s=d.s,p=Ce(c,n,u,1).minus(d).abs().cmp(Ce(s,r,u,1).minus(d).abs())<1?[c,n]:[s,r],f.precision=l,ce=!0,p};q.toHexadecimal=q.toHex=function(e,t){return ni(this,16,e,t)};q.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:st(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ce=!1,r=Ce(r,e,0,t,1).times(e),ce=!0,re(r)):(e.s=r.s,r=e),r};q.toNumber=function(){return+this};q.toOctal=function(e,t){return ni(this,8,e,t)};q.toPower=q.pow=function(e){var t,r,n,i,u,a,o=this,s=o.constructor,c=+(e=new s(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new s(He(+o,c));if(o=new s(o),o.eq(1))return o;if(n=s.precision,u=s.rounding,e.eq(1))return re(o,n,u);if(t=Xe(e.e/ue),t>=e.d.length-1&&(r=c<0?-c:c)<=Tc)return i=Yu(s,o,r,n),e.s<0?new s(1).div(i):re(i,n,u);if(a=o.s,a<0){if(t<e.d.length-1)return new s(NaN);if(e.d[t]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return r=He(+o,c),t=r==0||!isFinite(r)?Xe(c*(Math.log("0."+Ge(o.d))/Math.LN10+o.e+1)):new s(r+"").e,t>s.maxE+1||t<s.minE-1?new s(t>0?a/0:0):(ce=!1,s.rounding=o.s=1,r=Math.min(12,(t+"").length),i=Vn(e.times(Rt(o,n+r)),n),i.d&&(i=re(i,n+5,1),_r(i.d,n,u)&&(t=n+10,i=re(Vn(e.times(Rt(o,t+r)),t),t+5,1),+Ge(i.d).slice(n+1,n+15)+1==1e14&&(i=re(i,n+1,0)))),i.s=a,ce=!0,s.rounding=u,re(i,n,u))};q.toPrecision=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Ct(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(st(e,1,kt),t===void 0?t=i.rounding:st(t,0,8),n=re(new i(n),e,t),r=Ct(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r};q.toSignificantDigits=q.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(st(e,1,kt),t===void 0?t=n.rounding:st(t,0,8)),re(new n(r),e,t)};q.toString=function(){var e=this,t=e.constructor,r=Ct(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};q.truncated=q.trunc=function(){return re(new this.constructor(this),this.e+1,1)};q.valueOf=q.toJSON=function(){var e=this,t=e.constructor,r=Ct(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Ge(e){var t,r,n,i=e.length-1,u="",a=e[0];if(i>0){for(u+=a,t=1;t<i;t++)n=e[t]+"",r=ue-n.length,r&&(u+=Ot(r)),u+=n;a=e[t],n=a+"",r=ue-n.length,r&&(u+=Ot(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return u+a}function st(e,t,r){if(e!==~~e||e<t||e>r)throw Error(qt+e)}function _r(e,t,r,n){var i,u,a,o;for(u=e[0];u>=10;u/=10)--t;return--t<0?(t+=ue,i=0):(i=Math.ceil((t+1)/ue),t%=ue),u=He(10,ue-t),o=e[i]%u|0,n==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),a=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):a=(r<4&&o+1==u||r>3&&o+1==u/2)&&(e[i+1]/u/100|0)==He(10,t-2)-1||(o==u/2||o==0)&&(e[i+1]/u/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),a=(n||r<4)&&o==9999||!n&&r>3&&o==4999):a=((n||r<4)&&o+1==u||!n&&r>3&&o+1==u/2)&&(e[i+1]/u/1e3|0)==He(10,t-3)-1,a}function Hr(e,t,r){for(var n,i=[0],u,a=0,o=e.length;a<o;){for(u=i.length;u--;)i[u]*=t;for(i[0]+=kn.indexOf(e.charAt(a++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function Ic(e,t){var r,n,i;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),i=(1/Dn(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),e.precision+=r,t=ur(e,1,t.times(i),new e(1));for(var u=r;u--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var Ce=function(){function e(n,i,u){var a,o=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+o,n[s]=a%u|0,o=a/u|0;return o&&n.unshift(o),n}function t(n,i,u,a){var o,s;if(u!=a)s=u>a?1:-1;else for(o=s=0;o<u;o++)if(n[o]!=i[o]){s=n[o]>i[o]?1:-1;break}return s}function r(n,i,u,a){for(var o=0;u--;)n[u]-=o,o=n[u]<i[u]?1:0,n[u]=o*a+n[u]-i[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,u,a,o,s){var c,l,h,p,d,v,f,m,g,E,D,F,_,y,A,b,B,S,L,x,Y=n.constructor,k=n.s==i.s?1:-1,Z=n.d,T=i.d;if(!Z||!Z[0]||!T||!T[0])return new Y(!n.s||!i.s||(Z?T&&Z[0]==T[0]:!T)?NaN:Z&&Z[0]==0||!T?k*0:k/0);for(s?(d=1,l=n.e-i.e):(s=_t,d=ue,l=Xe(n.e/d)-Xe(i.e/d)),L=T.length,B=Z.length,g=new Y(k),E=g.d=[],h=0;T[h]==(Z[h]||0);h++);if(T[h]>(Z[h]||0)&&l--,u==null?(y=u=Y.precision,a=Y.rounding):o?y=u+(n.e-i.e)+1:y=u,y<0)E.push(1),v=!0;else{if(y=y/d+2|0,h=0,L==1){for(p=0,T=T[0],y++;(h<B||p)&&y--;h++)A=p*s+(Z[h]||0),E[h]=A/T|0,p=A%T|0;v=p||h<B}else{for(p=s/(T[0]+1)|0,p>1&&(T=e(T,p,s),Z=e(Z,p,s),L=T.length,B=Z.length),b=L,D=Z.slice(0,L),F=D.length;F<L;)D[F++]=0;x=T.slice(),x.unshift(0),S=T[0],T[1]>=s/2&&++S;do p=0,c=t(T,D,L,F),c<0?(_=D[0],L!=F&&(_=_*s+(D[1]||0)),p=_/S|0,p>1?(p>=s&&(p=s-1),f=e(T,p,s),m=f.length,F=D.length,c=t(f,D,m,F),c==1&&(p--,r(f,L<m?x:T,m,s))):(p==0&&(c=p=1),f=T.slice()),m=f.length,m<F&&f.unshift(0),r(D,f,F,s),c==-1&&(F=D.length,c=t(T,D,L,F),c<1&&(p++,r(D,L<F?x:T,F,s))),F=D.length):c===0&&(p++,D=[0]),E[h++]=p,c&&D[0]?D[F++]=Z[b]||0:(D=[Z[b]],F=1);while((b++<B||D[0]!==void 0)&&y--);v=D[0]!==void 0}E[0]||E.shift()}if(d==1)g.e=l,Vu=v;else{for(h=1,p=E[0];p>=10;p/=10)h++;g.e=h+l*d-1,re(g,o?u+g.e+1:u,a,v)}return g}}();function re(e,t,r,n){var i,u,a,o,s,c,l,h,p,d=e.constructor;e:if(t!=null){if(h=e.d,!h)return e;for(i=1,o=h[0];o>=10;o/=10)i++;if(u=t-i,u<0)u+=ue,a=t,l=h[p=0],s=l/He(10,i-a-1)%10|0;else if(p=Math.ceil((u+1)/ue),o=h.length,p>=o)if(n){for(;o++<=p;)h.push(0);l=s=0,i=1,u%=ue,a=u-ue+1}else break e;else{for(l=o=h[p],i=1;o>=10;o/=10)i++;u%=ue,a=u-ue+i,s=a<0?0:l/He(10,i-a-1)%10|0}if(n=n||t<0||h[p+1]!==void 0||(a<0?l:l%He(10,i-a-1)),c=r<4?(s||n)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||n||r==6&&(u>0?a>0?l/He(10,i-a):0:h[p-1])%10&1||r==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(t-=e.e+1,h[0]=He(10,(ue-t%ue)%ue),e.e=-t||0):h[0]=e.e=0,e;if(u==0?(h.length=p,o=1,p--):(h.length=p+1,o=He(10,ue-u),h[p]=a>0?(l/He(10,i-a)%He(10,a)|0)*o:0),c)for(;;)if(p==0){for(u=1,a=h[0];a>=10;a/=10)u++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;u!=o&&(e.e++,h[0]==_t&&(h[0]=1));break}else{if(h[p]+=o,h[p]!=_t)break;h[p--]=0,o=1}for(u=h.length;h[--u]===0;)h.pop()}return ce&&(e.e>d.maxE?(e.d=null,e.e=NaN):e.e<d.minE&&(e.e=0,e.d=[0])),e}function Ct(e,t,r){if(!e.isFinite())return Xu(e);var n,i=e.e,u=Ge(e.d),a=u.length;return t?(r&&(n=r-a)>0?u=u.charAt(0)+"."+u.slice(1)+Ot(n):a>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(e.e<0?"e":"e+")+e.e):i<0?(u="0."+Ot(-i-1)+u,r&&(n=r-a)>0&&(u+=Ot(n))):i>=a?(u+=Ot(i+1-a),r&&(n=r-i-1)>0&&(u=u+"."+Ot(n))):((n=i+1)<a&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(u+="."),u+=Ot(n))),u}function gn(e,t){var r=e[0];for(t*=ue;r>=10;r/=10)t++;return t}function tn(e,t,r){if(t>Lc)throw ce=!0,r&&(e.precision=r),Error(Zu);return re(new e(Qr),t,1,!0)}function wt(e,t,r){if(t>Hn)throw Error(Zu);return re(new e(en),t,r,!0)}function Ju(e){var t=e.length-1,r=t*ue+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Ot(e){for(var t="";e--;)t+="0";return t}function Yu(e,t,r,n){var i,u=new e(1),a=Math.ceil(n/ue+4);for(ce=!1;;){if(r%2&&(u=u.times(t),Bi(u.d,a)&&(i=!0)),r=Xe(r/2),r===0){r=u.d.length-1,i&&u.d[r]===0&&++u.d[r];break}t=t.times(t),Bi(t.d,a)}return ce=!0,u}function Ai(e){return e.d[e.d.length-1]&1}function Ku(e,t,r){for(var n,i,u=new e(t[0]),a=0;++a<t.length;){if(i=new e(t[a]),!i.s){u=i;break}n=u.cmp(i),(n===r||n===0&&u.s===r)&&(u=i)}return u}function Vn(e,t){var r,n,i,u,a,o,s,c=0,l=0,h=0,p=e.constructor,d=p.rounding,v=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(ce=!1,s=v):s=t,o=new p(.03125);e.e>-2;)e=e.times(o),h+=5;for(n=Math.log(He(2,h))/Math.LN10*2+5|0,s+=n,r=u=a=new p(1),p.precision=s;;){if(u=re(u.times(e),s,1),r=r.times(++l),o=a.plus(Ce(u,r,s,1)),Ge(o.d).slice(0,s)===Ge(a.d).slice(0,s)){for(i=h;i--;)a=re(a.times(a),s,1);if(t==null)if(c<3&&_r(a.d,s-n,d,c))p.precision=s+=10,r=u=o=new p(1),l=0,c++;else return re(a,p.precision=v,d,ce=!0);else return p.precision=v,a}a=o}}function Rt(e,t){var r,n,i,u,a,o,s,c,l,h,p,d=1,v=10,f=e,m=f.d,g=f.constructor,E=g.rounding,D=g.precision;if(f.s<0||!m||!m[0]||!f.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:f.s!=1?NaN:m?0:f);if(t==null?(ce=!1,l=D):l=t,g.precision=l+=v,r=Ge(m),n=r.charAt(0),Math.abs(u=f.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)f=f.times(e),r=Ge(f.d),n=r.charAt(0),d++;u=f.e,n>1?(f=new g("0."+r),u++):f=new g(n+"."+r.slice(1))}else return c=tn(g,l+2,D).times(u+""),f=Rt(new g(n+"."+r.slice(1)),l-v).plus(c),g.precision=D,t==null?re(f,D,E,ce=!0):f;for(h=f,s=a=f=Ce(f.minus(1),f.plus(1),l,1),p=re(f.times(f),l,1),i=3;;){if(a=re(a.times(p),l,1),c=s.plus(Ce(a,new g(i),l,1)),Ge(c.d).slice(0,l)===Ge(s.d).slice(0,l))if(s=s.times(2),u!==0&&(s=s.plus(tn(g,l+2,D).times(u+""))),s=Ce(s,new g(d),l,1),t==null)if(_r(s.d,l-v,E,o))g.precision=l+=v,c=a=f=Ce(h.minus(1),h.plus(1),l,1),p=re(f.times(f),l,1),i=o=1;else return re(s,g.precision=D,E,ce=!0);else return g.precision=D,s;s=c,i+=2}}function Xu(e){return String(e.s*e.s/0)}function Vr(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(n,i),t){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%ue,r<0&&(n+=ue),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=ue;n<i;)e.d.push(+t.slice(n,n+=ue));t=t.slice(n),n=ue-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),ce&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Pc(e,t){var r,n,i,u,a,o,s,c,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Gu.test(t))return Vr(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(xc.test(t))r=16,t=t.toLowerCase();else if(Sc.test(t))r=2;else if(Nc.test(t))r=8;else throw Error(qt+t);for(u=t.search(/p/i),u>0?(s=+t.slice(u+1),t=t.substring(2,u)):t=t.slice(2),u=t.indexOf("."),a=u>=0,n=e.constructor,a&&(t=t.replace(".",""),o=t.length,u=o-u,i=Yu(n,new n(r),u,u*2)),c=Hr(t,r,_t),l=c.length-1,u=l;c[u]===0;--u)c.pop();return u<0?new n(e.s*0):(e.e=gn(c,l),e.d=c,ce=!1,a&&(e=Ce(e,i,o*4)),s&&(e=e.times(Math.abs(s)<54?He(2,s):ar.pow(2,s))),ce=!0,e)}function Oc(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:ur(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/Dn(5,r)),t=ur(e,2,t,t);for(var i,u=new e(5),a=new e(16),o=new e(20);r--;)i=t.times(t),t=t.times(u.plus(i.times(a.times(i).minus(o))));return t}function ur(e,t,r,n,i){var u,a,o,s,c=e.precision,l=Math.ceil(c/ue);for(ce=!1,s=r.times(r),o=new e(n);;){if(a=Ce(o.times(s),new e(t++*t++),c,1),o=i?n.plus(a):n.minus(a),n=Ce(a.times(s),new e(t++*t++),c,1),a=o.plus(n),a.d[l]!==void 0){for(u=l;a.d[u]===o.d[u]&&u--;);if(u==-1)break}u=o,o=n,n=a,a=u}return ce=!0,a.d.length=l+1,a}function Dn(e,t){for(var r=e;--t;)r*=e;return r}function Qu(e,t){var r,n=t.s<0,i=wt(e,e.precision,1),u=i.times(.5);if(t=t.abs(),t.lte(u))return Tt=n?4:1,t;if(r=t.divToInt(i),r.isZero())Tt=n?3:2;else{if(t=t.minus(r.times(i)),t.lte(u))return Tt=Ai(r)?n?2:3:n?4:1,t;Tt=Ai(r)?n?1:4:n?3:2}return t.minus(i).abs()}function ni(e,t,r,n){var i,u,a,o,s,c,l,h,p,d=e.constructor,v=r!==void 0;if(v?(st(r,1,kt),n===void 0?n=d.rounding:st(n,0,8)):(r=d.precision,n=d.rounding),!e.isFinite())l=Xu(e);else{for(l=Ct(e),a=l.indexOf("."),v?(i=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):i=t,a>=0&&(l=l.replace(".",""),p=new d(1),p.e=l.length-a,p.d=Hr(Ct(p),10,i),p.e=p.d.length),h=Hr(l,10,i),u=s=h.length;h[--s]==0;)h.pop();if(!h[0])l=v?"0p+0":"0";else{if(a<0?u--:(e=new d(e),e.d=h,e.e=u,e=Ce(e,p,r,n,0,i),h=e.d,u=e.e,c=Vu),a=h[r],o=i/2,c=c||h[r+1]!==void 0,c=n<4?(a!==void 0||c)&&(n===0||n===(e.s<0?3:2)):a>o||a===o&&(n===4||c||n===6&&h[r-1]&1||n===(e.s<0?8:7)),h.length=r,c)for(;++h[--r]>i-1;)h[r]=0,r||(++u,h.unshift(1));for(s=h.length;!h[s-1];--s);for(a=0,l="";a<s;a++)l+=kn.charAt(h[a]);if(v){if(s>1)if(t==16||t==8){for(a=t==16?4:3,--s;s%a;s++)l+="0";for(h=Hr(l,i,t),s=h.length;!h[s-1];--s);for(a=1,l="1.";a<s;a++)l+=kn.charAt(h[a])}else l=l.charAt(0)+"."+l.slice(1);l=l+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)l="0"+l;l="0."+l}else if(++u>s)for(u-=s;u--;)l+="0";else u<s&&(l=l.slice(0,u)+"."+l.slice(u))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function Bi(e,t){if(e.length>t)return e.length=t,!0}function Rc(e){return new this(e).abs()}function $c(e){return new this(e).acos()}function zc(e){return new this(e).acosh()}function qc(e,t){return new this(e).plus(t)}function kc(e){return new this(e).asin()}function Uc(e){return new this(e).asinh()}function Hc(e){return new this(e).atan()}function Vc(e){return new this(e).atanh()}function Zc(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,u=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=wt(this,u,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?wt(this,n,i):new this(0),r.s=e.s):!e.d||t.isZero()?(r=wt(this,u,1).times(.5),r.s=e.s):t.s<0?(this.precision=u,this.rounding=1,r=this.atan(Ce(e,t,u,1)),t=wt(this,u,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Ce(e,t,u,1)),r}function Wc(e){return new this(e).cbrt()}function jc(e){return re(e=new this(e),e.e+1,2)}function Gc(e,t,r){return new this(e).clamp(t,r)}function Jc(e){if(!e||typeof e!="object")throw Error(vn+"Object expected");var t,r,n,i=e.defaults===!0,u=["precision",1,kt,"rounding",0,8,"toExpNeg",-rr,0,"toExpPos",0,rr,"maxE",0,rr,"minE",-rr,0,"modulo",0,9];for(t=0;t<u.length;t+=3)if(r=u[t],i&&(this[r]=Un[r]),(n=e[r])!==void 0)if(Xe(n)===n&&n>=u[t+1]&&n<=u[t+2])this[r]=n;else throw Error(qt+r+": "+n);if(r="crypto",i&&(this[r]=Un[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Wu);else this[r]=!1;else throw Error(qt+r+": "+n);return this}function Yc(e){return new this(e).cos()}function Kc(e){return new this(e).cosh()}function ea(e){var t,r,n;function i(u){var a,o,s,c=this;if(!(c instanceof i))return new i(u);if(c.constructor=i,Mi(u)){c.s=u.s,ce?!u.d||u.e>i.maxE?(c.e=NaN,c.d=null):u.e<i.minE?(c.e=0,c.d=[0]):(c.e=u.e,c.d=u.d.slice()):(c.e=u.e,c.d=u.d?u.d.slice():u.d);return}if(s=typeof u,s==="number"){if(u===0){c.s=1/u<0?-1:1,c.e=0,c.d=[0];return}if(u<0?(u=-u,c.s=-1):c.s=1,u===~~u&&u<1e7){for(a=0,o=u;o>=10;o/=10)a++;ce?a>i.maxE?(c.e=NaN,c.d=null):a<i.minE?(c.e=0,c.d=[0]):(c.e=a,c.d=[u]):(c.e=a,c.d=[u]);return}if(u*0!==0){u||(c.s=NaN),c.e=NaN,c.d=null;return}return Vr(c,u.toString())}if(s==="string")return(o=u.charCodeAt(0))===45?(u=u.slice(1),c.s=-1):(o===43&&(u=u.slice(1)),c.s=1),Gu.test(u)?Vr(c,u):Pc(c,u);if(s==="bigint")return u<0?(u=-u,c.s=-1):c.s=1,Vr(c,u.toString());throw Error(qt+u)}if(i.prototype=q,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Jc,i.clone=ea,i.isDecimal=Mi,i.abs=Rc,i.acos=$c,i.acosh=zc,i.add=qc,i.asin=kc,i.asinh=Uc,i.atan=Hc,i.atanh=Vc,i.atan2=Zc,i.cbrt=Wc,i.ceil=jc,i.clamp=Gc,i.cos=Yc,i.cosh=Kc,i.div=Xc,i.exp=Qc,i.floor=el,i.hypot=tl,i.ln=rl,i.log=nl,i.log10=ul,i.log2=il,i.max=al,i.min=ol,i.mod=sl,i.mul=cl,i.pow=ll,i.random=fl,i.round=hl,i.sign=pl,i.sin=dl,i.sinh=ml,i.sqrt=vl,i.sub=gl,i.sum=Dl,i.tan=yl,i.tanh=_l,i.trunc=wl,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Xc(e,t){return new this(e).div(t)}function Qc(e){return new this(e).exp()}function el(e){return re(e=new this(e),e.e+1,3)}function tl(){var e,t,r=new this(0);for(ce=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ce=!0,new this(1/0);r=t}return ce=!0,r.sqrt()}function Mi(e){return e instanceof ar||e&&e.toStringTag===ju||!1}function rl(e){return new this(e).ln()}function nl(e,t){return new this(e).log(t)}function il(e){return new this(e).log(2)}function ul(e){return new this(e).log(10)}function al(){return Ku(this,arguments,-1)}function ol(){return Ku(this,arguments,1)}function sl(e,t){return new this(e).mod(t)}function cl(e,t){return new this(e).mul(t)}function ll(e,t){return new this(e).pow(t)}function fl(e){var t,r,n,i,u=0,a=new this(1),o=[];if(e===void 0?e=this.precision:st(e,1,kt),n=Math.ceil(e/ue),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));u<n;)i=t[u],i>=429e7?t[u]=crypto.getRandomValues(new Uint32Array(1))[0]:o[u++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);u<n;)i=t[u]+(t[u+1]<<8)+(t[u+2]<<16)+((t[u+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,u):(o.push(i%1e7),u+=4);u=n/4}else throw Error(Wu);else for(;u<n;)o[u++]=Math.random()*1e7|0;for(n=o[--u],e%=ue,n&&e&&(i=He(10,ue-e),o[u]=(n/i|0)*i);o[u]===0;u--)o.pop();if(u<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=ue)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<ue&&(r-=ue-n)}return a.e=r,a.d=o,a}function hl(e){return re(e=new this(e),e.e+1,this.rounding)}function pl(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function dl(e){return new this(e).sin()}function ml(e){return new this(e).sinh()}function vl(e){return new this(e).sqrt()}function gl(e,t){return new this(e).sub(t)}function Dl(){var e=0,t=arguments,r=new this(t[e]);for(ce=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ce=!0,re(r,this.precision,this.rounding)}function yl(e){return new this(e).tan()}function _l(e){return new this(e).tanh()}function wl(e){return re(e=new this(e),e.e+1,1)}q[Symbol.for("nodejs.util.inspect.custom")]=q.toString;q[Symbol.toStringTag]="Decimal";var ar=q.constructor=ea(Un);Qr=new ar(Qr);en=new ar(en);var El="BigNumber",Fl=["?on","config"],bl=ee(El,Fl,e=>{var{on:t,config:r}=e,n=ar.clone({precision:r.precision,modulo:ar.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},t&&t("config",function(i,u){i.precision!==u.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const Ye=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},ht=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},Cl=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},xn=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},Xt=function(){throw SyntaxError("Invalid Param")};function Nn(e,t){const r=Math.abs(e),n=Math.abs(t);return e===0?Math.log(n):t===0?Math.log(r):r<3e3&&n<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const Al={re:0,im:0},Ut=function(e,t){const r=Al;if(e==null)r.re=r.im=0;else if(t!==void 0)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return N.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return N.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else e.length===2?(r.re=e[0],r.im=e[1]):Xt();break;case"string":r.im=r.re=0;const n=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,u=0;n===null&&Xt();for(let a=0;a<n.length;a++){const o=n[a];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?u++:o==="i"||o==="I"?(i+u===0&&Xt(),n[a+1]!==" "&&!isNaN(n[a+1])?(r.im+=parseFloat((u%2?"-":"")+n[a+1]),a++):r.im+=parseFloat((u%2?"-":"")+"1"),i=u=0):((i+u===0||isNaN(o))&&Xt(),n[a+1]==="i"||n[a+1]==="I"?(r.im+=parseFloat((u%2?"-":"")+o),a++):r.re+=parseFloat((u%2?"-":"")+o),i=u=0))}i+u>0&&Xt();break;case"number":r.im=0,r.re=e;break;default:Xt()}return isNaN(r.re)||isNaN(r.im),r};function N(e,t){if(!(this instanceof N))return new N(e,t);const r=Ut(e,t);this.re=r.re,this.im=r.im}N.prototype={re:0,im:0,sign:function(){const e=xn(this.re,this.im);return new N(this.re/e,this.im/e)},add:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?N.NAN:N.INFINITY:new N(this.re+r.re,this.im+r.im)},sub:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?N.NAN:N.INFINITY:new N(this.re-r.re,this.im-r.im)},mul:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,a=r.re===0&&r.im===0;return n&&a||i&&u?N.NAN:n||i?N.INFINITY:r.im===0&&this.im===0?new N(this.re*r.re,0):new N(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){const r=Ut(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),u=this.re===0&&this.im===0,a=r.re===0&&r.im===0;if(u&&a||n&&i)return N.NAN;if(a||n)return N.INFINITY;if(u||i)return N.ZERO;if(r.im===0)return new N(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const o=r.re/r.im,s=r.re*o+r.im;return new N((this.re*o+this.im)/s,(this.im*o-this.re)/s)}else{const o=r.im/r.re,s=r.im*o+r.re;return new N((this.re+this.im*o)/s,(this.im-this.re*o)/s)}},pow:function(e,t){const r=Ut(e,t),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return N.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new N(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new N(Math.pow(this.im,r.re),0);case 1:return new N(0,Math.pow(this.im,r.re));case 2:return new N(-Math.pow(this.im,r.re),0);case 3:return new N(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return N.ZERO;const u=Math.atan2(this.im,this.re),a=Nn(this.re,this.im);let o=Math.exp(r.re*a-r.im*u),s=r.im*a+r.re*u;return new N(o*Math.cos(s),o*Math.sin(s))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new N(Math.sqrt(e),0):new N(0,Math.sqrt(-e));const r=xn(e,t);let n=Math.sqrt(.5*(r+Math.abs(e))),i=Math.abs(t)/(2*n);return e>=0?new N(n,t<0?-i:i):new N(i,t<0?-n:n)},exp:function(){const e=Math.exp(this.re);return this.im===0?new N(e,0):new N(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new N(Math.expm1(e)*Math.cos(t)+Cl(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new N(Math.log(e),0):new N(Nn(e,t),Math.atan2(t,e))},abs:function(){return xn(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new N(Math.sin(e)*Ye(t),Math.cos(e)*ht(t))},cos:function(){const e=this.re,t=this.im;return new N(Math.cos(e)*Ye(t),-Math.sin(e)*ht(t))},tan:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)+Ye(t);return new N(Math.sin(e)/r,ht(t)/r)},cot:function(){const e=2*this.re,t=2*this.im,r=Math.cos(e)-Ye(t);return new N(-Math.sin(e)/r,ht(t)/r)},sec:function(){const e=this.re,t=this.im,r=.5*Ye(2*t)+.5*Math.cos(2*e);return new N(Math.cos(e)*Ye(t)/r,Math.sin(e)*ht(t)/r)},csc:function(){const e=this.re,t=this.im,r=.5*Ye(2*t)-.5*Math.cos(2*e);return new N(Math.sin(e)*Ye(t)/r,-Math.cos(e)*ht(t)/r)},asin:function(){const e=this.re,t=this.im,r=new N(t*t-e*e+1,-2*e*t).sqrt(),n=new N(r.re-t,r.im+e).log();return new N(n.im,-n.re)},acos:function(){const e=this.re,t=this.im,r=new N(t*t-e*e+1,-2*e*t).sqrt(),n=new N(r.re-t,r.im+e).log();return new N(Math.PI/2-n.im,n.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new N(0,1/0);if(t===-1)return new N(0,-1/0)}const r=e*e+(1-t)*(1-t),n=new N((1-t*t-e*e)/r,-2*e/r).log();return new N(-.5*n.im,.5*n.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new N(Math.atan2(1,e),0);const r=e*e+t*t;return r!==0?new N(e/r,-t/r).atan():new N(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new N(0,1/0);const r=e*e+t*t;return r!==0?new N(e/r,-t/r).acos():new N(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new N(Math.PI/2,1/0);const r=e*e+t*t;return r!==0?new N(e/r,-t/r).asin():new N(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new N(ht(e)*Math.cos(t),Ye(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new N(Ye(e)*Math.cos(t),ht(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,r=Ye(e)+Math.cos(t);return new N(ht(e)/r,Math.sin(t)/r)},coth:function(){const e=2*this.re,t=2*this.im,r=Ye(e)-Math.cos(t);return new N(ht(e)/r,-Math.sin(t)/r)},csch:function(){const e=this.re,t=this.im,r=Math.cos(2*t)-Ye(2*e);return new N(-2*ht(e)*Math.cos(t)/r,2*Ye(e)*Math.sin(t)/r)},sech:function(){const e=this.re,t=this.im,r=Math.cos(2*t)+Ye(2*e);return new N(2*Ye(e)*Math.cos(t)/r,-2*ht(e)*Math.sin(t)/r)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,r=e>1&&t===0,n=1-e,i=1+e,u=n*n+t*t,a=u!==0?new N((i*n-t*t)/u,(t*n+i*t)/u):new N(e!==-1?e/0:0,t!==0?t/0:0),o=a.re;return a.re=Nn(a.re,a.im)/2,a.im=Math.atan2(a.im,o)/2,r&&(a.im=-a.im),a},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new N(0,Math.PI/2);const r=e*e+t*t;return r!==0?new N(e/r,-t/r).atanh():new N(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new N(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const r=e*e+t*t;return r!==0?new N(e/r,-t/r).asinh():new N(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return N.INFINITY;const r=e*e+t*t;return r!==0?new N(e/r,-t/r).acosh():new N(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return N.INFINITY;if(this.isInfinite())return N.ZERO;const e=this.re,t=this.im,r=e*e+t*t;return new N(e/r,-t/r)},conjugate:function(){return new N(this.re,-this.im)},neg:function(){return new N(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new N(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new N(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new N(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const r=Ut(e,t);return Math.abs(r.re-this.re)<=N.EPSILON&&Math.abs(r.im-this.im)<=N.EPSILON},clone:function(){return new N(this.re,this.im)},toString:function(){let e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<N.EPSILON&&(e=0),Math.abs(t)<N.EPSILON&&(t=0),t===0?r+e:(e!==0?(r+=e,r+=" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),t!==1&&(r+=t),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};N.ZERO=new N(0,0);N.ONE=new N(1,0);N.I=new N(0,1);N.PI=new N(Math.PI,0);N.E=new N(Math.E,0);N.INFINITY=new N(1/0,1/0);N.NAN=new N(NaN,NaN);N.EPSILON=1e-15;var Bl="Complex",Ml=[],Sl=ee(Bl,Ml,()=>(Object.defineProperty(N,"name",{value:"Complex"}),N.prototype.constructor=N,N.prototype.type="Complex",N.prototype.isComplex=!0,N.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},N.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},N.prototype.format=function(e){var t="",r=this.im,n=this.re,i=qn(this.re,e),u=qn(this.im,e),a=Ne(e)?e:e?e.precision:null;if(a!==null){var o=Math.pow(10,-a);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?t=i:n===0?r===1?t="i":r===-1?t="-i":t=u+"i":r<0?r===-1?t=i+" - i":t=i+" - "+u.substring(1)+"i":r===1?t=i+" + i":t=i+" + "+u+"i",t},N.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return N(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Ne(r)){if($u(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Ne(n))return new N({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},N.prototype.valueOf=N.prototype.toString,N.fromJSON=function(e){return new N(e)},N.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},N),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const te=BigInt(0),le=BigInt(1),wr=BigInt(2),Zn=BigInt(5),at=BigInt(10),xl=2e3,W={s:le,n:te,d:le};function Nt(e,t){try{e=BigInt(e)}catch{throw Pt()}return e*t}function Dt(e){return typeof e=="bigint"?e:Math.floor(e)}function Le(e,t){if(t===te)throw ii();const r=Object.create(pt.prototype);r.s=e<te?-le:le,e=e<te?-e:e;const n=Ht(e,t);return r.n=e/n,r.d=t/n,r}function Qt(e){const t={};let r=e,n=wr,i=Zn-le;for(;i<=r;){for(;r%n===te;)r/=n,t[n]=(t[n]||te)+le;i+=le+wr*n++}return r!==e?r>1&&(t[r]=(t[r]||te)+le):t[e]=(t[e]||te)+le,t}const je=function(e,t){let r=te,n=le,i=le;if(e!=null)if(t!==void 0){if(typeof e=="bigint")r=e;else{if(isNaN(e))throw Pt();if(e%1!==0)throw Si();r=BigInt(e)}if(typeof t=="bigint")n=t;else{if(isNaN(t))throw Pt();if(t%1!==0)throw Si();n=BigInt(t)}i=r*n}else if(typeof e=="object"){if("d"in e&&"n"in e)r=BigInt(e.n),n=BigInt(e.d),"s"in e&&(r*=BigInt(e.s));else if(0 in e)r=BigInt(e[0]),1 in e&&(n=BigInt(e[1]));else if(typeof e=="bigint")r=e;else throw Pt();i=r*n}else if(typeof e=="number"){if(isNaN(e))throw Pt();if(e<0&&(i=-le,e=-e),e%1===0)r=BigInt(e);else{let u=1,a=0,o=1,s=1,c=1,l=1e7;for(e>=1&&(u=10**Math.floor(1+Math.log10(e)),e/=u);o<=l&&c<=l;){let h=(a+s)/(o+c);if(e===h){o+c<=l?(r=a+s,n=o+c):c>o?(r=s,n=c):(r=a,n=o);break}else e>h?(a+=s,o+=c):(s+=a,c+=o),o>l?(r=s,n=c):(r=a,n=o)}r=BigInt(r)*BigInt(u),n=BigInt(n)}}else if(typeof e=="string"){let u=0,a=te,o=te,s=te,c=le,l=le,h=e.replace(/_/g,"").match(/\d+|./g);if(h===null)throw Pt();if(h[u]==="-"?(i=-le,u++):h[u]==="+"&&u++,h.length===u+1?o=Nt(h[u++],i):h[u+1]==="."||h[u]==="."?(h[u]!=="."&&(a=Nt(h[u++],i)),u++,(u+1===h.length||h[u+1]==="("&&h[u+3]===")"||h[u+1]==="'"&&h[u+3]==="'")&&(o=Nt(h[u],i),c=at**BigInt(h[u].length),u++),(h[u]==="("&&h[u+2]===")"||h[u]==="'"&&h[u+2]==="'")&&(s=Nt(h[u+1],i),l=at**BigInt(h[u+1].length)-le,u+=3)):h[u+1]==="/"||h[u+1]===":"?(o=Nt(h[u],i),c=Nt(h[u+2],le),u+=3):h[u+3]==="/"&&h[u+1]===" "&&(a=Nt(h[u],i),o=Nt(h[u+2],i),c=Nt(h[u+4],le),u+=5),h.length<=u)n=c*l,i=r=s+n*a+l*o;else throw Pt()}else if(typeof e=="bigint")r=e,i=e,n=le;else throw Pt();if(n===te)throw ii();W.s=i<te?-le:le,W.n=r<te?-r:r,W.d=n<te?-n:n};function Nl(e,t,r){let n=le;for(;t>te;e=e*e%r,t>>=le)t&le&&(n=n*e%r);return n}function Tl(e,t){for(;t%wr===te;t/=wr);for(;t%Zn===te;t/=Zn);if(t===le)return te;let r=at%t,n=1;for(;r!==le;n++)if(r=r*at%t,n>xl)return te;return BigInt(n)}function Ll(e,t,r){let n=le,i=Nl(at,r,t);for(let u=0;u<300;u++){if(n===i)return BigInt(u);n=n*at%t,i=i*at%t}return 0}function Ht(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function pt(e,t){if(je(e,t),this instanceof pt)e=Ht(W.d,W.n),this.s=W.s,this.n=W.n/e,this.d=W.d/e;else return Le(W.s*W.n,W.d)}var ii=function(){return new Error("Division by Zero")},Pt=function(){return new Error("Invalid argument")},Si=function(){return new Error("Parameters must be integer")};pt.prototype={s:le,n:te,d:le,abs:function(){return Le(this.n,this.d)},neg:function(){return Le(-this.s*this.n,this.d)},add:function(e,t){return je(e,t),Le(this.s*this.n*W.d+W.s*this.d*W.n,this.d*W.d)},sub:function(e,t){return je(e,t),Le(this.s*this.n*W.d-W.s*this.d*W.n,this.d*W.d)},mul:function(e,t){return je(e,t),Le(this.s*W.s*this.n*W.n,this.d*W.d)},div:function(e,t){return je(e,t),Le(this.s*W.s*this.n*W.d,this.d*W.n)},clone:function(){return Le(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return Le(this.s*this.n%this.d,le);if(je(e,t),te===W.n*this.d)throw ii();return Le(this.s*(W.d*this.n)%(W.n*this.d),W.d*this.d)},gcd:function(e,t){return je(e,t),Le(Ht(W.n,this.n)*Ht(W.d,this.d),W.d*this.d)},lcm:function(e,t){return je(e,t),W.n===te&&this.n===te?Le(te,le):Le(W.n*this.n,Ht(W.n,this.n)*Ht(W.d,this.d))},inverse:function(){return Le(this.s*this.d,this.n)},pow:function(e,t){if(je(e,t),W.d===le)return W.s<te?Le((this.s*this.d)**W.n,this.n**W.n):Le((this.s*this.n)**W.n,this.d**W.n);if(this.s<te)return null;let r=Qt(this.n),n=Qt(this.d),i=le,u=le;for(let a in r)if(a!=="1"){if(a==="0"){i=te;break}if(r[a]*=W.n,r[a]%W.d===te)r[a]/=W.d;else return null;i*=BigInt(a)**r[a]}for(let a in n)if(a!=="1"){if(n[a]*=W.n,n[a]%W.d===te)n[a]/=W.d;else return null;u*=BigInt(a)**n[a]}return W.s<te?Le(u,i):Le(i,u)},log:function(e,t){if(je(e,t),this.s<=te||W.s<=te)return null;const r={},n=Qt(W.n),i=Qt(W.d),u=Qt(this.n),a=Qt(this.d);for(const c in i)n[c]=(n[c]||te)-i[c];for(const c in a)u[c]=(u[c]||te)-a[c];for(const c in n)c!=="1"&&(r[c]=!0);for(const c in u)c!=="1"&&(r[c]=!0);let o=null,s=null;for(const c in r){const l=n[c]||te,h=u[c]||te;if(l===te){if(h!==te)return null;continue}let p=h,d=l;const v=Ht(p,d);if(p/=v,d/=v,o===null&&s===null)o=p,s=d;else if(p*s!==o*d)return null}return o!==null&&s!==null?Le(o,s):null},equals:function(e,t){return je(e,t),this.s*this.n*W.d===W.s*W.n*this.d},lt:function(e,t){return je(e,t),this.s*this.n*W.d<W.s*W.n*this.d},lte:function(e,t){return je(e,t),this.s*this.n*W.d<=W.s*W.n*this.d},gt:function(e,t){return je(e,t),this.s*this.n*W.d>W.s*W.n*this.d},gte:function(e,t){return je(e,t),this.s*this.n*W.d>=W.s*W.n*this.d},compare:function(e,t){je(e,t);let r=this.s*this.n*W.d-W.s*W.n*this.d;return(te<r)-(r<te)},ceil:function(e){return e=at**BigInt(e||0),Le(Dt(this.s*e*this.n/this.d)+(e*this.n%this.d>te&&this.s>=te?le:te),e)},floor:function(e){return e=at**BigInt(e||0),Le(Dt(this.s*e*this.n/this.d)-(e*this.n%this.d>te&&this.s<te?le:te),e)},round:function(e){return e=at**BigInt(e||0),Le(Dt(this.s*e*this.n/this.d)+this.s*((this.s>=te?le:te)+wr*(e*this.n%this.d)>this.d?le:te),e)},roundTo:function(e,t){je(e,t);const r=this.n*W.d,n=this.d*W.n,i=r%n;let u=Dt(r/n);return i+i>=n&&u++,Le(this.s*u*W.n,W.d)},divisible:function(e,t){return je(e,t),!(!(W.n*this.d)||this.n*W.d%(W.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,r=this.d;e=e||15;let n=Tl(t,r),i=Ll(t,r,n),u=this.s<te?"-":"";if(u+=Dt(t/r),t%=r,t*=at,t&&(u+="."),n){for(let a=i;a--;)u+=Dt(t/r),t%=r,t*=at;u+="(";for(let a=n;a--;)u+=Dt(t/r),t%=r,t*=at;u+=")"}else for(let a=e;t&&a--;)u+=Dt(t/r),t%=r,t*=at;return u},toFraction:function(e){let t=this.n,r=this.d,n=this.s<te?"-":"";if(r===le)n+=t;else{let i=Dt(t/r);e&&i>te&&(n+=i,n+=" ",t%=r),n+=t,n+="/",n+=r}return n},toLatex:function(e){let t=this.n,r=this.d,n=this.s<te?"-":"";if(r===le)n+=t;else{let i=Dt(t/r);e&&i>te&&(n+=i,t%=r),n+="\\frac{",n+=t,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let e=this.n,t=this.d,r=[];do{r.push(Dt(e/t));let n=e%t;e=t,t=n}while(e!==le);return r},simplify:function(e){const t=BigInt(1/(e||.001)|0),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let u=Le(n[i-1],le);for(let o=i-2;o>=0;o--)u=u.inverse().add(n[o]);let a=u.sub(r);if(a.n*t<a.d)return u.mul(this.s)}return this}};var Il="Fraction",Pl=[],Ol=ee(Il,Pl,()=>(Object.defineProperty(pt,"name",{value:"Fraction"}),pt.prototype.constructor=pt,pt.prototype.type="Fraction",pt.prototype.isFraction=!0,pt.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},pt.fromJSON=function(e){return new pt(e)},pt),{isClass:!0}),Rl="Matrix",$l=[],zl=ee(Rl,$l,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function Tn(e,t,r){var n=e.constructor,i=new n(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Oe(r))throw new Error("size must be an integer");if(e.greaterThan(i.pow(r-1).sub(1))||e.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(r))),u="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(u);case 8:return"".concat(e.toOctal()).concat(u);case 16:return"".concat(e.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(t," not supported "))}}function ql(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=ku(t);switch(r){case"fixed":return Ul(e,n);case"exponential":return xi(e,n);case"engineering":return kl(e,n);case"bin":return Tn(e,2,i);case"oct":return Tn(e,8,i);case"hex":return Tn(e,16,i);case"auto":{var u=Ni(t==null?void 0:t.lowerExp,-3),a=Ni(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var o,s=e.toSignificantDigits(n),c=s.e;return c>=u&&c<a?o=s.toFixed():o=xi(e,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var l=arguments[2],h=arguments[4];return l!=="."?l+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function kl(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)),u=i.toPrecision(t);if(u.includes("e")){var a=e.constructor;u=new a(u).toFixed()}return u+"e"+(r>=0?"+":"")+n.toString()}function xi(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Ul(e,t){return e.toFixed(t)}function Ni(e,t){return Ne(e)?e:Te(e)?e.toNumber():t}function ze(e,t){var r=Hl(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function Hl(e,t){if(typeof e=="number")return qn(e,t);if(Te(e))return ql(e,t);if(Vl(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return ta(e,t);if(dt(e))return Ti(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>Ti(n)+": "+ze(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function Ti(e){for(var t=String(e),r="",n=0;n<t.length;){var i=t.charAt(n);r+=i in Li?Li[i]:i,n++}return'"'+r+'"'}var Li={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ta(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=ta(e[i],t);return r+="]",r}else return ze(e,t)}function Vl(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function pe(e,t,r){if(!(this instanceof pe))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}pe.prototype=new RangeError;pe.prototype.constructor=RangeError;pe.prototype.name="DimensionError";pe.prototype.isDimensionError=!0;function Wt(e,t,r){if(!(this instanceof Wt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Wt.prototype=new RangeError;Wt.prototype.constructor=RangeError;Wt.prototype.name="IndexError";Wt.prototype.isIndexError=!0;function Ke(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function ra(e,t,r){var n,i=e.length;if(i!==t[r])throw new pe(i,t[r]);if(r<t.length-1){var u=r+1;for(n=0;n<i;n++){var a=e[n];if(!Array.isArray(a))throw new pe(t.length-1,t.length,"<");ra(e[n],t,u)}}else for(n=0;n<i;n++)if(Array.isArray(e[n]))throw new pe(t.length+1,t.length,">")}function Ii(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new pe(e.length,0)}else ra(e,t,0)}function rn(e,t){var r=e.isMatrix?e._size:Ke(e),n=t._sourceSize;n.forEach((i,u)=>{if(i!==null&&i!==r[u])throw new pe(i,r[u])})}function Me(e,t){if(e!==void 0){if(!Ne(e)||!Oe(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Wt(e,t)}}function or(e){for(var t=0;t<e._dimensions.length;++t){var r=e._dimensions[t];if(r._data&&Se(r._data)){if(r._size[0]===0)return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(dt(r)&&r.length===0)return!0}return!1}function Er(e,t,r){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!Ne(i)||!Oe(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ze(t)+")")}),(Ne(e)||Te(e))&&(e=[e]);var n=r!==void 0?r:0;return Wn(e,t,0,n),e}function Wn(e,t,r,n){var i,u,a=e.length,o=t[r],s=Math.min(a,o);if(e.length=o,r<t.length-1){var c=r+1;for(i=0;i<s;i++)u=e[i],Array.isArray(u)||(u=[u],e[i]=u),Wn(u,t,c,n);for(i=s;i<o;i++)u=[],e[i]=u,Wn(u,t,c,n)}else{for(i=0;i<s;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=s;i<o;i++)e[i]=n}}function na(e,t){var r=Wl(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new pe(0,n,"!=");t=ui(t,n);var i=ia(t);if(n!==i)throw new pe(i,n,"!=");try{return Zl(r,t)}catch(u){throw u instanceof pe?new pe(i,n,"!="):u}}function ui(e,t){var r=ia(e),n=e.slice(),i=-1,u=e.indexOf(i),a=e.indexOf(i,u+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var o=u>=0,s=t%r===0;if(o)if(s)n[u]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function ia(e){return e.reduce((t,r)=>t*r,1)}function Zl(e,t){for(var r=e,n,i=t.length-1;i>0;i--){var u=t[i];n=[];for(var a=r.length/u,o=0;o<a;o++)n.push(r.slice(o*u,(o+1)*u));r=n}return r}function ua(e,t,r,n){var i=n||Ke(e);if(r)for(var u=0;u<r;u++)e=[e],i.unshift(1);for(e=aa(e,t,0);i.length<t;)i.push(1);return e}function aa(e,t,r){var n,i;if(Array.isArray(e)){var u=r+1;for(n=0,i=e.length;n<i;n++)e[n]=aa(e[n],t,u)}else for(var a=r;a<t;a++)e=[e];return e}function Wl(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(n){Array.isArray(n)?n.forEach(r):t.push(n)}),t}function yn(e,t){for(var r,n=0,i=0;i<e.length;i++){var u=e[i],a=Array.isArray(u);if(i===0&&a&&(n=u.length),a&&u.length!==n)return;var o=a?yn(u,t):t(u);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function oa(e,t,r,n){if(n<r){if(e.length!==t.length)throw new pe(e.length,t.length);for(var i=[],u=0;u<e.length;u++)i[u]=oa(e[u],t[u],r,n+1);return i}else return e.concat(t)}function sa(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(r,n){return oa(r,n,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function ca(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=t.map(p=>p.length),i=Math.max(...n),u=new Array(i).fill(null),a=0;a<t.length;a++)for(var o=t[a],s=n[a],c=0;c<s;c++){var l=i-s+c;o[c]>u[l]&&(u[l]=o[c])}for(var h=0;h<t.length;h++)la(t[h],u);return u}function la(e,t){for(var r=t.length,n=e.length,i=0;i<n;i++){var u=r-n+i;if(e[i]<t[u]&&e[i]>1||e[i]>t[u])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(n," with size ").concat(e[i]," to size ").concat(t[u]))}}function jn(e,t){var r=Ke(e);if(zt(r,t))return e;la(r,t);var n=ca(r,t),i=n.length,u=[...Array(i-r.length).fill(1),...r],a=Gl(e);r.length<i&&(a=na(a,u),r=Ke(a));for(var o=0;o<i;o++)r[o]<n[o]&&(a=jl(a,n[o],o),r=Ke(a));return a}function jl(e,t,r){return sa(...Array(t).fill(e),r)}function fa(e,t){if(!Array.isArray(e))throw new Error("Array expected");var r=Ke(e);if(t.length!==r.length)throw new pe(t.length,r.length);for(var n=0;n<t.length;n++)Me(t[n],r[n]);return t.reduce((i,u)=>i[u],e)}function Gl(e){return Jr([],e)}function nn(e,t,r){if(Xr.isTypedFunction(e)){var n=(t.isMatrix?t.size():Ke(t)).map(()=>0),i=t.isMatrix?t.get(n):fa(t,n),u=Object.keys(e.signatures).length===1,a=Jl(e,i,n,t),o=u?Object.values(e.signatures)[0]:e;return a>=1&&a<=3?function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return Pi(o,c.slice(0,a),r,e.name)}:function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return Pi(o,c,r,e.name)}}return e}function Jl(e,t,r,n){for(var i=[t,r,n],u=3;u>0;u--){var a=i.slice(0,u);if(Xr.resolve(e,a)!==null)return u}}function Pi(e,t,r,n){try{return e(...t)}catch(i){Yl(i,t,r,n)}}function Yl(e,t,r,n){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var u=[];throw u.push("value: ".concat(Et(t[0]))),t.length>=2&&u.push("index: ".concat(Et(t[1]))),t.length>=3&&u.push("array: ".concat(Et(t[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(u.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(e.message))}var Kl="DenseMatrix",Xl=["Matrix"],Ql=ee(Kl,Xl,e=>{var{Matrix:t}=e;function r(l,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!dt(h))throw new Error("Invalid datatype: "+h);if(Ie(l))l.type==="DenseMatrix"?(this._data=xe(l._data),this._size=xe(l._size),this._datatype=h||l._datatype):(this._data=l.toArray(),this._size=l.size(),this._datatype=h||l._datatype);else if(l&&Se(l.data)&&Se(l.size))this._data=l.data,this._size=l.size,Ii(this._data,this._size),this._datatype=h||l.datatype;else if(Se(l))this._data=c(l),this._size=Ke(this._data),Ii(this._data,this._size),this._datatype=h;else{if(l)throw new TypeError("Unsupported type of data ("+Et(l)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new t,r.prototype.createDenseMatrix=function(l,h){return new r(l,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return yn(this._data,Et)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(l,h){return new r(l,h)},r.prototype.subset=function(l,h,p){switch(arguments.length){case 1:return n(this,l);case 2:case 3:return u(this,l,h,p);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(l){return fa(this._data,l)},r.prototype.set=function(l,h,p){if(!Se(l))throw new TypeError("Array expected");if(l.length<this._size.length)throw new pe(l.length,this._size.length,"<");var d,v,f,m=l.map(function(E){return E+1});s(this,m,p);var g=this._data;for(d=0,v=l.length-1;d<v;d++)f=l[d],Me(f,g.length),g=g[f];return f=l[l.length-1],Me(f,g.length),g[f]=h,this};function n(l,h){if(!pn(h))throw new TypeError("Invalid index");var p=h.isScalar();if(p)return l.get(h.min());var d=h.size();if(d.length!==l._size.length)throw new pe(d.length,l._size.length);for(var v=h.min(),f=h.max(),m=0,g=l._size.length;m<g;m++)Me(v[m],l._size[m]),Me(f[m],l._size[m]);return new r(i(l._data,h,d.length,0),l._datatype)}function i(l,h,p,d){var v=d===p-1,f=h.dimension(d);return v?f.map(function(m){return Me(m,l.length),l[m]}).valueOf():f.map(function(m){Me(m,l.length);var g=l[m];return i(g,h,p,d+1)}).valueOf()}function u(l,h,p,d){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var v=h.size(),f=h.isScalar(),m;if(Ie(p)?(m=p.size(),p=p.valueOf()):m=Ke(p),f){if(m.length!==0)throw new TypeError("Scalar expected");l.set(h.min(),p,d)}else{if(!zt(m,v))try{m.length===0?p=jn([p],v):p=jn(p,v),m=Ke(p)}catch{}if(v.length<l._size.length)throw new pe(v.length,l._size.length,"<");if(m.length<v.length){for(var g=0,E=0;v[g]===1&&m[g]===1;)g++;for(;v[g]===1;)E++,g++;p=ua(p,v.length,E,m)}if(!zt(v,m))throw new pe(v,m,">");var D=h.max().map(function(y){return y+1});s(l,D,d);var F=v.length,_=0;a(l._data,h,p,F,_)}return l}function a(l,h,p,d,v){var f=v===d-1,m=h.dimension(v);f?m.forEach(function(g,E){Me(g),l[g]=p[E[0]]}):m.forEach(function(g,E){Me(g),a(l[g],h,p[E[0]],d,v+1)})}r.prototype.resize=function(l,h,p){if(!Kr(l))throw new TypeError("Array or Matrix expected");var d=l.valueOf().map(f=>Array.isArray(f)&&f.length===1?f[0]:f),v=p?this.clone():this;return o(v,d,h)};function o(l,h,p){if(h.length===0){for(var d=l._data;Se(d);)d=d[0];return d}return l._size=h.slice(0),l._data=Er(l._data,l._size,p),l}r.prototype.reshape=function(l,h){var p=h?this.clone():this;p._data=na(p._data,l);var d=p._size.reduce((v,f)=>v*f);return p._size=ui(l,d),p};function s(l,h,p){for(var d=l._size.slice(0),v=!1;d.length<h.length;)d.push(0),v=!0;for(var f=0,m=h.length;f<m;f++)h[f]>d[f]&&(d[f]=h[f],v=!0);v&&o(l,d,p)}r.prototype.clone=function(){var l=new r({data:xe(this._data),size:xe(this._size),datatype:this._datatype});return l},r.prototype.size=function(){return this._size.slice(0)},r.prototype._forEach=function(l){var h=this,p=h.size();if(p.length===1){for(var d=0;d<p[0];d++)l(h._data,d,[d]);return}var v=Array(p.length).fill(0),f=Array(p.length-1),m=f.length-1;f[0]=h._data[0];for(var g=0;g<m;g++)f[g+1]=f[g][0];for(v[m]=-1;;){var E=void 0;for(E=m;E>=0;E--){if(v[E]++,v[E]===p[E]){v[E]=0;continue}f[E]=E===0?h._data[v[E]]:f[E-1][v[E]];for(var D=E;D<m;D++)f[D+1]=f[D][0];for(var F=0;F<p[f.length];F++)v[f.length]=F,l(f[m],F,v.slice(0));break}if(E===-1)break}},r.prototype.map=function(l){var h=this,p=new r(h),d=nn(l,h._data,"map");return p._forEach(function(v,f,m){v[f]=d(v[f],m,h)}),p},r.prototype.forEach=function(l){var h=this,p=nn(l,h._data,"map");h._forEach(function(d,v,f){p(d[v],f,h)})},r.prototype[Symbol.iterator]=function*(){var l=function*(p,d){if(Se(p))for(var v=0;v<p.length;v++)yield*l(p[v],d.concat(v));else yield{value:p,index:d}};yield*l(this._data,[])},r.prototype.rows=function(){var l=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var d of p)l.push(new r([d],this._datatype));return l},r.prototype.columns=function(){var l=this,h=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,v=function(g){var E=d.map(D=>[D[g]]);h.push(new r(E,l._datatype))},f=0;f<p[1];f++)v(f);return h},r.prototype.toArray=function(){return xe(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(l){return ze(this._data,l)},r.prototype.toString=function(){return ze(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(l){if(l){if(Te(l)&&(l=l.toNumber()),!Ne(l)||!Oe(l))throw new TypeError("The parameter k must be an integer number")}else l=0;for(var h=l>0?l:0,p=l<0?-l:0,d=this._size[0],v=this._size[1],f=Math.min(d-p,v-h),m=[],g=0;g<f;g++)m[g]=this._data[g+p][g+h];return new r({data:m,size:[f],datatype:this._datatype})},r.diagonal=function(l,h,p,d){if(!Se(l))throw new TypeError("Array expected, size parameter");if(l.length!==2)throw new Error("Only two dimensions matrix are supported");if(l=l.map(function(A){if(Te(A)&&(A=A.toNumber()),!Ne(A)||!Oe(A)||A<1)throw new Error("Size values must be positive integers");return A}),p){if(Te(p)&&(p=p.toNumber()),!Ne(p)||!Oe(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var v=p>0?p:0,f=p<0?-p:0,m=l[0],g=l[1],E=Math.min(m-f,g-v),D;if(Se(h)){if(h.length!==E)throw new Error("Invalid value array length");D=function(b){return h[b]}}else if(Ie(h)){var F=h.size();if(F.length!==1||F[0]!==E)throw new Error("Invalid matrix length");D=function(b){return h.get([b])}}else D=function(){return h};d||(d=Te(D(0))?D(0).mul(0):0);var _=[];if(l.length>0){_=Er(_,l,d);for(var y=0;y<E;y++)_[y+f][y+v]=D(y)}return new r({data:_,size:[m,g]})},r.fromJSON=function(l){return new r(l)},r.prototype.swapRows=function(l,h){if(!Ne(l)||!Oe(l)||!Ne(h)||!Oe(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Me(l,this._size[0]),Me(h,this._size[0]),r._swapRows(l,h,this._data),this},r._swapRows=function(l,h,p){var d=p[l];p[l]=p[h],p[h]=d};function c(l){return Ie(l)?c(l.valueOf()):Se(l)?l.map(c):l}return r},{isClass:!0});function Bt(e,t,r){return e&&typeof e.map=="function"?e.map(function(n){return Bt(n,t)}):t(e)}var Oi="isInteger",ef=["typed"],tf=ee(Oi,ef,e=>{var{typed:t}=e;return t(Oi,{number:Oe,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":t.referToSelf(r=>n=>Bt(n,r))})}),ha="number",ai="number, number";function pa(e){return Math.abs(e)}pa.signature=ha;function da(e,t){return e+t}da.signature=ai;function ma(e,t){return e-t}ma.signature=ai;function va(e,t){return e*t}va.signature=ai;function ga(e){return-e}ga.signature=ha;var rf="number";function Da(e){return e>0}Da.signature=rf;function lr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(r),n))}var Ri="isPositive",nf=["typed","config"],uf=ee(Ri,nf,e=>{var{typed:t,config:r}=e;return t(Ri,{number:n=>Lt(n,0,r.relTol,r.absTol)?!1:Da(n),BigNumber:n=>lr(n,new n.constructor(0),r.relTol,r.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:t.referToSelf(n=>i=>t.find(n,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(n=>i=>Bt(i,n))})}),$i="isZero",af=["typed","equalScalar"],of=ee($i,af,e=>{var{typed:t,equalScalar:r}=e;return t($i,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:t.referToSelf(n=>i=>t.find(n,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(n=>i=>Bt(i,n))})});function sf(e,t,r,n){return Lt(e.re,t.re,r,n)&&Lt(e.im,t.im,r,n)}var Mr=ee("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),un="equalScalar",cf=["typed","config"],lf=ee(un,cf,e=>{var{typed:t,config:r}=e,n=Mr({typed:t});return t(un,{"boolean, boolean":function(u,a){return u===a},"number, number":function(u,a){return Lt(u,a,r.relTol,r.absTol)},"BigNumber, BigNumber":function(u,a){return u.eq(a)||lr(u,a,r.relTol,r.absTol)},"bigint, bigint":function(u,a){return u===a},"Fraction, Fraction":function(u,a){return u.equals(a)},"Complex, Complex":function(u,a){return sf(u,a,r.relTol,r.absTol)}},n)});ee(un,["typed","config"],e=>{var{typed:t,config:r}=e;return t(un,{"number, number":function(i,u){return Lt(i,u,r.relTol,r.absTol)}})});var ff="SparseMatrix",hf=["typed","equalScalar","Matrix"],pf=ee(ff,hf,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function i(f,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!dt(m))throw new Error("Invalid datatype: "+m);if(Ie(f))u(this,f,m);else if(f&&Se(f.index)&&Se(f.ptr)&&Se(f.size))this._values=f.values,this._index=f.index,this._ptr=f.ptr,this._size=f.size,this._datatype=m||f.datatype;else if(Se(f))a(this,f,m);else{if(f)throw new TypeError("Unsupported type of data ("+Et(f)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function u(f,m,g){m.type==="SparseMatrix"?(f._values=m._values?xe(m._values):void 0,f._index=xe(m._index),f._ptr=xe(m._ptr),f._size=xe(m._size),f._datatype=g||m._datatype):a(f,m.valueOf(),g||m._datatype)}function a(f,m,g){f._values=[],f._index=[],f._ptr=[],f._datatype=g;var E=m.length,D=0,F=r,_=0;if(dt(g)&&(F=t.find(r,[g,g])||r,_=t.convert(0,g)),E>0){var y=0;do{f._ptr.push(f._index.length);for(var A=0;A<E;A++){var b=m[A];if(Se(b)){if(y===0&&D<b.length&&(D=b.length),y<b.length){var B=b[y];F(B,_)||(f._values.push(B),f._index.push(A))}}else y===0&&D<1&&(D=1),F(b,_)||(f._values.push(b),f._index.push(A))}y++}while(y<D)}f._ptr.push(f._index.length),f._size=[E,D]}i.prototype=new n,i.prototype.createSparseMatrix=function(f,m){return new i(f,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return yn(this._values,Et)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(f,m){return new i(f,m)},i.prototype.density=function(){var f=this._size[0],m=this._size[1];return f!==0&&m!==0?this._index.length/(f*m):0},i.prototype.subset=function(f,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,f);case 2:case 3:return s(this,f,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function o(f,m){if(!pn(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return f.get(m.min());var E=m.size();if(E.length!==f._size.length)throw new pe(E.length,f._size.length);var D,F,_,y,A=m.min(),b=m.max();for(D=0,F=f._size.length;D<F;D++)Me(A[D],f._size[D]),Me(b[D],f._size[D]);var B=f._values,S=f._index,L=f._ptr,x=m.dimension(0),Y=m.dimension(1),k=[],Z=[];x.forEach(function(P,J){Z[P]=J[0],k[P]=!0});var T=B?[]:void 0,Q=[],I=[];return Y.forEach(function(P){for(I.push(Q.length),_=L[P],y=L[P+1];_<y;_++)D=S[_],k[D]===!0&&(Q.push(Z[D]),T&&T.push(B[_]))}),I.push(Q.length),new i({values:T,index:Q,ptr:I,size:E,datatype:f._datatype})}function s(f,m,g,E){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var D=m.size(),F=m.isScalar(),_;if(Ie(g)?(_=g.size(),g=g.toArray()):_=Ke(g),F){if(_.length!==0)throw new TypeError("Scalar expected");f.set(m.min(),g,E)}else{if(D.length!==1&&D.length!==2)throw new pe(D.length,f._size.length,"<");if(_.length<D.length){for(var y=0,A=0;D[y]===1&&_[y]===1;)y++;for(;D[y]===1;)A++,y++;g=ua(g,D.length,A,_)}if(!zt(D,_))throw new pe(D,_,">");if(D.length===1){var b=m.dimension(0);b.forEach(function(L,x){Me(L),f.set([L,0],g[x[0]],E)})}else{var B=m.dimension(0),S=m.dimension(1);B.forEach(function(L,x){Me(L),S.forEach(function(Y,k){Me(Y),f.set([L,Y],g[x[0]][k[0]],E)})})}}return f}i.prototype.get=function(f){if(!Se(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new pe(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=f[0],g=f[1];Me(m,this._size[0]),Me(g,this._size[1]);var E=c(m,this._ptr[g],this._ptr[g+1],this._index);return E<this._ptr[g+1]&&this._index[E]===m?this._values[E]:0},i.prototype.set=function(f,m,g){if(!Se(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new pe(f.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var E=f[0],D=f[1],F=this._size[0],_=this._size[1],y=r,A=0;dt(this._datatype)&&(y=t.find(r,[this._datatype,this._datatype])||r,A=t.convert(0,this._datatype)),(E>F-1||D>_-1)&&(p(this,Math.max(E+1,F),Math.max(D+1,_),g),F=this._size[0],_=this._size[1]),Me(E,F),Me(D,_);var b=c(E,this._ptr[D],this._ptr[D+1],this._index);return b<this._ptr[D+1]&&this._index[b]===E?y(m,A)?l(b,D,this._values,this._index,this._ptr):this._values[b]=m:y(m,A)||h(b,E,D,m,this._values,this._index,this._ptr),this};function c(f,m,g,E){if(g-m===0)return g;for(var D=m;D<g;D++)if(E[D]===f)return D;return m}function l(f,m,g,E,D){g.splice(f,1),E.splice(f,1);for(var F=m+1;F<D.length;F++)D[F]--}function h(f,m,g,E,D,F,_){D.splice(f,0,E),F.splice(f,0,m);for(var y=g+1;y<_.length;y++)_[y]++}i.prototype.resize=function(f,m,g){if(!Kr(f))throw new TypeError("Array or Matrix expected");var E=f.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(E.length!==2)throw new Error("Only two dimensions matrix are supported");E.forEach(function(F){if(!Ne(F)||!Oe(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ze(E)+")")});var D=g?this.clone():this;return p(D,E[0],E[1],m)};function p(f,m,g,E){var D=E||0,F=r,_=0;dt(f._datatype)&&(F=t.find(r,[f._datatype,f._datatype])||r,_=t.convert(0,f._datatype),D=t.convert(D,f._datatype));var y=!F(D,_),A=f._size[0],b=f._size[1],B,S,L;if(g>b){for(S=b;S<g;S++)if(f._ptr[S]=f._values.length,y)for(B=0;B<A;B++)f._values.push(D),f._index.push(B);f._ptr[g]=f._values.length}else g<b&&(f._ptr.splice(g+1,b-g),f._values.splice(f._ptr[g],f._values.length),f._index.splice(f._ptr[g],f._index.length));if(b=g,m>A){if(y){var x=0;for(S=0;S<b;S++){f._ptr[S]=f._ptr[S]+x,L=f._ptr[S+1]+x;var Y=0;for(B=A;B<m;B++,Y++)f._values.splice(L+Y,0,D),f._index.splice(L+Y,0,B),x++}f._ptr[b]=f._values.length}}else if(m<A){var k=0;for(S=0;S<b;S++){f._ptr[S]=f._ptr[S]-k;var Z=f._ptr[S],T=f._ptr[S+1]-k;for(L=Z;L<T;L++)B=f._index[L],B>m-1&&(f._values.splice(L,1),f._index.splice(L,1),k++)}f._ptr[S]=f._values.length}return f._size[0]=m,f._size[1]=g,f}i.prototype.reshape=function(f,m){if(!Se(f))throw new TypeError("Array expected");if(f.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");f.forEach(function(P){if(!Ne(P)||!Oe(P)||P<=-2||P===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ze(f)+")")});var g=this._size[0]*this._size[1];f=ui(f,g);var E=f[0]*f[1];if(g!==E)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var D=m?this.clone():this;if(this._size[0]===f[0]&&this._size[1]===f[1])return D;for(var F=[],_=0;_<D._ptr.length;_++)for(var y=0;y<D._ptr[_+1]-D._ptr[_];y++)F.push(_);for(var A=D._values.slice(),b=D._index.slice(),B=0;B<D._index.length;B++){var S=b[B],L=F[B],x=S*D._size[1]+L;F[B]=x%f[1],b[B]=Math.floor(x/f[1])}D._values.length=0,D._index.length=0,D._ptr.length=f[1]+1,D._size=f.slice();for(var Y=0;Y<D._ptr.length;Y++)D._ptr[Y]=0;for(var k=0;k<A.length;k++){var Z=b[k],T=F[k],Q=A[k],I=c(Z,D._ptr[T],D._ptr[T+1],D._index);h(I,Z,T,Q,D._values,D._index,D._ptr)}return D},i.prototype.clone=function(){var f=new i({values:this._values?xe(this._values):void 0,index:xe(this._index),ptr:xe(this._ptr),size:xe(this._size),datatype:this._datatype});return f},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(f,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,E=this._size[0],D=this._size[1],F=nn(f,g,"map"),_=function(A,b,B){return F(A,[b,B],g)};return d(this,0,E-1,0,D-1,_,m)};function d(f,m,g,E,D,F,_){var y=[],A=[],b=[],B=r,S=0;dt(f._datatype)&&(B=t.find(r,[f._datatype,f._datatype])||r,S=t.convert(0,f._datatype));for(var L=function(se,ve,De){var Ae=F(se,ve,De);B(Ae,S)||(y.push(Ae),A.push(ve))},x=E;x<=D;x++){b.push(y.length);var Y=f._ptr[x],k=f._ptr[x+1];if(_)for(var Z=Y;Z<k;Z++){var T=f._index[Z];T>=m&&T<=g&&L(f._values[Z],T-m,x-E)}else{for(var Q={},I=Y;I<k;I++){var P=f._index[I];Q[P]=f._values[I]}for(var J=m;J<=g;J++){var oe=J in Q?Q[J]:0;L(oe,J-m,x-E)}}}return b.push(y.length),new i({values:y,index:A,ptr:b,size:[g-m+1,D-E+1]})}i.prototype.forEach=function(f,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,E=this._size[0],D=this._size[1],F=nn(f,g,"forEach"),_=0;_<D;_++){var y=this._ptr[_],A=this._ptr[_+1];if(m)for(var b=y;b<A;b++){var B=this._index[b];F(this._values[b],[B,_],g)}else{for(var S={},L=y;L<A;L++){var x=this._index[L];S[x]=this._values[L]}for(var Y=0;Y<E;Y++){var k=Y in S?S[Y]:0;F(k,[Y,_],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var f=this._size[1],m=0;m<f;m++)for(var g=this._ptr[m],E=this._ptr[m+1],D=g;D<E;D++){var F=this._index[D];yield{value:this._values[D],index:[F,m]}}},i.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(f,m,g,E,D){var F=E[0],_=E[1],y=[],A,b;for(A=0;A<F;A++)for(y[A]=[],b=0;b<_;b++)y[A][b]=0;for(b=0;b<_;b++)for(var B=g[b],S=g[b+1],L=B;L<S;L++)A=m[L],y[A][b]=f?D?xe(f[L]):f[L]:1;return y}return i.prototype.format=function(f){for(var m=this._size[0],g=this._size[1],E=this.density(),D="Sparse Matrix ["+ze(m,f)+" x "+ze(g,f)+"] density: "+ze(E,f)+`
`,F=0;F<g;F++)for(var _=this._ptr[F],y=this._ptr[F+1],A=_;A<y;A++){var b=this._index[A];D+=`
    (`+ze(b,f)+", "+ze(F,f)+") ==> "+(this._values?ze(this._values[A],f):"X")}return D},i.prototype.toString=function(){return ze(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(f){if(f){if(Te(f)&&(f=f.toNumber()),!Ne(f)||!Oe(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var m=f>0?f:0,g=f<0?-f:0,E=this._size[0],D=this._size[1],F=Math.min(E-g,D-m),_=[],y=[],A=[];A[0]=0;for(var b=m;b<D&&_.length<F;b++)for(var B=this._ptr[b],S=this._ptr[b+1],L=B;L<S;L++){var x=this._index[L];if(x===b-m+g){_.push(this._values[L]),y[_.length-1]=x-g;break}}return A.push(_.length),new i({values:_,index:y,ptr:A,size:[F,1]})},i.fromJSON=function(f){return new i(f)},i.diagonal=function(f,m,g,E,D){if(!Se(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(Te(P)&&(P=P.toNumber()),!Ne(P)||!Oe(P)||P<1)throw new Error("Size values must be positive integers");return P}),g){if(Te(g)&&(g=g.toNumber()),!Ne(g)||!Oe(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var F=r,_=0;dt(D)&&(F=t.find(r,[D,D])||r,_=t.convert(0,D));var y=g>0?g:0,A=g<0?-g:0,b=f[0],B=f[1],S=Math.min(b-A,B-y),L;if(Se(m)){if(m.length!==S)throw new Error("Invalid value array length");L=function(J){return m[J]}}else if(Ie(m)){var x=m.size();if(x.length!==1||x[0]!==S)throw new Error("Invalid matrix length");L=function(J){return m.get([J])}}else L=function(){return m};for(var Y=[],k=[],Z=[],T=0;T<B;T++){Z.push(Y.length);var Q=T-y;if(Q>=0&&Q<S){var I=L(Q);F(I,_)||(k.push(Q+A),Y.push(I))}}return Z.push(Y.length),new i({values:Y,index:k,ptr:Z,size:[b,B]})},i.prototype.swapRows=function(f,m){if(!Ne(f)||!Oe(f)||!Ne(m)||!Oe(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Me(f,this._size[0]),Me(m,this._size[0]),i._swapRows(f,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(f,m,g,E,D){for(var F=E[f],_=E[f+1],y=F;y<_;y++)D(g[y],m[y])},i._swapRows=function(f,m,g,E,D,F){for(var _=0;_<g;_++){var y=F[_],A=F[_+1],b=c(f,y,A,D),B=c(m,y,A,D);if(b<A&&B<A&&D[b]===f&&D[B]===m){if(E){var S=E[b];E[b]=E[B],E[B]=S}continue}if(b<A&&D[b]===f&&(B>=A||D[B]!==m)){var L=E?E[b]:void 0;D.splice(B,0,m),E&&E.splice(B,0,L),D.splice(B<=b?b+1:b,1),E&&E.splice(B<=b?b+1:b,1);continue}if(B<A&&D[B]===m&&(b>=A||D[b]!==f)){var x=E?E[B]:void 0;D.splice(b,0,f),E&&E.splice(b,0,x),D.splice(b<=B?B+1:B,1),E&&E.splice(b<=B?B+1:B,1)}}},i},{isClass:!0}),df="number",mf=["typed"];function vf(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],n=t[2],i=t[3];return{input:e,radix:r,integerPart:n,fractionalPart:i}}else return null}function gf(e){for(var t=parseInt(e.integerPart,e.radix),r=0,n=0;n<e.fractionalPart.length;n++){var i=parseInt(e.fractionalPart[n],e.radix);r+=i/Math.pow(e.radix,n+1)}var u=t+r;if(isNaN(u))throw new SyntaxError('String "'+e.input+'" is not a valid number');return u}var Df=ee(df,mf,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var u=vf(i);if(u)return gf(u);var a=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),i=o[1]);var s=Number(i);if(isNaN(s))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(s>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));s>=2**(a-1)&&(s=s-2**a)}return s},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),null:function(i){return 0},"Unit, string | Unit":function(i,u){return i.toNumber(u)},"Array | Matrix":t.referToSelf(n=>i=>Bt(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),yf="bignumber",_f=["typed","BigNumber"],wf=ee(yf,_f,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var u=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(u){var a=u[2],o=r(u[1]),s=new r(2).pow(Number(a));if(o.gt(s.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var c=new r(2).pow(Number(a)-1);return o.gte(c)?o.sub(s):o}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":t.referToSelf(n=>i=>Bt(i,n))})}),Ef="fraction",Ff=["typed","Fraction"],bf=ee(Ef,Ff,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,u){return new r(i,u)},"bigint, bigint":function(i,u){return new r(i,u)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(n=>i=>{var u=i.clone();return u.value=n(i.value),u}),Object:function(i){return new r(i)},"Array | Matrix":t.referToSelf(n=>i=>Bt(i,n))})}),zi="matrix",Cf=["typed","Matrix","DenseMatrix","SparseMatrix"],Af=ee(zi,Cf,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(zi,{"":function(){return u([])},string:function(o){return u([],o)},"string, string":function(o,s){return u([],o,s)},Array:function(o){return u(o)},Matrix:function(o){return u(o,o.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(a,o,s){if(o==="dense"||o==="default"||o===void 0)return new n(a,s);if(o==="sparse")return new i(a,s);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),qi="unaryMinus",Bf=["typed"],Mf=ee(qi,Bf,e=>{var{typed:t}=e;return t(qi,{number:ga,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:t.referToSelf(r=>n=>{var i=n.clone();return i.value=t.find(r,i.valueType())(n.value),i}),"Array | Matrix":t.referToSelf(r=>n=>Bt(n,r))})}),ki="abs",Sf=["typed"],xf=ee(ki,Sf,e=>{var{typed:t}=e;return t(ki,{number:pa,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":t.referToSelf(r=>n=>Bt(n,r))})}),Ui="addScalar",Nf=["typed"],Tf=ee(Ui,Nf,e=>{var{typed:t}=e;return t(Ui,{"number, number":da,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),Hi="subtractScalar",Lf=["typed"],If=ee(Hi,Lf,e=>{var{typed:t}=e;return t(Hi,{"number, number":ma,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),Pf="matAlgo11xS0s",Of=["typed","equalScalar"],Rf=ee(Pf,Of,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a,o){var s=i._values,c=i._index,l=i._ptr,h=i._size,p=i._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=h[0],v=h[1],f,m=r,g=0,E=a;typeof p=="string"&&(f=p,m=t.find(r,[f,f]),g=t.convert(0,f),u=t.convert(u,f),E=t.find(a,[f,f]));for(var D=[],F=[],_=[],y=0;y<v;y++){_[y]=F.length;for(var A=l[y],b=l[y+1],B=A;B<b;B++){var S=c[B],L=o?E(u,s[B]):E(s[B],u);m(L,g)||(F.push(S),D.push(L))}}return _[v]=F.length,i.createSparseMatrix({values:D,index:F,ptr:_,size:[d,v],datatype:f})}}),$f="matAlgo12xSfs",zf=["typed","DenseMatrix"],Sr=ee($f,zf,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,u,a,o){var s=i._values,c=i._index,l=i._ptr,h=i._size,p=i._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=h[0],v=h[1],f,m=a;typeof p=="string"&&(f=p,u=t.convert(u,f),m=t.find(a,[f,f]));for(var g=[],E=[],D=[],F=0;F<v;F++){for(var _=F+1,y=l[F],A=l[F+1],b=y;b<A;b++){var B=c[b];E[B]=s[b],D[B]=_}for(var S=0;S<d;S++)F===0&&(g[S]=[]),D[S]===_?g[S][F]=o?m(u,E[S]):m(E[S],u):g[S][F]=o?m(u,0):m(0,u)}return new r({data:g,size:[d,v],datatype:f})}}),qf="matAlgo14xDs",kf=["typed"],ya=ee(qf,kf,e=>{var{typed:t}=e;return function(i,u,a,o){var s=i._data,c=i._size,l=i._datatype,h,p=a;typeof l=="string"&&(h=l,u=t.convert(u,h),p=t.find(a,[h,h]));var d=c.length>0?r(p,0,c,c[0],s,u,o):[];return i.createDenseMatrix({data:d,size:xe(c),datatype:h})};function r(n,i,u,a,o,s,c){var l=[];if(i===u.length-1)for(var h=0;h<a;h++)l[h]=c?n(s,o[h]):n(o[h],s);else for(var p=0;p<a;p++)l[p]=r(n,i+1,u,u[i+1],o[p],s,c);return l}}),Uf="matAlgo03xDSf",Hf=["typed"],xr=ee(Uf,Hf,e=>{var{typed:t}=e;return function(n,i,u,a){var o=n._data,s=n._size,c=n._datatype||n.getDataType(),l=i._values,h=i._index,p=i._ptr,d=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(s.length!==d.length)throw new pe(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=s[0],m=s[1],g,E=0,D=u;typeof c=="string"&&c===v&&c!=="mixed"&&(g=c,E=t.convert(0,g),D=t.find(u,[g,g]));for(var F=[],_=0;_<f;_++)F[_]=[];for(var y=[],A=[],b=0;b<m;b++){for(var B=b+1,S=p[b],L=p[b+1],x=S;x<L;x++){var Y=h[x];y[Y]=a?D(l[x],o[Y][b]):D(o[Y][b],l[x]),A[Y]=B}for(var k=0;k<f;k++)A[k]===B?F[k][b]=y[k]:F[k][b]=a?D(E,o[k][b]):D(o[k][b],E)}return n.createDenseMatrix({data:F,size:[f,m],datatype:c===n._datatype&&v===i._datatype?g:void 0})}}),Vf="matAlgo05xSfSf",Zf=["typed","equalScalar"],Wf=ee(Vf,Zf,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var o=i._values,s=i._index,c=i._ptr,l=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),p=u._values,d=u._index,v=u._ptr,f=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(l.length!==f.length)throw new pe(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var g=l[0],E=l[1],D,F=r,_=0,y=a;typeof h=="string"&&h===m&&h!=="mixed"&&(D=h,F=t.find(r,[D,D]),_=t.convert(0,D),y=t.find(a,[D,D]));var A=o&&p?[]:void 0,b=[],B=[],S=A?[]:void 0,L=A?[]:void 0,x=[],Y=[],k,Z,T,Q;for(Z=0;Z<E;Z++){B[Z]=b.length;var I=Z+1;for(T=c[Z],Q=c[Z+1];T<Q;T++)k=s[T],b.push(k),x[k]=I,S&&(S[k]=o[T]);for(T=v[Z],Q=v[Z+1];T<Q;T++)k=d[T],x[k]!==I&&b.push(k),Y[k]=I,L&&(L[k]=p[T]);if(A)for(T=B[Z];T<b.length;){k=b[T];var P=x[k],J=Y[k];if(P===I||J===I){var oe=P===I?S[k]:_,ae=J===I?L[k]:_,se=y(oe,ae);F(se,_)?b.splice(T,1):(A.push(se),T++)}}}return B[E]=b.length,i.createSparseMatrix({values:A,index:b,ptr:B,size:[g,E],datatype:h===i._datatype&&m===u._datatype?D:void 0})}}),jf="matAlgo13xDD",Gf=["typed"],Jf=ee(jf,Gf,e=>{var{typed:t}=e;return function(i,u,a){var o=i._data,s=i._size,c=i._datatype,l=u._data,h=u._size,p=u._datatype,d=[];if(s.length!==h.length)throw new pe(s.length,h.length);for(var v=0;v<s.length;v++){if(s[v]!==h[v])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+h+")");d[v]=s[v]}var f,m=a;typeof c=="string"&&c===p&&(f=c,m=t.find(a,[f,f]));var g=d.length>0?r(m,0,d,d[0],o,l):[];return i.createDenseMatrix({data:g,size:d,datatype:f})};function r(n,i,u,a,o,s){var c=[];if(i===u.length-1)for(var l=0;l<a;l++)c[l]=n(o[l],s[l]);else for(var h=0;h<a;h++)c[h]=r(n,i+1,u,u[i+1],o[h],s[h]);return c}});function We(e,t){if(zt(e.size(),t.size()))return[e,t];var r=ca(e.size(),t.size());return[e,t].map(n=>Yf(n,r))}function Yf(e,t){return zt(e.size(),t)?e:e.create(jn(e.valueOf(),t),e.datatype())}var Kf="matrixAlgorithmSuite",Xf=["typed","matrix"],fr=ee(Kf,Xf,e=>{var{typed:t,matrix:r}=e,n=Jf({typed:t}),i=ya({typed:t});return function(a){var o=a.elop,s=a.SD||a.DS,c;o?(c={"DenseMatrix, DenseMatrix":(d,v)=>n(...We(d,v),o),"Array, Array":(d,v)=>n(...We(r(d),r(v)),o).valueOf(),"Array, DenseMatrix":(d,v)=>n(...We(r(d),v),o),"DenseMatrix, Array":(d,v)=>n(...We(d,r(v)),o)},a.SS&&(c["SparseMatrix, SparseMatrix"]=(d,v)=>a.SS(...We(d,v),o,!1)),a.DS&&(c["DenseMatrix, SparseMatrix"]=(d,v)=>a.DS(...We(d,v),o,!1),c["Array, SparseMatrix"]=(d,v)=>a.DS(...We(r(d),v),o,!1)),s&&(c["SparseMatrix, DenseMatrix"]=(d,v)=>s(...We(v,d),o,!0),c["SparseMatrix, Array"]=(d,v)=>s(...We(r(v),d),o,!0))):(c={"DenseMatrix, DenseMatrix":t.referToSelf(d=>(v,f)=>n(...We(v,f),d)),"Array, Array":t.referToSelf(d=>(v,f)=>n(...We(r(v),r(f)),d).valueOf()),"Array, DenseMatrix":t.referToSelf(d=>(v,f)=>n(...We(r(v),f),d)),"DenseMatrix, Array":t.referToSelf(d=>(v,f)=>n(...We(v,r(f)),d))},a.SS&&(c["SparseMatrix, SparseMatrix"]=t.referToSelf(d=>(v,f)=>a.SS(...We(v,f),d,!1))),a.DS&&(c["DenseMatrix, SparseMatrix"]=t.referToSelf(d=>(v,f)=>a.DS(...We(v,f),d,!1)),c["Array, SparseMatrix"]=t.referToSelf(d=>(v,f)=>a.DS(...We(r(v),f),d,!1))),s&&(c["SparseMatrix, DenseMatrix"]=t.referToSelf(d=>(v,f)=>s(...We(f,v),d,!0)),c["SparseMatrix, Array"]=t.referToSelf(d=>(v,f)=>s(...We(r(f),v),d,!0))));var l=a.scalar||"any",h=a.Ds||a.Ss;h&&(o?(c["DenseMatrix,"+l]=(d,v)=>i(d,v,o,!1),c[l+", DenseMatrix"]=(d,v)=>i(v,d,o,!0),c["Array,"+l]=(d,v)=>i(r(d),v,o,!1).valueOf(),c[l+", Array"]=(d,v)=>i(r(v),d,o,!0).valueOf()):(c["DenseMatrix,"+l]=t.referToSelf(d=>(v,f)=>i(v,f,d,!1)),c[l+", DenseMatrix"]=t.referToSelf(d=>(v,f)=>i(f,v,d,!0)),c["Array,"+l]=t.referToSelf(d=>(v,f)=>i(r(v),f,d,!1).valueOf()),c[l+", Array"]=t.referToSelf(d=>(v,f)=>i(r(f),v,d,!0).valueOf())));var p=a.sS!==void 0?a.sS:a.Ss;return o?(a.Ss&&(c["SparseMatrix,"+l]=(d,v)=>a.Ss(d,v,o,!1)),p&&(c[l+", SparseMatrix"]=(d,v)=>p(v,d,o,!0))):(a.Ss&&(c["SparseMatrix,"+l]=t.referToSelf(d=>(v,f)=>a.Ss(v,f,d,!1))),p&&(c[l+", SparseMatrix"]=t.referToSelf(d=>(v,f)=>p(f,v,d,!0)))),o&&o.signatures&&mc(c,o.signatures),c}}),Qf="matAlgo01xDSid",e0=["typed"],_a=ee(Qf,e0,e=>{var{typed:t}=e;return function(n,i,u,a){var o=n._data,s=n._size,c=n._datatype||n.getDataType(),l=i._values,h=i._index,p=i._ptr,d=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(s.length!==d.length)throw new pe(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f=s[0],m=s[1],g=typeof c=="string"&&c!=="mixed"&&c===v?c:void 0,E=g?t.find(u,[g,g]):u,D,F,_=[];for(D=0;D<f;D++)_[D]=[];var y=[],A=[];for(F=0;F<m;F++){for(var b=F+1,B=p[F],S=p[F+1],L=B;L<S;L++)D=h[L],y[D]=a?E(l[L],o[D][F]):E(o[D][F],l[L]),A[D]=b;for(D=0;D<f;D++)A[D]===b?_[D][F]=y[D]:_[D][F]=o[D][F]}return n.createDenseMatrix({data:_,size:[f,m],datatype:c===n._datatype&&v===i._datatype?g:void 0})}}),t0="matAlgo04xSidSid",r0=["typed","equalScalar"],n0=ee(t0,r0,e=>{var{typed:t,equalScalar:r}=e;return function(i,u,a){var o=i._values,s=i._index,c=i._ptr,l=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),p=u._values,d=u._index,v=u._ptr,f=u._size,m=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(l.length!==f.length)throw new pe(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");var g=l[0],E=l[1],D,F=r,_=0,y=a;typeof h=="string"&&h===m&&h!=="mixed"&&(D=h,F=t.find(r,[D,D]),_=t.convert(0,D),y=t.find(a,[D,D]));var A=o&&p?[]:void 0,b=[],B=[],S=o&&p?[]:void 0,L=o&&p?[]:void 0,x=[],Y=[],k,Z,T,Q,I;for(Z=0;Z<E;Z++){B[Z]=b.length;var P=Z+1;for(Q=c[Z],I=c[Z+1],T=Q;T<I;T++)k=s[T],b.push(k),x[k]=P,S&&(S[k]=o[T]);for(Q=v[Z],I=v[Z+1],T=Q;T<I;T++)if(k=d[T],x[k]===P){if(S){var J=y(S[k],p[T]);F(J,_)?x[k]=null:S[k]=J}}else b.push(k),Y[k]=P,L&&(L[k]=p[T]);if(S&&L)for(T=B[Z];T<b.length;)k=b[T],x[k]===P?(A[T]=S[k],T++):Y[k]===P?(A[T]=L[k],T++):b.splice(T,1)}return B[E]=b.length,i.createSparseMatrix({values:A,index:b,ptr:B,size:[g,E],datatype:h===i._datatype&&m===u._datatype?D:void 0})}}),i0="matAlgo10xSids",u0=["typed","DenseMatrix"],wa=ee(i0,u0,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,u,a,o){var s=i._values,c=i._index,l=i._ptr,h=i._size,p=i._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=h[0],v=h[1],f,m=a;typeof p=="string"&&(f=p,u=t.convert(u,f),m=t.find(a,[f,f]));for(var g=[],E=[],D=[],F=0;F<v;F++){for(var _=F+1,y=l[F],A=l[F+1],b=y;b<A;b++){var B=c[b];E[B]=s[b],D[B]=_}for(var S=0;S<d;S++)F===0&&(g[S]=[]),D[S]===_?g[S][F]=o?m(u,E[S]):m(E[S],u):g[S][F]=u}return new r({data:g,size:[d,v],datatype:f})}}),a0="multiplyScalar",o0=["typed"],s0=ee(a0,o0,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":va,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),Vi="multiply",c0=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],l0=ee(Vi,c0,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:u,dot:a}=e,o=Rf({typed:t,equalScalar:u}),s=ya({typed:t});function c(_,y){switch(_.length){case 1:switch(y.length){case 1:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+y[0]+")");break;case 2:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function l(_,y,A){if(A===0)throw new Error("Cannot multiply two empty vectors");return a(_,y)}function h(_,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(_,y)}function p(_,y){var A=_._data,b=_._size,B=_._datatype||_.getDataType(),S=y._data,L=y._size,x=y._datatype||y.getDataType(),Y=b[0],k=L[1],Z,T=n,Q=i;B&&x&&B===x&&typeof B=="string"&&B!=="mixed"&&(Z=B,T=t.find(n,[Z,Z]),Q=t.find(i,[Z,Z]));for(var I=[],P=0;P<k;P++){for(var J=Q(A[0],S[0][P]),oe=1;oe<Y;oe++)J=T(J,Q(A[oe],S[oe][P]));I[P]=J}return _.createDenseMatrix({data:I,size:[k],datatype:B===_._datatype&&x===y._datatype?Z:void 0})}var d=t("_multiplyMatrixVector",{"DenseMatrix, any":f,"SparseMatrix, any":E}),v=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":D,"SparseMatrix, SparseMatrix":F});function f(_,y){var A=_._data,b=_._size,B=_._datatype||_.getDataType(),S=y._data,L=y._datatype||y.getDataType(),x=b[0],Y=b[1],k,Z=n,T=i;B&&L&&B===L&&typeof B=="string"&&B!=="mixed"&&(k=B,Z=t.find(n,[k,k]),T=t.find(i,[k,k]));for(var Q=[],I=0;I<x;I++){for(var P=A[I],J=T(P[0],S[0]),oe=1;oe<Y;oe++)J=Z(J,T(P[oe],S[oe]));Q[I]=J}return _.createDenseMatrix({data:Q,size:[x],datatype:B===_._datatype&&L===y._datatype?k:void 0})}function m(_,y){var A=_._data,b=_._size,B=_._datatype||_.getDataType(),S=y._data,L=y._size,x=y._datatype||y.getDataType(),Y=b[0],k=b[1],Z=L[1],T,Q=n,I=i;B&&x&&B===x&&typeof B=="string"&&B!=="mixed"&&B!=="mixed"&&(T=B,Q=t.find(n,[T,T]),I=t.find(i,[T,T]));for(var P=[],J=0;J<Y;J++){var oe=A[J];P[J]=[];for(var ae=0;ae<Z;ae++){for(var se=I(oe[0],S[0][ae]),ve=1;ve<k;ve++)se=Q(se,I(oe[ve],S[ve][ae]));P[J][ae]=se}}return _.createDenseMatrix({data:P,size:[Y,Z],datatype:B===_._datatype&&x===y._datatype?T:void 0})}function g(_,y){var A=_._data,b=_._size,B=_._datatype||_.getDataType(),S=y._values,L=y._index,x=y._ptr,Y=y._size,k=y._datatype||y._data===void 0?y._datatype:y.getDataType();if(!S)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var Z=b[0],T=Y[1],Q,I=n,P=i,J=u,oe=0;B&&k&&B===k&&typeof B=="string"&&B!=="mixed"&&(Q=B,I=t.find(n,[Q,Q]),P=t.find(i,[Q,Q]),J=t.find(u,[Q,Q]),oe=t.convert(0,Q));for(var ae=[],se=[],ve=[],De=y.createSparseMatrix({values:ae,index:se,ptr:ve,size:[Z,T],datatype:B===_._datatype&&k===y._datatype?Q:void 0}),Ae=0;Ae<T;Ae++){ve[Ae]=se.length;var be=x[Ae],Ve=x[Ae+1];if(Ve>be)for(var ye=0,ge=0;ge<Z;ge++){for(var Qe=ge+1,Ue=void 0,O=be;O<Ve;O++){var $=L[O];ye!==Qe?(Ue=P(A[ge][$],S[O]),ye=Qe):Ue=I(Ue,P(A[ge][$],S[O]))}ye===Qe&&!J(Ue,oe)&&(se.push(ge),ae.push(Ue))}}return ve[T]=se.length,De}function E(_,y){var A=_._values,b=_._index,B=_._ptr,S=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var L=y._data,x=y._datatype||y.getDataType(),Y=_._size[0],k=y._size[0],Z=[],T=[],Q=[],I,P=n,J=i,oe=u,ae=0;S&&x&&S===x&&typeof S=="string"&&S!=="mixed"&&(I=S,P=t.find(n,[I,I]),J=t.find(i,[I,I]),oe=t.find(u,[I,I]),ae=t.convert(0,I));var se=[],ve=[];Q[0]=0;for(var De=0;De<k;De++){var Ae=L[De];if(!oe(Ae,ae))for(var be=B[De],Ve=B[De+1],ye=be;ye<Ve;ye++){var ge=b[ye];ve[ge]?se[ge]=P(se[ge],J(Ae,A[ye])):(ve[ge]=!0,T.push(ge),se[ge]=J(Ae,A[ye]))}}for(var Qe=T.length,Ue=0;Ue<Qe;Ue++){var O=T[Ue];Z[Ue]=se[O]}return Q[1]=T.length,_.createSparseMatrix({values:Z,index:T,ptr:Q,size:[Y,1],datatype:S===_._datatype&&x===y._datatype?I:void 0})}function D(_,y){var A=_._values,b=_._index,B=_._ptr,S=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var L=y._data,x=y._datatype||y.getDataType(),Y=_._size[0],k=y._size[0],Z=y._size[1],T,Q=n,I=i,P=u,J=0;S&&x&&S===x&&typeof S=="string"&&S!=="mixed"&&(T=S,Q=t.find(n,[T,T]),I=t.find(i,[T,T]),P=t.find(u,[T,T]),J=t.convert(0,T));for(var oe=[],ae=[],se=[],ve=_.createSparseMatrix({values:oe,index:ae,ptr:se,size:[Y,Z],datatype:S===_._datatype&&x===y._datatype?T:void 0}),De=[],Ae=[],be=0;be<Z;be++){se[be]=ae.length;for(var Ve=be+1,ye=0;ye<k;ye++){var ge=L[ye][be];if(!P(ge,J))for(var Qe=B[ye],Ue=B[ye+1],O=Qe;O<Ue;O++){var $=b[O];Ae[$]!==Ve?(Ae[$]=Ve,ae.push($),De[$]=I(ge,A[O])):De[$]=Q(De[$],I(ge,A[O]))}}for(var Pe=se[be],mt=ae.length,St=Pe;St<mt;St++){var Gt=ae[St];oe[St]=De[Gt]}}return se[Z]=ae.length,ve}function F(_,y){var A=_._values,b=_._index,B=_._ptr,S=_._datatype||_._data===void 0?_._datatype:_.getDataType(),L=y._values,x=y._index,Y=y._ptr,k=y._datatype||y._data===void 0?y._datatype:y.getDataType(),Z=_._size[0],T=y._size[1],Q=A&&L,I,P=n,J=i;S&&k&&S===k&&typeof S=="string"&&S!=="mixed"&&(I=S,P=t.find(n,[I,I]),J=t.find(i,[I,I]));for(var oe=Q?[]:void 0,ae=[],se=[],ve=_.createSparseMatrix({values:oe,index:ae,ptr:se,size:[Z,T],datatype:S===_._datatype&&k===y._datatype?I:void 0}),De=Q?[]:void 0,Ae=[],be,Ve,ye,ge,Qe,Ue,O,$,Pe=0;Pe<T;Pe++){se[Pe]=ae.length;var mt=Pe+1;for(Qe=Y[Pe],Ue=Y[Pe+1],ge=Qe;ge<Ue;ge++)if($=x[ge],Q)for(Ve=B[$],ye=B[$+1],be=Ve;be<ye;be++)O=b[be],Ae[O]!==mt?(Ae[O]=mt,ae.push(O),De[O]=J(L[ge],A[be])):De[O]=P(De[O],J(L[ge],A[be]));else for(Ve=B[$],ye=B[$+1],be=Ve;be<ye;be++)O=b[be],Ae[O]!==mt&&(Ae[O]=mt,ae.push(O));if(Q)for(var St=se[Pe],Gt=ae.length,Jt=St;Jt<Gt;Jt++){var Fn=ae[Jt];oe[Jt]=De[Fn]}}return se[T]=ae.length,ve}return t(Vi,i,{"Array, Array":t.referTo("Matrix, Matrix",_=>(y,A)=>{c(Ke(y),Ke(A));var b=_(r(y),r(A));return Ie(b)?b.valueOf():b}),"Matrix, Matrix":function(y,A){var b=y.size(),B=A.size();return c(b,B),b.length===1?B.length===1?l(y,A,b[0]):h(y,A):B.length===1?d(y,A):v(y,A)},"Matrix, Array":t.referTo("Matrix,Matrix",_=>(y,A)=>_(y,r(A))),"Array, Matrix":t.referToSelf(_=>(y,A)=>_(r(y,A.storage()),A)),"SparseMatrix, any":function(y,A){return o(y,A,i,!1)},"DenseMatrix, any":function(y,A){return s(y,A,i,!1)},"any, SparseMatrix":function(y,A){return o(A,y,i,!0)},"any, DenseMatrix":function(y,A){return s(A,y,i,!0)},"Array, any":function(y,A){return s(r(y),A,i,!1).valueOf()},"any, Array":function(y,A){return s(r(A),y,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(_=>(y,A,b)=>{for(var B=_(y,A),S=0;S<b.length;S++)B=_(B,b[S]);return B})})}),Zi="subtract",f0=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],h0=ee(Zi,f0,e=>{var{typed:t,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:u,DenseMatrix:a,concat:o}=e,s=_a({typed:t}),c=xr({typed:t}),l=Wf({typed:t,equalScalar:n}),h=wa({typed:t,DenseMatrix:a}),p=Sr({typed:t,DenseMatrix:a}),d=fr({typed:t,matrix:r,concat:o});return t(Zi,{"any, any":i},d({elop:i,SS:l,DS:s,SD:c,Ss:p,sS:h}))}),p0="matAlgo07xSSf",d0=["typed","SparseMatrix"],_n=ee(p0,d0,e=>{var{typed:t,SparseMatrix:r}=e;return function(u,a,o){var s=u._size,c=u._datatype||u._data===void 0?u._datatype:u.getDataType(),l=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(s.length!==l.length)throw new pe(s.length,l.length);if(s[0]!==l[0]||s[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+l+")");var p=s[0],d=s[1],v,f=0,m=o;typeof c=="string"&&c===h&&c!=="mixed"&&(v=c,f=t.convert(0,v),m=t.find(o,[v,v]));for(var g=[],E=[],D=new Array(d+1).fill(0),F=[],_=[],y=[],A=[],b=0;b<d;b++){var B=b+1,S=0;n(u,b,y,F,B),n(a,b,A,_,B);for(var L=0;L<p;L++){var x=y[L]===B?F[L]:f,Y=A[L]===B?_[L]:f,k=m(x,Y);k!==0&&k!==!1&&(E.push(L),g.push(k),S++)}D[b+1]=D[b]+S}return new r({values:g,index:E,ptr:D,size:[p,d],datatype:c===u._datatype&&h===a._datatype?v:void 0})};function n(i,u,a,o,s){for(var c=i._values,l=i._index,h=i._ptr,p=h[u],d=h[u+1];p<d;p++){var v=l[p];a[v]=s,o[v]=c[p]}}}),Wi="conj",m0=["typed"],v0=ee(Wi,m0,e=>{var{typed:t}=e;return t(Wi,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>n=>Bt(n,r))})}),ji="concat",g0=["typed","matrix","isInteger"],D0=ee(ji,g0,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(ji,{"...Array | Matrix | number | BigNumber":function(u){var a,o=u.length,s=-1,c,l=!1,h=[];for(a=0;a<o;a++){var p=u[a];if(Ie(p)&&(l=!0),Ne(p)||Te(p)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(c=s,s=p.valueOf(),!n(s))throw new TypeError("Integer number expected for dimension");if(s<0||a>0&&s>c)throw new Wt(s,c+1)}else{var d=xe(p).valueOf(),v=Ke(d);if(h[a]=d,c=s,s=v.length-1,a>0&&s!==c)throw new pe(c+1,s+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var f=h.shift();h.length;)f=sa(f,h.shift(),s);return l?r(f):f},"...string":function(u){return u.join("")}})}),Gi="getMatrixDataType",y0=["typed"],_0=ee(Gi,y0,e=>{var{typed:t}=e;return t(Gi,{Array:function(n){return yn(n,Et)},Matrix:function(n){return n.getDataType()}})}),Ji="identity",w0=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],E0=ee(Ji,w0,e=>{var{typed:t,config:r,matrix:n,BigNumber:i,DenseMatrix:u,SparseMatrix:a}=e;return t(Ji,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(l){return n(l)},"number | BigNumber":function(l){return s(l,l,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(l,h){return s(l,l,h)},"number | BigNumber, number | BigNumber":function(l,h){return s(l,h,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(l,h,p){return s(l,h,p)},Array:function(l){return o(l)},"Array, string":function(l,h){return o(l,h)},Matrix:function(l){return o(l.valueOf(),l.storage())},"Matrix, string":function(l,h){return o(l.valueOf(),h)}});function o(c,l){switch(c.length){case 0:return l?n(l):[];case 1:return s(c[0],c[0],l);case 2:return s(c[0],c[1],l);default:throw new Error("Vector containing two values expected")}}function s(c,l,h){var p=Te(c)||Te(l)?i:null;if(Te(c)&&(c=c.toNumber()),Te(l)&&(l=l.toNumber()),!Oe(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!Oe(l)||l<1)throw new Error("Parameters in function identity must be positive integers");var d=p?new i(1):1,v=p?new p(0):0,f=[c,l];if(h){if(h==="sparse")return a.diagonal(f,d,0,v);if(h==="dense")return u.diagonal(f,d,0,v);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var m=Er([],f,v),g=c<l?c:l,E=0;E<g;E++)m[E][E]=d;return m}}),F0="ones",b0=["typed","config","matrix","BigNumber"],C0=ee(F0,b0,e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t("ones",{"":function(){return r.matrix==="Array"?u([]):u([],"default")},"...number | BigNumber | string":function(c){var l=c[c.length-1];if(typeof l=="string"){var h=c.pop();return u(c,h)}else return r.matrix==="Array"?u(c):u(c,"default")},Array:u,Matrix:function(c){var l=c.storage();return u(c.valueOf(),l)},"Array | Matrix, string":function(c,l){return u(c.valueOf(),l)}});function u(s,c){var l=a(s),h=l?new i(1):1;if(o(s),c){var p=n(c);return s.length>0?p.resize(s,h):p}else{var d=[];return s.length>0?Er(d,s,h):d}}function a(s){var c=!1;return s.forEach(function(l,h,p){Te(l)&&(c=!0,p[h]=l.toNumber())}),c}function o(s){s.forEach(function(c){if(typeof c!="number"||!Oe(c)||c<0)throw new Error("Parameters in function ones must be positive integers")})}});function Ea(){throw new Error('No "bignumber" implementation available')}function A0(){throw new Error('No "fraction" implementation available')}function Fa(){throw new Error('No "matrix" implementation available')}var Yi="range",B0=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],M0=ee(Yi,B0,e=>{var{typed:t,config:r,matrix:n,bignumber:i,smaller:u,smallerEq:a,larger:o,largerEq:s,add:c,isPositive:l}=e;return t(Yi,{string:p,"string, boolean":p,number:function(m){throw new TypeError("Too few arguments to function range(): ".concat(m))},boolean:function(m){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(m,", number|bigint|BigNumber|Fraction"))},"number, number":function(m,g){return h(d(m,g,1,!1))},"number, number, number":function(m,g,E){return h(d(m,g,E,!1))},"number, number, boolean":function(m,g,E){return h(d(m,g,1,E))},"number, number, number, boolean":function(m,g,E,D){return h(d(m,g,E,D))},"bigint, bigint|number":function(m,g){return h(d(m,g,1n,!1))},"number, bigint":function(m,g){return h(d(BigInt(m),g,1n,!1))},"bigint, bigint|number, bigint|number":function(m,g,E){return h(d(m,g,BigInt(E),!1))},"number, bigint, bigint|number":function(m,g,E){return h(d(BigInt(m),g,BigInt(E),!1))},"bigint, bigint|number, boolean":function(m,g,E){return h(d(m,g,1n,E))},"number, bigint, boolean":function(m,g,E){return h(d(BigInt(m),g,1n,E))},"bigint, bigint|number, bigint|number, boolean":function(m,g,E,D){return h(d(m,g,BigInt(E),D))},"number, bigint, bigint|number, boolean":function(m,g,E,D){return h(d(BigInt(m),g,BigInt(E),D))},"BigNumber, BigNumber":function(m,g){var E=m.constructor;return h(d(m,g,new E(1),!1))},"BigNumber, BigNumber, BigNumber":function(m,g,E){return h(d(m,g,E,!1))},"BigNumber, BigNumber, boolean":function(m,g,E){var D=m.constructor;return h(d(m,g,new D(1),E))},"BigNumber, BigNumber, BigNumber, boolean":function(m,g,E,D){return h(d(m,g,E,D))},"Fraction, Fraction":function(m,g){return h(d(m,g,1,!1))},"Fraction, Fraction, Fraction":function(m,g,E){return h(d(m,g,E,!1))},"Fraction, Fraction, boolean":function(m,g,E){return h(d(m,g,1,E))},"Fraction, Fraction, Fraction, boolean":function(m,g,E,D){return h(d(m,g,E,D))},"Unit, Unit, Unit":function(m,g,E){return h(d(m,g,E,!1))},"Unit, Unit, Unit, boolean":function(m,g,E,D){return h(d(m,g,E,D))}});function h(f){return r.matrix==="Matrix"?n?n(f):Fa():f}function p(f,m){var g=v(f);if(!g)throw new SyntaxError('String "'+f+'" is no valid range');return r.number==="BigNumber"?(i===void 0&&Ea(),h(d(i(g.start),i(g.end),i(g.step)))):h(d(g.start,g.end,g.step,m))}function d(f,m,g,E){for(var D=[],F=l(g)?E?a:u:E?s:o,_=f;F(_,m);)D.push(_),_=c(_,g);return D}function v(f){var m=f.split(":"),g=m.map(function(D){return Number(D)}),E=g.some(function(D){return isNaN(D)});if(E)return null;switch(g.length){case 2:return{start:g[0],end:g[1],step:1};case 3:return{start:g[0],end:g[2],step:g[1]};default:return null}}}),Ki="size",S0=["typed","config","?matrix"],x0=ee(Ki,S0,e=>{var{typed:t,config:r,matrix:n}=e;return t(Ki,{Matrix:function(u){return u.create(u.size(),"number")},Array:Ke,string:function(u){return r.matrix==="Array"?[u.length]:n([u.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:n?n([],"dense","number"):Fa()}})}),Xi="subset",N0=["typed","matrix","zeros","add"],T0=ee(Xi,N0,e=>{var{typed:t,matrix:r,zeros:n,add:i}=e;return t(Xi,{"Matrix, Index":function(o,s){return or(s)?r():(rn(o,s),o.subset(s))},"Array, Index":t.referTo("Matrix, Index",function(a){return function(o,s){var c=a(r(o),s);return s.isScalar()?c:c.valueOf()}}),"Object, Index":I0,"string, Index":L0,"Matrix, Index, any, any":function(o,s,c,l){return or(s)?o:(rn(o,s),o.clone().subset(s,u(c,s),l))},"Array, Index, any, any":t.referTo("Matrix, Index, any, any",function(a){return function(o,s,c,l){var h=a(r(o),s,c,l);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":t.referTo("Matrix, Index, any, any",function(a){return function(o,s,c){return a(r(o),s,c,void 0).valueOf()}}),"Matrix, Index, any":t.referTo("Matrix, Index, any, any",function(a){return function(o,s,c){return a(o,s,c,void 0)}}),"string, Index, string":Qi,"string, Index, string, string":Qi,"Object, Index, any":P0});function u(a,o){if(typeof a=="string")throw new Error("can't boradcast a string");if(o._isScalar)return a;var s=o.size();if(s.every(c=>c>0))try{return i(a,n(s))}catch{return a}else return a}});function L0(e,t){if(!pn(t))throw new TypeError("Index expected");if(or(t))return"";if(rn(Array.from(e),t),t.size().length!==1)throw new pe(t.size().length,1);var r=e.length;Me(t.min()[0],r),Me(t.max()[0],r);var n=t.dimension(0),i="";return n.forEach(function(u){i+=e.charAt(u)}),i}function Qi(e,t,r,n){if(!t||t.isIndex!==!0)throw new TypeError("Index expected");if(or(t))return e;if(rn(Array.from(e),t),t.size().length!==1)throw new pe(t.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=t.dimension(0),u=i.size()[0];if(u!==r.length)throw new pe(i.size()[0],r.length);var a=e.length;Me(t.min()[0]),Me(t.max()[0]);for(var o=[],s=0;s<a;s++)o[s]=e.charAt(s);if(i.forEach(function(h,p){o[h]=r.charAt(p[0])}),o.length>a)for(var c=a-1,l=o.length;c<l;c++)o[c]||(o[c]=n);return o.join("")}function I0(e,t){if(!or(t)){if(t.size().length!==1)throw new pe(t.size(),1);var r=t.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");return Iu(e,r)}}function P0(e,t,r){if(or(t))return e;if(t.size().length!==1)throw new pe(t.size(),1);var n=t.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=xe(e);return Pu(i,n,r),i}var eu="zeros",O0=["typed","config","matrix","BigNumber"],R0=ee(eu,O0,e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t(eu,{"":function(){return r.matrix==="Array"?u([]):u([],"default")},"...number | BigNumber | string":function(c){var l=c[c.length-1];if(typeof l=="string"){var h=c.pop();return u(c,h)}else return r.matrix==="Array"?u(c):u(c,"default")},Array:u,Matrix:function(c){var l=c.storage();return u(c.valueOf(),l)},"Array | Matrix, string":function(c,l){return u(c.valueOf(),l)}});function u(s,c){var l=a(s),h=l?new i(0):0;if(o(s),c){var p=n(c);return s.length>0?p.resize(s,h):p}else{var d=[];return s.length>0?Er(d,s,h):d}}function a(s){var c=!1;return s.forEach(function(l,h,p){Te(l)&&(c=!0,p[h]=l.toNumber())}),c}function o(s){s.forEach(function(c){if(typeof c!="number"||!Oe(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}}),$0="numeric",z0=["number","?bignumber","?fraction"],q0=ee($0,z0,e=>{var{number:t,bignumber:r,fraction:n}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:a=>t(a),BigNumber:r?a=>r(a):Ea,bigint:a=>BigInt(a),Fraction:n?a=>n(a):A0};return function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(c!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var l=Et(o);if(!(l in i))throw new TypeError("Cannot convert "+o+' of type "'+l+'"; valid input types are '+Object.keys(i).join(", "));if(!(s in u))throw new TypeError("Cannot convert "+o+' to type "'+s+'"; valid output types are '+Object.keys(u).join(", "));return s===l?o:u[s](o)}}),tu="divideScalar",k0=["typed","numeric"],U0=ee(tu,k0,e=>{var{typed:t,numeric:r}=e;return t(tu,{"number, number":function(i,u){return i/u},"Complex, Complex":function(i,u){return i.div(u)},"BigNumber, BigNumber":function(i,u){return i.div(u)},"bigint, bigint":function(i,u){return i/u},"Fraction, Fraction":function(i,u){return i.div(u)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),an="smaller",H0=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],V0=ee(an,H0,e=>{var{typed:t,config:r,bignumber:n,matrix:i,DenseMatrix:u,concat:a,SparseMatrix:o}=e,s=xr({typed:t}),c=_n({typed:t,SparseMatrix:o}),l=Sr({typed:t,DenseMatrix:u}),h=fr({typed:t,matrix:i,concat:a}),p=Mr({typed:t});function d(v,f){return v.lt(f)&&!lr(v,f,r.relTol,r.absTol)}return t(an,Z0({typed:t,config:r}),{"boolean, boolean":(v,f)=>v<f,"BigNumber, BigNumber":d,"bigint, bigint":(v,f)=>v<f,"Fraction, Fraction":(v,f)=>v.compare(f)===-1,"Fraction, BigNumber":function(f,m){return d(n(f),m)},"BigNumber, Fraction":function(f,m){return d(f,n(m))},"Complex, Complex":function(f,m){throw new TypeError("No ordering relation is defined for complex numbers")}},p,h({SS:c,DS:s,Ss:l}))}),Z0=ee(an,["typed","config"],e=>{var{typed:t,config:r}=e;return t(an,{"number, number":function(i,u){return i<u&&!Lt(i,u,r.relTol,r.absTol)}})}),on="smallerEq",W0=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],j0=ee(on,W0,e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i,concat:u,SparseMatrix:a}=e,o=xr({typed:t}),s=_n({typed:t,SparseMatrix:a}),c=Sr({typed:t,DenseMatrix:i}),l=fr({typed:t,matrix:n,concat:u}),h=Mr({typed:t});return t(on,G0({typed:t,config:r}),{"boolean, boolean":(p,d)=>p<=d,"BigNumber, BigNumber":function(d,v){return d.lte(v)||lr(d,v,r.relTol,r.absTol)},"bigint, bigint":(p,d)=>p<=d,"Fraction, Fraction":(p,d)=>p.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,l({SS:s,DS:o,Ss:c}))}),G0=ee(on,["typed","config"],e=>{var{typed:t,config:r}=e;return t(on,{"number, number":function(i,u){return i<=u||Lt(i,u,r.relTol,r.absTol)}})}),sn="larger",J0=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],Y0=ee(sn,J0,e=>{var{typed:t,config:r,bignumber:n,matrix:i,DenseMatrix:u,concat:a,SparseMatrix:o}=e,s=xr({typed:t}),c=_n({typed:t,SparseMatrix:o}),l=Sr({typed:t,DenseMatrix:u}),h=fr({typed:t,matrix:i,concat:a}),p=Mr({typed:t});function d(v,f){return v.gt(f)&&!lr(v,f,r.relTol,r.absTol)}return t(sn,K0({typed:t,config:r}),{"boolean, boolean":(v,f)=>v>f,"BigNumber, BigNumber":d,"bigint, bigint":(v,f)=>v>f,"Fraction, Fraction":(v,f)=>v.compare(f)===1,"Fraction, BigNumber":function(f,m){return d(n(f),m)},"BigNumber, Fraction":function(f,m){return d(f,n(m))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,h({SS:c,DS:s,Ss:l}))}),K0=ee(sn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(sn,{"number, number":function(i,u){return i>u&&!Lt(i,u,r.relTol,r.absTol)}})}),cn="largerEq",X0=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],Q0=ee(cn,X0,e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i,concat:u,SparseMatrix:a}=e,o=xr({typed:t}),s=_n({typed:t,SparseMatrix:a}),c=Sr({typed:t,DenseMatrix:i}),l=fr({typed:t,matrix:n,concat:u}),h=Mr({typed:t});return t(cn,eh({typed:t,config:r}),{"boolean, boolean":(p,d)=>p>=d,"BigNumber, BigNumber":function(d,v){return d.gte(v)||lr(d,v,r.relTol,r.absTol)},"bigint, bigint":function(d,v){return d>=v},"Fraction, Fraction":(p,d)=>p.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,l({SS:s,DS:o,Ss:c}))}),eh=ee(cn,["typed","config"],e=>{var{typed:t,config:r}=e;return t(cn,{"number, number":function(i,u){return i>=u||Lt(i,u,r.relTol,r.absTol)}})}),th="ImmutableDenseMatrix",rh=["smaller","DenseMatrix"],nh=ee(th,rh,e=>{var{smaller:t,DenseMatrix:r}=e;function n(i,u){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(u&&!dt(u))throw new Error("Invalid datatype: "+u);if(Ie(i)||Se(i)){var a=new r(i,u);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&Se(i.data)&&Se(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Et(i)+")");this._data=[],this._size=[0],this._datatype=u,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var u=r.prototype.subset.call(this,i);return Ie(u)?new n({data:u._data,size:u._size,datatype:u._datatype}):u}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:xe(this._data),size:xe(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(u){(i===null||t(u,i))&&(i=u)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(u){(i===null||t(i,u))&&(i=u)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),ih="Index",uh=["ImmutableDenseMatrix","getMatrixDataType"],ah=ee(ih,uh,e=>{var{ImmutableDenseMatrix:t,getMatrixDataType:r}=e;function n(u){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,o=arguments.length;a<o;a++){var s=arguments[a],c=Se(s),l=Ie(s),h=typeof s,p=null;if(zu(s))this._dimensions.push(s),this._isScalar=!1;else if(c||l){var d=void 0;r(s)==="boolean"?(c&&(d=i(ru(s).valueOf())),l&&(d=i(ru(s._data).valueOf())),p=s.valueOf().length):d=i(s.valueOf()),this._dimensions.push(d);var v=d.size();(v.length!==1||v[0]!==1||p!==null)&&(this._isScalar=!1)}else if(h==="number")this._dimensions.push(i([s]));else if(h==="bigint")this._dimensions.push(i([Number(s)]));else if(h==="string")this._dimensions.push(s);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(p)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(u){for(var a=0,o=u.length;a<o;a++)if(typeof u[a]!="number"||!Oe(u[a]))throw new TypeError("Index parameters must be positive integer numbers");return new t(u)}return n.prototype.clone=function(){var u=new n;return u._dimensions=xe(this._dimensions),u._isScalar=this._isScalar,u._sourceSize=this._sourceSize,u},n.create=function(u){var a=new n;return n.apply(a,u),a},n.prototype.size=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u[a]=typeof s=="string"?1:s.size()[0]}return u},n.prototype.max=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u[a]=typeof s=="string"?s:s.max()}return u},n.prototype.min=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u[a]=typeof s=="string"?s:s.min()}return u},n.prototype.forEach=function(u){for(var a=0,o=this._dimensions.length;a<o;a++)u(this._dimensions[a],a,this)},n.prototype.dimension=function(u){return typeof u!="number"?null:this._dimensions[u]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];u.push(typeof s=="string"?s:s.toArray())}return u},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var u=[],a=0,o=this._dimensions.length;a<o;a++){var s=this._dimensions[a];typeof s=="string"?u.push(JSON.stringify(s)):u.push(s.toString())}return"["+u.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(u){return n.create(u.dimensions)},n},{isClass:!0});function ru(e){var t=[];return e.forEach((r,n)=>{r&&t.push(n)}),t}var nu="add",oh=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],sh=ee(nu,oh,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:u,SparseMatrix:a,concat:o}=e,s=_a({typed:t}),c=n0({typed:t,equalScalar:i}),l=wa({typed:t,DenseMatrix:u}),h=fr({typed:t,matrix:r,concat:o});return t(nu,{"any, any":n,"any, any, ...any":t.referToSelf(p=>(d,v,f)=>{for(var m=p(d,v),g=0;g<f.length;g++)m=p(m,f[g]);return m})},h({elop:n,DS:s,SS:c,Ss:l}))}),iu="dot",ch=["typed","addScalar","multiplyScalar","conj","size"],lh=ee(iu,ch,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:i,size:u}=e;return t(iu,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":s});function a(l,h){var p=c(l),d=c(h),v,f;if(p.length===1)v=p[0];else if(p.length===2&&p[1]===1)v=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(d.length===1)f=d[0];else if(d.length===2&&d[1]===1)f=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(v!==f)throw new RangeError("Vectors must have equal length ("+v+" != "+f+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function o(l,h){var p=a(l,h),d=Ie(l)?l._data:l,v=Ie(l)?l._datatype||l.getDataType():void 0,f=Ie(h)?h._data:h,m=Ie(h)?h._datatype||h.getDataType():void 0,g=c(l).length===2,E=c(h).length===2,D=r,F=n;if(v&&m&&v===m&&typeof v=="string"&&v!=="mixed"){var _=v;D=t.find(r,[_,_]),F=t.find(n,[_,_])}if(!g&&!E){for(var y=F(i(d[0]),f[0]),A=1;A<p;A++)y=D(y,F(i(d[A]),f[A]));return y}if(!g&&E){for(var b=F(i(d[0]),f[0][0]),B=1;B<p;B++)b=D(b,F(i(d[B]),f[B][0]));return b}if(g&&!E){for(var S=F(i(d[0][0]),f[0]),L=1;L<p;L++)S=D(S,F(i(d[L][0]),f[L]));return S}if(g&&E){for(var x=F(i(d[0][0]),f[0][0]),Y=1;Y<p;Y++)x=D(x,F(i(d[Y][0]),f[Y][0]));return x}}function s(l,h){a(l,h);for(var p=l._index,d=l._values,v=h._index,f=h._values,m=0,g=r,E=n,D=0,F=0;D<p.length&&F<v.length;){var _=p[D],y=v[F];if(_<y){D++;continue}if(_>y){F++;continue}_===y&&(m=g(m,E(d[D],f[F])),D++,F++)}return m}function c(l){return Ie(l)?l.size():u(l)}}),uu="index",fh=["typed","Index"],hh=ee(uu,fh,e=>{var{typed:t,Index:r}=e;return t(uu,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var u=i.map(function(o){return Te(o)?o.toNumber():Se(o)||Ie(o)?o.map(function(s){return Te(s)?s.toNumber():s}):o}),a=new r;return r.apply(a,u),a}})}),au="det",ph=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],dh=ee(au,ph,e=>{var{typed:t,matrix:r,subtractScalar:n,multiply:i,divideScalar:u,isZero:a,unaryMinus:o}=e;return t(au,{any:function(l){return xe(l)},"Array | Matrix":function(l){var h;switch(Ie(l)?h=l.size():Array.isArray(l)?(l=r(l),h=l.size()):h=[],h.length){case 0:return xe(l);case 1:if(h[0]===1)return xe(l.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+ze(h)+")");case 2:{var p=h[0],d=h[1];if(p===d)return s(l.clone().valueOf(),p);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+ze(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+ze(h)+")")}}});function s(c,l,h){if(l===1)return xe(c[0][0]);if(l===2)return n(i(c[0][0],c[1][1]),i(c[1][0],c[0][1]));for(var p=!1,d=new Array(l).fill(0).map((A,b)=>b),v=0;v<l;v++){var f=d[v];if(a(c[f][v])){var m=void 0;for(m=v+1;m<l;m++)if(!a(c[d[m]][v])){f=d[m],d[m]=d[v],d[v]=f,p=!p;break}if(m===l)return c[f][v]}for(var g=c[f][v],E=v===0?1:c[d[v-1]][v-1],D=v+1;D<l;D++)for(var F=d[D],_=v+1;_<l;_++)c[F][_]=u(n(i(c[F][_],g),i(c[F][v],c[f][_])),E)}var y=c[d[l-1]][l-1];return p?o(y):y}}),ou="inv",mh=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],vh=ee(ou,mh,e=>{var{typed:t,matrix:r,divideScalar:n,addScalar:i,multiply:u,unaryMinus:a,det:o,identity:s,abs:c}=e;return t(ou,{"Array | Matrix":function(p){var d=Ie(p)?p.size():Ke(p);switch(d.length){case 1:if(d[0]===1)return Ie(p)?r([n(1,p.valueOf()[0])]):[n(1,p[0])];throw new RangeError("Matrix must be square (size: "+ze(d)+")");case 2:{var v=d[0],f=d[1];if(v===f)return Ie(p)?r(l(p.valueOf(),v,f),p.storage()):l(p,v,f);throw new RangeError("Matrix must be square (size: "+ze(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+ze(d)+")")}},any:function(p){return n(1,p)}});function l(h,p,d){var v,f,m,g,E;if(p===1){if(g=h[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,g)]]}else if(p===2){var D=o(h);if(D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],D),n(a(h[0][1]),D)],[n(a(h[1][0]),D),n(h[0][0],D)]]}else{var F=h.concat();for(v=0;v<p;v++)F[v]=F[v].concat();for(var _=s(p).valueOf(),y=0;y<d;y++){var A=c(F[y][y]),b=y;for(v=y+1;v<p;)c(F[v][y])>A&&(A=c(F[v][y]),b=v),v++;if(A===0)throw Error("Cannot calculate inverse, determinant is zero");v=b,v!==y&&(E=F[y],F[y]=F[v],F[v]=E,E=_[y],_[y]=_[v],_[v]=E);var B=F[y],S=_[y];for(v=0;v<p;v++){var L=F[v],x=_[v];if(v!==y){if(L[y]!==0){for(m=n(a(L[y]),B[y]),f=y;f<d;f++)L[f]=i(L[f],u(m,B[f]));for(f=0;f<d;f++)x[f]=i(x[f],u(m,S[f]))}}else{for(m=B[y],f=y;f<d;f++)L[f]=n(L[f],m);for(f=0;f<d;f++)x[f]=n(x[f],m)}}}return _}}}),Nr=bl({config:ct}),gh=Sl({}),ba=Ol({}),oi=zl({}),Mt=Ql({Matrix:oi}),me=Bc({BigNumber:Nr,Complex:gh,DenseMatrix:Mt,Fraction:ba}),Dh=xf({typed:me}),wn=Tf({typed:me}),yh=v0({typed:me}),Tr=lf({config:ct,typed:me}),_h=_0({typed:me}),wh=tf({typed:me}),Eh=uf({config:ct,typed:me}),Fh=of({equalScalar:Tr,typed:me}),Ca=s0({typed:me}),bh=Df({typed:me}),jt=pf({Matrix:oi,equalScalar:Tr,typed:me}),Aa=If({typed:me}),En=wf({BigNumber:Nr,typed:me}),Je=Af({DenseMatrix:Mt,Matrix:oi,SparseMatrix:jt,typed:me}),Ch=C0({BigNumber:Nr,config:ct,matrix:Je,typed:me}),Zr=R0({BigNumber:Nr,config:ct,matrix:Je,typed:me}),hr=D0({isInteger:wh,matrix:Je,typed:me}),Ah=bf({Fraction:ba,typed:me}),Ba=E0({BigNumber:Nr,DenseMatrix:Mt,SparseMatrix:jt,config:ct,matrix:Je,typed:me}),Bh=Q0({DenseMatrix:Mt,SparseMatrix:jt,concat:hr,config:ct,matrix:Je,typed:me}),Mh=q0({bignumber:En,fraction:Ah,number:bh}),Sh=x0({matrix:Je,config:ct,typed:me}),Ma=V0({DenseMatrix:Mt,SparseMatrix:jt,bignumber:En,concat:hr,config:ct,matrix:Je,typed:me}),si=Mf({typed:me}),Sa=sh({DenseMatrix:Mt,SparseMatrix:jt,addScalar:wn,concat:hr,equalScalar:Tr,matrix:Je,typed:me}),xa=U0({numeric:Mh,typed:me}),xh=nh({DenseMatrix:Mt,smaller:Ma}),Nh=ah({ImmutableDenseMatrix:xh,getMatrixDataType:_h}),Th=Y0({DenseMatrix:Mt,SparseMatrix:jt,bignumber:En,concat:hr,config:ct,matrix:Je,typed:me}),Lh=j0({DenseMatrix:Mt,SparseMatrix:jt,concat:hr,config:ct,matrix:Je,typed:me}),Ln=T0({add:Sa,matrix:Je,typed:me,zeros:Zr}),Ih=h0({DenseMatrix:Mt,concat:hr,equalScalar:Tr,matrix:Je,subtractScalar:Aa,typed:me,unaryMinus:si}),Ph=lh({addScalar:wn,conj:yh,multiplyScalar:Ca,size:Sh,typed:me}),In=hh({Index:Nh,typed:me}),gr=l0({addScalar:wn,dot:Ph,equalScalar:Tr,matrix:Je,multiplyScalar:Ca,typed:me}),kr=M0({bignumber:En,matrix:Je,add:Sa,config:ct,isPositive:Eh,larger:Th,largerEq:Bh,smaller:Ma,smallerEq:Lh,typed:me}),Oh=dh({divideScalar:xa,isZero:Fh,matrix:Je,multiply:gr,subtractScalar:Aa,typed:me,unaryMinus:si}),Rh=vh({abs:Dh,addScalar:wn,det:Oh,divideScalar:xa,identity:Ba,matrix:Je,multiply:gr,typed:me,unaryMinus:si});class Cp extends ei{constructor(r){super({project:`${sr("强化")}+${r.enhanceLevel}`,action:"enhancing",...r});fe(this,"protectLevel");fe(this,"originLevel");fe(this,"escapeLevel");fe(this,"protectionItem");fe(this,"_ingredientList");fe(this,"_targetRate");fe(this,"_productList");fe(this,"_maxProfitApproximate");this.enhanceLevel=r.enhanceLevel,this.protectLevel=r.protectLevel,this.originLevel=r.originLevel??0,this.escapeLevel=r.escapeLevel??-1;let n=[{hrid:super.item.hrid,count:1,marketPrice:he(super.item.hrid).ask}];super.item.protectionItemHrids&&(n=super.item.protectionItemHrids.map(u=>({hrid:u,count:1,marketPrice:he(u).ask})));const i=super.handlePrice(n.concat([{hrid:"/items/mirror_of_protection",count:1,marketPrice:he("/items/mirror_of_protection").ask}]),[],"ask");this.protectionItem=i.reduce((u,a)=>u.price===-1?a:a.price===-1?u:a.price<u.price?a:u,i[0])}get className(){return"EnhanceCalculator"}get timeCost(){return Mn()/this.speed}get speed(){return super.speed+Math.max(0,this.playerLevel-this.actionLevel)*.01}get efficiency(){return 1}get ingredientList(){if(!this._ingredientList){const{actions:r,protects:n}=this.enhancelate();this._ingredientList=[{hrid:this.item.hrid,count:1/r,marketPrice:he(this.item.hrid,this.originLevel).ask,level:this.originLevel},{hrid:this.protectionItem.hrid,count:n/r,marketPrice:this.protectionItem.marketPrice}].concat(this.item.enhancementCosts.map(i=>({hrid:i.itemHrid,count:i.count,marketPrice:he(i.itemHrid).ask}))),this._ingredientList=this._ingredientList.concat(Ar(this))}return this._ingredientList}get targetRate(){return this._targetRate}get productList(){if(!this._productList){const{actions:r,escapeRate:n,targetRate:i,leapRate:u}=this.enhancelate(),a=i+u;this._targetRate=a,this._productList=[{hrid:this.item.hrid,count:1/r*a,marketPrice:he(this.item.hrid,this.enhanceLevel).bid,level:this.enhanceLevel}],n>0&&this._productList.push({hrid:this.item.hrid,count:1/r*n,marketPrice:he(this.item.hrid,this.realEscapeLevel).bid,level:this.realEscapeLevel}),this._productList=this._productList.concat(Ko(this.item,Mn()).map(o=>({hrid:o.itemHrid,rate:o.dropRate*(1+this.rareRatio),count:(o.minCount+o.maxCount)/2,marketPrice:he(o.itemHrid).bid}))).concat(Yo(this.item,Mn()).map(o=>({hrid:o.itemHrid,count:(o.minCount+o.maxCount)/2,rate:o.dropRate*(1+this.essenceRatio),marketPrice:he(o.itemHrid).bid})))}return this._productList}get profitable(){return!!this.item.enhancementCosts&&this.maxProfitApproximate>0}get available(){return!!this.item.enhancementCosts&&this.originLevel<this.enhanceLevel&&this.escapeLevel<this.originLevel&&this.protectLevel<=this.enhanceLevel}get isEnhance(){return!!this.item.enhancementCosts}get actionLevel(){return this.item.itemLevel}get exp(){const{exp:r,actions:n}=this.enhancelate();return r*(1+ot(this.action,"Experience"))/n}run(){super.run();const r=this.successRateEnhance(Ft().enhancementLevelSuccessRateTable[0]);return this.result.successRate=r,this.result.successRateFormat=er(r),this.result.targetRateFormat=er(this.targetRate),this}get realEscapeLevel(){return this.escapeLevel===-1?-1:this.protectLevel>this.escapeLevel+1?0:this.escapeLevel}get maxProfitApproximate(){if(this._maxProfitApproximate!==void 0)return this._maxProfitApproximate;const r=new Ts({hrid:this.item.hrid,catalystRank:2,enhanceLevel:this.enhanceLevel});if(!r.available)return this._maxProfitApproximate=-1,this._maxProfitApproximate;const{actions:n}=this.enhancelate(),i=this.ingredientListWithPrice.reduce((s,c)=>s+c.price*c.count*n,0),u=this.productListWithPrice.slice(1).reduce((s,c)=>s+c.price*c.count*n*(c.rate||1),0),a=r.successRate*r.productListWithPrice.reduce((s,c)=>s+c.price*c.count*(c.rate||1),0),o=r.ingredientListWithPrice.slice(1).reduce((s,c)=>s+c.price*c.count,0);return this._maxProfitApproximate=(a*(this._targetRate||1)+u)*.98-i-o*(this._targetRate||1),this._maxProfitApproximate}enhancelate(){let r=Wo({enhanceLevel:this.enhanceLevel,protectLevel:this.protectLevel,itemLevel:this.item.itemLevel,originLevel:this.originLevel,escapeLevel:this.escapeLevel});if(r)return r;const n=this.enhanceLevel,i=Ft().enhancementLevelSuccessRateTable,u=this.escapeLevel+1,a=n-u;let o=Je(Zr(n,n));for(let F=0;F<n;F++)F<n-1&&o.set([F,F+1],this.levelUpRate(i[F])),F<n-2&&o.set([F,F+2],this.levelLeapRate(i[F])),o.set([F,F>=this.protectLevel?F-1:0],this.failRate(i[F]));o=Ln(o,In(kr(u,n),kr(u,n)));const s=Rh(Ih(Ba(a),o)),c=gr(s,Ch(a,1));let l=Zr(n,1);for(let F=this.protectLevel;F<n;F++)l.set([F,0],this.failRate(i[F]));l=Ln(l,In(kr(u,n),0));let h=Zr(n,1);for(let F=0;F<n;F++)h.set([F,0],(this.successRateEnhance(i[F])+.1*(1-this.successRateEnhance(i[F])))*Xo(this.item,F));h=Ln(h,In(kr(u,n),0));const d=gr(s,h).get([this.originLevel-u,0]),v=gr(s,l),f=c.get([this.originLevel-u,0]),m=v.get([this.originLevel-u,0]),g=this.levelLeapRate(i[n-2])*(a>1?s.get([this.originLevel-u,a-2]):0)+ +this.levelUpRate(i[n-1])*s.get([this.originLevel-u,a-1]),E=this.levelLeapRate(i[n-1])*s.get([this.originLevel-u,a-1]);let D=1-g-E;return D=Math.abs(D)<1e-10?0:D,r={actions:f,protects:m,targetRate:g,leapRate:E,escapeRate:D,exp:d},jo({enhanceLevel:this.enhanceLevel,protectLevel:this.protectLevel,itemLevel:this.item.itemLevel,originLevel:this.originLevel,escapeLevel:this.escapeLevel},r),r}successRateEnhance(r){return r*(1+bs(this.item))}levelUpRate(r){const n=this.successRateEnhance(r)*(1-ot(this.action,"Blessed"));return Math.min(1,n)}levelLeapRate(r){return this.successRateEnhance(r)*ot(this.action,"Blessed")}failRate(r){return 1-this.successRateEnhance(r)}}class Ap extends ei{constructor(r){super(r);fe(this,"originLevel");fe(this,"_actionItem");fe(this,"_ingredientList");fe(this,"_productList");this.originLevel=r.originLevel||0}get className(){return"ManufactureCalculator"}get actionLevel(){return this.actionItem.levelRequirement.level}get available(){return!!this.actionItem}get actionItem(){return this._actionItem||(this._actionItem=Cr(`/actions/${this.action}/${this.key}`)),this._actionItem}get timeCost(){return this.actionItem.baseTimeCost/this.speed}get ingredientList(){if(!this._ingredientList){let r=[];this.actionItem.upgradeItemHrid&&r.push({hrid:this.actionItem.upgradeItemHrid,count:1,level:this.originLevel,marketPrice:he(this.actionItem.upgradeItemHrid,this.originLevel).ask});const n=ot(this.action,"Artisan");r=r.concat(this.actionItem.inputItems.map(i=>({hrid:i.itemHrid,count:i.count*(1-n),marketPrice:he(i.itemHrid).ask}))),r=r.concat(Ar(this)),this._ingredientList=r}return this._ingredientList}get targetLevel(){let r=Math.round(this.originLevel*.7*100)/100;return go(this.item)&&(r=this.originLevel),r}get productList(){var r,n;if(!this._productList){const i=ot(this.action,"Gourmet");let u=[];const a=this.targetLevel%1;if(this.targetLevel%1===0)u=this.actionItem.outputItems.map(o=>({hrid:o.itemHrid,count:o.count*(1+i),level:Math.floor(this.targetLevel),marketPrice:he(o.itemHrid,Math.floor(this.targetLevel)).bid}));else{let o=he(this.item.hrid,Math.ceil(this.targetLevel)).bid;o<=0&&(o=he(this.item.hrid,Math.floor(this.targetLevel)).bid),u=u.concat([{hrid:this.item.hrid,count:1-a,level:Math.floor(this.targetLevel),marketPrice:he(this.item.hrid,Math.floor(this.targetLevel)).bid},{hrid:this.item.hrid,count:a,level:Math.ceil(this.targetLevel),marketPrice:o}])}u=u.concat(((r=this.actionItem.essenceDropTable)==null?void 0:r.map(o=>({hrid:o.itemHrid,count:o.maxCount,rate:o.dropRate*(1+this.essenceRatio),marketPrice:he(o.itemHrid).bid})))||[]),u=u.concat(((n=this.actionItem.rareDropTable)==null?void 0:n.map(o=>({hrid:o.itemHrid,count:o.maxCount,rate:o.dropRate*(1+this.rareRatio),marketPrice:he(o.itemHrid).bid})))||[]),this._productList=u}return this._productList}}const $h={class:"flex items-center"},zh={class:"flex items-center p-1 pl-2 pr-2",style:{border:"1px solid var(--el-border-color)","border-radius":"4px"}},qh={key:0,class:"community-buff ml-2"},kh={key:0,class:"community-level"},Uh={class:"flex flex-wrap items-baseline"},Hh={class:"mr-3 mb-2"},Vh={style:{display:"flex","align-items":"center",gap:"10px"}},Zh={style:{display:"flex","align-items":"center",gap:"10px"}},Wh={style:{display:"flex","align-items":"center",gap:"10px"}},jh={style:{display:"flex","align-items":"center",gap:"10px"}},Gh={style:{display:"flex","align-items":"center",gap:"10px"}},Jh={style:{"line-height":"32px"}},Yh={style:{display:"flex","align-items":"center",gap:"10px"}},Kh={style:{"line-height":"32px"}},Xh={class:"buff-title"},Qh={class:"buff-tofu-grid"},ep={class:"buff-tofu-head"},tp={class:"buff-title mt-3"},rp={class:"buff-tofu-grid"},np={class:"buff-tofu-head"},ip={class:"buff-title mt-3"},up={class:"buff-tofu-grid"},ap={class:"buff-tofu-head"},op={style:{"text-align":"center"}},sp=lu({__name:"ActionConfig",props:{actions:{},equipments:{},communityBuffs:{},achievementBuffs:{}},setup(e){const t={milking:["/items/gatherer_cape","/items/gatherer_cape_refined"],foraging:["/items/gatherer_cape","/items/gatherer_cape_refined"],woodcutting:["/items/gatherer_cape","/items/gatherer_cape_refined"],cheesesmithing:["/items/artificer_cape","/items/artificer_cape_refined"],crafting:["/items/artificer_cape","/items/artificer_cape_refined"],tailoring:["/items/artificer_cape","/items/artificer_cape_refined"],brewing:["/items/culinary_cape","/items/culinary_cape_refined"],cooking:["/items/culinary_cape","/items/culinary_cape_refined"],enhancing:["/items/chance_cape","/items/chance_cape_refined"],alchemy:["/items/chance_cape","/items/chance_cape_refined"]};function r(I){const P=new Set(t[I]??[]);return Rr(I,"back").filter(J=>P.has(J.hrid)).sort((J,oe)=>J.itemLevel-oe.itemLevel)}const n=Du(),i=tt(!1),u=tt([]),a=tt([]),o=tt([]),s=tt([]),c=tt([]),l=tt([]),h=tt(""),p=tt(""),d=tt(0);function v(I,P){const J=zn("","");u.value=structuredClone(br.map(oe=>{const ae=I.actionConfigMap.get(oe)??J.actionConfigMap.get(oe),se=J.actionConfigMap.get(oe);for(const ve in se){const De=se[ve];De!==void 0&&ae[ve]===void 0&&(ae[ve]=De)}return{...qe(ae)}})),a.value=structuredClone(fn.map(oe=>({...qe(I.specialEquimentMap.get(oe.type)??J.specialEquimentMap.get(oe.type))}))),o.value=structuredClone(vu.map(oe=>({...qe(I.communityBuffMap.get(oe.type)??J.communityBuffMap.get(oe.type))}))),s.value=structuredClone(gu.map(oe=>({...qe(I.achievementBuffMap.get(oe.type)??J.achievementBuffMap.get(oe.type))}))),c.value=ys(),l.value=Array.isArray(I.seals)?[...I.seals]:typeof I.seal=="string"?[I.seal]:[],h.value=I.name,p.value=I.color,i.value=!0,d.value=P}function f(I,P){P===n.presetIndex?v(I,P):n.switchTo(P)}function m(){const I=n.presets.length;v(zn(x("{0}新预设",[I]),"#90ee90"),I)}function g(){const I={actionConfigMap:new Map,specialEquimentMap:new Map,communityBuffMap:new Map,achievementBuffMap:new Map,seals:[...l.value],name:h.value,color:p.value};for(const P of u.value)I.actionConfigMap.set(P.action,qe(P));for(const P of a.value)I.specialEquimentMap.set(P.type,qe(P));for(const P of o.value)I.communityBuffMap.set(P.type,qe(P));for(const P of s.value)I.achievementBuffMap.set(P.type,qe(P));return I}function E(){try{const I=g();cs(I,d.value),i.value=!1}catch(I){Or.error(I.message)}}const D=tt(!1),F=tt(0),_=tt(0),y=tt(),A=tt(0);function b(I,P,J){const se=document.body.offsetWidth-100,ve=J.clientX+10;_.value=ve>se?se:ve,F.value=J.clientY,D.value=!0,A.value=P,y.value=I}function B(){D.value=!1}At(D,I=>{I?document.body.addEventListener("click",B):document.body.removeEventListener("click",B)});function S(){v(y.value,n.presets.length)}function L(){hi.confirm(x("确定删除该预设吗？"),"",{confirmButtonText:x("确定"),cancelButtonText:x("取消"),type:"warning"}).then(()=>{n.removePreset(A.value)}).catch(()=>{})}const{t:x}=fu(),{activeThemeName:Y}=po();function k(){hi.prompt(x("请粘贴导出的预设配置"),x("导入"),{confirmButtonText:x("确定"),cancelButtonText:x("取消"),inputPattern:/^\s*\{.*\}\s*$/,inputErrorMessage:x("请输入正确的JSON格式")}).then(({value:I})=>{try{const P=JSON.parse(I);if(!P.name||!P.color||!P.actionConfigMap||!P.specialEquimentMap)throw new Error(x("无效的预设配置"));const J={name:P.name,color:P.color,seals:Array.isArray(P.seals)?P.seals:typeof P.seal=="string"?[P.seal]:[],actionConfigMap:new Map(Object.entries(P.actionConfigMap)),specialEquimentMap:new Map(Object.entries(P.specialEquimentMap)),communityBuffMap:new Map(Object.entries(P.communityBuffMap)),achievementBuffMap:new Map(Object.entries(P.achievementBuffMap||{}))};v(J,n.presets.length)}catch(P){console.error(P),Or.error(x("无效的预设配置"))}}).catch(()=>{})}function Z(){const I=g(),P=JSON.stringify({name:I.name,color:I.color,seals:I.seals,actionConfigMap:Object.fromEntries(I.actionConfigMap.entries()),specialEquimentMap:Object.fromEntries(I.specialEquimentMap.entries()),communityBuffMap:Object.fromEntries(I.communityBuffMap.entries()),achievementBuffMap:Object.fromEntries(I.achievementBuffMap.entries())});navigator.clipboard.writeText(P).then(()=>{Or.success(x("已复制到剪贴板"))}).catch(()=>{Or.error(x("复制失败，请检查浏览器权限设置"))})}function T(I){return l.value.includes(I)}function Q(I,P){const J=l.value.indexOf(I);P&&J===-1&&l.value.push(I),!P&&J!==-1&&l.value.splice(J,1)}return(I,P)=>{const J=Fo,oe=Oo,ae=xo,se=No,ve=Lo,De=To,Ae=Po,be=Io,Ve=So,ye=Mo,ge=Bo,Qe=Ao,Ue=Eo;return _e(),Re(rt,null,[yo(de("ul",{class:"contextmenu",style:wo({left:`${K(_)}px`,top:`${K(F)}px`})},[K(n).isOverflow()?mr("",!0):(_e(),Re("li",{key:0,onClick:S}," 复制 ")),K(n).presets.length>1?(_e(),Re("li",{key:1,onClick:L}," 删除 ")):mr("",!0)],4),[[_o,K(D)]]),de("div",$h,[de("div",zh,[de("div",null,Ee(K(x)("预设"))+":",1),(_e(!0),Re(rt,null,lt(K(n).presets,(O,$)=>(_e(),xt(J,{class:"ml-1 w-32px",plain:K(n).presetIndex!==$,color:"#16ab1b",dark:K(Y).includes("dark"),key:$,onClick:Pe=>f(O,$),onContextmenu:Co(Pe=>b(O,$,Pe),["prevent"])},{default:ne(()=>{var Pe;return[ut(Ee((Pe=O.name)==null?void 0:Pe.substring(0,1)),1)]}),_:2},1032,["plain","dark","onClick","onContextmenu"]))),128)),K(n).isOverflow()?mr("",!0):(_e(),xt(J,{key:0,class:"ml-1 w-24px",size:"small",icon:K(bo),plain:"",onClick:m},null,8,["icon"]))]),(_e(!0),Re(rt,null,lt(K(n).config.communityBuffMap.entries(),([O,$])=>(_e(),Re(rt,{key:O},[$.level?(_e(),Re("div",qh,[X(Ze,{hrid:K(Rn)($.hrid).buff.typeHrid,width:22,height:22},null,8,["hrid"]),$.level?(_e(),Re("div",kh," Lv."+Ee($.level),1)):mr("",!0)])):mr("",!0)],64))),128))]),X(Ue,{modelValue:K(i),"onUpdate:modelValue":P[1]||(P[1]=O=>fi(i)?i.value=O:null),"show-close":!1,width:"80%"},{footer:ne(()=>[de("div",op,[X(J,{type:"primary",onClick:E},{default:ne(()=>[ut(Ee(K(x)("保存")),1)]),_:1})])]),default:ne(()=>[X(Qe,{gutter:20,class:"mt-[-30px]"},{default:ne(()=>[X(ge,{xs:24,sm:24,md:24,lg:24,xl:16},{default:ne(()=>[X(ye,{class:"mt-5"},{header:ne(()=>[de("div",Uh,[de("div",Hh,Ee(K(x)("预设名称"))+": ",1),X(oe,{class:"w-300px",maxlength:20,modelValue:K(h),"onUpdate:modelValue":P[0]||(P[0]=O=>fi(h)?h.value=O:null)},null,8,["modelValue"]),X(J,{type:"success",plain:"",class:"ml-4",onClick:k},{default:ne(()=>[ut(Ee(K(x)("导入")),1)]),_:1}),X(J,{type:"success",plain:"",class:"ml-4",onClick:Z},{default:ne(()=>[ut(Ee(K(x)("导出")),1)]),_:1})])]),default:ne(()=>[X(Ve,{data:K(u).filter(O=>I.actions?I.actions.includes(O.action):!0)},{default:ne(()=>[X(ae,{prop:"name",width:"54"},{default:ne(({row:O})=>[X(Ze,{hrid:`/actions/${O.action}`},null,8,["hrid"])]),_:1}),X(ae,{label:K(x)("Action"),width:"125",align:"center"},{default:ne(({row:O})=>[ut(Ee(K(x)(O.action)),1)]),_:1},8,["label"]),X(ae,{label:K(x)("技能等级"),width:"85",align:"center"},{default:ne(({row:O})=>[X(se,{modelValue:O.playerLevel,"onUpdate:modelValue":$=>O.playerLevel=$,min:1,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("房子等级"),width:"85",align:"center"},{default:ne(({row:O})=>[X(se,{modelValue:O.houseLevel,"onUpdate:modelValue":$=>O.houseLevel=$,min:0,max:10,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("工具"),align:"center","min-width":"105"},{default:ne(({row:O})=>[X(De,{style:{width:"80px"},modelValue:O.tool.hrid,"onUpdate:modelValue":$=>O.tool.hrid=$,placeholder:K(x)("无"),clearable:""},{label:ne(()=>[X(Ze,{style:{"margin-top":"4px"},hrid:O.tool.hrid},null,8,["hrid"])]),default:ne(()=>[(_e(!0),Re(rt,null,lt(K(Su)(O.action),$=>(_e(),xt(ve,{key:$.hrid,label:$.name,value:$.hrid},{default:ne(()=>[de("div",Vh,[X(Ze,{hrid:$.hrid},null,8,["hrid"]),de("div",null,Ee($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),P[2]||(P[2]=ut("  +  ")),X(se,{modelValue:O.tool.enhanceLevel,"onUpdate:modelValue":$=>O.tool.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("身体"),align:"center","min-width":"105"},{default:ne(({row:O})=>[X(De,{style:{width:"80px"},modelValue:O.body.hrid,"onUpdate:modelValue":$=>O.body.hrid=$,placeholder:K(x)("无"),clearable:""},{label:ne(()=>[X(Ze,{style:{"margin-top":"4px"},hrid:O.body.hrid},null,8,["hrid"])]),default:ne(()=>[(_e(!0),Re(rt,null,lt(K(Rr)(O.action,"body"),$=>(_e(),xt(ve,{key:$.hrid,label:$.name,value:$.hrid},{default:ne(()=>[de("div",Zh,[X(Ze,{hrid:$.hrid},null,8,["hrid"]),de("div",null,Ee($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),P[3]||(P[3]=ut("  +  ")),X(se,{modelValue:O.body.enhanceLevel,"onUpdate:modelValue":$=>O.body.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("腿部"),align:"center","min-width":"105"},{default:ne(({row:O})=>[X(De,{style:{width:"80px"},modelValue:O.legs.hrid,"onUpdate:modelValue":$=>O.legs.hrid=$,placeholder:K(x)("无"),clearable:""},{label:ne(()=>[X(Ze,{style:{"margin-top":"4px"},hrid:O.legs.hrid},null,8,["hrid"])]),default:ne(()=>[(_e(!0),Re(rt,null,lt(K(Rr)(O.action,"legs"),$=>(_e(),xt(ve,{key:$.hrid,label:$.name,value:$.hrid},{default:ne(()=>[de("div",Wh,[X(Ze,{hrid:$.hrid},null,8,["hrid"]),de("div",null,Ee($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),P[4]||(P[4]=ut("  +  ")),X(se,{modelValue:O.legs.enhanceLevel,"onUpdate:modelValue":$=>O.legs.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("背部"),align:"center","min-width":"105"},{default:ne(({row:O})=>[X(De,{style:{width:"80px"},modelValue:O.back.hrid,"onUpdate:modelValue":$=>O.back.hrid=$,placeholder:K(x)("无"),clearable:""},{label:ne(()=>[X(Ze,{style:{"margin-top":"4px"},hrid:O.back.hrid},null,8,["hrid"])]),default:ne(()=>[(_e(!0),Re(rt,null,lt(r(O.action),$=>(_e(),xt(ve,{key:$.hrid,label:$.name,value:$.hrid},{default:ne(()=>[de("div",jh,[X(Ze,{hrid:$.hrid},null,8,["hrid"]),de("div",null,Ee($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),P[5]||(P[5]=ut("  +  ")),X(se,{modelValue:O.back.enhanceLevel,"onUpdate:modelValue":$=>O.back.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("护符"),align:"center","min-width":"105"},{default:ne(({row:O})=>[X(De,{style:{width:"80px"},modelValue:O.charm.hrid,"onUpdate:modelValue":$=>O.charm.hrid=$,placeholder:K(x)("无"),clearable:""},{label:ne(()=>[X(Ze,{style:{"margin-top":"4px"},hrid:O.charm.hrid},null,8,["hrid"])]),default:ne(()=>[(_e(!0),Re(rt,null,lt(K(Rr)(O.action,"charm").sort(($,Pe)=>$.itemLevel-Pe.itemLevel),$=>(_e(),xt(ve,{key:$.hrid,label:$.name,value:$.hrid},{default:ne(()=>[de("div",Gh,[X(Ze,{hrid:$.hrid},null,8,["hrid"]),de("div",null,Ee($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),P[6]||(P[6]=ut("  +  ")),X(se,{modelValue:O.charm.enhanceLevel,"onUpdate:modelValue":$=>O.charm.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),X(ae,{label:K(x)("茶"),align:"center","min-width":"155"},{default:ne(({row:O})=>[X(be,{modelValue:O.tea,"onUpdate:modelValue":$=>O.tea=$,size:"large",max:3,class:"tea-checkbox-group"},{default:ne(()=>[(_e(!0),Re(rt,null,lt(K(Ds)(O.action),$=>(_e(),xt(Ae,{key:$.hrid,value:$.hrid,border:""},{default:ne(()=>[X(Ze,{hrid:$.hrid},null,8,["hrid"])]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1}),X(ge,{xs:24,sm:24,md:24,lg:24,xl:8},{default:ne(()=>[X(Qe,{gutter:20},{default:ne(()=>[X(ge,{xs:24,sm:24,md:14,lg:12,xl:24},{default:ne(()=>[X(ye,{class:"mt-5"},{header:ne(()=>[de("div",Jh,Ee(K(x)("其他")),1)]),default:ne(()=>[X(Ve,{data:K(a).filter(O=>I.equipments?I.equipments.includes(O.type):!0)},{default:ne(()=>[X(ae,{prop:"type",label:K(x)("部位"),width:"120"},{default:ne(({row:O})=>[ut(Ee(K(x)(O.type.replace(/_/g," ").replace(/\b\w+\b/g,$=>$.substring(0,1).toUpperCase()+$.substring(1)))),1)]),_:1},8,["label"]),X(ae,{label:K(x)("装备")},{default:ne(({row:O})=>[X(De,{style:{width:"80px"},modelValue:O.hrid,"onUpdate:modelValue":$=>O.hrid=$,placeholder:K(x)("无"),clearable:""},{label:ne(()=>[X(Ze,{style:{"margin-top":"4px"},hrid:O.hrid},null,8,["hrid"])]),default:ne(()=>[(_e(!0),Re(rt,null,lt(K(ps)(O.type),$=>(_e(),xt(ve,{key:$.hrid,label:$.name,value:$.hrid},{default:ne(()=>[de("div",Yh,[X(Ze,{hrid:$.hrid},null,8,["hrid"]),de("div",null,Ee($.name),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),P[7]||(P[7]=ut("  +  ")),X(se,{modelValue:O.enhanceLevel,"onUpdate:modelValue":$=>O.enhanceLevel=$,min:0,max:20,style:{width:"60px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1}),X(ge,{xs:24,sm:24,md:10,lg:12,xl:24},{default:ne(()=>[X(ye,{class:"mt-5"},{header:ne(()=>[de("div",Kh,Ee(K(x)("其他Buff")),1)]),default:ne(()=>[de("div",Xh,Ee(K(x)("封印")),1),de("div",Qh,[(_e(!0),Re(rt,null,lt(K(c),O=>(_e(),Re("div",{class:"buff-tofu",key:`seal-${O.hrid}`},[de("div",ep,[X(Ze,{hrid:O.hrid},null,8,["hrid"]),de("span",null,Ee(O.name),1)]),X(Ae,{"model-value":T(O.hrid),onChange:$=>Q(O.hrid,!!$)},{default:ne(()=>[ut(Ee(K(x)("启用")),1)]),_:2},1032,["model-value","onChange"])]))),128))]),de("div",tp,Ee(K(x)("社区Buff")),1),de("div",rp,[(_e(!0),Re(rt,null,lt(K(o).filter(O=>I.communityBuffs?I.communityBuffs.includes(O.type):!0),O=>(_e(),Re("div",{class:"buff-tofu",key:`community-${O.type}`},[de("div",np,[X(Ze,{hrid:K(Rn)(O.hrid).buff.typeHrid,width:22,height:22},null,8,["hrid"]),de("span",null,Ee(K(x)("等级")),1)]),X(se,{modelValue:O.level,"onUpdate:modelValue":$=>O.level=$,min:0,max:20,style:{width:"90px"},controls:!1},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),de("div",ip,Ee(K(x)("成就Buff")),1),de("div",up,[(_e(!0),Re(rt,null,lt(K(s).filter(O=>I.achievementBuffs?I.achievementBuffs.includes(O.type):!0),O=>{var $,Pe;return _e(),Re("div",{class:"buff-tofu",key:`achievement-${O.type}`},[de("div",ap,[X(Ze,{hrid:($=K($n)(`/achievement_tiers/${O.type}`))==null?void 0:$.buff.typeHrid,width:22,height:22},null,8,["hrid"]),de("span",null,Ee(((Pe=K($n)(`/achievement_tiers/${O.type}`))==null?void 0:Pe.name)||O.type),1)]),X(Ae,{modelValue:O.enabled,"onUpdate:modelValue":mt=>O.enabled=mt},{default:ne(()=>[ut(Ee(K(x)("启用")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),Bp=hu(sp,[["__scopeId","data-v-e5a776a9"]]),cp={href:"https://www.milkywayidle.com/game_data/marketplace.json",target:"_blank",rel:"noopener noreferrer"},lp=lu({__name:"GameInfo",setup(e){const t="1.3.412",{t:r}=fu();return(n,i)=>{var u,a,o;return _e(),Re(rt,null,[de("div",null,Ee(K(r)("Milkonomy"))+" v"+Ee(K(t)),1),de("div",{class:Ro({error:((u=K(On)())==null?void 0:u.timestamp)*1e3<Date.now()-1e3*60*120,success:((a=K(On)())==null?void 0:a.timestamp)*1e3>Date.now()-1e3*60*120})},[de("a",cp,Ee(K(r)("市场数据来源(MilkyWayIdle)"))+" : "+Ee(new Date(((o=K(mo)().marketData)==null?void 0:o.timestamp)*1e3).toLocaleString()),1)],2)],64)}}}),Mp=hu(lp,[["__scopeId","data-v-87d51891"]]);export{Bp as A,bp as C,Ts as D,Cp as E,Mp as G,Ap as M,Fp as T,$t as a,he as b,zo as c,yi as d,On as e,vp as f,Dp as g,Cs as h,Ft as i,Ep as j,Xn as k,ei as l,It as m,Wr as n,Cr as o,er as p,Ar as q,ot as r,gp as s,_p as t,Du as u,Gr as v,wp as w,yp as x};
