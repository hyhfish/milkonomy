import{k as ne,r as f,aJ as oe,w as N,u as se,f as v,i,s as t,F as s,v as a,q as l,at as ie,a5 as $,av as re,au as ue,aK as ce,ao as de,aL as pe,p as b,ax as me,D as g,Y as j,az as fe,aM as _e,G as m,a0 as ge,V as he,n as ve,O as be,P as Le,aN as ye,aw as xe,aO as Ce,aP as ke,aD as Ve,ay as Pe,aS as Se,aT as G,aU as De,h as p}from"./vue-0ucuI9Mt.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-CjRkRCNG.js";import{u as Ee,A as ze,_ as Ie,M as Me}from"./ManualPriceCard-CZUTLASV.js";import{g as Fe}from"./index-Vnd28Snn.js";import{u as Ue}from"./useMemory-r0PnY6ha.js";import{u as Ae}from"./usePriceStatus-tnclHOak.js";import{G as Be,A as He,f as Re,h as D,u as Te}from"./GameInfo-CD_tVD5Z.js";import{P as Ne,v as E}from"./index-DYCH4vBP.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";const je={class:"app-container"},Ge={class:"game-info"},Je={class:"title"},qe={style:{display:"flex"}},Oe={key:0},We={key:1},Ke={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},Ye={style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},Qe={class:"pager-wrapper"},Xe=ne({__name:"pickout",setup(Ze){const{paginationData:u,handleCurrentChange:J,handleSizeChange:q}=Ee({},"pickout-leaderboard-pagination"),V=f([]),O=f(null),r=Ue("pickout-leaderboard-search-data",{name:"",project:"",profitRate:"",maxLevel:20,minLevel:1,minItemLevel:90,banEquipment:!1,banJewelry:!0,bestManufacture:!0}),P=f(!1),L=oe(()=>{P.value=!0,Fe({currentPage:u.currentPage,size:u.pageSize,...r.value,sort:z.value},"pickout").then(c=>{u.total=c.total,V.value=c.list}).catch(c=>{console.error(c),V.value=[]}).finally(()=>{P.value=!1})},300);function _(){u.currentPage===1?L():u.currentPage=1}const z=f({prop:"result.profitPH",order:"ascending"});function W(c){z.value=c,L()}N([()=>u.currentPage,()=>u.pageSize,()=>E().marketData,()=>Te().config,()=>E().buyStatus,()=>E().sellStatus],L,{immediate:!0}),N(()=>D(),()=>{L()},{deep:!0});const I=f(),y=f(!1);async function K(c){I.value=G(c),y.value=!0}const x=f(!1),M=f();function Y(c){if(!D().activated){De.confirm(n("是否确定开启自定义价格？"),n("需先开启自定义价格"),{confirmButtonText:n("确定"),cancelButtonText:n("取消"),closeOnClickModal:!0}).then(()=>{D().setActivated(!0)});return}M.value=G(c),x.value=!0}const{t:n}=se();return Ae("pickout-price-status",{sellStatus:Ne.ASK}),(c,o)=>{const Q=Ve,h=ke,S=Pe,F=Se,X=Ce,d=me,U=fe,A=ve("Warning"),B=he,H=ge,Z=xe,w=ce,ee=ue,R=re,ae=ie,te=pe;return p(),v("div",je,[i("div",Ge,[t(Be),i("div",null,[t(He,{actions:["enhancing","cheesesmithing","crafting","tailoring"],equipments:["off_hand","hands","neck","earrings","ring","pouch"]})]),i("div",null,s(a(n)("打野爽！")),1)]),t(ae,{gutter:20,class:"row"},{default:l(()=>[t(R,{xs:24,sm:24,md:24,lg:24,xl:16},{default:l(()=>[t(ee,null,{header:l(()=>[t(X,{class:"rank-card",ref_key:"ldSearchFormRef",ref:O,inline:!0,model:a(r)},{default:l(()=>[i("div",Je,s(a(n)("利润排行")),1),t(h,{prop:"name",label:a(n)("物品")},{default:l(()=>[t(Q,{style:{width:"100px"},modelValue:a(r).name,"onUpdate:modelValue":o[0]||(o[0]=e=>a(r).name=e),placeholder:a(n)("请输入"),clearable:"",onInput:_},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(h,{label:a(n)("目标等级从")},{default:l(()=>[t(S,{style:{width:"80px"},min:1,max:20,modelValue:a(r).minLevel,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).minLevel=e),placeholder:"1",clearable:"",onChange:_,"controls-position":"right"},null,8,["modelValue"]),m(" "+s(a(n)("到"))+"  ",1),t(S,{style:{width:"80px"},min:1,max:20,modelValue:a(r).maxLevel,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).maxLevel=e),placeholder:"20",clearable:"",onChange:_,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),t(h,{label:`${a(n)("物品等级")} ≥`},{default:l(()=>[t(S,{style:{width:"80px"},modelValue:a(r).minItemLevel,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).minItemLevel=e),placeholder:"0",clearable:"",onChange:_,controls:!1},null,8,["modelValue"])]),_:1},8,["label"]),t(h,null,{default:l(()=>[t(F,{modelValue:a(r).bestManufacture,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).bestManufacture=e),onChange:_,disabled:""},{default:l(()=>[m(s(a(n)("最佳制作方案")),1)]),_:1},8,["modelValue"])]),_:1}),t(h,null,{default:l(()=>[t(F,{modelValue:a(r).banJewelry,"onUpdate:modelValue":o[5]||(o[5]=e=>a(r).banJewelry=e),onChange:_},{default:l(()=>[m(s(a(n)("排除首饰")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),default:l(()=>[de((p(),b(Z,{data:a(V),onSortChange:W,"default-sort":{prop:"result.profitPH",order:"ascending"}},{default:l(()=>[t(d,{width:"54"},{default:l(({row:e})=>[t(k,{hrid:e.hrid},null,8,["hrid"])]),_:1}),t(d,{prop:"result.name",label:a(n)("物品")},null,8,["label"]),t(d,{"min-width":"70"},{default:l(({row:e})=>[i("div",qe,[e.calculatorList&&e.calculatorList[e.calculatorList.length-1].protectLevel<e.calculatorList[e.calculatorList.length-1].enhanceLevel?(p(),b(k,{key:0,hrid:e.calculatorList[e.calculatorList.length-1].protectionItem.hrid},null,8,["hrid"])):g("",!0),e.protectLevel<e.enhanceLevel?(p(),b(k,{key:1,hrid:e.protectionItem.hrid},null,8,["hrid"])):g("",!0),e.catalyst?(p(),b(k,{key:2,hrid:`/items/${e.catalyst}`},null,8,["hrid"])):g("",!0)]),e.calculatorList&&e.calculatorList[e.calculatorList.length-1].protectLevel<e.calculatorList[e.calculatorList.length-1].enhanceLevel?(p(),v("div",Oe,s(a(n)("从{0}保护",[e.calculatorList[e.calculatorList.length-1].protectLevel])),1)):g("",!0),e.protectLevel<e.enhanceLevel?(p(),v("div",We,s(a(n)("从{0}保护",[e.protectLevel])),1)):g("",!0)]),_:1}),t(d,{prop:"project",label:a(n)("动作")},null,8,["label"]),t(d,{prop:"result.profitPH",label:a(n)("利润 / h"),align:"center","min-width":"120",sortable:"custom","sort-orders":["ascending",null]},{default:l(({row:e})=>[i("span",{class:j(e.hasManualPrice?"manual":"")},s(e.result.profitPHFormat)+"  ",3),t(U,{type:"primary",icon:a(_e),onClick:C=>Y(e)},{default:l(()=>[m(s(a(n)("自定义")),1)]),_:2},1032,["icon","onClick"])]),_:1},8,["label"]),t(d,{label:a(n)("损耗 / h"),align:"center"},{default:l(({row:e})=>[m(s(e.calculator.result.cost4MatPHFormat),1)]),_:1},8,["label"]),t(d,{align:"center","min-width":"120"},{header:l(()=>[i("div",Ke,[i("div",null,s(a(n)("利润 / 次")),1),t(H,{placement:"top",effect:"light"},{content:l(()=>[m(s(a(n)("单次动作产生的利润。"))+" ",1),o[8]||(o[8]=i("br",null,null,-1)),m(" "+s(a(n)("#多步动作利润提示"))+" ",1),o[9]||(o[9]=i("br",null,null,-1)),m(" "+s(a(n)("#多步动作利润举例")),1)]),default:l(()=>[t(B,null,{default:l(()=>[t(A)]),_:1})]),_:1})])]),default:l(({row:e})=>[i("span",{class:j(e.hasManualPrice?"manual":"")},s(e.result.profitPPFormat)+"  ",3)]),_:1}),t(d,{label:a(n)("售价"),align:"center"},{default:l(({row:e})=>[i("span",null,s(Re(e.calculator.productListWithPrice[0].price)),1)]),_:1},8,["label"]),t(d,{"min-width":"120",label:a(n)("经验 / h"),align:"center"},{default:l(({row:e})=>{var C;return[i("div",Ye,[i("div",null,s(e.result.expPHFormat),1),((C=e.expList)==null?void 0:C.length)>1?(p(),b(H,{key:0,placement:"top",effect:"light"},{content:l(()=>[(p(!0),v(be,null,Le(e.expList,(T,le)=>(p(),v("div",{key:le,style:{display:"flex",gap:"10px"}},[i("div",null,s(a(n)(T.action)),1),i("div",null,s(T.expPHFormat),1)]))),128))]),default:l(()=>[t(B,null,{default:l(()=>[t(A)]),_:1})]),_:2},1024)):g("",!0)])]}),_:1},8,["label"]),t(d,{label:a(n)("详情"),align:"center"},{default:l(({row:e})=>[t(U,{type:"primary",icon:a(ye),onClick:C=>K(e)},{default:l(()=>[m(s(a(n)("查看")),1)]),_:2},1032,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[te,a(P)]])]),footer:l(()=>[i("div",Qe,[t(w,{background:"",layout:a(u).layout,"page-sizes":a(u).pageSizes,total:a(u).total,"page-size":a(u).pageSize,"current-page":a(u).currentPage,onSizeChange:a(q),onCurrentChange:a(J)},null,8,["layout","page-sizes","total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1})]),_:1}),t(R,{xs:24,sm:24,md:24,lg:24,xl:8},{default:l(()=>[t(Me,{"memory-key":"pickout"})]),_:1})]),_:1}),t(ze,{modelValue:a(y),"onUpdate:modelValue":o[6]||(o[6]=e=>$(y)?y.value=e:null),data:a(I)},null,8,["modelValue","data"]),t(Ie,{modelValue:a(x),"onUpdate:modelValue":o[7]||(o[7]=e=>$(x)?x.value=e:null),data:a(M)},null,8,["modelValue","data"])])}}}),ra=$e(Xe,[["__scopeId","data-v-87696b8b"]]);export{ra as default};
