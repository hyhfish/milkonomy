import{k as Te,u as We,S as $e,r as x,l as re,H as je,w as le,f as y,h,ao as ze,i as g,s as a,ar as Ne,v as e,aq as fe,q as i,av as De,au as qe,D as T,O as D,aw as J,ax as Be,G as R,F as b,p as L,ay as Oe,ab as Ae,P as ie,aQ as Ge,a5 as ae,ad as Qe,az as Je,aA as Xe,aB as ge,aC as Ye,aD as Ke,R as Le,aE as Ze,aF as et,ac as tt,aH as lt,aI as at,at as ot}from"./vue-DmXGC6sY.js";import{_ as W,g as nt}from"./index.vue_vue_type_script_setup_true_lang-D7BdDwpT.js";import{g as rt,a as X,M as he,b as F,E as it,p as st,m as Y,c as ct,n as k,G as ut,A as dt,d as pt,u as ht}from"./GameInfo-IQrmJeRM.js";import{W as mt,g as ft}from"./workflow-BJFKHpbK.js";import{u as gt}from"./enhancer-KvDSlfD0.js";import{C as He,v as Ie,P as vt}from"./index-27uvcALl.js";import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _t={class:"app-container"},xt={class:"game-info"},yt={class:"flex flex-col gap-2"},wt={class:"whitespace-nowrap flex-shrink-0"},Pt={class:"flex flex-wrap items-center gap-x-4 gap-y-2"},kt={class:"text-xs color-gray-500 mb-1"},Vt={style:{position:"relative",width:"100%","padding-bottom":"100%"}},Ct={key:0,class:"absolute bottom-0 right-0"},Lt={class:"mb-2 color-gray-500"},Ht={"color-gray-600":""},It={class:"flex flex-wrap"},Et={class:"absolute bottom-0 right-0"},Ft={style:{display:"flex","flex-wrap":"wrap","margin-top":"10px"}},Mt={key:0,class:"absolute bottom-0 right-0"},St={class:"flex justify-between items-center"},Rt={class:"font-size-14px"},Ut={class:"flex justify-between items-center"},Tt={class:"font-size-14px"},Wt={class:"grid w-full items-center gap-x-1",style:{gridTemplateColumns:"44px minmax(0, 1fr) 44px"}},$t={class:"font-size-14px whitespace-nowrap"},jt={class:"grid w-full items-center gap-x-1 mt-2",style:{gridTemplateColumns:"44px minmax(0, 1fr) 44px"}},zt={class:"font-size-14px whitespace-nowrap"},Nt=Te({__name:"index",setup(Dt){const c=gt(),{t:r}=We(),me=$e();function ve(n){if(typeof n=="string")return n;if(Array.isArray(n)&&typeof n[0]=="string")return n[0]}function be(n={}){const t=ve(me.query.hrid),s=ve(me.query.enhanceLevel);if(s){const l=Math.floor(Number(s));Number.isFinite(l)&&l>=1&&l<=20&&(c.config.enhanceLevel=l)}if(t&&!(d.value.hrid===t&&!n.selectItem)&&(c.config.hrid=t,n.selectItem))try{ne(X(t))}catch(l){console.warn("Invalid hrid from route query",t,l)}}const oe=x(!1),K=x(""),Ee=re(()=>rt().filter(n=>r(n.name).toLocaleLowerCase().includes(K.value.toLowerCase())).sort((n,t)=>n.sortIndex-t.sortIndex)),d=x({protection:{},originPrice:0}),M=x([]),$=x([]),Z=x([]),ee=x([]),q={hourlyRate:5e6,taxRate:2,enhanceLevel:10},se=re({get:()=>!c.config.ignoreTax,set:n=>{c.config.ignoreTax=!n}});je(()=>{be({selectItem:!1}),c.hrid&&ne(X(c.hrid))}),le(()=>me.query,()=>{be({selectItem:!0})},{immediate:!1}),le(()=>c.config,()=>{c.saveConfig()},{deep:!0});const H=x(!1),B=x(!1),O=x(!1);le([()=>M.value,()=>H.value,()=>B.value,()=>O.value],Se,{deep:!0}),le([()=>H.value,()=>B.value,()=>O.value],()=>{_e()},{deep:!1});function ce(n){return X(n).categoryHrid==="/item_categories/drink"}function A(n,t){return O.value?F(n,t,Ie().buyStatus,vt.BID_HIGH).bid:F(n,t).ask}function Fe(n){const t=[[r("锻造"),"cheesesmithing"],[r("制造"),"crafting"],[r("裁缝"),"tailoring"]];let s;for(const[l,u]of t){const f=new he({hrid:n,project:l,action:u});if(f.available){s=f;break}}return s!=null&&s.available?s.ingredientList.filter(l=>!ce(l.hrid)).map(l=>({hrid:l.hrid,count:l.count,level:l.level,originPrice:A(l.hrid,l.level)})):[]}function Me(n){var I;const t=X(n),s=[[r("锻造"),"cheesesmithing"],[r("制造"),"crafting"],[r("裁缝"),"tailoring"]],l=nt(t)==="charm"?7:2;let u;for(const[v,C]of s)for(const[E,z]of s){const _=new he({hrid:n,project:E,action:z});if(!_.available)continue;const N=[_],G=[[...N]];let Q=_,o=1;for(;(I=Q.actionItem)!=null&&I.upgradeItemHrid&&o<l;){const p=new he({hrid:Q.actionItem.upgradeItemHrid,project:v,action:C});if(!p.available)break;N.unshift(p),o++,G.push([...N]),Q=p}for(const p of G){const m=new mt(p.map(U=>ft(U)),r("{0}步{1}",[p.length,E]));m.run();const S=m.productListWithPricePreprocess.list.filter(U=>U.hrid===n).reduce((U,te)=>U+(te.countPH||0),0);if(!S||S<=1e-12)continue;const Ce=m.ingredientListWithPrice.filter(U=>!ce(U.hrid)).reduce((U,te)=>{const Ue=O.value?A(te.hrid,te.level):te.price;return U+(te.countPH||0)*Ue},0)/S;(!u||Ce<u.costPerItem)&&(u={workflow:m,outputPH:S,costPerItem:Ce})}}if(!u)return;const{workflow:f,outputPH:w}=u,V=f.ingredientListWithPrice.filter(v=>!ce(v.hrid)).map(v=>({hrid:v.hrid,count:(v.countPH||0)/w,level:v.level,originPrice:A(v.hrid,v.level)})),P=[];return f.calculatorList.forEach((v,C)=>{if(Array.isArray(v))return;const E=f.workMultiplier[C],z=v.ingredientListWithPrice.filter(_=>!ce(_.hrid)).map(_=>({hrid:_.hrid,count:(_.countPH||0)*E/w,level:_.level,originPrice:A(_.hrid,_.level)}));P.push({title:`${r("{0}步{1}",[C+1,v.project])}:`,ingredients:z})}),{totalIngredients:V,stepList:P}}function _e(){const n=d.value.hrid;if(!n){M.value=[],$.value=[];return}if(!H.value){$.value=[];return}if(!B.value){M.value=Fe(n),$.value=[];return}const t=Me(n);if(!t){M.value=[],$.value=[];return}M.value=t.totalIngredients,$.value=t.stepList}function ne(n){if(!n)return;c.config.hrid=n.hrid,d.value={hrid:n.hrid,originPrice:0},oe.value=!1;const t=[[r("锻造"),"cheesesmithing"],[r("制造"),"crafting"],[r("裁缝"),"tailoring"]];let s;for(const[l,u]of t)if(s=new he({hrid:n.hrid,project:l,action:u}),s.available)break;M.value=s.available?s.ingredientList.filter(l=>X(l.hrid).categoryHrid!=="/item_categories/drink").map(l=>({hrid:l.hrid,count:l.count,level:l.level,originPrice:A(l.hrid,l.level)})):[],Z.value=n.enhancementCosts.map(l=>({hrid:l.itemHrid,count:l.count,originPrice:F(l.itemHrid).ask})),ee.value=n.protectionItemHrids?n.protectionItemHrids.map(l=>({hrid:l,count:1,originPrice:F(l).ask})):[],ee.value.length||ee.value.push({hrid:n.hrid,count:1,originPrice:F(n.hrid).ask}),ee.value.push({hrid:"/items/mirror_of_protection",count:1,originPrice:F("/items/mirror_of_protection").ask}),d.value.protection=ee.value.reduce((l,u)=>l&&l.originPrice<u.originPrice?l:u),_e()}const j=re(()=>{var u,f;if(!d.value.hrid)return[];const n=[],t=!!c.config.ignoreTax,s=t?1:.98,l=c.enhanceLevel??q.enhanceLevel;for(let w=1;w<=l;++w){const V=new it({hrid:d.value.hrid,enhanceLevel:l,protectLevel:w}),{actions:P,protects:I}=V.enhancelate(),v=Z.value.reduce((Q,o)=>{const p=typeof o.price=="number"?o.price:o.originPrice;return Q+p*o.count*P},0)+(typeof((u=d.value.protection)==null?void 0:u.price)=="number"?d.value.protection.price:d.value.protection.originPrice)*I,C=v+(typeof((f=d.value)==null?void 0:f.price)=="number"?d.value.price:d.value.originPrice);let E=C+(c.hourlyRate??q.hourlyRate)*(P/V.actionsPH);t||(E*=1+(c.taxRate??q.taxRate)/100);const z=typeof d.value.productPrice=="number"?d.value.productPrice:F(d.value.hrid,l).bid,_=(z*s-C)/P*V.actionsPH,N=z*s-C,G=P/V.actionsPH*3600;n.push({actions:P,actionsFormatted:k(P,2),protects:I,protectsFormatted:k(I,2),protectLevel:w,time:ct(G*1e9),expPHFormat:Y(V.exp*V.actionsPH),matCost:Y(v),totalCostFormatted:Y(E),totalCost:E,totalCostNoHourly:C,matCostPH:`${Y(v/G*3600)} / h`,hourlyCost:_,hourlyCostFormatted:Y(_),profitPPFormatted:Y(N),profitRateFormatted:st(N/C)})}return n}),ue=re(()=>{if(!j.value.length)return{};const n=Object.keys(j.value[0]),t={};for(const s of n){const l=Math.max(...j.value.map(u=>{var f;return((f=u[s])==null?void 0:f.toString().length)||0}));t[s]=Math.max(l*10+20,60)}for(const s of Z.value){const l=Math.max(...j.value.map(u=>k(s.count*u.actions).toString().length||0));t[s.hrid]=Math.max(l*10+20,60)}return t}),xe=x(null),ye=re(()=>{var s;const t=(((s=xe.value)==null?void 0:s.columns)??[]).reduce((l,u)=>l+(u.minWidth||0),0)??0;return Math.max(t+100,1100)});le([()=>pt(),()=>ht().config],()=>c.hrid&&ne(X(c.hrid)),{immediate:!1});function Se(){if(!d.value.hrid)return;if(d.value=JSON.parse(JSON.stringify(d.value)),!H.value){d.value.originPrice=F(d.value.hrid).ask;return}const n=M.value;d.value.originPrice=n.length?n.reduce((t,s)=>{const l=typeof s.price=="number"?s.price:s.originPrice;return t+l*s.count},0):F(d.value.hrid).ask,M.value.forEach(t=>{t.originPrice=A(t.hrid,t.level)}),$.value.forEach(t=>{t.ingredients.forEach(s=>{s.originPrice=A(s.hrid,s.level)})}),Z.value.forEach(t=>{t.originPrice=F(t.hrid).ask})}function Re({row:n}){if(c.config.tab==="1"){if(n.hourlyCost===Math.max(...j.value.map(t=>t.hourlyCost)))return{background:"rgb(34, 68, 34)"}}else if(n.totalCost===Math.min(...j.value.map(t=>t.totalCost)))return{background:"rgb(34, 68, 34)"};if(n.totalCostNoHourly===Math.min(...j.value.map(t=>t.totalCostNoHourly)))return{background:"rgb(34, 51, 85)"}}const de=x(!1),we=x(0),Pe=x(0),pe=x("");function ke(n,t){const u=document.body.offsetWidth-100,f=t.clientX+10;Pe.value=f>u?u:f,we.value=t.clientY,de.value=!0,pe.value=n}function Ve(){de.value=!1}return le(de,n=>{n?document.body.addEventListener("click",Ve):document.body.removeEventListener("click",Ve)}),(n,t)=>{const s=Ge,l=Be,u=Oe,f=Ae,w=qe,V=De,P=Qe,I=Je,v=Ke,C=Ye,E=et,z=tt,_=Ze,N=at,G=lt,Q=ot;return h(),y("div",_t,[ze(g("ul",{class:"contextmenu",style:fe({left:`${e(Pe)}px`,top:`${e(we)}px`})},[e(c).hasFavorite(e(pe))?(h(),y("li",{key:1,onClick:t[1]||(t[1]=o=>e(c).removeFavorite(e(pe)))}," 取消收藏 ")):(h(),y("li",{key:0,onClick:t[0]||(t[0]=o=>e(c).addFavorite(e(pe)))}," 收藏 "))],4),[[Ne,e(de)]]),g("div",xt,[a(ut),g("div",null,[a(dt,{actions:["enhancing"],equipments:["hands","neck","earrings","ring","pouch"]})])]),a(Q,{gutter:20,class:"row max-w-1100px mx-auto!"},{default:i(()=>[a(V,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:i(()=>[a(w,null,{header:i(()=>[g("div",yt,[g("span",wt,b(e(r)("装备成本")),1),g("div",Pt,[a(s,{modelValue:e(H),"onUpdate:modelValue":t[2]||(t[2]=o=>ae(H)?H.value=o:null)},{default:i(()=>[R(b(e(r)("制作装备")),1)]),_:1},8,["modelValue"]),a(s,{modelValue:e(B),"onUpdate:modelValue":t[3]||(t[3]=o=>ae(B)?B.value=o:null),disabled:!e(H)},{default:i(()=>[R(b(e(r)("最佳制作方案")),1)]),_:1},8,["modelValue","disabled"]),a(s,{modelValue:e(O),"onUpdate:modelValue":t[4]||(t[4]=o=>ae(O)?O.value=o:null),disabled:!e(H)},{default:i(()=>[R(b(e(r)("材料右价+")),1)]),_:1},8,["modelValue","disabled"])])])]),default:i(()=>[e(H)&&e(M).length?(h(),y(D,{key:0},[a(e(J),{data:e(M),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:i(()=>[a(l,{label:e(r)("物品")},{default:i(({row:o})=>[a(W,{hrid:o.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(l,{prop:"count",label:e(r)("数量")},{default:i(({row:o})=>[R(b(k(o.count,2)),1)]),_:1},8,["label"]),a(l,{label:e(r)("价格"),align:"center","min-width":"120"},{default:i(({row:o})=>[o.hrid!==e(He)?(h(),L(u,{key:0,class:"max-w-100%",modelValue:o.price,"onUpdate:modelValue":p=>o.price=p,placeholder:k(o.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):T("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(f,{class:"mt-2 mb-2"})],64)):T("",!0),e(H)&&e(B)&&e($).length?(h(),y(D,{key:1},[(h(!0),y(D,null,ie(e($),o=>(h(),y("div",{key:o.title,class:"mb-3"},[g("div",kt,b(o.title),1),a(e(J),{data:o.ingredients,style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"},size:"small"},{default:i(()=>[a(l,{label:e(r)("物品")},{default:i(({row:p})=>[a(W,{hrid:p.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(l,{prop:"count",label:e(r)("数量")},{default:i(({row:p})=>[R(b(k(p.count,4)),1)]),_:1},8,["label"])]),_:2},1032,["data"])]))),128)),a(f,{class:"mt-2 mb-2"})],64)):T("",!0),a(e(J),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:i(()=>[a(l,null,{default:i(({row:o})=>[a(W,{hrid:o.hrid},null,8,["hrid"])]),_:1}),a(l,{prop:"count"}),a(l,{"min-width":"120",align:"center"},{default:i(({row:o})=>[a(u,{class:"max-w-100%",modelValue:o.price,"onUpdate:modelValue":p=>o.price=p,placeholder:k(o.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),a(V,{xs:16,sm:10,md:10,lg:6,xl:6,class:"max-w-300px mx-auto"},{default:i(()=>[a(w,null,{default:i(()=>{var o,p;return[g("div",Vt,[a(W,{hrid:(o=e(d))==null?void 0:o.hrid,style:{position:"absolute",bottom:"10%",left:"10%",width:"80%",height:"80%"}},null,8,["hrid"]),a(P,{style:{position:"absolute",width:"100%",height:"100%",opacity:"0.5"},onClick:t[5]||(t[5]=m=>(oe.value=!0,K.value=""))},{default:i(()=>{var m;return[R(b((m=e(d))!=null&&m.hrid?"":e(r)("选择装备")),1)]}),_:1}),(p=e(d))!=null&&p.hrid?(h(),y("div",Ct,[e(c).hasFavorite(e(d).hrid)?(h(),L(I,{key:1,underline:!1,icon:e(ge),type:"primary",onClick:t[7]||(t[7]=m=>e(c).removeFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"])):(h(),L(I,{key:0,underline:!1,type:"info",icon:e(Xe),onClick:t[6]||(t[6]=m=>e(c).addFavorite(e(d).hrid)),style:{"font-size":"42px"}},null,8,["icon"]))])):T("",!0),a(C,{modelValue:e(oe),"onUpdate:modelValue":t[9]||(t[9]=m=>ae(oe)?oe.value=m:null),"show-close":!1},{default:i(()=>[a(v,{modelValue:e(K),"onUpdate:modelValue":t[8]||(t[8]=m=>ae(K)?K.value=m:null),placeholder:e(r)("搜索")},null,8,["modelValue","placeholder"]),e(c).favorite.length&&!e(K)?(h(),y(D,{key:0},[a(f,{class:"mt-2 mb-2"}),g("div",Lt,[R(b(e(r)("收藏"))+" ",1),g("span",Ht," ("+b(e(r)("右键/长按取消收藏"))+")",1)]),g("div",It,[(h(!0),y(D,null,ie(e(c).favorite,m=>(h(),L(P,{key:m,class:"relative",style:{width:"50px",height:"50px",margin:"2px"},onClick:S=>ne(e(X)(m)),onContextmenu:Le(S=>ke(m,S),["prevent"])},{default:i(()=>[a(W,{hrid:m},null,8,["hrid"]),g("div",Et,[a(I,{underline:!1,icon:e(ge),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])]),_:2},1032,["onClick","onContextmenu"]))),128))]),a(f,{class:"mt-2 mb-1"})],64)):T("",!0),g("div",Ft,[(h(!0),y(D,null,ie(e(Ee),m=>(h(),L(P,{key:m.hrid,style:{width:"50px",height:"50px",margin:"2px"},class:"relative",onClick:S=>ne(m),onContextmenu:Le(S=>ke(m.hrid,S),["prevent"])},{default:i(()=>[a(W,{hrid:m.hrid},null,8,["hrid"]),e(c).hasFavorite(m.hrid)?(h(),y("div",Mt,[a(I,{underline:!1,icon:e(ge),type:"primary",style:{"font-size":"16px"}},null,8,["icon"])])):T("",!0)]),_:2},1032,["onClick","onContextmenu"]))),128))])]),_:1},8,["modelValue"])])]}),_:1}),a(w,{class:"mt-2"},{default:i(()=>[a(_,{modelValue:e(c).config.tab,"onUpdate:modelValue":t[14]||(t[14]=o=>e(c).config.tab=o),type:"border-card",stretch:""},{default:i(()=>[a(E,{label:e(r)("工时费")},{default:i(()=>[g("div",St,[g("div",Rt,b(e(r)("工时费/h")),1),a(u,{class:"w-120px",modelValue:e(c).config.hourlyRate,"onUpdate:modelValue":t[10]||(t[10]=o=>e(c).config.hourlyRate=o),step:1,min:0,max:5e9,placeholder:k(q.hourlyRate),controls:!1},null,8,["modelValue","placeholder"])]),g("div",Ut,[g("div",Tt,b(e(r)("溢价率%")),1),a(u,{class:"w-120px",modelValue:e(c).config.taxRate,"onUpdate:modelValue":t[11]||(t[11]=o=>e(c).config.taxRate=o),step:2,"step-strictly":!0,min:0,max:2,"controls-position":"right",placeholder:q.taxRate.toString()},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),a(E,{label:e(r)("成品售价")},{default:i(()=>[g("div",Wt,[g("div",$t,b(e(r)("价格")),1),a(u,{class:"w-full",style:{width:"100%"},modelValue:e(d).productPrice,"onUpdate:modelValue":t[12]||(t[12]=o=>e(d).productPrice=o),step:1,min:0,placeholder:k(e(F)(e(d).hrid,e(c).enhanceLevel??q.enhanceLevel).bid),controls:!1},null,8,["modelValue","placeholder"]),t[16]||(t[16]=g("div",null,null,-1))]),g("div",jt,[g("div",zt,b(e(r)("税率%")),1),a(u,{class:"w-full",style:{width:"100%"},"model-value":e(se)?2:0,step:2,min:0,max:2,"controls-position":"right",controls:!1,disabled:""},null,8,["model-value"]),a(z,{modelValue:e(se),"onUpdate:modelValue":t[13]||(t[13]=o=>ae(se)?se.value=o:null),size:"small",class:"justify-self-end"},null,8,["modelValue"])])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(V,{xs:24,sm:24,md:10,lg:8,xl:8,class:"max-w-400px mx-auto"},{default:i(()=>[a(w,{header:e(r)("强化消耗")},{default:i(()=>[a(e(J),{data:e(Z),style:{"--el-table-border-color":"none"},"cell-style":{padding:"0"}},{default:i(()=>[a(l,{label:e(r)("物品")},{default:i(({row:o})=>[a(W,{hrid:o.hrid},null,8,["hrid"])]),_:1},8,["label"]),a(l,{prop:"count",label:e(r)("数量")},{default:i(({row:o})=>[R(b(k(o.count,2)),1)]),_:1},8,["label"]),a(l,{label:e(r)("价格"),align:"center","min-width":"120"},{default:i(({row:o})=>[o.hrid!==e(He)?(h(),L(u,{key:0,class:"max-w-100%",modelValue:o.price,"onUpdate:modelValue":p=>o.price=p,placeholder:k(o.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):T("",!0)]),_:1},8,["label"])]),_:1},8,["data"]),a(f,{class:"mt-2 mb-2"}),a(e(J),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:i(()=>[a(l,{"min-width":"160"},{default:i(({row:o})=>[a(G,{modelValue:o.protection.hrid,"onUpdate:modelValue":p=>o.protection.hrid=p},{default:i(()=>[(h(!0),y(D,null,ie(e(ee),p=>(h(),L(N,{key:p.hrid,value:p.hrid,border:"",style:{width:"50px",height:"50px",margin:"2px"},onClick:()=>o.protection=p},{default:i(()=>[a(W,{hrid:p.hrid},null,8,["hrid"])]),_:2},1032,["value","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(l,{"min-width":"120",align:"center"},{default:i(({row:o})=>[a(u,{class:"max-w-100%",modelValue:o.protection.price,"onUpdate:modelValue":p=>o.protection.price=p,placeholder:k(o.protection.originPrice),controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1},8,["data"]),a(f,{class:"mt-2 mb-2"}),a(e(J),{data:[e(d)],"show-header":!1,style:{"--el-table-border-color":"none"}},{default:i(()=>[a(l,null,{default:i(()=>[R(b(e(r)("目标"))+": ",1)]),_:1}),a(l),a(l,{"min-width":"120",align:"center"},{default:i(()=>[a(u,{class:"max-w-100%",max:20,min:1,modelValue:e(c).config.enhanceLevel,"onUpdate:modelValue":t[15]||(t[15]=o=>e(c).config.enhanceLevel=o),placeholder:k(q.enhanceLevel),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["data"])]),_:1},8,["header"])]),_:1})]),_:1}),a(w,{class:"mx-auto",style:fe({width:`${e(ye)}px`,maxWidth:"100%"})},{default:i(()=>[a(e(J),{ref_key:"refTable",ref:xe,data:e(j),size:"large",border:"",fit:"","header-cell-style":{padding:"8px 0"},style:fe({width:`${e(ye)}px`}),"row-style":Re},{default:i(()=>[a(l,{prop:"protectLevel",label:e(r)("Prot"),"min-width":e(ue).protectLevel,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(l,{prop:"actionsFormatted",label:e(r)("次数"),"min-width":e(ue).actionsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(l,{prop:"time",label:e(r)("时间"),"min-width":e(ue).time,align:"right"},null,8,["label","min-width"]),a(l,{prop:"expPHFormat",label:e(r)("经验 / h"),"min-width":100,align:"right"},null,8,["label"]),(h(!0),y(D,null,ie(e(Z),o=>(h(),L(l,{key:o.hrid,"min-width":100,"header-align":"center",align:"right"},{header:i(()=>[a(W,{class:"mt-[8px]",width:20,height:20,hrid:o.hrid},null,8,["hrid"])]),default:i(({row:p})=>[R(b(Y(o.count*p.actions)),1)]),_:2},1024))),128)),a(l,{prop:"protectsFormatted",label:e(r)("保护"),"min-width":e(ue).protectsFormatted,"header-align":"center",align:"right"},null,8,["label","min-width"]),a(l,{prop:"matCost",label:e(r)("材料费用"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"]),a(l,{prop:"matCostPH",label:e(r)("损耗"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]),e(c).config.tab==="1"&&e(Ie)().checkSecret()?(h(),L(l,{key:0,prop:"profitRateFormatted",label:e(r)("利润率"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):T("",!0),e(c).config.tab==="1"?(h(),L(l,{key:1,prop:"profitPPFormatted",label:e(r)("单个利润"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):T("",!0),e(c).config.tab==="1"?(h(),L(l,{key:2,prop:"hourlyCostFormatted",label:e(r)("工时费"),"min-width":100,"header-align":"center",align:"right"},null,8,["label"])):(h(),L(l,{key:3,prop:"totalCostFormatted",label:e(r)("总费用"),"min-width":120,"header-align":"center",align:"right"},null,8,["label"]))]),_:1},8,["data","style"])]),_:1},8,["style"])])}}}),Yt=bt(Nt,[["__scopeId","data-v-5049540c"]]);export{Yt as default};
